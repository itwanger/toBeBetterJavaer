import{_ as e}from"./_plugin-vue_export-helper.cdc0426e.js";import{o,c,a as n,d as s,b as t,e as p,r as l}from"./app.99eb8281.js";const i={},u=n("h2",{id:"_01ã€å‰ä¸–ä»Šç”Ÿ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_01ã€å‰ä¸–ä»Šç”Ÿ","aria-hidden":"true"},"#"),s(" 01ã€å‰ä¸–ä»Šç”Ÿ")],-1),r=n("p",null,"ä½ å¥½å‘€ï¼Œæˆ‘æ˜¯ Guavaã€‚",-1),k=n("p",null,"æˆ‘ç”± Google å…¬å¸å¼€æºï¼Œç›®å‰åœ¨ GitHub ä¸Šå·²ç»æœ‰ 39.9k çš„é“ç²‰äº†ï¼Œç”±æ­¤å¯ä»¥è¯æ˜æˆ‘çš„å—æ¬¢è¿ç¨‹åº¦ã€‚",-1),d=n("p",null,[n("img",{src:"http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/common-tool/guava-01.png",alt:"",loading:"lazy"})],-1),m=n("p",null,"æˆ‘çš„èº«ä½“é‡Œä¸»è¦åŒ…å«æœ‰è¿™äº›å¸¸ç”¨çš„æ¨¡å—ï¼šé›†åˆ [collections] ã€ç¼“å­˜ [caching] ã€åŸç”Ÿç±»å‹æ”¯æŒ [primitives support] ã€å¹¶å‘åº“ [concurrency libraries] ã€é€šç”¨æ³¨è§£ [common annotations] ã€å­—ç¬¦ä¸²å¤„ç† [string processing] ã€I/O ç­‰ã€‚æ–°ç‰ˆçš„ JDK ä¸­å·²ç»ç›´æ¥æŠŠæˆ‘å¼•å…¥äº†ï¼Œå¯æƒ³è€ŒçŸ¥æˆ‘æœ‰å¤šä¼˜ç§€ï¼Œå¿ä¸ä½éª„å‚²äº†ã€‚",-1),v=n("p",null,"è¿™ä¹ˆè¯´å§ï¼Œå­¦å¥½å¦‚ä½•ä½¿ç”¨æˆ‘ï¼Œèƒ½è®©ä½ åœ¨ç¼–ç¨‹ä¸­å˜å¾—æ›´å¿«ä¹ï¼Œå†™å‡ºæ›´ä¼˜é›…çš„ä»£ç ï¼",-1),b=n("p",null,[n("em",null,"PSï¼šstar è¿™ç§äº‹ï¼Œåªèƒ½æ±‚ï¼Œä¸æ±‚æ²¡æ•ˆæœğŸ˜­ğŸ˜­ğŸ˜­ã€‚äºŒå“¥å¼€æºçš„ã€ŠJava ç¨‹åºå‘˜è¿›é˜¶ä¹‹è·¯ã€‹ä¸“æ åœ¨ GitHub ä¸Šå·²ç»æ”¶è·äº† 595 æšæ˜Ÿæ ‡ï¼Œé“ç²‰ä»¬èµ¶ç´§å»ç‚¹ç‚¹å•¦ï¼Œå¸®äºŒå“¥å†² 600 starï¼Œç¬”èŠ¯"),s("ï¼")],-1),g={href:"https://github.com/itwanger/toBeBetterJavaer",target:"_blank",rel:"noopener noreferrer"},h=p(`<h2 id="_02ã€å¼•å…¥-guava" tabindex="-1"><a class="header-anchor" href="#_02ã€å¼•å…¥-guava" aria-hidden="true">#</a> 02ã€å¼•å…¥ Guava</h2><p>å¦‚æœä½ è¦åœ¨ Maven é¡¹ç›®ä½¿ç”¨æˆ‘çš„è¯ï¼Œéœ€è¦å…ˆåœ¨ pom.xml æ–‡ä»¶ä¸­å¼•å…¥æˆ‘çš„ä¾èµ–ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;
    &lt;artifactId&gt;guava&lt;/artifactId&gt;
    &lt;version&gt;30.1-jre&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€ç‚¹è¦æ±‚ï¼ŒJDK ç‰ˆæœ¬éœ€è¦åœ¨ 8 ä»¥ä¸Šã€‚</p><h2 id="_03ã€åŸºæœ¬å·¥å…·" tabindex="-1"><a class="header-anchor" href="#_03ã€åŸºæœ¬å·¥å…·" aria-hidden="true">#</a> 03ã€åŸºæœ¬å·¥å…·</h2><p>Doug Leaï¼Œjava.util.concurrent åŒ…çš„ä½œè€…ï¼Œæ›¾è¯´è¿‡ä¸€å¥è¯ï¼šâ€œnull çœŸç³Ÿç³•â€ã€‚Tony Hoareï¼Œå›¾çµå¥–å¾—ä¸»ã€å¿«é€Ÿæ’åºç®—æ³•çš„ä½œè€…ï¼Œå½“ç„¶ä¹Ÿæ˜¯ null çš„åˆ›å»ºè€…ï¼Œä¹Ÿæ›¾è¯´è¿‡ç±»ä¼¼çš„è¯ï¼šâ€œnull çš„ä½¿ç”¨ï¼Œè®©æˆ‘æŸå¤±äº†åäº¿ç¾å…ƒã€‚â€é‰´äºæ­¤ï¼Œæˆ‘ç”¨ Optional æ¥è¡¨ç¤ºå¯èƒ½ä¸º null çš„å¯¹è±¡ã€‚</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/common-tool/guava-02.png" alt="" loading="lazy"></p><p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> possible <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
possible<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns true</span>
possible<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns 5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),f={href:"https://mp.weixin.qq.com/s/PqK0KNVHyoEtZDtp5odocA",target:"_blank",rel:"noopener noreferrer"},L=p(`<ul><li><p>æˆ‘çš„ Optional æ˜¯ abstract çš„ï¼Œæ„å‘³ç€æˆ‘å¯ä»¥æœ‰å­ç±»å¯¹è±¡ï¼›æˆ‘å¤§å“¥çš„æ˜¯ final çš„ï¼Œæ„å‘³ç€æ²¡æœ‰å­ç±»å¯¹è±¡ã€‚</p></li><li><p>æˆ‘çš„ Optional å®ç°äº† Serializable æ¥å£ï¼Œå¯ä»¥åºåˆ—åŒ–ï¼›æˆ‘å¤§å“¥çš„æ²¡æœ‰ã€‚</p></li><li><p>æˆ‘çš„ä¸€äº›æ–¹æ³•å’Œæˆ‘å¤§å“¥çš„ä¹Ÿä¸å°½ç›¸åŒã€‚</p></li></ul><p>ä½¿ç”¨ Optional é™¤äº†èµ‹äºˆ null è¯­ä¹‰ï¼Œå¢åŠ äº†å¯è¯»æ€§ï¼Œæœ€å¤§çš„ä¼˜ç‚¹åœ¨äºå®ƒæ˜¯ä¸€ç§å‚»ç“œå¼çš„é˜²æŠ¤ã€‚Optional è¿«ä½¿ä½ ç§¯ææ€è€ƒå¼•ç”¨ç¼ºå¤±çš„æƒ…å†µï¼Œå› ä¸ºä½ å¿…é¡»æ˜¾å¼åœ°ä» Optional è·å–å¼•ç”¨ã€‚</p><p>é™¤äº† Optional ä¹‹å¤–ï¼Œæˆ‘è¿˜æä¾›äº†ï¼š</p><ul><li>å‚æ•°æ ¡éªŒ</li><li>å¸¸è§çš„ Object æ–¹æ³•ï¼Œæ¯”å¦‚è¯´ Objects.equalsã€Objects.hashCodeï¼ŒJDK 7 å¼•å…¥çš„ Objects ç±»æä¾›åŒæ ·çš„æ–¹æ³•ï¼Œå½“ç„¶ä¹Ÿæ˜¯ä»æˆ‘è¿™å€Ÿé‰´çš„çµæ„Ÿã€‚</li><li>æ›´å¼ºå¤§çš„æ¯”è¾ƒå™¨</li></ul><h2 id="_04ã€é›†åˆ" tabindex="-1"><a class="header-anchor" href="#_04ã€é›†åˆ" aria-hidden="true">#</a> 04ã€é›†åˆ</h2><p>é¦–å…ˆæˆ‘æ¥è¯´ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¸å¯å˜é›†åˆã€‚</p><ul><li><p>ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œä½¿ç”¨ä¸å¯å˜é›†åˆæ—¢ä¿è¯çº¿ç¨‹çš„å®‰å…¨æ€§ï¼Œä¹Ÿå¤§å¤§åœ°å¢å¼ºäº†å¹¶å‘æ—¶çš„æ•ˆç‡ï¼ˆè·Ÿå¹¶å‘é”æ–¹å¼ç›¸æ¯”ï¼‰ã€‚</p></li><li><p>å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸éœ€è¦æ”¯æŒä¿®æ”¹æ“ä½œï¼Œä¸å¯å˜çš„é›†åˆå°†ä¼šèŠ‚çœç©ºé—´å’Œæ—¶é—´çš„å¼€é”€ã€‚</p></li><li><p>å¯ä»¥å½“ä½œä¸€ä¸ªå¸¸é‡æ¥å¯¹å¾…ï¼Œå¹¶ä¸”é›†åˆä¸­çš„å¯¹è±¡åœ¨ä»¥åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p></li></ul><p>ä¸ JDK ä¸­æä¾›çš„ä¸å¯å˜é›†åˆç›¸æ¯”ï¼Œæˆ‘æä¾›çš„ Immutable æ‰æ˜¯çœŸæ­£çš„ä¸å¯å˜ï¼Œæˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿæ¥çœ‹ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ã€‚</p><p>ä¸‹é¢çš„ä»£ç åˆ©ç”¨ JDK çš„ <code>Collections.unmodifiableList(list)</code> å¾—åˆ°ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„é›†åˆ unmodifiableListã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;é›·å†›&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;ä¹”å¸ƒæ–¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span> unmodifiableList <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
unmodifiableList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;é©¬äº‘&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œä»£ç å°†ä¼šå‡ºç°ä»¥ä¸‹å¼‚å¸¸ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException
	at java.base/java.util.Collections$UnmodifiableCollection.add(Collections.java:1060)
	at com.itwanger.guava.NullTest.main(NullTest.java:29)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾ˆå¥½ï¼Œæ‰§è¡Œ <code>unmodifiableList.add()</code> çš„æ—¶å€™æŠ›å‡ºäº† UnsupportedOperationException å¼‚å¸¸ï¼Œè¯´æ˜ <code>Collections.unmodifiableList()</code> è¿”å›äº†ä¸€ä¸ªä¸å¯å˜é›†åˆã€‚ä½†çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠ <code>unmodifiableList.add()</code> æ¢æˆ <code>list.add()</code>ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;é›·å†›&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;ä¹”å¸ƒæ–¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span> unmodifiableList <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;é©¬äº‘&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡æ‰§è¡Œçš„è¯ï¼Œç¨‹åºå¹¶æ²¡æœ‰æŠ¥é”™ï¼Œå¹¶ä¸”ä½ ä¼šå‘ç° unmodifiableList ä¸­çœŸçš„å¤šäº†ä¸€ä¸ªå…ƒç´ ã€‚è¯´æ˜ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><code>Collections.unmodifiableList(â€¦)</code> å®ç°çš„ä¸æ˜¯çœŸæ­£çš„ä¸å¯å˜é›†åˆï¼Œå½“åŸå§‹é›†åˆè¢«ä¿®æ”¹åï¼Œä¸å¯å˜é›†åˆé‡Œé¢çš„å…ƒç´ ä¹Ÿæ˜¯è·Ÿç€å‘ç”Ÿå˜åŒ–ã€‚</p><p>æˆ‘å°±ä¸ä¼šçŠ¯è¿™ç§é”™ï¼Œæ¥çœ‹ä¸‹é¢çš„ä»£ç ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringArrayList <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token string">&quot;é›·å†›&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ä¹”å¸ƒæ–¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ImmutableList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> immutableList <span class="token operator">=</span> <span class="token class-name">ImmutableList</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>stringArrayList<span class="token punctuation">)</span><span class="token punctuation">;</span>
immutableList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;é©¬äº‘&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°è¯• <code>immutableList.add()</code> çš„æ—¶å€™ä¼šæŠ›å‡º <code>UnsupportedOperationException</code>ã€‚æˆ‘åœ¨æºç ä¸­å·²ç»æŠŠ <code>add()</code> æ–¹æ³•åºŸå¼ƒäº†ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token doc-comment comment">/**
   * Guaranteed to throw an exception and leave the collection unmodified.
   *
   * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">UnsupportedOperationException</span></span> always
   * <span class="token keyword">@deprecated</span> Unsupported operation.
   */</span>
  <span class="token annotation punctuation">@CanIgnoreReturnValue</span>
  <span class="token annotation punctuation">@Deprecated</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°è¯• <code>stringArrayList.add()</code> ä¿®æ”¹åŸé›†åˆçš„æ—¶å€™ immutableList å¹¶ä¸ä¼šå› æ­¤è€Œå‘ç”Ÿæ”¹å˜ã€‚</p><p>é™¤äº†ä¸å¯å˜é›†åˆä»¥å¤–ï¼Œæˆ‘è¿˜æä¾›äº†æ–°çš„é›†åˆç±»å‹ï¼Œæ¯”å¦‚è¯´ï¼š</p><ul><li><p>Multisetï¼Œå¯ä»¥å¤šæ¬¡æ·»åŠ ç›¸ç­‰çš„å…ƒç´ ã€‚å½“æŠŠ Multiset çœ‹æˆæ™®é€šçš„ Collection æ—¶ï¼Œå®ƒè¡¨ç°å¾—å°±åƒæ— åºçš„ ArrayListï¼›å½“æŠŠ Multiset çœ‹ä½œ <code>Map&lt;E, Integer&gt;</code> æ—¶ï¼Œå®ƒä¹Ÿæä¾›äº†ç¬¦åˆæ€§èƒ½æœŸæœ›çš„æŸ¥è¯¢æ“ä½œã€‚</p></li><li><p>Multimapï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æŠŠä¸€ä¸ªé”®æ˜ å°„åˆ°å¤šä¸ªå€¼ã€‚</p></li><li><p>BiMapï¼Œä¸€ç§ç‰¹æ®Šçš„ Mapï¼Œå¯ä»¥ç”¨ <code>inverse()</code> åè½¬ <code>BiMap&lt;K, V&gt;</code> çš„é”®å€¼æ˜ å°„ï¼›ä¿è¯å€¼æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤ <code>values()</code> è¿”å› Set è€Œä¸æ˜¯æ™®é€šçš„ Collectionã€‚</p></li></ul><h2 id="_05ã€å­—ç¬¦ä¸²å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_05ã€å­—ç¬¦ä¸²å¤„ç†" aria-hidden="true">#</a> 05ã€å­—ç¬¦ä¸²å¤„ç†</h2><p>å­—ç¬¦ä¸²è¡¨ç¤ºå­—ç¬¦çš„ä¸å¯å˜åºåˆ—ï¼Œåˆ›å»ºåå°±ä¸èƒ½æ›´æ”¹ã€‚åœ¨æˆ‘ä»¬æ—¥å¸¸çš„å·¥ä½œä¸­ï¼Œå­—ç¬¦ä¸²çš„ä½¿ç”¨éå¸¸é¢‘ç¹ï¼Œç†Ÿç»ƒçš„å¯¹å…¶æ“ä½œå¯ä»¥æå¤§çš„æå‡æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚</p><p>æˆ‘æä¾›äº†è¿æ¥å™¨â€”â€”Joinerï¼Œå¯ä»¥ç”¨åˆ†éš”ç¬¦æŠŠå­—ç¬¦ä¸²åºåˆ—è¿æ¥èµ·æ¥ã€‚ä¸‹é¢çš„ä»£ç å°†ä¼šè¿”å›â€œé›·å†›; ä¹”å¸ƒæ–¯â€ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>useForNull(String)</code> æ–¹æ³•ç”¨æŸä¸ªå­—ç¬¦ä¸²æ¥æ›¿æ¢ nullï¼Œè€Œä¸åƒ <code>skipNulls()</code> æ–¹æ³•é‚£æ ·ç›´æ¥å¿½ç•¥ nullã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Joiner</span> joiner <span class="token operator">=</span> <span class="token class-name">Joiner</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skipNulls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> joiner<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;é›·å†›&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¹”å¸ƒæ–¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘è¿˜æä¾›äº†æ‹†åˆ†å™¨â€”â€” Splitterï¼Œå¯ä»¥æŒ‰ç…§æŒ‡å®šçš„åˆ†éš”ç¬¦æŠŠå­—ç¬¦ä¸²åºåˆ—è¿›è¡Œæ‹†åˆ†ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Splitter</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token char">&#39;,&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">trimResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">omitEmptyStrings</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;é›·å†›,ä¹”å¸ƒæ–¯,,   æ²‰é»˜ç‹äºŒ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_06ã€ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_06ã€ç¼“å­˜" aria-hidden="true">#</a> 06ã€ç¼“å­˜</h2><p>ç¼“å­˜åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½æ˜¯ç›¸å½“æœ‰ç”¨çš„ã€‚ä½ åº”è¯¥çŸ¥é“ï¼Œæ£€ç´¢ä¸€ä¸ªå€¼çš„ä»£ä»·å¾ˆé«˜ï¼Œå°¤å…¶æ˜¯éœ€è¦ä¸æ­¢ä¸€æ¬¡è·å–å€¼çš„æ—¶å€™ï¼Œå°±åº”å½“è€ƒè™‘ä½¿ç”¨ç¼“å­˜ã€‚</p><p>æˆ‘æä¾›çš„ Cache å’Œ ConcurrentMap å¾ˆç›¸ä¼¼ï¼Œä½†ä¹Ÿä¸å®Œå…¨ä¸€æ ·ã€‚æœ€åŸºæœ¬çš„åŒºåˆ«æ˜¯ ConcurrentMap ä¼šä¸€ç›´ä¿å­˜æ‰€æœ‰æ·»åŠ çš„å…ƒç´ ï¼Œç›´åˆ°æ˜¾å¼åœ°ç§»é™¤ã€‚ç›¸å¯¹åœ°ï¼Œæˆ‘æä¾›çš„ Cache ä¸ºäº†é™åˆ¶å†…å­˜å ç”¨ï¼Œé€šå¸¸éƒ½è®¾å®šä¸ºè‡ªåŠ¨å›æ”¶å…ƒç´ ã€‚</p><p>å¦‚æœä½ æ„¿æ„æ¶ˆè€—ä¸€äº›å†…å­˜ç©ºé—´æ¥æå‡é€Ÿåº¦ï¼Œä½ èƒ½é¢„æ–™åˆ°æŸäº›é”®ä¼šè¢«æŸ¥è¯¢ä¸€æ¬¡ä»¥ä¸Šï¼Œç¼“å­˜ä¸­å­˜æ”¾çš„æ•°æ®æ€»é‡ä¸ä¼šè¶…å‡ºå†…å­˜å®¹é‡ï¼Œå°±å¯ä»¥ä½¿ç”¨ Cacheã€‚</p><p>æ¥ä¸ªç¤ºä¾‹ä½ æ„Ÿå—ä¸‹å§ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

    <span class="token class-name">CacheLoader</span> cacheLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CacheLoader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœæ‰¾ä¸åˆ°å…ƒç´ ï¼Œä¼šè°ƒç”¨è¿™é‡Œ</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Animal</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">LoadingCache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span> loadingCache <span class="token operator">=</span> <span class="token class-name">CacheBuilder</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">maximumSize</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">// å®¹é‡</span>
        <span class="token punctuation">.</span><span class="token function">expireAfterWrite</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span> <span class="token comment">// è¿‡æœŸæ—¶é—´</span>
        <span class="token punctuation">.</span><span class="token function">removalListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRemovalListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// å¤±æ•ˆç›‘å¬å™¨</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>cacheLoader<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>
    loadingCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;ç‹—&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&quot;æ—ºè´¢&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    loadingCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;çŒ«&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&quot;æ±¤å§†&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    loadingCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;ç‹¼&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&quot;ç°å¤ªç‹¼&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    loadingCache<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token string">&quot;çŒ«&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰‹åŠ¨å¤±æ•ˆ</span>

    <span class="token class-name">Animal</span> animal <span class="token operator">=</span> loadingCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;ç‹¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ç‹¼å·²ç»è‡ªåŠ¨è¿‡å»ï¼Œè·å–ä¸º null å€¼æŠ¥é”™</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>loadingCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;ç‹¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * ç¼“å­˜ç§»é™¤ç›‘å¬å™¨
 */</span>
<span class="token keyword">class</span> <span class="token class-name">MyRemovalListener</span> <span class="token keyword">implements</span> <span class="token class-name">RemovalListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onRemoval</span><span class="token punctuation">(</span><span class="token class-name">RemovalNotification</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span> notification<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> reason <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;key=%s,value=%s,reason=%s&quot;</span><span class="token punctuation">,</span> notification<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> notification<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> notification<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>CacheLoader ä¸­é‡å†™äº† load æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœ¨æŸ¥è¯¢ç¼“å­˜æ²¡æœ‰å‘½ä¸­æ—¶è¢«è°ƒç”¨ï¼Œæˆ‘è¿™é‡Œç›´æ¥è¿”å›äº† nullï¼Œå…¶å®è¿™æ ·ä¼šåœ¨æ²¡æœ‰å‘½ä¸­æ—¶æŠ›å‡º CacheLoader returned null for key å¼‚å¸¸ä¿¡æ¯ã€‚</p><p>MyRemovalListener ä½œä¸ºç¼“å­˜å…ƒç´ å¤±æ•ˆæ—¶çš„ç›‘å¬ç±»ï¼Œåœ¨æœ‰å…ƒç´ ç¼“å­˜å¤±æ•ˆæ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ onRemoval æ–¹æ³•ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•æ˜¯åŒæ­¥æ–¹æ³•ï¼Œå¦‚æœè¿™é‡Œè€—æ—¶è¾ƒé•¿ï¼Œä¼šé˜»å¡ç›´åˆ°å¤„ç†å®Œæˆã€‚</p><p>LoadingCache å°±æ˜¯ç¼“å­˜çš„ä¸»è¦æ“ä½œå¯¹è±¡äº†ï¼Œå¸¸ç”¨çš„å°±æ˜¯å…¶ä¸­çš„ put å’Œ get æ–¹æ³•äº†ã€‚</p><h2 id="_07ã€é›†åˆå·¥å…·" tabindex="-1"><a class="header-anchor" href="#_07ã€é›†åˆå·¥å…·" aria-hidden="true">#</a> 07ã€é›†åˆå·¥å…·</h2><p><code>com.google.common.collect</code>åŒ…ä¸‹çš„é›†åˆå·¥å…·ï¼š<code>Lists</code>ä¹Ÿéå¸¸å¼ºå¤§ã€‚</p><h3 id="åˆ›å»ºç©ºé›†åˆ" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºç©ºé›†åˆ" aria-hidden="true">#</a> åˆ›å»ºç©ºé›†åˆ</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªç©ºé›†åˆã€‚è¿™æ—¶å¯ä»¥ç”¨Listsçš„<code>newArrayList</code>æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="å¿«é€Ÿåˆå§‹åŒ–é›†åˆ" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿåˆå§‹åŒ–é›†åˆ" aria-hidden="true">#</a> å¿«é€Ÿåˆå§‹åŒ–é›†åˆ</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³ç»™ä¸€ä¸ªé›†åˆä¸­åˆå§‹åŒ–ä¸€äº›å…ƒç´ ã€‚è¿™æ—¶å¯ä»¥ç”¨Listsçš„newArrayListæ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ç¬›å¡å°”ç§¯" tabindex="-1"><a class="header-anchor" href="#ç¬›å¡å°”ç§¯" aria-hidden="true">#</a> ç¬›å¡å°”ç§¯</h3><p>å¦‚æœä½ æƒ³å°†ä¸¤ä¸ªé›†åˆåš<code>ç¬›å¡å°”ç§¯</code>ï¼ŒListsçš„<code>cartesianProduct</code>æ–¹æ³•å¯ä»¥å¸®ä½ å®ç°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list1 <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list2 <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> productList <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">cartesianProduct</span><span class="token punctuation">(</span>list1<span class="token punctuation">,</span>list2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>productList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="åˆ†é¡µ" tabindex="-1"><a class="header-anchor" href="#åˆ†é¡µ" aria-hidden="true">#</a> åˆ†é¡µ</h3><p>å¦‚æœä½ æƒ³å°†ä¸€ä¸ª<code>å¤§é›†åˆ</code>åˆ†æˆè‹¥å¹²ä¸ª<code>å°é›†åˆ</code>ï¼Œå¯ä»¥ä½¿ç”¨Listsçš„<code>partition</code>æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> partitionList <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>partitionList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œlistæœ‰5æ¡æ•°æ®ï¼Œæˆ‘å°†listé›†åˆæŒ‰å¤§å°ä¸º2ï¼Œåˆ†æˆäº†3é¡µï¼Œå³å˜æˆ3ä¸ªå°é›†åˆã€‚</p><p>è¿™ä¸ªæ˜¯æˆ‘æœ€å–œæ¬¢çš„æ–¹æ³•ä¹‹ä¸€ï¼Œç»å¸¸åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ã€‚</p><p>æ¯”å¦‚æœ‰ä¸ªéœ€æ±‚ï¼šç°åœ¨æœ‰5000ä¸ªidï¼Œéœ€è¦è°ƒç”¨æ‰¹é‡ç”¨æˆ·æŸ¥è¯¢æ¥å£ï¼ŒæŸ¥å‡ºç”¨æˆ·æ•°æ®ã€‚ä½†å¦‚æœä½ ç›´æ¥æŸ¥5000ä¸ªç”¨æˆ·ï¼Œå•æ¬¡æ¥å£å“åº”æ—¶é—´å¯èƒ½ä¼šéå¸¸æ…¢ã€‚å¦‚æœæ”¹æˆåˆ†é¡µå¤„ç†ï¼Œæ¯æ¬¡åªæŸ¥500ä¸ªç”¨æˆ·ï¼Œå¼‚æ­¥è°ƒç”¨10æ¬¡æ¥å£ï¼Œå°±ä¸ä¼šæœ‰å•æ¬¡æ¥å£å“åº”æ…¢çš„é—®é¢˜ã€‚</p><h3 id="æµå¤„ç†" tabindex="-1"><a class="header-anchor" href="#æµå¤„ç†" aria-hidden="true">#</a> æµå¤„ç†</h3><p>å¦‚æœæˆ‘ä»¬æƒ³æŠŠæŸä¸ªé›†åˆè½¬æ¢æˆå¦å¤–ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥ä½¿ç”¨Listsçš„ <code>transform</code>æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> transformList <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>transformList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†å°å†™å­—æ¯è½¬æ¢æˆäº†å¤§å†™å­—æ¯ã€‚</p><h3 id="é¢ å€’é¡ºåº" tabindex="-1"><a class="header-anchor" href="#é¢ å€’é¡ºåº" aria-hidden="true">#</a> é¢ å€’é¡ºåº</h3><p>Listsçš„æœ‰é¢ å€’é¡ºåºçš„æ–¹æ³•<code>reverse</code>ã€‚ä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> reverseList <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>reverseList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œç»“æœï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>listçš„åŸå§‹é¡ºåºæ˜¯312ï¼Œä½¿ç”¨<code>reverse</code>æ–¹æ³•é¢ å€’é¡ºåºä¹‹åï¼Œå˜æˆäº†213ã€‚</p><p>Listsè¿˜æœ‰å…¶ä»–çš„å¥½ç”¨çš„å·¥å…·ï¼Œæˆ‘åœ¨è¿™é‡Œåªæ˜¯æŠ›ç –å¼•ç‰ï¼Œæœ‰å…´è¶£çš„æœ‹å‹ï¼Œå¯ä»¥ä»”ç»†ç ”ç©¶ä¸€ä¸‹ã€‚ <img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/common-tool/guava-4b962b06-a626-4707-9fe9-f5729536d9c5.jpg" alt="" loading="lazy"></p><h2 id="_07ã€å°¾å£°" tabindex="-1"><a class="header-anchor" href="#_07ã€å°¾å£°" aria-hidden="true">#</a> 07ã€å°¾å£°</h2><p>ä¸Šé¢ä»‹ç»äº†æˆ‘è®¤ä¸ºæœ€å¸¸ç”¨çš„åŠŸèƒ½ï¼Œä½œä¸º Google å…¬å¸å¼€æºçš„ Java å¼€å‘æ ¸å¿ƒåº“ï¼Œä¸ªäººè§‰å¾—å®ç”¨æ€§è¿˜æ˜¯å¾ˆé«˜çš„ï¼ˆä¸ç„¶å‘¢ï¼Ÿå˜¿å˜¿å˜¿ï¼‰ã€‚å¼•å…¥åˆ°ä½ çš„é¡¹ç›®åä¸ä»…èƒ½å¿«é€Ÿçš„å®ç°ä¸€äº›å¼€å‘ä¸­å¸¸ç”¨çš„åŠŸèƒ½ï¼Œè€Œä¸”è¿˜å¯ä»¥è®©ä»£ç æ›´åŠ çš„ä¼˜é›…ç®€æ´ã€‚</p><p>æˆ‘è§‰å¾—é€‚ç”¨äºæ¯ä¸€ä¸ª Java é¡¹ç›®ï¼Œè‡³äºå…¶ä»–çš„ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´æ•£åˆ—ã€äº‹ä»¶æ€»çº¿ã€æ•°å­¦è¿ç®—ã€åå°„ï¼Œå°±ç­‰å¾…ä½ å»å‘æ˜äº†ã€‚</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/common-tool/guava-03.png" alt="" loading="lazy"></p><hr>`,78),j=n("strong",null,"æ•°æ®åº“ã€è®¡ç®—æœºç½‘ç»œã€ç®—æ³•ä¸æ•°æ®ç»“æ„ã€è®¾è®¡æ¨¡å¼ã€æ¡†æ¶ç±»Springã€Nettyã€å¾®æœåŠ¡ï¼ˆDubboï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ ç½‘å…³",-1),y={href:"https://tobebetterjavaer.com/pdf/programmer-111.html",target:"_blank",rel:"noopener noreferrer"},x=n("p",null,[s("å…³æ³¨äºŒå“¥çš„åŸåˆ›å…¬ä¼—å· "),n("strong",null,"æ²‰é»˜ç‹äºŒ"),s("ï¼Œå›å¤"),n("strong",null,"111"),s(" å³å¯å…è´¹é¢†å–ã€‚")],-1),_=n("p",null,[n("img",{src:"http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/xingbiaogongzhonghao.png",alt:"",loading:"lazy"})],-1);function w(q,C){const a=l("ExternalLinkIcon");return o(),c("div",null,[u,r,k,d,m,v,b,n("blockquote",null,[n("p",null,[n("a",g,[s("https://github.com/itwanger/toBeBetterJavaer"),t(a)])])]),h,n("p",null,[s("æˆ‘å¤§å“¥ Java åœ¨ JDK 8 ä¸­æ–°å¢äº† "),n("a",f,[s("Optional ç±»"),t(a)]),s("ï¼Œæ˜¾ç„¶æ˜¯ä»æˆ‘è¿™å€Ÿé‰´è¿‡å»çš„ï¼Œä¸è¿‡ä»–çš„å’Œæˆ‘çš„æœ‰äº›ä¸åŒã€‚")]),L,n("p",null,[s("æœ€è¿‘æ•´ç†äº†ä¸€ä»½ç‰›é€¼çš„å­¦ä¹ èµ„æ–™ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºJavaåŸºç¡€éƒ¨åˆ†ï¼ˆJVMã€Javaé›†åˆæ¡†æ¶ã€å¤šçº¿ç¨‹ï¼‰ï¼Œè¿˜å›Šæ‹¬äº† "),j,s(" ç­‰ç­‰ç­‰ç­‰â€¦â€¦è¯¦æƒ…æˆ³ï¼š"),n("a",y,[s("å¯ä»¥è¯´æ˜¯2022å¹´å…¨ç½‘æœ€å…¨çš„å­¦ä¹ å’Œæ‰¾å·¥ä½œçš„PDFèµ„æºäº†"),t(a)])]),x,_])}const I=e(i,[["render",w],["__file","guava.html.vue"]]);export{I as default};
