import{_ as r}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as l,a as e,d as a,b as t,e as n}from"./app-72970f25.js";const s={},d=n('<h3 id="å…³äº-docker" tabindex="-1"><a class="header-anchor" href="#å…³äº-docker" aria-hidden="true">#</a> å…³äº Docker</h3><p>Docker æ˜¯ç”¨ go è¯­è¨€ç¼–å†™çš„ï¼Œè¿™ä¹Ÿæ˜¯ go è¯­è¨€è¿‘äº›å¹´è¶Šæ¥è¶Šç«çš„åŸå› ä¹‹ä¸€ã€‚å…³äº Dockerï¼Œæœ‰ 3 ä¸ªé‡è¦çš„æ¦‚å¿µéœ€è¦äº†è§£ä¸‹ï¼š</p><ul><li>imageï¼šé•œåƒï¼Œä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥åˆ›å»ºå®¹å™¨ï¼›å¦‚æœä½ æœ‰ Windows è£…æœºç»å†ï¼Œé‚£å¯ä»¥å¾ˆå¥½ç†è§£é•œåƒè¿™ä¸ªè¯çš„å«ä¹‰ï¼Œåæ­£æˆ‘å¹´å°‘çš„æ—¶å€™æ²¡å°‘æŠŠ Windows é•œåƒåˆ»ç›˜é‡è£…ç³»ç»Ÿã€‚</li><li>containerï¼šå®¹å™¨ï¼Œä¸€ä¸ªå¯è¿è¡Œçš„é•œåƒå®ä¾‹ï¼Œé‡Œé¢è¿è¡Œç€ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥åšä¸€åˆ‡ä½ å½“å‰æ“ä½œç³»ç»Ÿå¯ä»¥åšçš„äº‹æƒ…ã€‚</li><li>Dockerfileï¼šé•œåƒæ„å»ºçš„æ¨¡æ¿ï¼Œæè¿°é•œåƒæ„å»ºçš„æ­¥éª¤ã€‚</li></ul><p>å®ƒä»¬ä¹‹é—´çš„å…³ç³»æ˜¯ï¼Œé€šè¿‡ Dockerfile æ„å»ºå‡ºé•œåƒï¼Œç„¶åé€šè¿‡é•œåƒæ„å»ºå®¹å™¨ï¼Œå®¹å™¨é‡Œå¯ä»¥è·‘ç¨‹åºã€‚å¦å¤–ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼Œæ¯ä¸ªå®¹å™¨ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚</p><p>å¯¹äºæˆ‘ä»¬å¼€å‘äººå‘˜æ¥è¯´ï¼ŒDocker å¯ä»¥åšåˆ°ï¼š</p><ul><li>ç¼–å†™æœ¬åœ°ä»£ç </li><li>ä½¿ç”¨ Docker å°†ç¨‹åºæ¨é€åˆ°æµ‹è¯•ç¯å¢ƒ</li><li>å‘ç° bug ååœ¨å¼€å‘ç¯å¢ƒä¸‹ä¿®å¤ï¼Œé‡æ–°éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒæµ‹è¯•</li><li>æµ‹è¯•å®Œæˆåï¼Œæ¨é€åˆ°ç”Ÿäº§ç¯å¢ƒ</li></ul><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒDocker æä¾›çš„æ˜¯å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Œç»†ç»†æƒ³ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯æŒºææ€–çš„ã€‚ã€‚ã€‚ã€‚ã€‚</p><p>ä»¥åæˆ‘ä»¬å¼€å‘äººå‘˜å†è¯´ä»€ä¹ˆâ€œæˆ‘æœ¬åœ°è¿è¡Œçš„å¥½å¥½çš„å‘€â€å°±ç”©ä¸äº†é”…äº†ï¼Œå“ˆå“ˆã€‚</p><p>Java ç¨‹åºå‘˜åº”è¯¥å¯¹ Docker è¿™å¥å®£ä¼ è¯­å¾ˆç†Ÿæ‚‰ï¼š</p><blockquote><p>Buildâ€‚onceï¼ŒRunâ€‚anywhereï¼ˆæ­å»ºä¸€æ¬¡ï¼Œåˆ°å¤„èƒ½ç”¨ï¼‰</p></blockquote><p>Docker é‡‡ç”¨çš„æ˜¯ CS æ¶æ„ï¼Œå®¢æˆ·ç«¯ä¸ Docker å®ˆæŠ¤è¿›ç¨‹äº¤äº’ï¼Œåè€…è´Ÿè´£æ„å»ºã€è¿è¡Œå’Œåˆ†å‘ Docker å®¹å™¨çš„å·¥ä½œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-5583604e-5ef8-4187-b29b-ff8527829141.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Docker çš„åº”ç”¨åœºæ™¯éå¸¸ä¸°å¯Œï¼Œæ¯”å¦‚è¯´ï¼š</p><ul><li>è‡ªåŠ¨æ‰“åŒ…å’Œéƒ¨ç½²åº”ç”¨</li><li>åˆ›å»ºè½»é‡ã€ç§æœ‰çš„PaaSç¯å¢ƒ</li><li>è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆ/éƒ¨ç½²</li><li>éƒ¨ç½²å¹¶æ‰©å±•Webåº”ç”¨ã€æ•°æ®åº“å’Œåç«¯æœåŠ¡å™¨</li><li>åˆ›å»ºå®‰å…¨æ²™ç›’</li><li>è½»é‡çº§çš„æ¡Œé¢è™šæ‹ŸåŒ–</li></ul><h3 id="å®‰è£…-docker" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-docker" aria-hidden="true">#</a> å®‰è£… Docker</h3><p>Docker Engineï¼ˆå¼•æ“ï¼‰éœ€è¦å®‰è£…åœ¨ 64 ä½çš„ Linux æœåŠ¡å™¨ä¸Šï¼ˆ32 ä½ä¸æ”¯æŒï¼‰ï¼Œå¹¶ä¸”éœ€è¦ä¸€äº›å…ˆå†³æ¡ä»¶ï¼ˆé’ˆå¯¹ CentOS ç³»ç»Ÿï¼‰ï¼š</p>',16),g={href:"https://help.aliyun.com/document_detail/405635.htm",target:"_blank",rel:"noopener noreferrer"},p=e("li",null,"å¿…é¡»æ˜¯ CentOS 7 æˆ–è€… 8ç‰ˆæœ¬ï¼Œä»¥ä¸‹ç‰ˆæœ¬ä¸æ”¯æŒ",-1),u=e("li",null,"centos-extras å­˜å‚¨åº“å¿…é¡»æ˜¯å¯ç”¨çš„ï¼Œä¸€èˆ¬æ˜¯å¯ç”¨çš„ï¼Œå¦‚æœæ²¡å¯ç”¨çš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨å¯ç”¨",-1),b={href:"https://www.cnblogs.com/FengZeng666/p/14173906.html",target:"_blank",rel:"noopener noreferrer"},v=n(`<p>æˆ‘çš„äº‘æœåŠ¡å™¨å®‰è£…çš„æ˜¯ CentOS ç³»ç»Ÿï¼Œæ‰€ä»¥è¿™é‡Œå°±ä»¥ CentOS ä½œä¸ºæ¼”ç¤ºç¯å¢ƒã€‚æˆ‘ä¸ªäººæ›´å–œæ¬¢ RPMï¼ˆRed-Hat Package Managerï¼Œçº¢å¸½è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼‰å®‰è£…åŒ…çš„æ–¹å¼ï¼Œç®€å•é«˜æ•ˆã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œå®‰è£… yum-utils å·¥å…·åŒ…ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum install -y yum-utils
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨ yum-utils æä¾›çš„ yum-config-manager å·¥å…·é…ç½® Docker çš„å®‰è£…ä»“åº“ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum-config-manager \\
    --add-repo \\
    https://download.docker.com/linux/centos/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼Œå®‰è£… Docker å¼•æ“ï¼ˆåŒ…æ‹¬ Docker Engine, containerd, å’Œ Docker Composeï¼‰ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¬¬å››æ­¥ï¼Œå¯åŠ¨ Dockerã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>systemctl start docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¬¬äº”æ­¥ï¼ŒéªŒè¯ Docker æ˜¯å¦æ­£ç¡®å®‰è£…ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker run hello-world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœå‡ºç°ä»¥ä¸‹æç¤ºä¿¡æ¯ï¼Œå°±è¡¨æ˜ Docker å®‰è£…æˆåŠŸäº†ï¼</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-e1443e64-810b-46e3-9c1c-f144cdca1a35.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»¥ä¸Šæ˜¯ Docker å®˜æ–¹æä¾›çš„å®‰è£…æ–¹å¼ï¼Œç¨æ˜¾å¤æ‚ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥ç”¨æ›´ç®€æ´çš„æ–¹å¼ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># é¦–å…ˆå®‰è£… Docker
yum -y install docker

# ç„¶åå¯åŠ¨ Docker æœåŠ¡
service docker start

# æµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸ
docker -v
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Docker é’ˆå¯¹ Windows å’Œ macOS ç³»ç»Ÿéƒ½æä¾›äº†æ¡Œé¢ç‰ˆï¼Œå¯ä»¥åˆ°å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ã€‚</p>`,16),m={href:"https://docs.docker.com/get-docker/",target:"_blank",rel:"noopener noreferrer"},f=n(`<p>æˆ‘è¿™é‡Œä»¥ macOS ä¸ºä¾‹ï¼ŒM1 èŠ¯ç‰‡å¯ä»¥é€‰æ‹© Apple Chipã€‚ä¸‹è½½å®Œæˆåç›´æ¥å‚»ç“œå¼å®‰è£…å°±å¯ä»¥äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-f4cd508b-c77b-44a1-979f-b4e9e7ff82ef.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å®‰è£…å¹¶å¯åŠ¨æˆåŠŸåçš„ç•Œé¢å¦‚ä¸‹æ‰€ç¤º:</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-c78c5bea-aa4c-472f-aa69-20854211fd02.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æŒ‰ç…§æç¤ºï¼Œåœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ <code>docker run -d -p 80:80 docker/getting-started</code>ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-9d04a0e6-7e74-4a36-bc39-7abc0079ff16.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å†æ¬¡å›åˆ° Docker æ¡Œé¢ç‰ˆï¼Œå¯ä»¥çœ‹åˆ°åˆšåˆšé€šè¿‡ 80 ç«¯å£åœ¨ Docker ä¸­è·‘èµ·æ¥çš„ Docker æ•™ç¨‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-36708add-535a-41d3-bbcf-68e2750e5f16.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç‚¹å‡»ã€Œopen in browserã€å›¾æ ‡å°±å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€æ•™ç¨‹æ–‡æ¡£äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-209a79c6-294f-4f0d-9fe1-1ab62190d4ef.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Windows ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡æˆ‘ä¹‹å‰æ¨èçš„ chocolatey å‘½ä»¤è¡Œå·¥å…·å®‰è£…ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-4ef004a5-5b96-41eb-8621-65edfbe64f14.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ï¼ˆWindows çš„å®‰è£…ç­‰ä¸‹ä¸€æ¬¡æ‹¿åˆ°å°ç±³çš„ç¬”è®°æœ¬åï¼Œæˆ‘è£…ä¸€ä¸ªæŠŠè¿™éƒ¨åˆ†è¡¥å……å®Œæ•´ï¼‰</p><h3 id="å¼€å¯-docker-è¿œç¨‹è®¿é—®æƒé™" tabindex="-1"><a class="header-anchor" href="#å¼€å¯-docker-è¿œç¨‹è®¿é—®æƒé™" aria-hidden="true">#</a> å¼€å¯ Docker è¿œç¨‹è®¿é—®æƒé™</h3><p>ä¸ºäº†å°†æˆ‘ä»¬æœ¬åœ°çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ° Docker æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯ä¸€ä¸‹ Docker çš„è¿œç¨‹è®¿é—®æƒé™ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ‰“å¼€ Docker é…ç½®æ–‡ä»¶ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vim /usr/lib/systemd/system/docker.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œåœ¨ service èŠ‚ç‚¹ä¸‹ç¼–è¾‘ ExecStart å±æ€§ï¼Œå¢åŠ  <code>-H tcp://0.0.0.0:2375</code></p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-a1be68f4-cb1b-45b1-ab6a-b39259a3ef39.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿™æ ·å°±ç›¸å½“äºå¯¹å¤–å¼€æ”¾äº† 2375 ç«¯å£ï¼Œå¦‚æœä½ å®‰è£…äº†å®å¡”é¢æ¿ï¼Œè®°å¾—åœ¨å®‰å…¨é¡µæ”¾è¡Œè¯¥ç«¯å£ï¼ŒåŒæ—¶ï¼Œäº‘æœåŠ¡å™¨çš„é˜²ç«å¢™ä¹Ÿè¦æ”¾å¼€è¯¥ç«¯å£ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-9bddcf0e-c6a7-414d-82ef-7881009ea6c9.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é…ç½®å®Œæˆåï¼Œé‡å¯ Dockerã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>systemctl daemon-reload 
systemctl restart docker 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ <code>http://ip:2375/version</code> æµ‹è¯•ä¸€ä¸‹æ˜¯å¦ç”Ÿæ•ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-29852364-5b55-43b4-a7fa-6a9c4a592606.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¹‹åï¼Œå¯ä»¥åœ¨ Intellij IDEA ä¸­é…ç½®ä¸€ä¸‹ Docker çš„ TCP socketï¼Œå¦‚æœå‡ºç° connection successful å°±è¡¨æ˜é“¾æ¥æˆåŠŸäº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-a6e42514-8740-48ac-8baf-b97f49cb1818.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="ä½¿ç”¨-docker-éƒ¨ç½²-spring-boot" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-docker-éƒ¨ç½²-spring-boot" aria-hidden="true">#</a> ä½¿ç”¨ Docker éƒ¨ç½² Spring Boot</h3><p>ç¬¬ä¸€æ­¥ï¼Œæ–°å»ºä¸€ä¸ªç®€å•çš„ Spring Boot é¡¹ç›®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-3f748cc6-2efe-487d-9799-f02794145aec.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¸€ä¸ªéå¸¸ç®€å•çš„ Web é¡¹ç›®ï¼Œåªæœ‰ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DockerController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Dockerï¼Œæˆ‘å‘Šè¯‰ä½ ï¼Œæ²‰é»˜ç‹äºŒæ˜¯æ²™é›•&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>@RequestMappingã€@RestController æ³¨è§£æˆ‘ä»¬åœ¨å‰å‡ ä¸ªç« èŠ‚ä»‹ç»è¿‡äº†ï¼Œä¹Ÿå°±æ˜¯è¡¨æ˜æˆ‘ä»¬è¿™æ˜¯ä¸€ä¸ª SpringMVC çš„é¡¹ç›®ï¼Œ<code>/</code> è·¯å¾„æ„å‘³ç€æˆ‘ä»¬åªè¦åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ <code>localhost:8080</code> å°±å¯ä»¥å‘é€è¯·æ±‚äº†ï¼Œå“åº”ç»“æœä¸º â€œDockerï¼Œæˆ‘å‘Šè¯‰ä½ ï¼Œæ²‰é»˜ç‹äºŒæ˜¯æ²™é›•â€ã€‚</p><p>å¯åŠ¨æœåŠ¡åï¼Œå¯ä»¥é€šè¿‡ Intellij IDEA çš„ HTTP Client éªŒè¯ä¸€ä¸‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-78c3e7e5-e208-417e-9b9f-4fc97643f4da.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>OKï¼Œé¡¹ç›®å¯ä»¥æ­£å¸¸è®¿é—®ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œæ„å»º Spring Boot é¡¹ç›®çš„ Docker é•œåƒæ–‡ä»¶ Dockerfileã€‚</p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º Dockerfile æ–‡ä»¶ï¼Œè§ä¸‹å›¾ä½ç½®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-08d6ce30-8192-4a7e-8bdc-95adb91c7c74.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å…·ä½“å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>FROM openjdk:8-jdk-alpine
ARG JAR_FILE=target/*.jar
COPY \${JAR_FILE} app.jar
ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>FROM openjdk:8-jdk-alpine</code>ï¼šè¡¨ç¤ºä½¿ç”¨ JDK8 ä¸ºåŸºç¡€é•œåƒã€‚</li><li><code>ARG JAR_FILE=target/*.jar</code>ï¼šè¡¨ç¤ºå®šä¹‰ä¸€ä¸ªå‚æ•°åä¸º JAR_FILEï¼Œå€¼ä¸º <code>target/*.jar</code> çš„æ„å»ºå‚æ•°</li><li><code>COPY \${JAR_FILE} app.jar</code>ï¼šè¡¨ç¤ºæŠŠ target ç›®å½•ä¸‹çš„ jar æ–‡ä»¶å¤åˆ¶ä¸€ä»½æ–°çš„åˆ°é•œåƒå†…çš„ app.jar æ–‡ä»¶</li><li><code>ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]</code>ï¼šè¡¨ç¤ºé€šè¿‡ <code>java -jar</code> çš„å½¢å¼è¿è¡Œ <code>app.jar</code>ï¼ŒENTRYPOINT ç”¨æ¥é…ç½®å®¹å™¨å¯åŠ¨æ—¶çš„è¿è¡Œå‘½ä»¤ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¿è¡Œå‘½ä»¤ï¼Œåé¢æ˜¯ä¸€ä¸ªä¸€ä¸ªå‚æ•°ã€‚</li></ul><p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ  Maven çš„ Docker æ’ä»¶ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;plugin&gt;
    &lt;groupId&gt;com.spotify&lt;/groupId&gt;
    &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.2.2&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;build-image&lt;/id&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;build&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;configuration&gt;
        &lt;dockerHost&gt;http://ip:2375&lt;/dockerHost&gt;
        &lt;imageName&gt;itwanger/\${project.artifactId}&lt;/imageName&gt;
        &lt;imageTags&gt;
            &lt;imageTag&gt;\${project.version}&lt;/imageTag&gt;
        &lt;/imageTags&gt;
        &lt;forceTags&gt;true&lt;/forceTags&gt;
        &lt;dockerDirectory&gt;\${project.basedir}&lt;/dockerDirectory&gt;
        &lt;resources&gt;
            &lt;resource&gt;
                &lt;targetPath&gt;/&lt;/targetPath&gt;
                &lt;directory&gt;\${project.build.directory}&lt;/directory&gt;
                &lt;include&gt;\${project.build.finalName}.jar&lt;/include&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ <code>executions</code> èŠ‚ç‚¹ä¸‹æ·»åŠ  docker:buildï¼Œè¡¨ç¤ºåœ¨æ‰§è¡Œ mvn:package æ‰“åŒ…çš„æ—¶å€™é¡ºå¸¦æ„å»ºä¸€ä¸‹ Docker é•œåƒã€‚</li><li>åœ¨ <code>configuration</code> èŠ‚ç‚¹ä¸‹æ·»åŠ  Docker ä¸»æœºçš„åœ°å€ã€é•œåƒçš„åå­—ã€é•œåƒçš„ç‰ˆæœ¬ã€é•œåƒæ–‡ä»¶çš„ç›®å½•ã€ä»¥åŠ resources èŠ‚ç‚¹ä¸‹é…ç½®çš„ jar åŒ…ä½ç½®å’Œåç§°ç­‰ã€‚</li></ul><p>é…ç½®æå®šåï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œå¯ä»¥ç›´æ¥ç‚¹å‡» Maven é¢æ¿ä¸­çš„ package è¿›è¡Œæ‰“åŒ…ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-1932f285-bb8d-4225-af6e-014ed2c9104b.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é¦–æ¬¡æ‰“åŒ…éœ€è¦ä¸‹è½½ä¸€äº›åŸºç¡€é•œåƒï¼Œæ‰“åŒ…æˆåŠŸåï¼Œå¯ä»¥åœ¨ Docker å®¹å™¨ä¸­æŸ¥çœ‹æˆ‘ä»¬åˆšåˆšæ‰“åŒ…å¥½çš„é•œåƒï¼Œå‘½ä»¤ <code>docker images</code>ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-730b4f5b-d556-4f73-9dfc-b22152d86f08.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨è¿™ä¸ªé•œåƒçš„å®¹å™¨ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker run -d --name itwanger -p 8080:8080 itwanger/springboot-docker:0.0.1-SNAPSHOT
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>-d</code>: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</li><li><code>--name</code>: ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§° itwangerï¼›</li><li><code>-p</code>: æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£</li></ul><p>ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—® 8080 ç«¯å£ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåœ¨ Docker ä¸ŠæˆåŠŸè¿è¡Œäº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-79a760b1-c084-4a5c-adc0-911b2e44ae7a.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å½“åˆ©ç”¨ <code>docker run</code> æ¥åˆ›å»ºå®¹å™¨æ—¶ï¼ŒDocker åœ¨åå°è¿è¡Œçš„æ ‡å‡†æ“ä½œåŒ…æ‹¬ï¼š</p><ul><li>æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä»ä»“åº“ä¸‹è½½</li><li>åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨</li><li>åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚</li><li>ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å»</li><li>ä»åœ°å€æ± é…ç½®ä¸€ä¸ª ip åœ°å€ç»™å®¹å™¨</li><li>æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº</li><li>æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢</li></ul><h3 id="intellij-idea-ç›´è¿-docker" tabindex="-1"><a class="header-anchor" href="#intellij-idea-ç›´è¿-docker" aria-hidden="true">#</a> Intellij IDEA ç›´è¿ Docker</h3><p>æ–°ç‰ˆçš„ Intellij IDEA ä¸­å·²ç»é»˜è®¤ç»§æ‰¿äº† Dockerï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ services é¢æ¿æ‰“å¼€ Dockerï¼Œç›´æ¥è¿›è¡Œæ“ä½œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/docker-6b4fbbb0-3986-403b-9d7e-7e50cf27b499.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><hr>`,60),k={href:"https://javabetter.cn/zhishixingqiu/",target:"_blank",rel:"noopener noreferrer"},h=e("strong",null,"ç¼–ç¨‹å–µ",-1),x=e("h3",{id:"æºç è·¯å¾„",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#æºç è·¯å¾„","aria-hidden":"true"},"#"),a(" æºç è·¯å¾„ï¼š")],-1),j={href:"https://github.com/itwanger/coding-more",target:"_blank",rel:"noopener noreferrer"},D={href:"https://github.com/itwanger/codingmore-learning/tree/main/springboot-docker",target:"_blank",rel:"noopener noreferrer"},_=e("hr",null,null,-1),y=e("figure",null,[e("img",{src:"https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png",alt:"",tabindex:"0",loading:"lazy"}),e("figcaption")],-1);function q(w,I){const i=o("ExternalLinkIcon");return c(),l("div",null,[d,e("blockquote",null,[e("p",null,[a("PSï¼šLinux ç¤¾åŒºå·²ä¸å†ç»´æŠ¤ CentOS 8ï¼Œå¯¼è‡´ yum æºéœ€è¦"),e("a",g,[a("åˆ‡æ¢"),t(i)]),a("ï¼Œåé¢æ‰“ç®—æŠŠç³»ç»Ÿåˆ‡æ¢ä¸º Anolisæˆ–Alinux")])]),e("ul",null,[p,u,e("li",null,[a("æ¨èä½¿ç”¨ overlay2ï¼ˆæˆ³"),e("a",b,[a("é“¾æ¥"),t(i)]),a("äº†è§£ï¼‰å­˜å‚¨é©±åŠ¨")])]),v,e("blockquote",null,[e("p",null,[a("Docker ä¸‹è½½åœ°å€ï¼š"),e("a",m,[a("https://docs.docker.com/get-docker/"),t(i)])])]),f,e("p",null,[a("æ›´å¤šå†…å®¹ï¼Œåªé’ˆå¯¹ã€ŠäºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯ã€‹æ˜Ÿçƒç”¨æˆ·å¼€æ”¾ï¼Œéœ€è¦çš„å°ä¼™ä¼´å¯ä»¥"),e("a",k,[a("æˆ³é“¾æ¥ğŸ”—"),t(i)]),a("åŠ å…¥æˆ‘ä»¬çš„æ˜Ÿçƒï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·å·ã€‚ã€‚"),h,a("ğŸ±æ˜¯ä¸€ä¸ª Spring Boot+Vue çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œèåˆäº†å¸‚é¢ä¸Šç»å¤§å¤šæ•°æµè¡Œçš„æŠ€æœ¯è¦ç‚¹ã€‚é€šè¿‡å­¦ä¹ å®æˆ˜é¡¹ç›®ï¼Œä½ å¯ä»¥å°†æ‰€å­¦çš„çŸ¥è¯†é€šè¿‡å®è·µè¿›è¡Œæ£€éªŒã€ä½ å¯ä»¥æ‹“å®½è‡ªå·±çš„æŠ€æœ¯è¾¹ç•Œï¼Œä½ å¯ä»¥æŒæ¡ä¸€ä¸ªçœŸæ­£çš„å®æˆ˜é¡¹ç›®æ˜¯å¦‚ä½•ä» 0 åˆ° 1 çš„ã€‚")]),x,e("blockquote",null,[e("ul",null,[e("li",null,[a("ç¼–ç¨‹å–µï¼š"),e("a",j,[a("https://github.com/itwanger/coding-more"),t(i)])]),e("li",null,[a("codingmore-dockerï¼š"),e("a",D,[a("https://github.com/itwanger/codingmore-learning"),t(i)])])])]),_,y])}const S=r(s,[["render",q],["__file","docker.html.vue"]]);export{S as default};
