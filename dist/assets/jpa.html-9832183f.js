import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as i,a as n,d as s,b as e,e as t}from"./app-72970f25.js";const l={},u=t(`<h2 id="spring-data-jpa-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#spring-data-jpa-ç®€ä»‹" aria-hidden="true">#</a> Spring Data JPA ç®€ä»‹</h2><p>Spring Data æ˜¯ Spring æä¾›çš„ä¸€ä¸ªæ“ä½œæ•°æ®çš„æ¡†æ¶ï¼ŒSpring Data JPAæ˜¯ Spring Data ä¸‹çš„ä¸€ä¸ªåŸºäº JPA æ ‡å‡†çš„æ“ä½œæ•°æ®çš„æ¨¡å—ã€‚</p><p>JPAï¼ˆJava Persistence APIï¼‰æ˜¯ Java äº²å¦ˆ Sun å…¬å¸æå‡ºçš„ä¸€å¥— Java æŒä¹…åŒ–è§„èŒƒã€‚æ‰€è°“è§„èŒƒï¼Œå°±æ˜¯åªå®šä¹‰æ ‡å‡†ï¼Œä¸æä¾›å®ç°ã€‚</p><p>JPA çš„æå‡ºä¸»è¦æ˜¯ä¸ºäº†æ•´åˆå¸‚é¢ä¸Šå·²æœ‰çš„ ORM æ¡†æ¶ï¼Œæ¯”å¦‚è¯´ Hibernateã€EclipseLink ç­‰ã€‚å®˜æ–¹è§‰å¾—ä½ ä»¬ææ¡†æ¶å¯ä»¥ï¼Œä½†ä¸è¦ä¹±æï¼Œå¾—æŒ‰ç…§æˆ‘çš„æ ‡å‡†æ¥ã€‚</p><p>Spring Data JPA åªæ˜¯ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå®ƒä¸Šæ¥ JPA ä¸‹æ¥ ORM æ¡†æ¶ï¼Œé€šè¿‡åŸºäº JPA çš„ Respository æ¥å£æå¤§åœ°å‡å°‘äº† JPA ä½œä¸ºæ•°æ®è®¿é—®æ–¹æ¡ˆçš„ä»£ç é‡ï¼Œç®€åŒ–äº†æŒä¹…å±‚å¼€å‘å¹¶ä¸”å±è”½äº†å„å¤§ ORM æ¡†æ¶çš„å·®å¼‚ã€‚</p><p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š</p><ul><li>JPA æ˜¯è§„èŒƒï¼Œç»Ÿä¸€äº†è§„èŒƒæ‰ä¾¿äºä½¿ç”¨ã€‚</li><li>Hibernate æ˜¯ JPA çš„å®ç°ï¼Œæ˜¯ä¸€å¥—æˆç†Ÿçš„ ORM æ¡†æ¶ã€‚</li><li>Spring Data JPA æ˜¯ Spring æå‡ºçš„ï¼Œå®ƒå¢åŠ äº†ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œç”¨æ¥å±è”½ä¸åŒ ORM æ¡†æ¶çš„å·®å¼‚ã€‚</li></ul><h2 id="spring-boot-æ•´åˆ-spring-data-jpa" tabindex="-1"><a class="header-anchor" href="#spring-boot-æ•´åˆ-spring-data-jpa" aria-hidden="true">#</a> Spring Boot æ•´åˆ Spring Data JPA</h2><p>ç¬¬ä¸€æ­¥ï¼Œåœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ  JPA çš„ starter ä¾èµ–ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œåœ¨ application.yml æ–‡ä»¶ä¸­æ·»åŠ æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>spring:
  datasource:
    username: codingmore-mysql
    password: dddd
    url: jdbc:mysql://xxxx:3306/codingmore-mysql?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&amp;useSSL=false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼Œæ–°å»ºå®ä½“ç±» User.javaã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>@Data</code> æ³¨è§£ä¸º lombok æ³¨è§£ï¼Œä¼šè‡ªåŠ¨ä¸ºè¯¥ç±»æ·»åŠ  getter/setter æ–¹æ³•ã€‚</li><li><code>@Entity</code> å’Œ <code>@Table</code> æ³¨è§£éƒ½æ˜¯ JDK 1.5 ä»¥åå¼•å…¥çš„å…ƒæ•°æ®æ³¨è§£ï¼Œéµå¾ª JPA è§„èŒƒä¸­å®šä¹‰çš„æŸ¥è¯¢è¯­è¨€ JPQLï¼Œç±»ä¼¼ SQL è¯­æ³•ï¼Œé€‚ç”¨äº Java ç±»ã€‚</li><li><code>@Entity</code> è¡¨æ˜è¯¥ç±»æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼Œé»˜è®¤ä½¿ç”¨ ORM è§„åˆ™ï¼Œå³ç±»åä¸ºæ•°æ®åº“è¡¨åï¼Œç±»ä¸­çš„å­—æ®µåä¸ºæ•°æ®åº“è¡¨ä¸­çš„å­—æ®µåã€‚</li><li><code>@Table</code> æ³¨è§£æ˜¯éå¿…é€‰é¡¹ï¼Œå®ƒçš„ä¼˜å…ˆçº§é«˜äº <code>@Entity</code> æ³¨è§£ï¼Œæ¯”å¦‚è¯´ <code>@Entity(name=&quot;user&quot;)</code> å’Œ <code>@Table(name=&quot;users&quot;)</code> åŒæ—¶å­˜åœ¨çš„è¯ï¼Œå¯¹åº”çš„è¡¨åä¸º usersã€‚</li><li><code>@Id</code> è¡¨åè¯¥å­—æ®µä¸ºä¸»é”®å­—æ®µï¼Œå½“å£°æ˜äº† @Entity æ³¨è§£ï¼Œ<code>@Id</code> å°±å¿…é¡»ä¹Ÿå¾—å£°æ˜ã€‚</li></ul><p>è¿™é‡Œæ¨èå¤§å®¶åœ¨ Intellij IDEA ä¸­å®‰è£… JPA Buddy æ’ä»¶ï¼Œè¯¥æ’ä»¶æä¾›äº†å¯è§†åŒ–çš„ä»£ç ç”Ÿæˆå™¨ï¼Œå¯ä»¥å¸®æˆ‘ä»¬ç®€åŒ– JPA çš„å¼€å‘å·¥ä½œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/jpa-dbd461e0-f74b-4914-9f79-37c09bce8db4.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å®‰è£…å®Œ JPA Buddy æ’ä»¶åï¼Œå½“æˆ‘ä»¬åˆ›å»ºå¥½å®ä½“ç±»åï¼Œä¼šè‡ªåŠ¨æ‰“å¼€ä¸‰ä¸ªé¢æ¿ï¼šJPA Structureï¼ŒJPA Paletteå’ŒJPA Inspectorã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/jpa-f8e43568-d286-4da6-a61a-c88b50642824.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>`,19),r={href:"https://codingdict.com/blog/1406",target:"_blank",rel:"noopener noreferrer"},d=t(`<p>åœ¨JPA Buddy æ’ä»¶çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®çš„ç›®å½•ä¸Šå³é”®é€‰æ‹©é€šè¿‡ JPA çš„æ–¹å¼åˆ›å»ºå®ä½“ç±»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/jpa-ef1d4416-1ac5-4ad8-b305-dafd454cec3b.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é€‰æ‹©æ•°æ®è¡¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/jpa-64ad825d-2e53-4315-9fad-3d053d958303.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>

    <span class="token comment">// çœç•¥ getter/setter</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››æ­¥ï¼Œæ–°å»º UserRepository æ¥å£ã€‚</p><p>åœ¨é¡¹ç›®è·¯å¾„ä¸Šå³é”®ï¼Œé€‰æ‹©æ–°å»º JPA Repositoryã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/jpa-1114773a-a507-48e9-a1a1-781a89cc517e.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserRepository</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœåªæ˜¯ç®€å•çš„å¯¹è¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œé‚£ä¹ˆåªéœ€è¦ç»§æ‰¿ JpaRepository æ¥å£ï¼Œå¹¶ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼ˆç¬¬ä¸€ä¸ªä¸ºå®ä½“ç±»ï¼Œç¬¬äºŒä¸ªä¸ºä¸»é”®ç±»å‹ï¼‰å³å¯ã€‚</p><p>ç¬¬äº”æ­¥ï¼Œæ–°å»ºæœåŠ¡æ¥å£ UserService å’Œå®ç°ç±» UserServiceImplã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>UserService å®šä¹‰äº† 4 ä¸ªæ–¹æ³•ï¼š</p><ul><li>findById æ ¹æ® ID æŸ¥è¯¢å•æ¡è®°å½•</li><li>findAll æŸ¥è¯¢æ‰€æœ‰</li><li>save ç”¨æ¥ä¿å­˜å’Œæ›´æ–°</li><li>delete ç”¨æ¥åˆ é™¤</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userRepository<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userRepository<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>@Service</code> æ³¨è§£ç”¨åœ¨æœåŠ¡å±‚ï¼Œå’Œ <code>@Component</code> æ³¨è§£ä½œç”¨ç±»ä¼¼ï¼ˆé€šç”¨æ³¨è§£ï¼‰ï¼ŒSpring Boot ä¼šè‡ªåŠ¨æ‰«æè¯¥ç±»æ³¨è§£æ³¨è§£çš„ç±»ï¼Œå¹¶æŠŠå®ƒä»¬å‡å¦‚åˆ° Spring å®¹å™¨ä¸­ã€‚</li><li><code>@Resource</code> å’Œ <code>@Autowired</code> æ³¨è§£éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…å¯¹è±¡çš„ï¼Œå¯ä»¥ç”¨åœ¨å­—æ®µä¸Šï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨ setter æ–¹æ³•ä¸Šã€‚@Autowired æ˜¯ Spring æä¾›çš„æ³¨è§£ï¼Œ@Resource æ˜¯ Java æä¾›çš„æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœé¡¹ç›®æ²¡æœ‰ä½¿ç”¨ Spring æ¡†æ¶è€Œæ˜¯ JFinal æ¡†æ¶ï¼Œ@Resource æ³¨è§£ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚å¦å¤–ï¼Œ@Resource æ˜¯ byName è‡ªåŠ¨è£…é…ï¼Œ@Autowired æ˜¯ byType è‡ªåŠ¨è£…é…ï¼Œå½“æœ‰ä¸¤ä¸ªç±»å‹å®Œå…¨ä¸€æ ·çš„å¯¹è±¡æ—¶ï¼Œ@Autowired å°±ä¼šå‡ºé”™äº†ã€‚</li></ul>`,18),k={href:"https://www.zhihu.com/question/39356740",target:"_blank",rel:"noopener noreferrer"},v=t(`<p>å½“ç„¶äº†ï¼Œåªæ˜¯ç®€å•çš„å¢åˆ æ”¹æŸ¥å·²ç»ä¸èƒ½æèµ·æˆ‘ä»¬å­¦ä¹ çš„å…´è¶£äº†ï¼Œå¿…é¡»å¾—æ¥ç‚¹ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ UserService æ¥å£ä¸­æ·»åŠ ä¸€ä¸ªåˆ†é¡µçš„æ¥å£ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token class-name">Pageable</span> pageable<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å®ç°ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token class-name">Pageable</span> pageable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> userRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span>pageable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Pageable æ˜¯ Spring æä¾›çš„ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢æ¥å£ï¼ŒæŸ¥è¯¢çš„æ—¶å€™åªéœ€è¦ä¼ å…¥ä¸€ä¸ª Pageable æ¥å£çš„å®ç°ç±»ï¼ŒæŒ‡å®šç¬¬å‡ é¡µï¼ˆpageNumberï¼‰å’Œé¡µé¢å¤§å°ï¼ˆpageSizeï¼‰å³å¯ã€‚</li><li>Page æ˜¯ Spring æä¾›çš„ä¸€ä¸ªåˆ†é¡µè¿”å›ç»“æœæ¥å£ã€‚</li></ul><p>å†å¢åŠ ä¸€ä¸ªè‡ªå®šä¹‰æŸ¥è¯¢æ¥å£ï¼ˆæŒ‰ç…§ name çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼‰å§ã€‚</p><p>é¦–å…ˆæ˜¯ UserRepositoryï¼Œç›´æ¥ç”¨ JPA Buddy æ’ä»¶ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/jpa-d4f2619a-85ea-437f-860d-3738669b4582.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserRepository</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByNameLikeIgnoreCase</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæ˜¯ UserService æ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByNameLikeIgnoreCase</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ€åæ˜¯ UserServiceImplï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByNameLikeIgnoreCase</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> userRepository<span class="token punctuation">.</span><span class="token function">findByNameLikeIgnoreCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æµ‹è¯•-spring-data-jpa" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•-spring-data-jpa" aria-hidden="true">#</a> æµ‹è¯• Spring Data JPA</h2><p>åœ¨æµ‹è¯•ç±»ä¸­å¯¹æœåŠ¡ç±»ä¸­çš„ 5 ä¸ªæ¥å£è¿›è¡Œæµ‹è¯•ï¼Œé¡ºå¸¦åœ¨application.yml ä¸­å¼€å¯ SQL è¯­å¥çš„è¾“å‡ºï¼Œçœ‹çœ‹ JPA è‡ªåŠ¨ç”Ÿæˆçš„ SQL è¯­å¥åˆ°åº•é•¿ä»€ä¹ˆæ ·å­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/springboot/jpa-a3d8641a-c701-47bb-ae44-f53eb8e05f65.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æµ‹è¯•ç±»éå¸¸ç®€å•å“ˆï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">class</span> <span class="token class-name">CodingmoreJpaApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æŸ¥è¯¢æ‰€æœ‰</span>
        userService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æŸ¥è¯¢æ‰€æœ‰{}&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// æ–°å¢æ•°æ®</span>
        userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;æ²‰é»˜ç‹ä¸‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;æ²‰é»˜ç‹å››&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;æ²‰é»˜ç‹äº”&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ†é¡µæŸ¥è¯¢</span>
        userService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token class-name">PageRequest</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ†é¡µæŸ¥è¯¢{}&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¨¡ç³ŠæŸ¥è¯¢</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¨¡ç³ŠæŸ¥è¯¢{}&quot;</span><span class="token punctuation">,</span>userService<span class="token punctuation">.</span><span class="token function">findByNameLike</span><span class="token punctuation">(</span><span class="token string">&quot;æ²‰é»˜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ é™¤</span>
        userService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»æ—¥å¿—å½“ä¸­å¯ä»¥çœ‹å¾—å‡ºï¼ŒSpring Data JPA é»˜è®¤ä½¿ç”¨çš„æ˜¯ Hibernate æ¡†æ¶ï¼Œè¿™æ˜¯æŸ¥è¯¢å…¨éƒ¨ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Hibernate: select user0_.id as id1_0_, user0_.age as age2_0_, user0_.name as name3_0_, user0_.password as password4_0_ from user user0_
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ˜¯ä¿å­˜ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Hibernate: insert into user (age, name, password, id) values (?, ?, ?, ?)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ˜¯æ›´æ–°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Hibernate: update user set age=?, name=?, password=? where id=?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ˜¯åˆ†é¡µï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Hibernate: select user0_.id as id1_0_, user0_.age as age2_0_, user0_.name as name3_0_, user0_.password as password4_0_ from user user0_ limit ?, ?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ˜¯æ¨¡ç³ŠæŸ¥è¯¢ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Hibernate: select user0_.id as id1_0_, user0_.age as age2_0_, user0_.name as name3_0_, user0_.password as password4_0_ from user user0_ where user0_.name like ? escape ?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸è¿‡ï¼Œè¿™ä¸ªæ¨¡ç³ŠæŸ¥è¯¢ä¸ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼Œæ²¡æœ‰å‰åçš„ <code>%</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© Spring Data æä¾›çš„ <code>@Query</code> æ¥è‡ªå®šä¹‰ SQL è¯­å¥ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>@Query</code> æ³¨è§£ä¼šä½¿ç”¨ JPQL æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;select u from User u where u.name like concat(&#39;%&#39;,?1,&#39;%&#39;)&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByNameLike</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>@Query</code> æ³¨è§£ä¸­çš„ â€œUserâ€ ä¸ºå®ä½“ç±»çš„ç±»åï¼Œè€Œéæ•°æ®åº“çš„è¡¨å userï¼Œè¿™å°±æ˜¯ JPQL å’ŒåŸç”Ÿ SQL çš„åŒºåˆ«ã€‚æ¥çœ‹åŸç”Ÿ SQL çš„å†™æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM user u WHERE u.name like &#39;%&#39;|| ?1 || &#39;%&#39;&quot;</span><span class="token punctuation">,</span>
        nativeQuery <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByNameLikeNativeQuery</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>@Query</code> æ³¨è§£ä¸­çš„ â€œuserâ€ ä¸ºæ•°æ®åº“è¡¨åï¼Œå¦å¤–éœ€è¦åŠ ä¸Šå‚æ•° nativeQueryï¼Œé»˜è®¤å€¼ä¸º falseï¼Œè®¾ä¸º true è¡¨æ˜å¼€å¯åŸç”Ÿ SQL æŸ¥è¯¢ã€‚æ³¨æ„è¿™æ¬¡æˆ‘ä»¬ç”¨â€œ||â€æ›¿æ¢äº†â€œconcatâ€ æ–¹æ³•ã€‚</p><p>é™¤äº†ä½¿ç”¨ <code>?1</code>ã€<code>?2</code> çš„å½¢å¼æ¥åŠ¨æ€ä¼ é€’å‚æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ <code>@Param</code> æ³¨è§£çš„å½¢å¼æ¥ä¼ é€’å‚æ•°ï¼Œæ­¤æ—¶çš„ SQL è¯­å¥ä¸­é‡‡ç”¨ <code>:param</code> å½¢å¼æ¥æ¥æ”¶å‚æ•°ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;select u from User u where u.name like concat(&#39;%&#39;,:name,&#39;%&#39;)&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByNameLikeParam</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯åˆ é™¤ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Hibernate: delete from user where id=?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="spring-data-jpa-å’Œ-mybatis-çš„å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#spring-data-jpa-å’Œ-mybatis-çš„å¯¹æ¯”" aria-hidden="true">#</a> Spring Data JPA å’Œ MyBatis çš„å¯¹æ¯”</h2><hr>`,41),m={href:"https://javabetter.cn/zhishixingqiu/",target:"_blank",rel:"noopener noreferrer"},g=n("strong",null,"ç¼–ç¨‹å–µ",-1),b=n("hr",null,null,-1),f=n("h2",{id:"æºç åœ°å€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#æºç åœ°å€","aria-hidden":"true"},"#"),s(" æºç åœ°å€ï¼š")],-1),h={href:"https://github.com/itwanger/coding-more",target:"_blank",rel:"noopener noreferrer"},y={href:"https://github.com/itwanger/codingmore-learning/tree/main/codingmore-jpa",target:"_blank",rel:"noopener noreferrer"},_=n("hr",null,null,-1),j=n("figure",null,[n("img",{src:"https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1);function w(x,S){const a=o("ExternalLinkIcon");return c(),i("div",null,[u,n("blockquote",null,[n("p",null,[s("æ›´å¤šè¯¦ç»†ä»‹ç»ï¼š"),n("a",r,[s("https://codingdict.com/blog/1406"),e(a)])])]),d,n("blockquote",null,[n("p",null,[s("è‹ä¸‰å†™äº†ä¸€ç¯‡@Autowiredçš„æ–‡ç« ï¼Œå¾ˆä¸é”™ï¼š"),n("a",k,[s("https://www.zhihu.com/question/39356740"),e(a)])])]),v,n("p",null,[s("æ›´å¤šå†…å®¹ï¼Œåªé’ˆå¯¹ã€ŠäºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯ã€‹æ˜Ÿçƒç”¨æˆ·å¼€æ”¾ï¼Œéœ€è¦çš„å°ä¼™ä¼´å¯ä»¥"),n("a",m,[s("æˆ³é“¾æ¥ğŸ”—"),e(a)]),s("åŠ å…¥æˆ‘ä»¬çš„æ˜Ÿçƒï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·å·ã€‚ã€‚"),g,s("ğŸ±æ˜¯ä¸€ä¸ª Spring Boot+Vue çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œèåˆäº†å¸‚é¢ä¸Šç»å¤§å¤šæ•°æµè¡Œçš„æŠ€æœ¯è¦ç‚¹ã€‚é€šè¿‡å­¦ä¹ å®æˆ˜é¡¹ç›®ï¼Œä½ å¯ä»¥å°†æ‰€å­¦çš„çŸ¥è¯†é€šè¿‡å®è·µè¿›è¡Œæ£€éªŒã€ä½ å¯ä»¥æ‹“å®½è‡ªå·±çš„æŠ€æœ¯è¾¹ç•Œï¼Œä½ å¯ä»¥æŒæ¡ä¸€ä¸ªçœŸæ­£çš„å®æˆ˜é¡¹ç›®æ˜¯å¦‚ä½•ä» 0 åˆ° 1 çš„ã€‚")]),b,f,n("blockquote",null,[n("ul",null,[n("li",null,[s("ç¼–ç¨‹å–µï¼š"),n("a",h,[s("https://github.com/itwanger/coding-more"),e(a)])]),n("li",null,[s("Spring Boot æ•´åˆ JPAï¼š"),n("a",y,[s("https://github.com/itwanger/codingmore-learning/tree/main/codingmore-jpa"),e(a)])])])]),_,j])}const P=p(l,[["render",w],["__file","jpa.html.vue"]]);export{P as default};
