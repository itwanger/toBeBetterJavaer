import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as l,a as n,d as s,b as t,e as p}from"./app-72970f25.js";const i={},u=n("h1",{id:"_12-2-bioã€nio-å’Œ-aio-çš„åŒºåˆ«",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_12-2-bioã€nio-å’Œ-aio-çš„åŒºåˆ«","aria-hidden":"true"},"#"),s(" 12.2 BIOã€NIO å’Œ AIO çš„åŒºåˆ«")],-1),k={href:"https://javabetter.cn/nio/nio-better-io.html",target:"_blank",rel:"noopener noreferrer"},r=p('<p>å‘¨æœ«åˆåï¼Œåœ¨å®¶é‡Œé¢è¿›è¡Œç”µè¯é¢è¯•ï¼Œæˆ‘é—®äº†é¢è¯•è€…å‡ ä¸ªå…³äº IO çš„é—®é¢˜ï¼Œå…¶ä¸­åŒ…æ‹¬ä»€ä¹ˆæ˜¯ BIOã€NIO å’Œ AIOï¼Ÿä¸‰è€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…·ä½“å¦‚ä½•ä½¿ç”¨ç­‰é—®é¢˜ï¼Œä½†æ˜¯é¢è¯•è€…å›ç­”çš„å¹¶ä¸æ˜¯å¾ˆæ»¡æ„ã€‚äºæ˜¯æˆ‘åœ¨é¢è¯•è¯„ä»·ä¸­å†™é“ï¼š&quot;å¯¹ Java çš„ IO æé†’ç†è§£ä¸å¤Ÿæ·±å…¥&quot;ã€‚æ°å¥½è¢«å¥³æœ‹å‹çœ‹åˆ°äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/io/BIONIOAIO-1.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/io/BIONIOAIO-2.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/io/BIONIOAIO-4.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="java-io-ä¸-bioã€nio" tabindex="-1"><a class="header-anchor" href="#java-io-ä¸-bioã€nio" aria-hidden="true">#</a> Java IO ä¸ BIOã€NIO</h3><p>IOï¼Œå¸¸å†™ä½œ I/Oï¼Œæ˜¯ Input/Output çš„ç®€ç§°ï¼Œå³è¾“å…¥/è¾“å‡ºã€‚é€šå¸¸æŒ‡æ•°æ®åœ¨å†…éƒ¨å­˜å‚¨å™¨ï¼ˆå†…å­˜ï¼‰å’Œå¤–éƒ¨å­˜å‚¨å™¨ï¼ˆç¡¬ç›˜ã€ä¼˜ç›˜ç­‰ï¼‰æˆ–å…¶ä»–å‘¨è¾¹è®¾å¤‡ä¹‹é—´çš„è¾“å…¥å’Œè¾“å‡ºã€‚</p><p>è¾“å…¥/è¾“å‡ºæ˜¯ä¿¡æ¯å¤„ç†ç³»ç»Ÿï¼ˆä¾‹å¦‚è®¡ç®—æœºï¼‰ä¸å¤–éƒ¨ä¸–ç•Œï¼ˆå¯èƒ½æ˜¯äººç±»æˆ–å¦ä¸€ä¿¡æ¯å¤„ç†ç³»ç»Ÿï¼‰ä¹‹é—´çš„é€šä¿¡ã€‚</p><p>è¾“å…¥æ˜¯ç³»ç»Ÿæ¥æ”¶çš„ä¿¡å·æˆ–æ•°æ®ï¼Œè¾“å‡ºåˆ™æ˜¯ä»å…¶å‘é€çš„ä¿¡å·æˆ–æ•°æ®ã€‚</p>',8),d={href:"https://javabetter.cn/io/shangtou.html",target:"_blank",rel:"noopener noreferrer"},v=n("p",null,"IO æ˜¯ Java ä¸­æ¯”è¾ƒé‡è¦ï¼Œä¸”æ¯”è¾ƒéš¾çš„çŸ¥è¯†ç‚¹ï¼Œä¸»è¦æ˜¯å› ä¸ºéšç€ Java çš„å‘å±•ï¼Œç›®å‰æœ‰ä¸‰ç§ IO å…±å­˜ã€‚åˆ†åˆ«æ˜¯ BIOã€NIO å’Œ AIOã€‚",-1),m=n("p",null,[s("BIO å…¨ç§° Block-IO æ˜¯ä¸€ç§"),n("strong",null,"åŒæ­¥ä¸”é˜»å¡"),s("çš„é€šä¿¡æ¨¡å¼ã€‚æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¼ ç»Ÿçš„é€šä¿¡æ–¹å¼ï¼Œæ¨¡å¼ç®€å•ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚ä½†å¹¶å‘å¤„ç†èƒ½åŠ›ä½ï¼Œé€šä¿¡è€—æ—¶ï¼Œä¾èµ–ç½‘é€Ÿã€‚")],-1),b={href:"https://javabetter.cn/nio/nio-better-io.html",target:"_blank",rel:"noopener noreferrer"},f=n("strong",null,"éé˜»å¡åŒæ­¥",-1),h=p(`<p>NIO ä¸åŸæ¥çš„ I/O æœ‰åŒæ ·çš„ä½œç”¨å’Œç›®çš„, ä»–ä»¬ä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«æ˜¯æ•°æ®æ‰“åŒ…å’Œä¼ è¾“çš„æ–¹å¼ã€‚åŸæ¥çš„ I/O ä»¥æµçš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œè€Œ NIO ä»¥å—çš„æ–¹å¼å¤„ç†æ•°æ®ã€‚</p><p>é¢å‘æµçš„ I/O ç³»ç»Ÿä¸€æ¬¡ä¸€ä¸ªå­—èŠ‚åœ°å¤„ç†æ•°æ®ã€‚ä¸€ä¸ªè¾“å…¥æµäº§ç”Ÿä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œä¸€ä¸ªè¾“å‡ºæµæ¶ˆè´¹ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚</p><p>é¢å‘å—çš„ I/O ç³»ç»Ÿä»¥å—çš„å½¢å¼å¤„ç†æ•°æ®ã€‚æ¯ä¸€ä¸ªæ“ä½œéƒ½åœ¨ä¸€æ­¥ä¸­äº§ç”Ÿæˆ–è€…æ¶ˆè´¹ä¸€ä¸ªæ•°æ®å—ã€‚æŒ‰å—å¤„ç†æ•°æ®æ¯”æŒ‰(æµå¼çš„)å­—èŠ‚å¤„ç†æ•°æ®è¦å¿«å¾—å¤šã€‚ä½†æ˜¯é¢å‘å—çš„ I/O ç¼ºå°‘ä¸€äº›é¢å‘æµçš„ I/O æ‰€å…·æœ‰çš„ä¼˜é›…æ€§å’Œç®€å•æ€§ã€‚</p><p>Java AIOï¼Œå…¨ç§° Asynchronous IOï¼Œæ˜¯<strong>å¼‚æ­¥éé˜»å¡</strong>çš„ IOã€‚æ˜¯ä¸€ç§éé˜»å¡å¼‚æ­¥çš„é€šä¿¡æ¨¡å¼ã€‚</p><p>åœ¨ NIO çš„åŸºç¡€ä¸Šå¼•å…¥äº†æ–°çš„å¼‚æ­¥é€šé“çš„æ¦‚å¿µï¼Œå¹¶æä¾›äº†å¼‚æ­¥æ–‡ä»¶é€šé“å’Œå¼‚æ­¥å¥—æ¥å­—é€šé“çš„å®ç°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/io/BIONIOAIO-8.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/io/BIONIOAIO-9.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/io/BIONIOAIO-10.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="ä¸‰ç§-io-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ä¸‰ç§-io-çš„åŒºåˆ«" aria-hidden="true">#</a> ä¸‰ç§ IO çš„åŒºåˆ«</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç«™åœ¨å®è§‚çš„è§’åº¦ï¼Œé‡æ–°ç”»ä¸€ä¸‹é‡ç‚¹ï¼š</p><p><strong>BIO ï¼ˆBlocking I/Oï¼‰ï¼šåŒæ­¥é˜»å¡ I/O æ¨¡å¼ã€‚</strong></p><p><strong>NIO ï¼ˆNew I/Oï¼‰ï¼šåŒæ­¥éé˜»å¡æ¨¡å¼ã€‚</strong></p><p><strong>AIO ï¼ˆAsynchronous I/Oï¼‰ï¼šå¼‚æ­¥éé˜»å¡ I/O æ¨¡å‹ã€‚</strong></p><p>åŒæ­¥é˜»å¡æ¨¡å¼ï¼šè¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„å·¥ä½œæ¨¡å¼æ˜¯å…ˆæ¥åˆ°å¨æˆ¿ï¼Œå¼€å§‹çƒ§æ°´ï¼Œå¹¶ååœ¨æ°´å£¶é¢å‰ä¸€ç›´ç­‰ç€æ°´çƒ§å¼€ã€‚</p><p>åŒæ­¥éé˜»å¡æ¨¡å¼ï¼šè¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„å·¥ä½œæ¨¡å¼æ˜¯å…ˆæ¥åˆ°å¨æˆ¿ï¼Œå¼€å§‹çƒ§æ°´ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä¸€ç›´ååœ¨æ°´å£¶å‰é¢ç­‰ï¼Œè€Œæ˜¯å›åˆ°å®¢å…çœ‹ç”µè§†ï¼Œç„¶åæ¯éš”å‡ åˆ†é’Ÿåˆ°å¨æˆ¿çœ‹ä¸€ä¸‹æ°´æœ‰æ²¡æœ‰çƒ§å¼€ã€‚</p><p>å¼‚æ­¥éé˜»å¡ I/O æ¨¡å‹ï¼šè¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„å·¥ä½œæ¨¡å¼æ˜¯å…ˆæ¥åˆ°å¨æˆ¿ï¼Œå¼€å§‹çƒ§æ°´ï¼Œæˆ‘ä»¬ä¸ä¸€ç›´ååœ¨æ°´å£¶å‰é¢ç­‰ï¼Œä¹Ÿä¸éš”ä¸€æ®µæ—¶é—´å»çœ‹ä¸€ä¸‹ï¼Œè€Œæ˜¯åœ¨å®¢å…çœ‹ç”µè§†ï¼Œæ°´å£¶ä¸Šé¢æœ‰ä¸ªå¼€å…³ï¼Œæ°´çƒ§å¼€ä¹‹åä»–ä¼šé€šçŸ¥æˆ‘ã€‚</p><p>é˜»å¡ VS éé˜»å¡ï¼šäººæ˜¯å¦ååœ¨æ°´å£¶å‰é¢ä¸€ç›´ç­‰ã€‚</p><p>åŒæ­¥ VS å¼‚æ­¥ï¼šæ°´å£¶æ˜¯ä¸æ˜¯åœ¨æ°´çƒ§å¼€ä¹‹åä¸»åŠ¨é€šçŸ¥äººã€‚</p><h4 id="é€‚ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#é€‚ç”¨åœºæ™¯" aria-hidden="true">#</a> é€‚ç”¨åœºæ™¯</h4><p>BIO æ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®æ¯”è¾ƒå°ä¸”å›ºå®šçš„æ¶æ„ï¼Œè¿™ç§æ–¹å¼å¯¹æœåŠ¡å™¨èµ„æºè¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ï¼ŒJDK1.4 ä»¥å‰çš„å”¯ä¸€é€‰æ‹©ï¼Œä½†ç¨‹åºç›´è§‚ç®€å•æ˜“ç†è§£ã€‚</p><p>NIO æ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­ï¼ˆè½»æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚èŠå¤©æœåŠ¡å™¨ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ï¼Œç¼–ç¨‹æ¯”è¾ƒå¤æ‚ï¼ŒJDK1.4 å¼€å§‹æ”¯æŒã€‚</p><p>AIO æ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒé•¿ï¼ˆé‡æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚ç›¸å†ŒæœåŠ¡å™¨ï¼Œå……åˆ†è°ƒç”¨ OS å‚ä¸å¹¶å‘æ“ä½œï¼Œç¼–ç¨‹æ¯”è¾ƒå¤æ‚ï¼ŒJDK7 å¼€å§‹æ”¯æŒã€‚</p><h4 id="ä½¿ç”¨æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹å¼" aria-hidden="true">#</a> ä½¿ç”¨æ–¹å¼</h4><p>ä½¿ç”¨ BIO å®ç°æ–‡ä»¶çš„è¯»å–å’Œå†™å…¥ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BioFileDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BioFileDemo</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BioFileDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        demo<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        demo<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ä½¿ç”¨ BIO å†™å…¥æ–‡ä»¶</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> filename <span class="token operator">=</span> <span class="token string">&quot;logs/itwanger/paicoding.txt&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">FileWriter</span> fileWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BufferedWriter</span> bufferedWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>fileWriter<span class="token punctuation">)</span><span class="token punctuation">;</span>

            bufferedWriter<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;å­¦ç¼–ç¨‹å°±ä¸ŠæŠ€æœ¯æ´¾&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bufferedWriter<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥å®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bufferedWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fileWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ä½¿ç”¨ BIO è¯»å–æ–‡ä»¶</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> filename <span class="token operator">=</span> <span class="token string">&quot;logs/itwanger/paicoding.txt&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">FileReader</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span> line<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–çš„å†…å®¹: &quot;</span> <span class="token operator">+</span> line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            bufferedReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fileReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Java ä¸­çš„ä¼ ç»Ÿé˜»å¡ I/Oï¼ˆBIOï¼‰å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œã€‚åœ¨ <code>writeFile()</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ª FileWriter å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ BufferedWriter è¿›è¡Œç¼“å†²å†™å…¥ã€‚æ¥ç€ï¼Œä½¿ç”¨ <code>bufferedWriter.write()</code> æ–¹æ³•å°†å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ï¼Œç„¶åè°ƒç”¨ <code>bufferedWriter.newLine()</code> æ–¹æ³•æ·»åŠ æ¢è¡Œç¬¦ã€‚æœ€åï¼Œå…³é—­ BufferedWriter å’Œ FileWriterã€‚åœ¨ <code>readFile()</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª FileReader å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ BufferedReader è¿›è¡Œç¼“å†²è¯»å–ã€‚ç„¶åé€šè¿‡è°ƒç”¨ <code>bufferedReader.readLine()</code> æ–¹æ³•å¾ªç¯è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç›´åˆ°è¿”å› null è¡¨ç¤ºè¯»å–å®Œæ¯•ã€‚æœ€åï¼Œå…³é—­ BufferedReader å’Œ FileReaderã€‚</p><p>æ¥ä¸‹æ¥æ˜¯ NIO çš„ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NioFileDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">NioFileDemo</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioFileDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        demo<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        demo<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ä½¿ç”¨ NIO å†™å…¥æ–‡ä»¶</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;logs/itwanger/paicoding.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">FileChannel</span> fileChannel <span class="token operator">=</span> <span class="token class-name">FileChannel</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token class-name">EnumSet</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span><span class="token constant">CREATE</span><span class="token punctuation">,</span> <span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span><span class="token constant">WRITE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">ByteBuffer</span> buffer <span class="token operator">=</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;å­¦ç¼–ç¨‹å°±ä¸ŠæŠ€æœ¯æ´¾&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fileChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥å®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fileChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ä½¿ç”¨ NIO è¯»å–æ–‡ä»¶</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;logs/itwanger/paicoding.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">FileChannel</span> fileChannel <span class="token operator">=</span> <span class="token class-name">FileChannel</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span><span class="token constant">READ</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ByteBuffer</span> buffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">int</span> bytesRead <span class="token operator">=</span> fileChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>bytesRead <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–çš„å†…å®¹: &quot;</span> <span class="token operator">+</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                bytesRead <span class="token operator">=</span> fileChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            fileChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,28),g={href:"https://javabetter.cn/nio/buffer-channel.html",target:"_blank",rel:"noopener noreferrer"},O=n("code",null,"writeFile()",-1),I=n("code",null,"fileChannel.write()",-1),y=n("code",null,"readFile()",-1),w=n("code",null,"fileChannel.read()",-1),B=p(`<p>ä½¿ç”¨ AIO å®ç°æ–‡ä»¶çš„è¯»å–å’Œå†™å…¥</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AioDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">AioDemo</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AioDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        demo<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        demo<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ä½¿ç”¨ AsynchronousFileChannel å†™å…¥æ–‡ä»¶</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä½¿ç”¨ Paths.get() è·å–æ–‡ä»¶è·¯å¾„</span>
        <span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;logs/itwanger/paicoding.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// ç”¨ AsynchronousFileChannel.open() æ‰“å¼€æ–‡ä»¶é€šé“ï¼ŒæŒ‡å®šå†™å…¥å’Œåˆ›å»ºæ–‡ä»¶çš„é€‰é¡¹ã€‚</span>
            <span class="token class-name">AsynchronousFileChannel</span> fileChannel <span class="token operator">=</span> <span class="token class-name">AsynchronousFileChannel</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span><span class="token constant">WRITE</span><span class="token punctuation">,</span> <span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span><span class="token constant">CREATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// å°†è¦å†™å…¥çš„å­—ç¬¦ä¸²ï¼ˆ&quot;å­¦ç¼–ç¨‹å°±ä¸ŠæŠ€æœ¯æ´¾&quot;ï¼‰è½¬æ¢ä¸º ByteBufferã€‚</span>
            <span class="token class-name">ByteBuffer</span> buffer <span class="token operator">=</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;å­¦ç¼–ç¨‹å°±ä¸ŠæŠ€æœ¯æ´¾&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è°ƒç”¨ fileChannel.write() æ–¹æ³•å°† ByteBuffer ä¸­çš„å†…å®¹å†™å…¥æ–‡ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ Future å¯¹è±¡ç­‰å¾…å†™å…¥æ“ä½œå®Œæˆã€‚</span>
            <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> fileChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç­‰å¾…å†™æ“ä½œå®Œæˆ</span>
            result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥å®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fileChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> <span class="token operator">|</span> <span class="token class-name">InterruptedException</span> <span class="token operator">|</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ä½¿ç”¨ AsynchronousFileChannel è¯»å–æ–‡ä»¶</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;logs/itwanger/paicoding.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// æŒ‡å®šè¯»å–æ–‡ä»¶çš„é€‰é¡¹ã€‚</span>
            <span class="token class-name">AsynchronousFileChannel</span> fileChannel <span class="token operator">=</span> <span class="token class-name">AsynchronousFileChannel</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token class-name">StandardOpenOption</span><span class="token punctuation">.</span><span class="token constant">READ</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ByteBufferï¼Œç”¨äºå­˜å‚¨ä»æ–‡ä»¶ä¸­è¯»å–çš„æ•°æ®ã€‚</span>
            <span class="token class-name">ByteBuffer</span> buffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// è°ƒç”¨ fileChannel.read() æ–¹æ³•ä»æ–‡ä»¶ä¸­å¼‚æ­¥è¯»å–æ•°æ®ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ª CompletionHandler å¯¹è±¡ï¼Œç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œå®Œæˆåçš„å›è°ƒã€‚</span>
            fileChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CompletionHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">completed</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> result<span class="token punctuation">,</span> <span class="token class-name">ByteBuffer</span> attachment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// åœ¨ CompletionHandler çš„ completed() æ–¹æ³•ä¸­ï¼Œç¿»è½¬ ByteBufferï¼ˆattachment.flip()ï¼‰ï¼Œç„¶åä½¿ç”¨ Charset.forName(&quot;UTF-8&quot;).decode() å°†å…¶è§£ç ä¸ºå­—ç¬¦ä¸²å¹¶æ‰“å°ã€‚æœ€åï¼Œæ¸…ç©ºç¼“å†²åŒºå¹¶å…³é—­æ–‡ä»¶é€šé“ã€‚</span>
                    attachment<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–çš„å†…å®¹: &quot;</span> <span class="token operator">+</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>attachment<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    attachment<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        fileChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>

                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">failed</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> exc<span class="token punctuation">,</span> <span class="token class-name">ByteBuffer</span> attachment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// å¦‚æœå¼‚æ­¥è¯»å–æ“ä½œå¤±è´¥ï¼ŒCompletionHandler çš„ failed() æ–¹æ³•å°†è¢«è°ƒç”¨ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–å¤±è´¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    exc<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> <span class="token operator">|</span> <span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç å±•ç¤ºäº†ä¸€ä¸ªåä¸º AioDemo çš„ç±»ï¼ŒåŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼š<code>writeFile()</code> å’Œ <code>readFile()</code>ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«ä½¿ç”¨ AsynchronousFileChannel å¯¹æ–‡ä»¶è¿›è¡Œå¼‚æ­¥å†™å…¥å’Œè¯»å–æ“ä½œã€‚ä»£ç çš„å…·ä½“å«ä¹‰æˆ‘éƒ½åŠ åˆ°æ³¨é‡Šå½“ä¸­äº†ï¼Œæ³¨æ„æŸ¥çœ‹ã€‚</p><p>æ»´æ»´æ»´ï¼Œæ°´å¼€äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/io/BIONIOAIO-22.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/io/BIONIOAIO-23.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“" aria-hidden="true">#</a> å°ç»“</h3><p>BIOï¼ˆBlocking I/Oï¼‰ï¼šé‡‡ç”¨é˜»å¡å¼ I/O æ¨¡å‹ï¼Œçº¿ç¨‹åœ¨æ‰§è¡Œ I/O æ“ä½œæ—¶è¢«é˜»å¡ï¼Œæ— æ³•å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œé€‚ç”¨äºè¿æ¥æ•°è¾ƒå°‘ä¸”ç¨³å®šçš„åœºæ™¯ã€‚</p><p>NIOï¼ˆNew I/O æˆ– Non-blocking I/Oï¼‰ï¼šä½¿ç”¨éé˜»å¡ I/O æ¨¡å‹ï¼Œçº¿ç¨‹åœ¨ç­‰å¾… I/O æ—¶å¯æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œé€šè¿‡ Selector ç›‘æ§å¤šä¸ª Channel ä¸Šçš„äº‹ä»¶ï¼Œæé«˜æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§ï¼Œé€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯ã€‚</p><p>AIOï¼ˆAsynchronous I/Oï¼‰ï¼šé‡‡ç”¨å¼‚æ­¥ I/O æ¨¡å‹ï¼Œçº¿ç¨‹å‘èµ· I/O è¯·æ±‚åç«‹å³è¿”å›ï¼Œå½“ I/O æ“ä½œå®Œæˆæ—¶é€šè¿‡å›è°ƒå‡½æ•°é€šçŸ¥çº¿ç¨‹ï¼Œè¿›ä¸€æ­¥æé«˜äº†å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œé€‚ç”¨äºé«˜ååé‡åœºæ™¯ã€‚</p>`,10),_={href:"https://mp.weixin.qq.com/s/QQxrr5yP8X9YdFqIwXDoQQ",target:"_blank",rel:"noopener noreferrer"},F=n("hr",null,null,-1),x={href:"https://github.com/itwanger/toBeBetterJavaer",target:"_blank",rel:"noopener noreferrer"},q={href:"https://javabetter.cn/overview/",target:"_blank",rel:"noopener noreferrer"},j=n("p",null,[s("å¾®ä¿¡æœ "),n("strong",null,"æ²‰é»˜ç‹äºŒ"),s(" æˆ–æ‰«æä¸‹æ–¹äºŒç»´ç å…³æ³¨äºŒå“¥çš„åŸåˆ›å…¬ä¼—å·æ²‰é»˜ç‹äºŒï¼Œå›å¤ "),n("strong",null,"222"),s(" å³å¯å…è´¹é¢†å–ã€‚")],-1),C=n("figure",null,[n("img",{src:"https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1);function A(N,S){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("blockquote",null,[n("p",null,[s("ä¸Šç¯‡ï¼Œæˆ‘ä»¬äº†è§£äº† "),n("a",k,[s("NIO å’Œä¼ ç»Ÿ IO çš„åŒºåˆ«"),t(a)]),s("ï¼Œé‚£è¿™ç¯‡æˆ‘ä»¬æ¥äº†è§£ BIOã€NIO å’Œ AIO çš„åŒºåˆ«ï¼Œæ–°æ‰‹ä¹Ÿå¾ˆå®¹æ˜“æ··æ·†ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªæ–¹å¼æ¥è®²ï¼Œè®²ç»™å¥³æœ‹å‹å¬ğŸ‘‚ã€‚")])]),r,n("p",null,[s("åœ¨ Java ä¸­ï¼Œæä¾›äº†ä¸€ç³»åˆ— APIï¼Œå¯ä»¥ä¾›å¼€å‘è€…æ¥è¯»å†™å¤–éƒ¨æ•°æ®æˆ–æ–‡ä»¶ã€‚æˆ‘ä»¬ç§°è¿™äº› API ä¸º "),n("a",d,[s("Java IO"),t(a)]),s("ã€‚")]),v,m,n("p",null,[n("a",b,[s("Java NIO"),t(a)]),s("ï¼Œå…¨ç¨‹ Non-Block IO ï¼Œæ˜¯ Java SE 1.4 ç‰ˆä»¥åï¼Œé’ˆå¯¹ç½‘ç»œä¼ è¾“æ•ˆèƒ½ä¼˜åŒ–çš„æ–°åŠŸèƒ½ã€‚æ˜¯ä¸€ç§"),f,s("çš„é€šä¿¡æ¨¡å¼ã€‚")]),h,n("p",null,[s("è¿™ä¸ªç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ NIO çš„ "),n("a",g,[s("FileChannel"),t(a)]),s(" å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œã€‚åœ¨ "),O,s(" æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ‰“å¼€æ–‡ä»¶é€šé“å¹¶æŒ‡å®šåˆ›å»ºå’Œå†™å…¥é€‰é¡¹ã€‚æ¥ç€ï¼Œå°†è¦å†™å…¥çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º ByteBufferï¼Œç„¶åä½¿ç”¨ "),I,s(" æ–¹æ³•å°†å…¶å†™å…¥æ–‡ä»¶ã€‚åœ¨ "),y,s(" æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ‰“å¼€æ–‡ä»¶é€šé“å¹¶æŒ‡å®šè¯»å–é€‰é¡¹ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª ByteBuffer ç”¨äºå­˜å‚¨è¯»å–åˆ°çš„æ•°æ®ã€‚ä½¿ç”¨ "),w,s(" æ–¹æ³•å¾ªç¯è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç›´åˆ°è¿”å› -1 è¡¨ç¤ºè¯»å–å®Œæ¯•ã€‚åœ¨å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬ç¿»è½¬ç¼“å†²åŒºï¼Œå°†å…¶è§£ç ä¸ºå­—ç¬¦ä¸²å¹¶æ‰“å°ï¼Œç„¶åæ¸…ç©ºç¼“å†²åŒºä»¥è¿›è¡Œä¸‹ä¸€æ¬¡è¯»å–ã€‚æœ€åï¼Œå…³é—­æ–‡ä»¶é€šé“ã€‚")]),B,n("blockquote",null,[n("p",null,[s("å‚è€ƒé“¾æ¥ï¼š"),n("a",_,[s("https://mp.weixin.qq.com/s/QQxrr5yP8X9YdFqIwXDoQQ"),t(a)])])]),F,n("p",null,[s("GitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„å¼€æºçŸ¥è¯†åº“ã€Š"),n("a",x,[s("äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯"),t(a)]),s("ã€‹ç¬¬ä¸€ç‰ˆ PDF ç»ˆäºæ¥äº†ï¼åŒ…æ‹¬JavaåŸºç¡€è¯­æ³•ã€æ•°ç»„&å­—ç¬¦ä¸²ã€OOPã€é›†åˆæ¡†æ¶ã€Java IOã€å¼‚å¸¸å¤„ç†ã€Java æ–°ç‰¹æ€§ã€ç½‘ç»œç¼–ç¨‹ã€NIOã€å¹¶å‘ç¼–ç¨‹ã€JVMç­‰ç­‰ï¼Œå…±è®¡ 32 ä¸‡ä½™å­—ï¼Œ500+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯é€šä¿—æ˜“æ‡‚ã€é£è¶£å¹½é»˜â€¦â€¦è¯¦æƒ…æˆ³ï¼š"),n("a",q,[s("å¤ªèµäº†ï¼ŒGitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„ Java æ•™ç¨‹"),t(a)])]),j,C])}const J=e(i,[["render",A],["__file","BIONIOAIO.html.vue"]]);export{J as default};
