import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as l,a as n,d as a,b as e,e as t}from"./app-72970f25.js";const i={},r=t('<h1 id="mysql-è¡¨çš„åŸºæœ¬æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#mysql-è¡¨çš„åŸºæœ¬æ“ä½œ" aria-hidden="true">#</a> MySQL è¡¨çš„åŸºæœ¬æ“ä½œ</h1><p>æœ‰äº†æ•°æ®åº“ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ•°æ®åº“ä¸­å¯¹è¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥äº†ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œä¸€åçœŸæ­£çš„ CRUD Boy å³å°†åˆ°æ¥ï¼ˆğŸ˜ï¼‰ã€‚</p><h2 id="æŸ¥è¡¨" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¡¨" aria-hidden="true">#</a> æŸ¥è¡¨</h2><p>æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>show tables;</code> å‘½ä»¤ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127180015.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç”±äºå½“å‰æ•°æ®åº“ä¸­è¿˜æ²¡æœ‰è¡¨ï¼Œæ‰€ä»¥è¾“å‡º <code>Empty set</code>ã€‚</p><h3 id="ä¸æŒ‡å®šæ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#ä¸æŒ‡å®šæ•°æ®åº“" aria-hidden="true">#</a> ä¸æŒ‡å®šæ•°æ®åº“</h3>',7),u={href:"https://javabetter.cn/mysql/database.html",target:"_blank",rel:"noopener noreferrer"},d=n("code",null,"use æ•°æ®åº“å;",-1),k=t(`<p>é‚£å‡å¦‚ä¸æŒ‡å®šæ•°æ®åº“çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>show tables from database</code> çš„æ–¹å¼ï¼Œæ¥æŒ‡å®šè¦æ“ä½œçš„è¡¨ï¼Œä¾‹å¦‚ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span> <span class="token keyword">from</span> itwanger<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127183044.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p>å¯ä»¥åœ¨å»ºè¡¨åå†å°è¯•å“ˆã€‚</p></blockquote><h2 id="å»ºè¡¨" tabindex="-1"><a class="header-anchor" href="#å»ºè¡¨" aria-hidden="true">#</a> å»ºè¡¨</h2><p>æ—¢ç„¶æ²¡æœ‰è¡¨ï¼Œé‚£æˆ‘ä»¬å°±åˆ›å»ºä¸€å¼ è¡¨å§ã€‚åˆ›å»ºè¡¨çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> è¡¨å<span class="token punctuation">(</span>
    åˆ—å<span class="token number">1</span> æ•°æ®ç±»å‹<span class="token number">1</span><span class="token punctuation">,</span>
    åˆ—å<span class="token number">2</span> æ•°æ®ç±»å‹<span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    åˆ—ån æ•°æ®ç±»å‹n
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€å¼ æ–‡ç« è¡¨ï¼Œè¡¨ä¸­åŒ…å«æ–‡ç« çš„æ ‡é¢˜ã€å†…å®¹ã€ä½œè€…ã€å‘å¸ƒæ—¶é—´ã€é˜…è¯»é‡ç­‰ä¿¡æ¯ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·åˆ›å»ºï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> article<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    content <span class="token keyword">text</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    author <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    create_time <span class="token keyword">datetime</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    read_count <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>article æ˜¯è¡¨åï¼›</li><li>id æ˜¯ä¸»é”®ï¼Œç±»å‹ä¸º intï¼Œè‡ªå¢é•¿ï¼›</li><li>title æ˜¯æ ‡é¢˜ï¼Œç±»å‹ä¸º varcharï¼Œé•¿åº¦ä¸º 100ï¼Œä¸å…è®¸ä¸ºç©ºï¼›</li><li>content æ˜¯å†…å®¹ï¼Œç±»å‹ä¸º textï¼Œä¸å…è®¸ä¸ºç©ºï¼›</li><li>author æ˜¯ä½œè€…ï¼Œç±»å‹ä¸º varcharï¼Œé•¿åº¦ä¸º 20ï¼Œä¸å…è®¸ä¸ºç©ºï¼›</li><li>create_time æ˜¯å‘å¸ƒæ—¶é—´ï¼Œç±»å‹ä¸º datetimeï¼Œä¸å…è®¸ä¸ºç©ºï¼›</li><li>read_count æ˜¯é˜…è¯»é‡ï¼Œç±»å‹ä¸º intï¼Œé»˜è®¤å€¼ä¸º 0ã€‚</li></ul><p>æ‰§è¡Œä¸Šè¿°è¯­å¥åï¼Œå¯ä»¥ä½¿ç”¨ <code>show tables;</code> å‘½ä»¤æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå·²ç»åˆ›å»ºäº†ä¸€å¼  article è¡¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127180502.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å½“ç„¶äº†ï¼Œå®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¸ä¼šç›´æ¥é€šè¿‡ SQL è¯­å¥æ¥åˆ›å»ºè¡¨ï¼Œè€Œæ˜¯é€šè¿‡ä¸€äº›å»ºè¡¨çš„å·¥å…·ï¼Œæ¯”å¦‚è¯´ Navicatã€DataGrip ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127180836.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»¥åŠ PowerDesignerã€chiner è¿™ç§å»ºæ¨¡å·¥å…·ï¼Œå…³äºå·¥å…·çš„ä½¿ç”¨ï¼Œå¯ä»¥æˆ³è¿™ç¯‡å¸–å­ï¼š</p>`,15),m={href:"https://javabetter.cn/gongju/chiner.html",target:"_blank",rel:"noopener noreferrer"},v=t(`<h3 id="ç»™è¡¨æ·»åŠ æ³¨é‡Š" tabindex="-1"><a class="header-anchor" href="#ç»™è¡¨æ·»åŠ æ³¨é‡Š" aria-hidden="true">#</a> ç»™è¡¨æ·»åŠ æ³¨é‡Š</h3><p>åœ¨å»ºè¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç»™è¡¨æ·»åŠ æ³¨é‡Šï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> è¡¨å<span class="token punctuation">(</span>
    åˆ—å<span class="token number">1</span> æ•°æ®ç±»å‹<span class="token number">1</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ³¨é‡Š1&#39;</span><span class="token punctuation">,</span>
    åˆ—å<span class="token number">2</span> æ•°æ®ç±»å‹<span class="token number">2</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ³¨é‡Š2&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    åˆ—ån æ•°æ®ç±»å‹n <span class="token keyword">comment</span> <span class="token string">&#39;æ³¨é‡Šn&#39;</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;è¡¨æ³¨é‡Š&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åœ¨åæœŸç»´æŠ¤çš„æ—¶å€™ï¼Œèƒ½å¤Ÿæ›´å¥½çš„ç†è§£è¡¨çš„å«ä¹‰ã€‚</p><p>æˆ‘ä»¬æ¥ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›å­—æ®µçš„æ³¨é‡Šå’Œè¡¨æ³¨é‡Šï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> article<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">&#39;ä¸»é”®&#39;</span><span class="token punctuation">,</span>
    title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ ‡é¢˜&#39;</span><span class="token punctuation">,</span>
    content <span class="token keyword">text</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;å†…å®¹&#39;</span><span class="token punctuation">,</span>
    author <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;ä½œè€…&#39;</span><span class="token punctuation">,</span>
    create_time <span class="token keyword">datetime</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;å‘å¸ƒæ—¶é—´&#39;</span><span class="token punctuation">,</span>
    read_count <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token keyword">comment</span> <span class="token string">&#39;é˜…è¯»é‡&#39;</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ–‡ç« è¡¨&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‡å¦‚è¡¨å·²ç»å­˜åœ¨" tabindex="-1"><a class="header-anchor" href="#å‡å¦‚è¡¨å·²ç»å­˜åœ¨" aria-hidden="true">#</a> å‡å¦‚è¡¨å·²ç»å­˜åœ¨</h3><p>ç”±äºä¹‹å‰ article è¡¨å·²ç»åˆ›å»ºäº†ï¼Œè¿™æ—¶å€™å†æ‰§è¡Œä¸Šè¿°è¯­å¥ï¼Œå°±ä¼šæŠ¥é”™ <code>Table &#39;article&#39; already exists</code>ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127181331.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å»ºè¡¨çš„æ—¶å€™ï¼Œå…ˆåˆ¤æ–­è¡¨æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå†åˆ›å»ºè¡¨ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> è¡¨å<span class="token punctuation">(</span>
    åˆ—å<span class="token number">1</span> æ•°æ®ç±»å‹<span class="token number">1</span><span class="token punctuation">,</span>
    åˆ—å<span class="token number">2</span> æ•°æ®ç±»å‹<span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    åˆ—ån æ•°æ®ç±»å‹n
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®é™…çš„ä¾‹å­å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> article<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">&#39;ä¸»é”®&#39;</span><span class="token punctuation">,</span>
    title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ ‡é¢˜&#39;</span><span class="token punctuation">,</span>
    content <span class="token keyword">text</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;å†…å®¹&#39;</span><span class="token punctuation">,</span>
    author <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;ä½œè€…&#39;</span><span class="token punctuation">,</span>
    create_time <span class="token keyword">datetime</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;å‘å¸ƒæ—¶é—´&#39;</span><span class="token punctuation">,</span>
    read_count <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token keyword">comment</span> <span class="token string">&#39;é˜…è¯»é‡&#39;</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">&#39;æ–‡ç« è¡¨&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åˆ è¡¨" tabindex="-1"><a class="header-anchor" href="#åˆ è¡¨" aria-hidden="true">#</a> åˆ è¡¨</h2><p>åˆ é™¤è¡¨çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> è¡¨å<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åŒæ ·çš„ï¼Œåœ¨åˆ è¡¨çš„æ—¶å€™å°½é‡çœ¨çœ¨çœ¼ğŸ˜‚ï¼Œçœ‹çœ‹è‡ªå·±æ˜¯ä¸æ˜¯è¢«åäººç»™æ§åˆ¶äº†ï¼Œå¦åˆ™åˆæ˜¯â€œåˆ åº“è·‘è·¯â€çš„æ‚²å‰§ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127181740.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åŒæ ·ï¼Œåœ¨åˆ é™¤è¡¨çš„æ—¶å€™ä¹Ÿå¯ä»¥åŠ ä¸Š <code>if exists</code>ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> è¡¨å<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ ·å¯ä»¥é˜²æ­¢è¡¨ä¸å­˜åœ¨çš„æ—¶å€™ï¼ŒæŠ¥é”™ã€‚</p><h2 id="æŸ¥çœ‹è¡¨ç»“æ„" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹è¡¨ç»“æ„" aria-hidden="true">#</a> æŸ¥çœ‹è¡¨ç»“æ„</h2><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“è¡¨çš„ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä¹Ÿå°±æ˜¯ create table çš„æ—¶å€™åŒ…å«äº†å“ªäº›åˆ—ã€åˆ—æœ‰å“ªäº›å±æ€§ï¼Œé‚£è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¿™äº›å‘½ä»¤æŸ¥çœ‹ï¼š</p><ul><li><code>desc è¡¨å;</code></li><li><code>describe è¡¨å;</code></li><li><code>explain è¡¨å;</code></li><li><code>show columns from è¡¨å;</code></li><li><code>show fields from è¡¨å;</code></li></ul><p>ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œè®°ä½å…¶ä¸­çš„ä¸€ä¸ªå°±è¡Œäº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127182413.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿˜æœ‰ä¸€ä¸ªå‘½ä»¤ <code>show create table è¡¨å;</code>ï¼Œå¯ä»¥æŸ¥çœ‹å»ºè¡¨è¯­å¥ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127182525.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>`,28),b={href:"https://javabetter.cn/mysql/data-type.html",target:"_blank",rel:"noopener noreferrer"},g=t(`<p>é‚£å‡å¦‚æ²¡æœ‰ä½¿ç”¨ <code>use æ•°æ®åº“å;</code> å‘½ä»¤æŒ‡å®šè¦æ“ä½œçš„æ•°æ®åº“ï¼Œé‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>show columns from æ•°æ®åº“å.è¡¨å;</code> çš„æ–¹å¼ï¼Œæ¥æŸ¥çœ‹è¡¨çš„ç»“æ„ï¼Œä¾‹å¦‚ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> itwanger<span class="token punctuation">.</span>article<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>;</code> ç»“å°¾æŸ¥è¯¢åˆ°çš„ä¿¡æ¯æ ¼å¼æ¯”è¾ƒä¹±ï¼Œå¯ä»¥é€šè¿‡ <code> \\G</code> æ¥æ ¼å¼åŒ–è¾“å‡ºï¼Œä¾‹å¦‚ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> itwanger<span class="token punctuation">.</span>article \\G<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127183428.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="æ”¹è¡¨" tabindex="-1"><a class="header-anchor" href="#æ”¹è¡¨" aria-hidden="true">#</a> æ”¹è¡¨</h2><p>é€šå¸¸æ¥è¯´ï¼Œåˆ›å»ºè¡¨ä¹‹å‰å°±è¦åšå¥½å……åˆ†çš„è®¾è®¡ï¼Œå°½é‡å¢åŠ ä¸€äº›å†—ä½™å­—æ®µæ¥åº”å¯¹æœªæ¥çš„éœ€æ±‚å˜æ›´ï¼Œè¿™æ ·æ•´ä¸ªç¨‹åºçš„æ”¹åŠ¨é‡æ˜¯æœ€å°çš„ï¼Œä¹Ÿä¸å®¹æ˜“å‡ºç° bugã€‚</p><p>å› ä¸ºæ”¹åŠ¨è¡¨çš„ç»“æ„ï¼Œå°±æ„å‘³ç€å¯¹åº”çš„ SQL è¯­å¥è¦æ”¹ã€ç¨‹åºçš„é€»è¾‘ä»£ç è¦æ”¹ã€æµ‹è¯•ç”¨ä¾‹è¦æ”¹ï¼Œå¾ˆå®¹æ˜“å‡ºç°é—æ¼ï¼Œå¯¼è‡´ç¨‹åºå‡ºç°æ„æ–™ä¹‹å¤–çš„ bugã€‚</p><p>æ‰€ä»¥ï¼Œè¯¥è¡¨æ“ä½œä¸€å®šè¦æ…é‡ã€‚</p><p>ä½†åˆä¸èƒ½è¿‡åº¦è®¾è®¡è¡¨ï¼Œå› ä¸ºè¿‡åº¦è®¾è®¡ä¼šå¯¼è‡´è¡¨ç»“æ„è¿‡äºå¤æ‚ï¼Œå¢åŠ äº†ç»´æŠ¤æˆæœ¬ï¼Œè€Œä¸”ä¹Ÿä¸åˆ©äºåæœŸçš„æ‰©å±•ã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>æ”¹è¡¨æ“ä½œä¹Ÿæ˜¯ä¸€é—¨å­¦é—®ï¼Œéœ€è¦å¤§å®¶åœ¨å®é™…å·¥ä½œä¸­æ…¢æ…¢ä½“ä¼š</strong>ã€‚</p><h3 id="å¢åŠ å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#å¢åŠ å­—æ®µ" aria-hidden="true">#</a> å¢åŠ å­—æ®µ</h3><p>é€šå¸¸æ¥è¯´ï¼Œå¢åŠ å­—æ®µæ˜¯æ”¹è¡¨æ“ä½œä¸­æœ€å¸¸è§çš„æ“ä½œï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> è¡¨å <span class="token keyword">add</span> åˆ—å æ•°æ®ç±»å‹<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦ç»™ article è¡¨å¢åŠ ä¸€ä¸ª <code>update_time</code> å­—æ®µï¼Œç±»å‹ä¸º datetimeï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> article <span class="token keyword">add</span> update_time <span class="token keyword">datetime</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127195547.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="å¢åŠ å­—æ®µçš„ä½ç½®" tabindex="-1"><a class="header-anchor" href="#å¢åŠ å­—æ®µçš„ä½ç½®" aria-hidden="true">#</a> å¢åŠ å­—æ®µçš„ä½ç½®</h4><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç»™ article è¡¨å¢åŠ äº†ä¸€ä¸ª <code>update_time</code> å­—æ®µï¼Œä½†æ˜¯è¿™ä¸ªå­—æ®µæ˜¯æ·»åŠ åˆ°äº†æœ€åï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ·»åŠ åˆ°æŸä¸ªå­—æ®µçš„å‰é¢ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> article <span class="token keyword">add</span> update_time <span class="token keyword">datetime</span> <span class="token keyword">after</span> create_time<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127195838.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="åˆ é™¤å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤å­—æ®µ" aria-hidden="true">#</a> åˆ é™¤å­—æ®µ</h3><p>åˆ é™¤å­—æ®µçš„è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> è¡¨å <span class="token keyword">drop</span> åˆ—å<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦åˆ é™¤ article è¡¨ä¸­çš„ <code>update_time</code> å­—æ®µï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> article <span class="token keyword">drop</span> update_time<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ä¿®æ”¹å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹å­—æ®µ" aria-hidden="true">#</a> ä¿®æ”¹å­—æ®µ</h3><p>ä¿®æ”¹å­—æ®µå‘ç”Ÿçš„é¢‘ç‡å…¶å®å¾ˆä½ï¼Œæ¯•ç«Ÿè®¾è®¡çš„æ—¶å€™ï¼Œéƒ½æ˜¯ç»è¿‡æ·±æ€ç†Ÿè™‘çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™ï¼Œä¹Ÿä¼šå› ä¸ºä¸€äº›åŸå› ï¼Œéœ€è¦ä¿®æ”¹å­—æ®µï¼Œæ¯”å¦‚è¯´å­—æ®µç±»å‹ã€å­—æ®µé•¿åº¦ç­‰ã€‚</p><p>ä¿®æ”¹å­—æ®µçš„è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> è¡¨å <span class="token keyword">modify</span> åˆ—å æ•°æ®ç±»å‹<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹ article è¡¨ä¸­çš„ <code>title</code> å­—æ®µï¼Œå°†ç±»å‹ä» varchar(100) ä¿®æ”¹ä¸º varchar(200)ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> article <span class="token keyword">modify</span> title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¡¨ä¸­å·²ç»å­˜åœ¨æ•°æ®äº†ï¼Œé‚£ä¹ˆä¿®æ”¹è¡¨çš„æ—¶å€™å°±è¦æ ¼å¤–æ³¨æ„ï¼Œæ¯”å¦‚è¯´åŸæ¥çš„ <code>title</code> å­—æ®µçš„é•¿åº¦æ˜¯ 100ï¼Œç°åœ¨ä¿®æ”¹ä¸º 10ï¼Œé‚£ä¹ˆå°±å®¹çº³ä¸ä¸‹åŸæ¥çš„æ•°æ®äº†ï¼Œè¿™æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚</p>`,33),h={href:"https://javabetter.cn/mysql/install.html",target:"_blank",rel:"noopener noreferrer"},y=t(`<h3 id="ä¿®æ”¹å­—æ®µå" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹å­—æ®µå" aria-hidden="true">#</a> ä¿®æ”¹å­—æ®µå</h3><p>æœ‰æ—¶å€™ï¼Œå¯èƒ½æˆ‘ä»¬è®¾è®¡è¡¨å­—æ®µçš„æ—¶å€™çŠ¯äº†è ¢ï¼Œå­—æ®µåèµ·çš„ä¸å¤ªå¥½ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä¿®æ”¹å­—æ®µåäº†ã€‚ä¿®æ”¹å­—æ®µåçš„è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> è¡¨å change åŸåˆ—å æ–°åˆ—å æ•°æ®ç±»å‹<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹ article è¡¨ä¸­çš„ <code>title</code> å­—æ®µåä¸º <code>article_title</code>ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> article change title article_title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127200813.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="ä¿®æ”¹è¡¨å" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹è¡¨å" aria-hidden="true">#</a> ä¿®æ”¹è¡¨å</h3><p>åŒæ ·çš„ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹è¡¨åæ—¶ï¼Œå¯è¿™ä¹ˆåšï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> åŸè¡¨å <span class="token keyword">rename</span> æ–°è¡¨å<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦å°† article è¡¨åä¿®æ”¹ä¸º article_infoï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> article <span class="token keyword">rename</span> article_info<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127200946.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="æŠ€æœ¯æ´¾çš„è¡¨è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#æŠ€æœ¯æ´¾çš„è¡¨è®¾è®¡" aria-hidden="true">#</a> æŠ€æœ¯æ´¾çš„è¡¨è®¾è®¡</h2>`,13),w={href:"https://javabetter.cn/zhishixingqiu/paicoding.html",target:"_blank",rel:"noopener noreferrer"},f={href:"https://javabetter.cn/zhishixingqiu/paicoding.html",target:"_blank",rel:"noopener noreferrer"},q=n("figure",null,[n("img",{src:"https://cdn.tobebetterjavaer.com/stutymore/table-20240127201143.png",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),_=n("p",null,"æ•´ä¸ªåº“è¡¨çš„è®¾è®¡ï¼Œé¦–å…ˆè¦å…ˆå˜æ¸…æ¥šä¸šåŠ¡å’Œéœ€æ±‚ï¼Œç„¶åå†è¿›è¡Œè®¾è®¡ï¼Œè¿™æ ·æ‰èƒ½åšåˆ°åˆç†ã€é«˜æ•ˆã€‚",-1),x=n("h3",{id:"æŠ€æœ¯æ´¾æ˜¯å¦‚ä½•åˆå§‹åŒ–è¡¨çš„",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#æŠ€æœ¯æ´¾æ˜¯å¦‚ä½•åˆå§‹åŒ–è¡¨çš„","aria-hidden":"true"},"#"),a(" æŠ€æœ¯æ´¾æ˜¯å¦‚ä½•åˆå§‹åŒ–è¡¨çš„ï¼Ÿ")],-1),S=n("p",null,"æŠ€æœ¯æ´¾çš„è¡¨åˆå§‹åŒ–æ˜¯å€ŸåŠ© Liquibase æ¥å®ç°çš„ï¼Œå…·ä½“å®ç°çš„æ–¹æ³•æˆ‘æ”¾åœ¨äº†æŠ€æœ¯æ´¾çš„æ•™ç¨‹é‡Œï¼Œå¤§å®¶å¯ä»¥é€šè¿‡è¿™ä¸ªé“¾æ¥è·å–æŠ€æœ¯æ´¾å®æˆ˜æ•™ç¨‹ã€‚",-1),j={href:"https://javabetter.cn/zhishixingqiu/paicoding.html",target:"_blank",rel:"noopener noreferrer"},D=n("figure",null,[n("img",{src:"https://cdn.tobebetterjavaer.com/stutymore/table-20240127203938.png",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),z={href:"https://www.liquibase.org/",target:"_blank",rel:"noopener noreferrer"},P=t(`<p>è¿™é‡Œæˆ‘ç»™å¤§å®¶ç•™ä¸¤ä¸ªå°çš„ä½œä¸šï¼š</p><ul><li>ç¬¬ä¸€ï¼Œåœ¨ä¸ä½¿ç”¨ liquibase çš„æƒ…å†µä¸‹ï¼Œå®ç°è¡¨çš„åˆå§‹åŒ–ã€‚</li><li>ç¬¬äºŒï¼Œå€ŸåŠ© liquibaseï¼Œå®ç°è¡¨çš„åˆå§‹åŒ–ã€‚</li></ul><p>æˆ‘è¿™é‡Œåªä»‹ç»ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œç¬¬äºŒç§æ–¹æ³•å¤§å®¶å¯ä»¥ç§»æ­¥åˆ°æŠ€æœ¯æ´¾çš„æ•™ç¨‹ä¸­æŸ¥çœ‹ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ForumDataSourceInitializerTest</span> <span class="token keyword">extends</span> <span class="token class-name">BasicTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:liquibase/data/init_schema_221209.sql&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Resource</span> schemaSql<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:liquibase/data/init_data_221209.sql&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Resource</span> initData<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dataSourceInitializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">DataSource</span> dataSource <span class="token operator">=</span> <span class="token function">createCustomDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">DataSourceInitializer</span> initializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceInitializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½®æ•°æ®æº</span>
        initializer<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        initializer<span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">ResourceDatabasePopulator</span> populator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResourceDatabasePopulator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        populator<span class="token punctuation">.</span><span class="token function">addScript</span><span class="token punctuation">(</span>schemaSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        populator<span class="token punctuation">.</span><span class="token function">addScript</span><span class="token punctuation">(</span>initData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        initializer<span class="token punctuation">.</span><span class="token function">setDatabasePopulator</span><span class="token punctuation">(</span>populator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        initializer<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">DataSource</span> <span class="token function">createCustomDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">DriverManagerDataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DriverManagerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/itwanger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹å¤§å®¶å¯èƒ½æ¯”è¾ƒé™Œç”Ÿçš„ä»£ç ï¼š</p><p>â‘ ã€é€šè¿‡ <code>@Value</code> æ³¨è§£ï¼Œå°† <code>init_schema_221209.sql</code> å’Œ <code>init_data_221209.sql</code> æ–‡ä»¶åŠ è½½åˆ° Resource å¯¹è±¡ä¸­ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:liquibase/data/init_schema_221209.sql&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Resource</span> schemaSql<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:liquibase/data/init_data_221209.sql&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Resource</span> initData<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>schema.sql ä¸ºè¡¨ç»“æ„æ–‡ä»¶ï¼Œdata.sql ä¸ºè¡¨æ•°æ®æ–‡ä»¶ã€‚</p><p>â‘¡ã€createCustomDataSource æ–¹æ³•ç”¨äºåˆ›å»ºæ•°æ®æºï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ Spring æä¾›çš„ DriverManagerDataSourceï¼Œå½“ç„¶äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ DruidDataSourceã€HikariDataSource ç­‰ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">DataSource</span> <span class="token function">createCustomDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">DriverManagerDataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DriverManagerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/itwanger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â‘¢ã€ResourceDatabasePopulator æ˜¯ç”¨äºå¡«å……æ•°æ®åº“çš„å·¥å…·ç±»ï¼Œå®ç°äº† DatabasePopulator æ¥å£ã€‚ä¸»è¦ç”¨äºæ‰§è¡Œ SQL è„šæœ¬æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å¯ä»¥åŒ…å«åˆ›å»ºè¡¨ã€æ’å…¥æ•°æ®ç­‰ SQL å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯å‰é¢æåˆ°çš„ schema.sql å’Œ data.sqlã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">ResourceDatabasePopulator</span> populator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResourceDatabasePopulator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
populator<span class="token punctuation">.</span><span class="token function">addScript</span><span class="token punctuation">(</span>schemaSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
populator<span class="token punctuation">.</span><span class="token function">addScript</span><span class="token punctuation">(</span>initData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â‘£ã€DataSourceInitializer ç”¨äºåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–æ•°æ®åº“ã€‚é€šè¿‡æ‰§è¡Œ SQL è„šæœ¬æ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">DataSourceInitializer</span> initializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceInitializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è®¾ç½®æ•°æ®æº</span>
initializer<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è®¾ç½®æ˜¯å¦å¯ç”¨åˆå§‹åŒ–</span>
initializer<span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è®¾ç½®å¡«å……æ•°æ®åº“çš„å·¥å…·ç±»</span>
initializer<span class="token punctuation">.</span><span class="token function">setDatabasePopulator</span><span class="token punctuation">(</span>populator<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ‰§è¡Œåˆå§‹åŒ–</span>
initializer<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œè¯¥æµ‹è¯•ç±»åï¼Œå¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å¯¹åº”çš„æ—¥å¿—ä¿¡æ¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127214129.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç„¶åé€šè¿‡ <code>show tables;</code> å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®åº“ä¸­å·²ç»åˆ›å»ºäº†å¯¹åº”çš„è¡¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/table-20240127214230.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>`,18),L={href:"https://github.com/itwanger/paicoding/blob/main/paicoding-web/src/test/java/com/github/paicoding/forum/test/mysql1/ForumDataSourceInitializerTest.java",target:"_blank",rel:"noopener noreferrer"},I=n("h2",{id:"å°ç»“",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å°ç»“","aria-hidden":"true"},"#"),a(" å°ç»“")],-1),R=n("p",null,"æœ¬ç¯‡æˆ‘ä»¬ä¸»è¦è®²è§£äº† MySQL è¡¨çš„åŸºæœ¬æ“ä½œï¼ŒåŒ…æ‹¬æŸ¥è¡¨ã€å»ºè¡¨ã€åˆ è¡¨ã€æŸ¥çœ‹è¡¨ç»“æ„ã€æ”¹è¡¨ç­‰ã€‚",-1),V=n("p",null,"å¹¶ç»“åˆæŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®ï¼Œè®²è§£äº†å¦‚ä½•åœ¨ Spring Boot ä¸­åˆå§‹åŒ–æ•°æ®è¡¨ã€‚",-1),C=n("p",null,"å¸Œæœ›å¤§å®¶éƒ½èƒ½åŠ¨æ‰‹å®ç°ä¸€æ ·ï¼Œè¿™æ ·æ‰èƒ½æŒæ¡çœŸæ­£çš„è¡¨å¢åˆ æ”¹æŸ¥æ“ä½œã€‚",-1),M=n("hr",null,null,-1),B={href:"https://github.com/itwanger/toBeBetterJavaer",target:"_blank",rel:"noopener noreferrer"},N={href:"https://javabetter.cn/overview/",target:"_blank",rel:"noopener noreferrer"},Q=n("p",null,[a("å¾®ä¿¡æœ "),n("strong",null,"æ²‰é»˜ç‹äºŒ"),a(" æˆ–æ‰«æä¸‹æ–¹äºŒç»´ç å…³æ³¨äºŒå“¥çš„åŸåˆ›å…¬ä¼—å·æ²‰é»˜ç‹äºŒï¼Œå›å¤ "),n("strong",null,"222"),a(" å³å¯å…è´¹é¢†å–ã€‚")],-1),E=n("figure",null,[n("img",{src:"https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1);function J(T,U){const s=o("ExternalLinkIcon");return c(),l("div",null,[r,n("p",null,[n("a",u,[a("ä¸Šä¸€èŠ‚"),e(s)]),a("ï¼Œæˆ‘ä»¬æåˆ°ï¼Œåœ¨æ“ä½œè¡¨ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡ "),d,a(" å‘½ä»¤ï¼ŒæŒ‡å®šè¦æ“ä½œçš„æ•°æ®åº“ã€‚")]),k,n("ul",null,[n("li",null,[n("a",m,[a("ä¸€æ¬¾å›½äººå¼€æºçš„æ•°æ®åº“è®¾è®¡å·¥å…·"),e(s)])])]),v,n("p",null,[a("å…³äº"),n("a",b,[a("è¡¨çš„æ•°æ®ç±»å‹"),e(s)]),a("ï¼Œæ¯”å¦‚è¯´ intã€varcharã€datetime ç­‰ï¼Œè¿™äº›æˆ‘ä»¬ä¼šç•™åˆ°åé¢çš„ç« èŠ‚æ¥è®²ã€‚")]),g,n("p",null,[a("æˆ‘ä»¬ç•™åˆ°"),n("a",h,[a("æ•°æ®æ’å…¥"),e(s)]),a("çš„æ—¶å€™å†æ¥æ¼”ç¤ºã€‚")]),y,n("p",null,[n("a",w,[a("æŠ€æœ¯æ´¾"),e(s)]),a("çš„åº“è¡¨è®¾è®¡ï¼Œæˆ‘ä»¬æ”¾åœ¨äº†æŠ€æœ¯æ´¾çš„æ•™ç¨‹é‡Œï¼Œå¤§å®¶å¯ä»¥é€šè¿‡è¿™ä¸ªé“¾æ¥è·å–æŠ€æœ¯æ´¾å®æˆ˜æ•™ç¨‹ã€‚")]),n("p",null,[n("a",f,[a("äºŒå“¥çš„åŸåˆ›å®æˆ˜é¡¹ç›®æŠ€æœ¯æ´¾è¯¦ç»†ä»‹ç»"),e(s)])]),q,_,x,S,n("p",null,[n("a",j,[a("äºŒå“¥çš„åŸåˆ›å®æˆ˜é¡¹ç›®æŠ€æœ¯æ´¾è¯¦ç»†ä»‹ç»"),e(s)])]),D,n("blockquote",null,[n("p",null,[n("a",z,[a("Liquibase"),e(s)]),a(" æä¾›äº†ä¸€ç§ç»“æ„åŒ–å’Œç³»ç»ŸåŒ–çš„æ–¹æ³•æ¥ç®¡ç†æ•°æ®åº“æ¶æ„çš„æ›´æ”¹ã€‚å®ƒé€šè¿‡å˜æ›´æ—¥å¿—å’Œå˜æ›´é›†æ¥æ§åˆ¶æ•°æ®åº“çš„çŠ¶æ€å˜åŒ–ï¼Œç¡®ä¿äº†æ•°æ®åº“æ¶æ„å˜æ›´çš„å¯è¿½æº¯æ€§ã€å¯é‡å¤æ€§å’Œä¸€è‡´æ€§ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒè·¨å›¢é˜Ÿçš„åä½œã€‚é€‚ç”¨äºæŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²çš„ç¯å¢ƒã€‚")])]),P,n("p",null,[a("æºç åœ°å€ï¼š"),n("a",L,[a("æŠ€æœ¯æ´¾çš„è¡¨åˆå§‹åŒ–"),e(s)])]),I,R,V,C,M,n("p",null,[a("GitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„å¼€æºçŸ¥è¯†åº“ã€Š"),n("a",B,[a("äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯"),e(s)]),a("ã€‹ç¬¬ä¸€ç‰ˆ PDF ç»ˆäºæ¥äº†ï¼åŒ…æ‹¬JavaåŸºç¡€è¯­æ³•ã€æ•°ç»„&å­—ç¬¦ä¸²ã€OOPã€é›†åˆæ¡†æ¶ã€Java IOã€å¼‚å¸¸å¤„ç†ã€Java æ–°ç‰¹æ€§ã€ç½‘ç»œç¼–ç¨‹ã€NIOã€å¹¶å‘ç¼–ç¨‹ã€JVMç­‰ç­‰ï¼Œå…±è®¡ 32 ä¸‡ä½™å­—ï¼Œ500+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯é€šä¿—æ˜“æ‡‚ã€é£è¶£å¹½é»˜â€¦â€¦è¯¦æƒ…æˆ³ï¼š"),n("a",N,[a("å¤ªèµäº†ï¼ŒGitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„ Java æ•™ç¨‹"),e(s)])]),Q,E])}const F=p(i,[["render",J],["__file","table.html.vue"]]);export{F as default};
