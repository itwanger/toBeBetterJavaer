---
title: JVMåˆ°åº•æ˜¯å¦‚ä½•è¿è¡ŒJavaä»£ç çš„ï¼Ÿ3000 å­— 10 å¼ æ‰‹ç»˜å›¾å¸¦ä½ å½»åº•æŒæ¡ã€‚
shortTitle: JVMå¦‚ä½•è¿è¡ŒJavaä»£ç ï¼Ÿ
category:
  - Javaæ ¸å¿ƒ
tag:
  - Javaè™šæ‹Ÿæœº
description: Javaä»£ç é¦–å…ˆè¢«ç¼–è¯‘å™¨è½¬æ¢ä¸ºå­—èŠ‚ç ï¼Œç„¶ååœ¨JVMä¸Šè¿è¡Œã€‚åœ¨è¿è¡Œæ—¶ï¼ŒJVMé€šè¿‡è§£é‡Šæ‰§è¡Œæˆ–å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰å°†å­—èŠ‚ç è½¬æ¢ä¸ºæœºå™¨ç ã€‚è§£é‡Šæ‰§è¡Œç›´æ¥è¿è¡Œå­—èŠ‚ç ï¼Œè€ŒJITåœ¨è¿è¡Œæ—¶å°†çƒ­ç‚¹ä»£ç ç¼–è¯‘ä¼˜åŒ–ä¸ºæœºå™¨ç ä»¥æå‡æ€§èƒ½ã€‚
head:
  - - meta
    - name: keywords
      content: Java,JavaSE,æ•™ç¨‹,äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯,jvm,Javaè™šæ‹Ÿæœº,å­—èŠ‚ç ,å­—èŠ‚ç æŒ‡ä»¤,å­—èŠ‚ç æ–‡ä»¶,å­—èŠ‚ç æ–‡ä»¶ç»“æ„
---

# ç¬¬äºŒèŠ‚ï¼šJVMå¦‚ä½•è¿è¡ŒJavaä»£ç ï¼Ÿ

â€œäºŒå“¥ï¼Œçœ‹äº† [Hello World](https://javabetter.cn/overview/hello-world.html) çš„ä»£ç åï¼Œæˆ‘å¾ˆå¥½å¥‡ï¼Œå®ƒæ˜¯æ€ä¹ˆåœ¨ IDEA çš„ Run é¢æ¿é‡Œæ‰“å°å‡ºâ€˜ä¸‰å¦¹ï¼Œå°‘çœ‹æ‰‹æœºå°‘æ‰“æ¸¸æˆï¼Œå¥½å¥½å­¦ï¼Œç¾ç¾å“’â€™å‘¢ï¼Ÿâ€ä¸‰å¦¹å’ªäº†ä¸€å£éº¦é¦™å¯å¯å¥¶èŒ¶åå¯¹æˆ‘è¯´ã€‚

â€œä¸‰å¦¹ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠ Java ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹åˆ†ä¸ºç¼–è¯‘æœŸå’Œè¿è¡Œæ—¶ï¼Œå¼„æ¸…æ¥šè¿™ä¸¤ä¸ªé˜¶æ®µå°±çŸ¥é“åŸå› äº†ã€‚â€æˆ‘å¾®ç¬‘ç€å¯¹ä¸‰å¦¹è¯´ï¼Œâ€œå¯¹äºä¸€ä¸ª Java ç¨‹åºå‘˜æ¥è¯´ï¼Œå†™äº†é‚£ä¹ˆä¹…çš„ä»£ç ï¼Œæ€»è¦ææ¸…æ¥šè‡ªå·±å†™çš„ Java ä»£ç åˆ°åº•æ˜¯æ€ä¹ˆè¿è¡Œèµ·æ¥çš„ã€‚è¿™ä¸ªé—®é¢˜åœ¨é¢è¯•çš„æ—¶å€™ä¹Ÿç»å¸¸ä¼šè¢«é—®åˆ°ã€‚â€

ä¸€èµ·æ¥çœ‹ä¸‹å§ã€‚

## ç¼–è¯‘æœŸ

è´´ä¸€ä¸‹ HelloWorld è¿™æ®µä»£ç ï¼š

```java
/**
 * @author å¾®ä¿¡æœã€Œæ²‰é»˜ç‹äºŒã€ï¼Œå›å¤å…³é”®å­— PDF
 */
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("ä¸‰å¦¹ï¼Œå°‘çœ‹æ‰‹æœºå°‘æ‰“æ¸¸æˆï¼Œå¥½å¥½å­¦ï¼Œç¾ç¾å“’ã€‚");
    }
}
```

ç‚¹å‡» IDEA å·¥å…·æ ä¸­çš„é”¤å­æŒ‰é’®ï¼ˆBuild Projectï¼Œç¼–è¯‘æ•´ä¸ªé¡¹ç›®ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå¹¶ä¸éœ€è¦ä¸»åŠ¨ç¼–è¯‘ï¼ŒIDEA ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç¼–è¯‘ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/overview/five-01.png)

è¿™æ—¶å€™ï¼Œå°±å¯ä»¥åœ¨ src çš„åŒçº§ç›®å½• target ä¸‹æ‰¾åˆ°ä¸€ä¸ªåä¸º HelloWorld.class çš„æ–‡ä»¶ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/overview/five-02.png)

å¦‚æœæ‰¾ä¸åˆ°çš„è¯ï¼Œåœ¨ç›®å½•ä¸Šå³é”®é€‰æ‹©ã€ŒReload from Diskï¼Œä»ç£ç›˜ä¸Šé‡æ–°åŠ è½½ã€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/overview/five-03.png)

å¯ä»¥åŒå‡»æ‰“å¼€å®ƒï¼Œçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å†…å®¹ã€‚

```java
//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by Fernflower decompiler)
//

package com.itwanger.five;

public class HelloWorld {
    public HelloWorld() {
    }

    public static void main(String[] args) {
        System.out.println("ä¸‰å¦¹ï¼Œå°‘çœ‹æ‰‹æœºå°‘æ‰“æ¸¸æˆï¼Œå¥½å¥½å­¦ï¼Œç¾ç¾å“’ã€‚");
    }
}
```

IDEA é»˜è®¤ä¼šç”¨ [Fernflower](https://github.com/fesh0r/fernflower) è¿™ä¸ªåç¼–è¯‘å·¥å…·å°†å­—èŠ‚ç æ–‡ä»¶ï¼ˆåç¼€ä¸º .class çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ Java æºä»£ç ç¼–è¯‘åçš„æ–‡ä»¶ï¼‰åç¼–è¯‘ä¸ºæˆ‘ä»¬å¯ä»¥çœ‹å¾—æ‡‚çš„ Java æºä»£ç ã€‚

ä½†å®é™…ä¸Šï¼Œ[å­—èŠ‚ç æ–‡ä»¶](https://javabetter.cn/jvm/class-file-jiegou.html)å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œå®ƒåŒ…å«äº† JVM æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œè¿˜æœ‰ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå¦‚ç±»åã€æ–¹æ³•å’Œå±æ€§ç­‰ã€‚å¦‚æœç”¨ ã€Œshow bytecodeã€æ‰“å¼€å­—èŠ‚ç æ–‡ä»¶çš„è¯ï¼Œå®ƒæ˜¯ä¸‹é¢è¿™æ ·å­çš„ï¼š

```
// class version 58.0 (58)
// access flags 0x21
public class com/itwanger/five/HelloWorld {

  // compiled from: HelloWorld.java

  // access flags 0x1
  public <init>()V
   L0
    LINENUMBER 6 L0
    ALOAD 0
    INVOKESPECIAL java/lang/Object.<init> ()V
    RETURN
   L1
    LOCALVARIABLE this Lcom/itwanger/five/HelloWorld; L0 L1 0
    MAXSTACK = 1
    MAXLOCALS = 1

  // access flags 0x9
  public static main([Ljava/lang/String;)V
   L0
    LINENUMBER 8 L0
    GETSTATIC java/lang/System.out : Ljava/io/PrintStream;
    LDC "\u4e09\u59b9\uff0c\u5c11\u770b\u624b\u673a\u5c11\u6253\u6e38\u620f\uff0c\u597d\u597d\u5b66\uff0c\u7f8e\u7f8e\u54d2\u3002"
    INVOKEVIRTUAL java/io/PrintStream.println (Ljava/lang/String;)V
   L1
    LINENUMBER 9 L1
    RETURN
   L2
    LOCALVARIABLE args [Ljava/lang/String; L0 L2 0
    MAXSTACK = 2
    MAXLOCALS = 1
}
```

æ˜¯ä¸æ˜¯å°±æœ‰ç‚¹çœ‹ä¸æ‡‚äº†ï¼Ÿæˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™æ®µå†…å®¹çš„æ—¶å€™ä¹Ÿå¾ˆå¤´å¤§ï¼Œä¸è¿‡ä¸è¦æ‹…å¿ƒï¼Œåé¢æˆ‘ä»¬å†ä¸€å—æ·±å…¥ç ”ç©¶ï¼Œè¿™é‡Œå°±æå‰æ„Ÿå—ä¸€ä¸‹ [bytecode](https://javabetter.cn/jvm/class-file-jiegou.html)ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰çš„é­…åŠ›ï¼ˆğŸ˜‚ï¼‰ã€‚

æ€ä¹ˆæŸ¥çœ‹ bytecode å‘¢ï¼Ÿ

å¯ä»¥é€šè¿‡ IDEA èœå•æ ä¸­çš„ã€ŒViewã€â†’ã€ŒShow Bytecodeã€æŸ¥çœ‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/overview/five-04.png)

è¿™ä¸ª bytecode å¯ä»¥ç›´è¯‘ä¸ºå­—èŠ‚ç ã€‚

å­—èŠ‚ç å¹¶ä¸æ˜¯æœºå™¨ç ï¼Œæ“ä½œç³»ç»Ÿæ— æ³•ç›´æ¥è¯†åˆ«ï¼Œéœ€è¦åœ¨æ“ä½œç³»ç»Ÿä¸Šå®‰è£…ä¸åŒç‰ˆæœ¬çš„ [JVM](https://javabetter.cn/jvm/what-is-jvm.html) æ¥è¯†åˆ«ã€‚

é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦å®‰è£…ä¸åŒç‰ˆæœ¬çš„ JDKï¼ˆJava Development Kitï¼ŒJava å¼€å‘å·¥å…·åŒ…ï¼‰å°±è¡Œäº†ï¼Œå®ƒé‡Œé¢åŒ…å«äº† JREï¼ˆJava Runtime Environmentï¼ŒJava è¿è¡Œæ—¶ç¯å¢ƒï¼‰ï¼Œè€Œ JRE åˆåŒ…å«äº† JVMã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/overview/five-05.png)

Windowsã€Linuxã€MacOS ç­‰æ“ä½œç³»ç»Ÿéƒ½æœ‰ç›¸åº”çš„ JDKï¼Œåªè¦å®‰è£…å¥½äº† JDK å°±æœ‰äº† Java çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå°±å¯ä»¥æŠŠ Java æºä»£ç ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼Œç„¶åå­—èŠ‚ç åˆå¯ä»¥åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œäº†ã€‚

>build onceï¼Œrun anywhereã€‚

### jclasslib

è¿™é‡Œç»™æ¨èä¸€æ¬¾æŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶çš„æ’ä»¶ `jclasslib`ï¼Œå¯ä»¥åœ¨ IDEA æ’ä»¶å¸‚åœºä¸­å®‰è£…ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/overview/five-07.png)

å®‰è£…å®Œæˆä¹‹åï¼Œç‚¹å‡» View -> Show Bytecode With jclasslib å³å¯æŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶äº†ï¼ˆç‚¹å‡»ä¹‹å‰ï¼Œå…‰æ ‡è¦åœç•™åœ¨å¯¹åº”çš„ç±»æ–‡ä»¶ä¸Šï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/overview/five-08.png)

ä½¿ç”¨ jclasslib ä¸ä»…å¯ä»¥ç›´è§‚åœ°æŸ¥çœ‹ç±»å¯¹åº”çš„å­—èŠ‚ç ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹ç±»çš„åŸºæœ¬ä¿¡æ¯ã€å¸¸é‡æ± ã€æ¥å£ã€å­—æ®µã€æ–¹æ³•ç­‰ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ[åé¢ä¹Ÿä¼šç»†è®²](https://javabetter.cn/jvm/class-file-jiegou.html)ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/overview/five-09.png)

ä¹Ÿå°±æ˜¯è¯´ï¼Œ**åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒJava ä¼šå°† Java æºä»£ç æ–‡ä»¶ç¼–è¯‘ä¸ºå­—èŠ‚ç æ–‡ä»¶**ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/overview/five-10.png)

å­—èŠ‚ç æ–‡ä»¶å¦‚æœç”¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨ï¼ˆ[ä¸‹ä¸€èŠ‚](https://javabetter.cn/jvm/class-load.html)ä¼šè®²åˆ°ï¼‰æ‰“å¼€çš„è¯ï¼Œå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼ˆæœ¬èº«æ˜¯ 01 ä¸²çš„äºŒè¿›åˆ¶ï¼‰ï¼Œåå…­è¿›åˆ¶æ›´å®¹æ˜“çœ‹æ‡‚ï¼ˆè™½ç„¶è‚‰çœ¼ä¹Ÿå¾ˆéš¾çœ‹å¾—æ‡‚ğŸ˜‚ï¼‰ã€‚

```
cafe babe 0000 0034 0013 0a00 0400 0f09
0003 0010 0700 1107 0012 0100 016d 0100
0149 0100 063c 696e 6974 3e01 0003 2829
5601 0004 436f 6465 0100 0f4c 696e 654e
756d 6265 7254 6162 6c65 0100 0369 6e63
0100 0328 2949 0100 0a53 6f75 7263 6546
696c 6501 0009 4d61 696e 2e6a 6176 610c
0007 0008 0c00 0500 0601 0010 636f 6d2f
7268 7974 686d 372f 4d61 696e 0100 106a
6176 612f 6c61 6e67 2f4f 626a 6563 7400
2100 0300 0400 0000 0100 0200 0500 0600
0000 0200 0100 0700 0800 0100 0900 0000
1d00 0100 0100 0000 052a b700 01b1 0000
0001 000a 0000 0006 0001 0000 0003 0001
000b 000c 0001 0009 0000 001f 0002 0001
0000 0007 2ab4 0002 0460 ac00 0000 0100
0a00 0000 0600 0100 0000 0800 0100 0d00
0000 0200 0e
```

## è¿è¡Œæ—¶

å½“æœ‰äº† .class æ–‡ä»¶ä¹Ÿå°±æ˜¯[å­—èŠ‚ç æ–‡ä»¶](https://javabetter.cn/jvm/class-file-jiegou.html)ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨ JVM æ¥è¿è¡Œå­—èŠ‚ç æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ run é˜¶æ®µï¼Œä¹‹å‰æ˜¯ build é˜¶æ®µã€‚

JVM ä¼šå…ˆé€šè¿‡[ç±»åŠ è½½å™¨](https://javabetter.cn/jvm/class-load.html)åŠ è½½å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åå°†å­—èŠ‚ç åŠ è½½åˆ° JVM çš„è¿è¡Œæ—¶æ•°æ®åŒºï¼Œå†é€šè¿‡æ‰§è¡Œå¼•æ“è½¬åŒ–ä¸ºæœºå™¨ç æœ€ç»ˆäº¤ç»™æ“ä½œç³»ç»Ÿæ‰§è¡Œã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/how-run-java-code-20231030194039.png)

æˆ‘ä»¬ä½¿ç”¨ [javap](https://javabetter.cn/jvm/bytecode.html)ï¼ˆåé¢ä¼šç»†è®²ï¼‰æ¥çœ‹ä¸€ä¸‹ HelloWorld çš„å­—èŠ‚ç æŒ‡ä»¤åºåˆ—ã€‚

```
0 getstatic #2 <java/lang/System.out>
3 ldc #3 <Hello World>
5 invokevirtual #4 <java/io/PrintStream.println>
8 return
```

å­—èŠ‚ç æŒ‡ä»¤åºåˆ—é€šå¸¸ç”±å¤šæ¡æŒ‡ä»¤ç»„æˆï¼Œæ¯æ¡æŒ‡ä»¤ç”±ä¸€ä¸ªæ“ä½œç å’Œè‹¥å¹²ä¸ªæ“ä½œæ•°æ„æˆã€‚

- æ“ä½œç ï¼šä¸€ä¸ªå­—èŠ‚å¤§å°çš„æŒ‡ä»¤ï¼Œç”¨äºè¡¨ç¤ºå…·ä½“çš„æ“ä½œã€‚
- æ“ä½œæ•°ï¼šè·Ÿéšæ“ä½œç ï¼Œç”¨äºæä¾›é¢å¤–ä¿¡æ¯ã€‚

è¿™æ®µå­—èŠ‚ç åºåˆ—çš„æ„æ€æ˜¯è°ƒç”¨ System.out.println æ–¹æ³•æ‰“å°"Hello World"å­—ç¬¦ä¸²ã€‚ä¸‹é¢æ˜¯è¯¦ç»†çš„è§£é‡Šï¼š

â‘ ã€`0: getstatic #2 <java/lang/System.out>`ï¼š
   - æ“ä½œç ï¼šgetstatic
   - æ“ä½œæ•°ï¼š#2
   - æè¿°ï¼šè¿™æ¡æŒ‡ä»¤çš„ä½œç”¨æ˜¯è·å–é™æ€å­—æ®µï¼Œè¿™é‡Œè·å–çš„æ˜¯`java.lang.System`ç±»çš„`out`é™æ€å­—æ®µï¼Œå®ƒæ˜¯ä¸€ä¸ª`PrintStream`ç±»å‹çš„è¾“å‡ºæµã€‚#2 æ˜¯ä¸€ä¸ªæŒ‡å‘[å¸¸é‡æ± ](https://javabetter.cn/jvm/class-file-jiegou.html)çš„ç´¢å¼•ï¼Œåé¢åœ¨è®²ç±»æ–‡ä»¶ç»“æ„æ—¶ä¼šè®²åˆ°ã€‚

â‘¡ã€`3: ldc #3 <Hello World>`ï¼š
   - æ“ä½œç ï¼šldc
   - æ“ä½œæ•°ï¼š#3
   - æè¿°ï¼šè¿™æ¡æŒ‡ä»¤çš„ä½œç”¨æ˜¯ä»å¸¸é‡æ± ä¸­åŠ è½½ä¸€ä¸ªå¸¸é‡å€¼ï¼ˆå­—ç¬¦ä¸²"Hello World"ï¼‰åˆ°æ“ä½œæ•°æ ˆé¡¶ã€‚#3 æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡æ± çš„ç´¢å¼•ï¼Œå¸¸é‡æ± é‡Œå­˜å‚¨äº†å­—ç¬¦ä¸²"Hello World"çš„å¼•ç”¨ã€‚

â‘¢ã€`5: invokevirtual #4 <java/io/PrintStream.println>`ï¼š
   - æ“ä½œç ï¼šinvokevirtual
   - æ“ä½œæ•°ï¼š#4
   - æè¿°ï¼šè¿™æ¡æŒ‡ä»¤çš„ä½œç”¨æ˜¯è°ƒç”¨æ–¹æ³•ã€‚è¿™é‡Œè°ƒç”¨çš„æ˜¯`PrintStream`ç±»çš„`println`æ–¹æ³•ï¼Œç”¨æ¥æ‰“å°å­—ç¬¦ä¸²ã€‚#4 æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡æ± çš„ç´¢å¼•ï¼Œå¸¸é‡æ± é‡Œå­˜å‚¨äº†`java/io/PrintStream.println`æ–¹æ³•çš„å¼•ç”¨ä¿¡æ¯ã€‚

â‘£ã€`8: return`ï¼š
   - æ“ä½œç ï¼šreturn
   - æè¿°ï¼šè¿™æ¡æŒ‡ä»¤çš„ä½œç”¨æ˜¯ä»å½“å‰æ–¹æ³•è¿”å›ã€‚

ä¸Šé¢çš„ getstaticã€ldcã€invokevirtualã€return ç­‰å°±æ˜¯ [å­—èŠ‚ç æŒ‡ä»¤](https://javabetter.cn/jvm/zijiema-zhiling.html)çš„æ“ä½œç ã€‚

å¯ä»¥ä½¿ç”¨ [hexdump](https://zh.wikipedia.org/wiki/%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%BD%AC%E5%82%A8)ï¼Œä¸€ä¸ªåœ¨ Unix å’Œ Linux ç³»ç»Ÿä¸­å¸¸ç”¨çš„å·¥å…·ï¼Œç”¨äºä»¥åå…­è¿›åˆ¶çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ï¼Œçœ‹ä¸€ä¸‹å­—èŠ‚ç çš„äºŒè¿›åˆ¶å†…å®¹ã€‚

```
b2 00 02 12 03 b6 00 04 b1
```

æ³¨æ„ï¼šè¿™é‡Œæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶çš„ 16 è¿›åˆ¶è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯ hexï¼Œä¸€èˆ¬åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶éƒ½æ˜¯ä»¥ hex è¿›è¡Œåˆ†æã€‚å­—èŠ‚ç æŒ‡ä»¤å’ŒäºŒè¿›åˆ¶ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œä»¥åŠå¯¹åº”çš„è¯­ä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š

```
0xb2   getstatic       è·å–é™æ€å­—æ®µçš„å€¼
0x12   ldc             å¸¸é‡æ± ä¸­çš„å¸¸é‡å€¼å…¥æ ˆ
0xb6   invokevirtual   è¿è¡Œæ—¶æ–¹æ³•ç»‘å®šè°ƒç”¨æ–¹æ³•
0xb1   return          void æ–¹æ³•è¿”å›
```

JVM å°±æ˜¯é è§£æè¿™äº›å­—èŠ‚ç æŒ‡ä»¤æ¥å®Œæˆç¨‹åºæ‰§è¡Œçš„ã€‚å¸¸è§çš„æ‰§è¡Œæ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è§£é‡Šæ‰§è¡Œï¼Œå¯¹å­—èŠ‚ç é€æ¡è§£é‡Šæ‰§è¡Œï¼›ä¸€ç§æ˜¯ [JIT](https://javabetter.cn/jvm/jit.html)ï¼Œä¹Ÿå°±æ˜¯å³æ—¶ç¼–è¯‘ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶å°†çƒ­ç‚¹ä»£ç ä¼˜åŒ–å¹¶ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡å†æ‰§è¡Œçš„æ—¶å€™ç›´æ¥ä½¿ç”¨ç¼“å­˜èµ·æ¥çš„æœºå™¨ç ï¼Œè€Œä¸éœ€è¦å†æ¬¡è§£é‡Šæ‰§è¡Œã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/how-run-java-code-91dac706-1c4e-4775-bc4e-b2104283aa04.png)

è¿™æ ·å°±å¯ä»¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚

æ³¨æ„ï¼Œå½“[ç±»åŠ è½½å™¨](https://javabetter.cn/jvm/class-load.html)å®Œæˆå­—èŠ‚ç æ•°æ®åŠ è½½ä»»åŠ¡åï¼ŒJVM åˆ’åˆ†äº†ä¸“é—¨çš„å†…å­˜åŒºåŸŸæ¥è£…è½½è¿™äº›å­—èŠ‚ç æ•°æ®ä»¥åŠè¿è¡Œæ—¶ä¸­é—´æ•°æ®ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/neicun-jiegou-20240110194325.png)

å…¶ä¸­ PC å¯„å­˜å™¨ã€è™šæ‹Ÿæœºæ ˆä»¥åŠæœ¬åœ°æ–¹æ³•æ ˆå±äºçº¿ç¨‹ç§æœ‰çš„ï¼Œå †ä»¥åŠå…ƒç©ºé—´ï¼ˆæ–¹æ³•åŒºçš„å®ç°ï¼‰å±äºå…±äº«æ•°æ®åŒºï¼Œä¸åŒçš„çº¿ç¨‹å…±äº«è¿™ä¸¤éƒ¨åˆ†å†…å­˜æ•°æ®ã€‚

å¦‚æœè™šæ‹Ÿæœºä¸­çš„å½“å‰çº¿ç¨‹æ‰§è¡Œçš„æ˜¯ Java çš„[æ™®é€šæ–¹æ³•](https://javabetter.cn/oo/method.html)ï¼Œé‚£ä¹ˆ PC å¯„å­˜å™¨ä¸­å­˜å‚¨çš„æ˜¯æ–¹æ³•çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œå½“æ–¹æ³•å¼€å§‹æ‰§è¡Œä¹‹åï¼Œ PC å¯„å­˜å™¨å­˜å‚¨çš„æ˜¯ä¸‹ä¸€ä¸ªå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚

å¦‚æœè™šæ‹Ÿæœºä¸­çš„å½“å‰çº¿ç¨‹æ‰§è¡Œçš„æ˜¯ [native æ–¹æ³•](https://javabetter.cn/oo/native-method.html)ï¼Œé‚£ä¹ˆ PC å¯„å­˜å™¨ä¸­çš„å€¼ä¸º undefinedã€‚

å¦‚æœé‡åˆ°åˆ¤æ–­åˆ†æ”¯ã€å¾ªç¯ä»¥åŠå¼‚å¸¸ç­‰ä¸åŒçš„æ§åˆ¶è½¬ç§»è¯­å¥ï¼ŒPC å¯„å­˜å™¨ä¼šè¢«ç½®ä¸ºç›®æ ‡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚

å¦å¤–åœ¨å¤šçº¿ç¨‹åˆ‡æ¢çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºä¼šè®°å½•å½“å‰çº¿ç¨‹çš„ PC å¯„å­˜å™¨ï¼Œå½“çº¿ç¨‹åˆ‡æ¢å›æ¥çš„æ—¶å€™ä¼šæ ¹æ®æ­¤å‰è®°å½•çš„å€¼æ¢å¤åˆ° PC å¯„å­˜å™¨ä¸­ï¼Œæ¥ç»§ç»­æ‰§è¡Œçº¿ç¨‹çš„åç»­çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚

é™¤äº† PC å¯„å­˜å™¨å¤–ï¼Œå­—èŠ‚ç æŒ‡ä»¤çš„æ‰§è¡Œæµè½¬è¿˜éœ€è¦[è™šæ‹Ÿæœºæ ˆ](https://javabetter.cn/jvm/vm-stack-register.html)çš„å‚ä¸ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è™šæ‹Ÿæœºæ ˆçš„å¤§è‡´ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/how-run-java-code-20231031142106.png)

è™šæ‹Ÿæœºæ ˆæ“ä½œçš„åŸºæœ¬å…ƒç´ å°±æ˜¯æ ˆå¸§ï¼Œæ ˆå¸§ä¸»è¦åŒ…å«äº†å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ä»¥åŠæ–¹æ³•è¿”å›åœ°å€ã€‚æ ˆå¸§æ˜¯ä¸€ä¸ªå…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªæ–¹æ³•ä»è°ƒç”¨åˆ°æ‰§è¡Œå®Œæˆéƒ½ä¼šå¯¹åº”ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆå’Œå‡ºæ ˆã€‚

çŸ¥é“äº†è™šæ‹Ÿæœºæ ˆçš„ç»“æ„ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æ–¹æ³•æ‰§è¡Œçš„æµè½¬è¿‡ç¨‹æ˜¯æ€æ ·çš„ã€‚

ä»¥è¿™æ®µä»£ç ä¸ºä¾‹ï¼Œä¸€ä¸ª Test ç±»ï¼Œmain æ–¹æ³•é‡Œ new äº†ä¸€ä¸ª Uesr å¯¹è±¡ï¼Œä¼šå°† User çš„ age ä½œä¸ºå‚æ•°ä¼ é€’ç»™é™æ€æ–¹æ³• calculate è¿›è¡Œä¸€ä¸ªç®€å•çš„åŠ æ³•æ“ä½œå¹¶è¿”å›ï¼Œæœ€åæ‰“å°åˆ°æ§åˆ¶å°ã€‚

```java
public class Test {
    public static void main(String[] args) {
        User user  = new User();
        Integer result = calculate(user.getAge());
        System.out.println(result);
    }

    private static Integer calculate(Integer age) {
        Integer data = age + 3;
        return data;
    }

}
```

1ã€JVM å®Œæˆ .class æ–‡ä»¶åŠ è½½ä¹‹åï¼Œä¼šåˆ›å»ºä¸€ä¸ªåä¸º"main"çš„çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹ä¼šè‡ªåŠ¨è°ƒç”¨åä¸º"main"çš„é™æ€æ–¹æ³•ï¼Œè¿™æ˜¯ Java ç¨‹åºçš„å…¥å£ç‚¹ï¼›

2ã€main çº¿ç¨‹åœ¨æ‰§è¡Œ main æ–¹æ³•æ—¶ï¼ŒJVM ä¼šåœ¨è™šæ‹Ÿæœºæ ˆä¸­å‹å…¥ main æ–¹æ³•å¯¹åº”çš„æ ˆå¸§ï¼›

![](https://cdn.tobebetterjavaer.com/stutymore/how-run-java-code-20231031143842.png)

3ã€æ ˆå¸§çš„æ“ä½œæ•°æ ˆä¸­å­˜å‚¨äº†æ“ä½œçš„æ•°æ®ï¼ŒJVM æ‰§è¡Œå­—èŠ‚ç æŒ‡ä»¤çš„æ—¶å€™ä¼šä»æ“ä½œæ•°æ ˆä¸­è·å–æ•°æ®ï¼Œæ‰§è¡Œè®¡ç®—æ“ä½œåä¼šå°†ç»“æœå†æ¬¡å‹å…¥æ“ä½œæ•°æ ˆä¸­ï¼›

4ã€å½“è¿›è¡Œ calculate æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºæ ˆç»§ç»­å‹å…¥ calculate æ–¹æ³•å¯¹åº”çš„æ ˆå¸§ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/how-run-java-code-20231031144218.png)

5ã€å¯¹äº age + 3 è¿™æ¡åŠ æ³•æŒ‡ä»¤ï¼Œåœ¨æ‰§è¡Œè¯¥æŒ‡ä»¤å‰ï¼ŒJVM ä¼šå°†æ“ä½œæ•°æ ˆé¡¶éƒ¨çš„ä¸¤ä¸ªå…ƒç´ å¼¹å‡ºï¼Œå¹¶å°†å®ƒä»¬ç›¸åŠ ï¼Œç„¶åå°†ç»“æœå‹å…¥æ“ä½œæ•°æ ˆä¸­ã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒæŒ‡ä»¤çš„æ“ä½œç æ˜¯â€œaddâ€ï¼Œå®ƒè¡¨ç¤ºæ‰§è¡ŒåŠ æ³•æ“ä½œï¼›æ“ä½œæ•° 0ï¼Œè¡¨ç¤ºä»æ“ä½œæ•°æ ˆçš„é¡¶éƒ¨è·å–ç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼›æ“ä½œæ•° 1ï¼Œè¡¨ç¤ºä»æ“ä½œæ•°æ ˆçš„æ¬¡é¡¶éƒ¨è·å–ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚

6ã€PC å¯„å­˜å™¨ä¸­å­˜å‚¨äº†ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€ã€‚

7ã€å½“ calculate æ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œå¯¹åº”çš„æ ˆå¸§å°†ä»è™šæ‹Ÿæœºæ ˆä¸­å¼¹å‡ºï¼Œæ–¹æ³•æ‰§è¡Œçš„ç»“æœä¼šè¢«å‹å…¥ main æ ˆå¸§ä¸­çš„æ“ä½œæ•°æ ˆä¸­ï¼Œè€Œæ–¹æ³•è¿”å›åœ°å€è¢«é‡ç½®åˆ° main çº¿ç¨‹çš„ PC å¯„å­˜å™¨ä¸­ï¼Œä»¥ä¾¿äºåç»­å­—èŠ‚ç æ‰§è¡Œå¼•æ“ä» PC å¯„å­˜å™¨ä¸­è·å–ä¸‹ä¸€æ¡å‘½ä»¤çš„åœ°å€ã€‚

å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼ŒJVM ä¼šå°†ä¸€ä¸ª null å€¼å‹å…¥è°ƒç”¨è¯¥æ–¹æ³•çš„æ ˆå¸§çš„æ“ä½œæ•°æ ˆä¸­ï¼Œä½œä¸ºå ä½ç¬¦ï¼Œä»¥ä¾¿æ¢å¤è°ƒç”¨æ–¹çš„æ“ä½œæ•°æ ˆçŠ¶æ€ã€‚

8ã€æ‰§è¡Œå¼•æ“ä¸­çš„è§£é‡Šå™¨ä¼šä»ç¨‹åºè®¡æ•°å™¨ä¸­è·å–ä¸‹ä¸€ä¸ªå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯å…ƒç©ºé—´ä¸­å¯¹åº”çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåœ¨è·å–åˆ°æŒ‡ä»¤ä¹‹åï¼Œé€šè¿‡è§£é‡Šå™¨è§£é‡Šä¸ºå¯¹åº”çš„æœºå™¨æŒ‡ä»¤ï¼Œæœ€ç»ˆç”± CPU è¿›è¡Œæ‰§è¡Œã€‚

## å°ç»“

â€œå¥½çš„ï¼Œä¸‰å¦¹ï¼Œä»Šå¤©æˆ‘ä»¬å°±å…ˆè®²åˆ°è¿™é‡Œï¼Œæ¥ç®€å•æ€»ç»“ä¸‹ã€‚â€æˆ‘é•¿èˆ’ä¸€å£æ°”ï¼Œè¯´åˆ°ã€‚

Java ä»£ç é¦–å…ˆè¢«ç¼–è¯‘å™¨è½¬æ¢ä¸ºå­—èŠ‚ç ï¼Œç„¶ååœ¨ JVM ä¸Šè¿è¡Œã€‚åœ¨è¿è¡Œæ—¶ï¼ŒJVM é€šè¿‡è§£é‡Šæ‰§è¡Œæˆ–å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰å°†å­—èŠ‚ç è½¬æ¢ä¸ºæœºå™¨ç ã€‚è§£é‡Šæ‰§è¡Œç›´æ¥è¿è¡Œå­—èŠ‚ç ï¼Œè€Œ JIT åœ¨è¿è¡Œæ—¶å°†çƒ­ç‚¹ä»£ç ç¼–è¯‘ä¼˜åŒ–ä¸ºæœºå™¨ç ä»¥æå‡æ€§èƒ½ã€‚

è¿™ä¸­é—´éœ€è¦è¿è¡Œæ—¶æ•°æ®åŒºæ¥å­˜å‚¨å­—èŠ‚ç æ•°æ®ä»¥åŠè¿è¡Œæ—¶ä¸­é—´æ•°æ®ã€‚

å­—èŠ‚ç æ˜¯ JVM ä¸­éå¸¸å…³é”®çš„å†…å®¹ï¼Œæ¶‰åŠåˆ°[ç±»çš„åŠ è½½æœºåˆ¶](https://javabetter.cn/jvm/class-load.html)ã€[å­—èŠ‚ç æ–‡ä»¶çš„ç»“æ„](https://javabetter.cn/jvm/class-file-jiegou.html)ã€[å­—èŠ‚ç æŒ‡ä»¤](https://javabetter.cn/jvm/zijiema-zhiling.html)çš„æ‰§è¡Œæµç¨‹ç­‰ç­‰ï¼Œåé¢æˆ‘ä»¬ä¼šç»†è®²ã€‚

> å‚è€ƒé“¾æ¥ï¼š[JVM æ˜¯å¦‚ä½•è¿è¡Œ Java ç¨‹åºçš„](https://mp.weixin.qq.com/s/pj3Y-O2eIRF5tQmHboGN3A)ï¼Œä½œè€…æ¢¦å°§æŠ€æœ¯ï¼Œå†™çš„å¾ˆä¸é”™ã€‚

---

GitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„å¼€æºçŸ¥è¯†åº“ã€Š[äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯](https://github.com/itwanger/toBeBetterJavaer)ã€‹ç¬¬ä¸€ç‰ˆ PDF ç»ˆäºæ¥äº†ï¼åŒ…æ‹¬ Java åŸºç¡€è¯­æ³•ã€æ•°ç»„&å­—ç¬¦ä¸²ã€OOPã€é›†åˆæ¡†æ¶ã€Java IOã€å¼‚å¸¸å¤„ç†ã€Java æ–°ç‰¹æ€§ã€ç½‘ç»œç¼–ç¨‹ã€NIOã€å¹¶å‘ç¼–ç¨‹ã€JVM ç­‰ç­‰ï¼Œå…±è®¡ 32 ä¸‡ä½™å­—ï¼Œ500+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯é€šä¿—æ˜“æ‡‚ã€é£è¶£å¹½é»˜â€¦â€¦è¯¦æƒ…æˆ³ï¼š[å¤ªèµäº†ï¼ŒGitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„ Java æ•™ç¨‹](https://javabetter.cn/overview/)

å¾®ä¿¡æœ **æ²‰é»˜ç‹äºŒ** æˆ–æ‰«æä¸‹æ–¹äºŒç»´ç å…³æ³¨äºŒå“¥çš„åŸåˆ›å…¬ä¼—å·æ²‰é»˜ç‹äºŒï¼Œå›å¤ **222** å³å¯å…è´¹é¢†å–ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png)
