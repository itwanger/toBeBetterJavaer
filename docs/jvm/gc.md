---
title: æ·±å…¥ç†è§£ JVM çš„åƒåœ¾å›æ”¶æœºåˆ¶
shortTitle: æ·±å…¥ç†è§£åƒåœ¾å›æ”¶æœºåˆ¶
category:
  - Javaæ ¸å¿ƒ
tag:
  - Javaè™šæ‹Ÿæœº
description: äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯ï¼Œå°ç™½çš„é›¶åŸºç¡€Javaæ•™ç¨‹ï¼Œä»å…¥é—¨åˆ°è¿›é˜¶ï¼Œå’±ä»¬ä»å¤´åˆ°å°¾è¯´ä¸€æ¬¡Javaåƒåœ¾å›æ”¶
head:
  - - meta
    - name: keywords
      content: Java,JavaSE,æ•™ç¨‹,äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯,jvm,Javaè™šæ‹Ÿæœº,åƒåœ¾å›æ”¶,gc
---

# ç¬¬åèŠ‚ï¼šæ·±å…¥ç†è§£åƒåœ¾å›æ”¶æœºåˆ¶

è®°å¾—ä»¥å‰æœ‰è¿™æ ·ä¸€å‰¯åŠ¨å›¾ï¼Œç”¨æ¥å˜²ç¬‘ Java çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå¤§è‡´çš„æ„æ€å°±æ˜¯ï¼ŒJava çš„åƒåœ¾å›æ”¶æœºåˆ¶å¾ˆå·¥ä¸šåŒ–ï¼Œä½†æ˜¯å¥½åƒæ˜¯åœ¨åšæ— ç”¨åŠŸï¼Œåƒåœ¾å›æ”¶ä¸å½»åº•ï¼ˆğŸ˜‚ï¼‰ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/gc-gc.gif)

C/C++ è™½ç„¶éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œä½†å¼€å‘è€…ä¿¡èª“æ—¦æ—¦ï¼Œè®¤ä¸ºè‡ªå·±ä¸€å®šèƒ½æ¸…ç†å¾—å¾ˆå½»åº•ã€‚é‚£è¿™æ¬¡ï¼Œæˆ‘ä»¬å°±ä»å¤´åˆ°å°¾æ¥è¯¦ç»†åœ°èŠä¸€èŠ Java çš„åƒåœ¾å›æ”¶æœºåˆ¶ã€‚

## åƒåœ¾å›æ”¶çš„æ¦‚å¿µ

åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼ŒGCï¼‰ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯é‡Šæ”¾åƒåœ¾å ç”¨çš„ç©ºé—´ï¼Œé˜²æ­¢å†…å­˜æ³„éœ²ã€‚æœ‰æ•ˆçš„ä½¿ç”¨å¯ä»¥ä½¿ç”¨çš„å†…å­˜ï¼Œå¯¹å†…å­˜å †ä¸­å·²ç»æ­»äº¡çš„æˆ–è€…é•¿æ—¶é—´æ²¡æœ‰ä½¿ç”¨çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤å’Œå›æ”¶ã€‚

Java è¯­è¨€å‡ºæ¥ä¹‹å‰ï¼Œå¤§å®¶éƒ½åœ¨æ‹¼å‘½çš„å†™ C æˆ–è€… C++ çš„ç¨‹åºï¼Œè€Œæ­¤æ—¶å­˜åœ¨ä¸€ä¸ªå¾ˆå¤§çš„çŸ›ç›¾ï¼ŒC++ ç­‰è¯­è¨€åˆ›å»ºå¯¹è±¡è¦ä¸æ–­çš„å»å¼€è¾Ÿç©ºé—´ï¼Œä¸ç”¨çš„æ—¶å€™åˆéœ€è¦ä¸æ–­çš„å»é‡Šæ”¾ç©ºé—´ï¼Œæ—¢è¦å†™æ„é€ å‡½æ•°ï¼Œåˆè¦å†™ææ„å‡½æ•°ï¼Œå¾ˆå¤šæ—¶å€™éƒ½åœ¨é‡å¤çš„ allocatedï¼Œç„¶åä¸åœçš„ææ„ã€‚

>æ„é€ å‡½æ•°å’Œ Java ä¸­çš„æ„é€ æ–¹æ³•ç±»ä¼¼ï¼Œææ„å‡½æ•°å’Œ Java ä¸­çš„ finalize æ–¹æ³•ç±»ä¼¼ã€‚

äºæ˜¯ï¼Œæœ‰äººå°±æå‡ºï¼Œèƒ½ä¸èƒ½å†™ä¸€æ®µç¨‹åºå®ç°è¿™å—åŠŸèƒ½ï¼Œæ¯æ¬¡åˆ›å»ºï¼Œé‡Šæ”¾æ§ä»¶çš„æ—¶å€™å¤ç”¨è¿™æ®µä»£ç ï¼Œè€Œæ— éœ€é‡å¤çš„ä¹¦å†™å‘¢ï¼Ÿ

1960å¹´ï¼ŒåŸºäº MIT çš„ Lisp é¦–å…ˆæå‡ºäº†åƒåœ¾å›æ”¶çš„æ¦‚å¿µï¼Œç”¨äºå¤„ç†Cè¯­è¨€ç­‰ä¸åœçš„ææ„æ“ä½œï¼Œè€Œè¿™æ—¶ Java è¿˜æ²¡æœ‰å‡ºä¸–å‘¢ï¼æ‰€ä»¥å®é™…ä¸Š GC å¹¶ä¸æ˜¯Javaçš„ä¸“åˆ©ï¼ŒGC çš„å†å²è¿œè¿œå¤§äº Java çš„å†å²ï¼

### æ€ä¹ˆå®šä¹‰åƒåœ¾

æ—¢ç„¶æˆ‘ä»¬è¦åšåƒåœ¾å›æ”¶ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—ææ¸…æ¥šåƒåœ¾çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Œå“ªäº›å†…å­˜æ˜¯éœ€è¦å›æ”¶çš„ã€‚

**å¼•ç”¨è®¡æ•°ç®—æ³•**
å¼•ç”¨è®¡æ•°ç®—æ³•ï¼ˆReachability Countingï¼‰æ˜¯é€šè¿‡åœ¨å¯¹è±¡å¤´ä¸­åˆ†é…ä¸€ä¸ªç©ºé—´æ¥ä¿å­˜è¯¥å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼ˆReference Countï¼‰ã€‚å¦‚æœè¯¥å¯¹è±¡è¢«å…¶å®ƒå¯¹è±¡å¼•ç”¨ï¼Œåˆ™å®ƒçš„å¼•ç”¨è®¡æ•°åŠ 1ï¼Œå¦‚æœåˆ é™¤å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒçš„å¼•ç”¨è®¡æ•°å°±å‡1ï¼Œå½“è¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±ä¼šè¢«å›æ”¶ã€‚

**String m = new String("jack");**

å…ˆåˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ—¶å€™"jack"æœ‰ä¸€ä¸ªå¼•ç”¨ï¼Œå°±æ˜¯ mã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-691109d2-bee4-4a79-8da6-87c5fd233f54.jpg)

ç„¶åå°† m è®¾ç½®ä¸º nullï¼Œè¿™æ—¶å€™"jack"çš„å¼•ç”¨æ¬¡æ•°å°±ç­‰äº0äº†ï¼Œåœ¨å¼•ç”¨è®¡æ•°ç®—æ³•ä¸­ï¼Œæ„å‘³ç€è¿™å—å†…å®¹å°±éœ€è¦è¢«å›æ”¶äº†ã€‚

**m = null;**

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-74865618-4576-4f8b-baf3-17d6a71125b9.jpg)

å¼•ç”¨è®¡æ•°ç®—æ³•æ˜¯å°†åƒåœ¾å›æ”¶åˆ†æ‘Šåˆ°æ•´ä¸ªåº”ç”¨ç¨‹åºçš„è¿è¡Œå½“ä¸­äº†ï¼Œè€Œä¸æ˜¯åœ¨è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œè¦æŒ‚èµ·æ•´ä¸ªåº”ç”¨çš„è¿è¡Œï¼Œç›´åˆ°å¯¹å †ä¸­æ‰€æœ‰å¯¹è±¡çš„å¤„ç†éƒ½ç»“æŸã€‚å› æ­¤ï¼Œé‡‡ç”¨å¼•ç”¨è®¡æ•°çš„åƒåœ¾æ”¶é›†ä¸å±äºä¸¥æ ¼æ„ä¹‰ä¸Šçš„"Stop-The-World"çš„åƒåœ¾æ”¶é›†æœºåˆ¶ã€‚

"Stop The World"æ˜¯Javaåƒåœ¾æ”¶é›†ï¼ˆGCï¼‰ä¸­çš„ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µã€‚åœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­ï¼ŒJVMä¼šæš‚åœæ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹ï¼Œè¿™ç§æš‚åœè¢«ç§°ä¸º"Stop The World"äº‹ä»¶ã€‚

è¿™ä¹ˆåšçš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†é˜²æ­¢åœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·çº¿ç¨‹ä¿®æ”¹äº†å †ä¸­çš„å¯¹è±¡ï¼Œå¯¼è‡´åƒåœ¾æ”¶é›†å™¨æ— æ³•å‡†ç¡®åœ°æ”¶é›†åƒåœ¾ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ"Stop The World"äº‹ä»¶ä¼šå¯¹Javaåº”ç”¨çš„æ€§èƒ½äº§ç”Ÿå½±å“ã€‚å¦‚æœåœé¡¿æ—¶é—´è¿‡é•¿ï¼Œå°±ä¼šå¯¼è‡´åº”ç”¨çš„å“åº”æ—¶é—´å˜é•¿ï¼Œå¯¹äºå¯¹å®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨ï¼Œå¦‚äº¤æ˜“ç³»ç»Ÿã€æ¸¸æˆæœåŠ¡å™¨ç­‰ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸èƒ½æ¥å—çš„ã€‚

å› æ­¤ï¼Œåœ¨é€‰æ‹©å’Œè°ƒä¼˜åƒåœ¾æ”¶é›†å™¨æ—¶ï¼Œéœ€è¦è€ƒè™‘å…¶åœé¡¿æ—¶é—´ã€‚Javaä¸­çš„ä¸€äº›åƒåœ¾æ”¶é›†å™¨ï¼Œå¦‚G1å’ŒZGCï¼Œå°½å¯èƒ½åœ°å‡å°‘äº†"Stop The World"çš„æ—¶é—´ï¼Œé€šè¿‡å¹¶å‘çš„åƒåœ¾æ”¶é›†ï¼Œæé«˜äº†åº”ç”¨çš„å“åº”æ€§èƒ½ã€‚

æ€»çš„æ¥è¯´ï¼Œ"Stop The World"æ˜¯Javaåƒåœ¾æ”¶é›†ä¸­å¿…é¡»é¢å¯¹çš„ä¸€ä¸ªæŒ‘æˆ˜ï¼Œå…¶ç›®æ ‡æ˜¯åœ¨ä¿è¯å†…å­˜çš„æœ‰æ•ˆåˆ©ç”¨å’Œåº”ç”¨çš„å“åº”æ€§èƒ½ä¹‹é—´æ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ã€‚

å¼•ç”¨è®¡æ•°ç®—æ³•çœ‹ä¼¼å¾ˆç¾å¥½ï¼Œä½†æˆ‘ä»¬çŸ¥é“JVMçš„åƒåœ¾å›æ”¶æ˜¯"Stop-The-World"çš„ï¼Œé‚£æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´æˆ‘ä»¬æœ€ç»ˆæ”¾å¼ƒäº†å¼•ç”¨è®¡æ•°ç®—æ³•å‘¢ï¼Ÿçœ‹ä¸‹é¢çš„ä¾‹å­ã€‚

```java
public class ReferenceCountingGC {

public Object instance;

public ReferenceCountingGC(String name){}
}

public static void testGC(){

ReferenceCountingGC a = new ReferenceCountingGC("objA");
ReferenceCountingGC b = new ReferenceCountingGC("objB");

a.instance = b;
b.instance = a;

a = null;
b = null;
}
```

**1\. å®šä¹‰2ä¸ªå¯¹è±¡**
**2\. ç›¸äº’å¼•ç”¨**
**3\. ç½®ç©ºå„è‡ªçš„å£°æ˜å¼•ç”¨**

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-fe980c00-3605-4b5d-a711-7edbfd2c80b0.jpg)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ€åè¿™2ä¸ªå¯¹è±¡å·²ç»ä¸å¯èƒ½å†è¢«è®¿é—®äº†ï¼Œä½†ç”±äºä»–ä»¬ç›¸äº’å¼•ç”¨ç€å¯¹æ–¹ï¼Œå¯¼è‡´å®ƒä»¬çš„å¼•ç”¨è®¡æ•°æ°¸è¿œéƒ½ä¸ä¼šä¸º0ï¼Œé€šè¿‡å¼•ç”¨è®¡æ•°ç®—æ³•ï¼Œä¹Ÿå°±æ°¸è¿œæ— æ³•é€šçŸ¥GCæ”¶é›†å™¨å›æ”¶å®ƒä»¬ã€‚

**å¯è¾¾æ€§åˆ†æç®—æ³•**

å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆReachability Analysisï¼‰çš„åŸºæœ¬æ€è·¯æ˜¯ï¼Œé€šè¿‡ä¸€äº›è¢«ç§°ä¸ºå¼•ç”¨é“¾ï¼ˆGC Rootsï¼‰çš„å¯¹è±¡ä½œä¸ºèµ·ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„è¢«ç§°ä¸ºï¼ˆReference Chain)ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ° GC Roots æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ—¶ï¼ˆå³ä» GC Roots èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹ä¸å¯è¾¾ï¼‰ï¼Œåˆ™è¯æ˜è¯¥å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-1636ce77-77b3-4b10-b75a-c0c2d28912c5.jpg)

é€šè¿‡å¯è¾¾æ€§ç®—æ³•ï¼ŒæˆåŠŸè§£å†³äº†å¼•ç”¨è®¡æ•°æ‰€æ— æ³•è§£å†³çš„é—®é¢˜-â€œå¾ªç¯ä¾èµ–â€ï¼Œåªè¦ä½ æ— æ³•ä¸ GC Root å»ºç«‹ç›´æ¥æˆ–é—´æ¥çš„è¿æ¥ï¼Œç³»ç»Ÿå°±ä¼šåˆ¤å®šä½ ä¸ºå¯å›æ”¶å¯¹è±¡ã€‚é‚£è¿™æ ·å°±å¼•ç”³å‡ºäº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œå“ªäº›å±äº GC Rootã€‚

**Java å†…å­˜åŒºåŸŸ**

åœ¨ Java è¯­è¨€ä¸­ï¼Œå¯ä½œä¸º GC Root çš„å¯¹è±¡åŒ…æ‹¬ä»¥ä¸‹4ç§ï¼š

*   è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡
*   æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡
*   æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡
*   æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNIï¼ˆå³ä¸€èˆ¬è¯´çš„ Native æ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-6abf9f50-dc53-4e8f-a7f6-3e74df8803d6.jpg)

1ã€è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡
æ­¤æ—¶çš„ sï¼Œå³ä¸º GC Rootï¼Œå½“sç½®ç©ºæ—¶ï¼ŒlocalParameter å¯¹è±¡ä¹Ÿæ–­æ‰äº†ä¸ GC Root çš„å¼•ç”¨é“¾ï¼Œå°†è¢«å›æ”¶ã€‚

```java
public class StackLocalParameter {
public StackLocalParameter(String name){}
}

public static void testGC(){
StackLocalParameter s = new StackLocalParameter("localParameter");
s = null;
}
```

2ã€æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡
s ä¸º GC Rootï¼Œs ç½®ä¸º nullï¼Œç»è¿‡ GC åï¼Œs æ‰€æŒ‡å‘çš„ properties å¯¹è±¡ç”±äºæ— æ³•ä¸ GC Root å»ºç«‹å…³ç³»è¢«å›æ”¶ã€‚

è€Œ m ä½œä¸ºç±»çš„é™æ€å±æ€§ï¼Œä¹Ÿå±äº GC Rootï¼Œparameter å¯¹è±¡ä¾ç„¶ä¸ GC root å»ºç«‹ç€è¿æ¥ï¼Œæ‰€ä»¥æ­¤æ—¶ parameter å¯¹è±¡å¹¶ä¸ä¼šè¢«å›æ”¶ã€‚

```java
public class MethodAreaStaicProperties {
public static MethodAreaStaicProperties m;
public MethodAreaStaicProperties(String name){}
}

public static void testGC(){
MethodAreaStaicProperties s = new MethodAreaStaicProperties("properties");
s.m = new MethodAreaStaicProperties("parameter");
s = null;
}
```

3ã€æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡
m å³ä¸ºæ–¹æ³•åŒºä¸­çš„å¸¸é‡å¼•ç”¨ï¼Œä¹Ÿä¸º GC Rootï¼Œs ç½®ä¸º null åï¼Œfinal å¯¹è±¡ä¹Ÿä¸ä¼šå› æ²¡æœ‰ä¸ GC Root å»ºç«‹è”ç³»è€Œè¢«å›æ”¶ã€‚

```java
public class MethodAreaStaicProperties {
public static final MethodAreaStaicProperties m = MethodAreaStaicProperties("final");
public MethodAreaStaicProperties(String name){}
}

public static void testGC(){
MethodAreaStaicProperties s = new MethodAreaStaicProperties("staticProperties");
s = null;
}
```

4ã€æœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡
ä»»ä½• native æ¥å£éƒ½ä¼šä½¿ç”¨æŸç§æœ¬åœ°æ–¹æ³•æ ˆï¼Œå®ç°çš„æœ¬åœ°æ–¹æ³•æ¥å£æ˜¯ä½¿ç”¨ C è¿æ¥æ¨¡å‹çš„è¯ï¼Œé‚£ä¹ˆå®ƒçš„æœ¬åœ°æ–¹æ³•æ ˆå°±æ˜¯ C æ ˆã€‚å½“çº¿ç¨‹è°ƒç”¨ Java æ–¹æ³•æ—¶ï¼Œè™šæ‹Ÿæœºä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ ˆå¸§å¹¶å‹å…¥ Java æ ˆã€‚ç„¶è€Œå½“å®ƒè°ƒç”¨çš„æ˜¯æœ¬åœ°æ–¹æ³•æ—¶ï¼Œè™šæ‹Ÿæœºä¼šä¿æŒ Java æ ˆä¸å˜ï¼Œä¸å†åœ¨çº¿ç¨‹çš„ Java æ ˆä¸­å‹å…¥æ–°çš„å¸§ï¼Œè™šæ‹Ÿæœºåªæ˜¯ç®€å•åœ°åŠ¨æ€è¿æ¥å¹¶ç›´æ¥è°ƒç”¨æŒ‡å®šçš„æœ¬åœ°æ–¹æ³•ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-a138a4b4-56cb-4d6f-a65a-7f4259977476.jpg)

### æ€ä¹ˆå›æ”¶åƒåœ¾

åœ¨ç¡®å®šäº†å“ªäº›åƒåœ¾å¯ä»¥è¢«å›æ”¶åï¼Œåƒåœ¾æ”¶é›†å™¨è¦åšçš„äº‹æƒ…å°±æ˜¯å¼€å§‹è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä½†æ˜¯è¿™é‡Œé¢æ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šå¦‚ä½•é«˜æ•ˆåœ°è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ç”±äºJavaè™šæ‹Ÿæœºè§„èŒƒå¹¶æ²¡æœ‰å¯¹å¦‚ä½•å®ç°åƒåœ¾æ”¶é›†å™¨åšå‡ºæ˜ç¡®çš„è§„å®šï¼Œå› æ­¤å„ä¸ªå‚å•†çš„è™šæ‹Ÿæœºå¯ä»¥é‡‡ç”¨ä¸åŒçš„æ–¹å¼æ¥å®ç°åƒåœ¾æ”¶é›†å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬è®¨è®ºå‡ ç§å¸¸è§çš„åƒåœ¾æ”¶é›†ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€‚

**æ ‡è®° --- æ¸…é™¤ç®—æ³•**

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-2001e224-0f34-4429-bc89-a8fbe8ab271c.jpg)

æ ‡è®°æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰æ˜¯æœ€åŸºç¡€çš„ä¸€ç§åƒåœ¾å›æ”¶ç®—æ³•ï¼Œå®ƒåˆ†ä¸º2éƒ¨åˆ†ï¼Œå…ˆæŠŠå†…å­˜åŒºåŸŸä¸­çš„è¿™äº›å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œå“ªäº›å±äºå¯å›æ”¶æ ‡è®°å‡ºæ¥ï¼Œç„¶åæŠŠè¿™äº›åƒåœ¾æ‹å‡ºæ¥æ¸…ç†æ‰ã€‚å°±åƒä¸Šå›¾ä¸€æ ·ï¼Œæ¸…ç†æ‰çš„åƒåœ¾å°±å˜æˆæœªä½¿ç”¨çš„å†…å­˜åŒºåŸŸï¼Œç­‰å¾…è¢«å†æ¬¡ä½¿ç”¨ã€‚

è¿™é€»è¾‘å†æ¸…æ™°ä¸è¿‡äº†ï¼Œå¹¶ä¸”ä¹Ÿå¾ˆå¥½æ“ä½œï¼Œä½†å®ƒå­˜åœ¨ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å†…å­˜ç¢ç‰‡ã€‚

ä¸Šå›¾ä¸­ç­‰æ–¹å—çš„å‡è®¾æ˜¯ 2Mï¼Œå°ä¸€äº›çš„æ˜¯ 1Mï¼Œå¤§ä¸€äº›çš„æ˜¯ 4Mã€‚ç­‰æˆ‘ä»¬å›æ”¶å®Œï¼Œå†…å­˜å°±ä¼šåˆ‡æˆäº†å¾ˆå¤šæ®µã€‚æˆ‘ä»¬çŸ¥é“å¼€è¾Ÿå†…å­˜ç©ºé—´æ—¶ï¼Œéœ€è¦çš„æ˜¯è¿ç»­çš„å†…å­˜åŒºåŸŸï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ª 2Mçš„å†…å­˜åŒºåŸŸï¼Œå…¶ä¸­æœ‰2ä¸ª 1M æ˜¯æ²¡æ³•ç”¨çš„ã€‚è¿™æ ·å°±å¯¼è‡´ï¼Œå…¶å®æˆ‘ä»¬æœ¬èº«è¿˜æœ‰è¿™ä¹ˆå¤šçš„å†…å­˜çš„ï¼Œä½†å´ç”¨ä¸äº†ã€‚

**å¤åˆ¶ç®—æ³•**

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-a2b15e6f-6921-4710-bf76-77858df38c27.jpg)

å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰æ˜¯åœ¨æ ‡è®°æ¸…é™¤ç®—æ³•ä¸Šæ¼”åŒ–è€Œæ¥ï¼Œè§£å†³æ ‡è®°æ¸…é™¤ç®—æ³•çš„å†…å­˜ç¢ç‰‡é—®é¢˜ã€‚å®ƒå°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—çš„å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ä¸Šé¢ï¼Œç„¶åå†æŠŠå·²ä½¿ç”¨è¿‡çš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚ä¿è¯äº†å†…å­˜çš„è¿ç»­å¯ç”¨ï¼Œå†…å­˜åˆ†é…æ—¶ä¹Ÿå°±ä¸ç”¨è€ƒè™‘å†…å­˜ç¢ç‰‡ç­‰å¤æ‚æƒ…å†µï¼Œé€»è¾‘æ¸…æ™°ï¼Œè¿è¡Œé«˜æ•ˆã€‚

ä¸Šé¢çš„å›¾å¾ˆæ¸…æ¥šï¼Œä¹Ÿå¾ˆæ˜æ˜¾çš„æš´éœ²äº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œåˆç€æˆ‘è¿™140å¹³çš„å¤§ä¸‰æˆ¿ï¼Œåªèƒ½å½“70å¹³ç±³çš„å°ä¸¤æˆ¿æ¥ä½¿ï¼Ÿä»£ä»·å®åœ¨å¤ªé«˜ã€‚

**æ ‡è®°æ•´ç†ç®—æ³•**

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-2d47a225-ad9d-4f15-9b4d-7dce9a693adf.jpg)

æ ‡è®°æ•´ç†ç®—æ³•ï¼ˆMark-Compactï¼‰æ ‡è®°è¿‡ç¨‹ä»ç„¶ä¸æ ‡è®° --- æ¸…é™¤ç®—æ³•ä¸€æ ·ï¼Œä½†åç»­æ­¥éª¤ä¸æ˜¯ç›´æ¥å¯¹å¯å›æ”¶å¯¹è±¡è¿›è¡Œæ¸…ç†ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨ï¼Œå†æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜åŒºåŸŸã€‚

æ ‡è®°æ•´ç†ç®—æ³•ä¸€æ–¹é¢åœ¨æ ‡è®°-æ¸…é™¤ç®—æ³•ä¸Šåšäº†å‡çº§ï¼Œè§£å†³äº†å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œä¹Ÿè§„é¿äº†å¤åˆ¶ç®—æ³•åªèƒ½åˆ©ç”¨ä¸€åŠå†…å­˜åŒºåŸŸçš„å¼Šç«¯ã€‚çœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œå®ƒå¯¹å†…å­˜å˜åŠ¨æ›´é¢‘ç¹ï¼Œéœ€è¦æ•´ç†æ‰€æœ‰å­˜æ´»å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œåœ¨æ•ˆç‡ä¸Šæ¯”å¤åˆ¶ç®—æ³•è¦å·®å¾ˆå¤šã€‚

åˆ†ä»£æ”¶é›†ç®—æ³•åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational Collectionï¼‰ä¸¥æ ¼æ¥è¯´å¹¶ä¸æ˜¯ä¸€ç§æ€æƒ³æˆ–ç†è®ºï¼Œè€Œæ˜¯èåˆä¸Šè¿°3ç§åŸºç¡€çš„ç®—æ³•æ€æƒ³ï¼Œè€Œäº§ç”Ÿçš„é’ˆå¯¹ä¸åŒæƒ…å†µæ‰€é‡‡ç”¨ä¸åŒç®—æ³•çš„ä¸€å¥—ç»„åˆæ‹³ã€‚å¯¹è±¡å­˜æ´»å‘¨æœŸçš„ä¸åŒå°†å†…å­˜åˆ’åˆ†ä¸ºå‡ å—ã€‚ä¸€èˆ¬æ˜¯æŠŠ Java å †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹é‡‡ç”¨æœ€é€‚å½“çš„æ”¶é›†ç®—æ³•ã€‚åœ¨æ–°ç”Ÿä»£ä¸­ï¼Œæ¯æ¬¡åƒåœ¾æ”¶é›†æ—¶éƒ½å‘ç°æœ‰å¤§æ‰¹å¯¹è±¡æ­»å»ï¼Œåªæœ‰å°‘é‡å­˜æ´»ï¼Œé‚£å°±é€‰ç”¨å¤åˆ¶ç®—æ³•ï¼Œåªéœ€è¦ä»˜å‡ºå°‘é‡å­˜æ´»å¯¹è±¡çš„å¤åˆ¶æˆæœ¬å°±å¯ä»¥å®Œæˆæ”¶é›†ã€‚è€Œè€å¹´ä»£ä¸­å› ä¸ºå¯¹è±¡å­˜æ´»ç‡é«˜ã€æ²¡æœ‰é¢å¤–ç©ºé—´å¯¹å®ƒè¿›è¡Œåˆ†é…æ‹…ä¿ï¼Œå°±å¿…é¡»ä½¿ç”¨æ ‡è®°-æ¸…ç†æˆ–è€…æ ‡è®° --- æ•´ç†ç®—æ³•æ¥è¿›è¡Œå›æ”¶ã€‚soï¼Œå¦ä¸€ä¸ªé—®é¢˜æ¥äº†ï¼Œé‚£å†…å­˜åŒºåŸŸåˆ°åº•è¢«åˆ†ä¸ºå“ªå‡ å—ï¼Œæ¯ä¸€å—åˆæœ‰ä»€ä¹ˆç‰¹åˆ«é€‚åˆä»€ä¹ˆç®—æ³•å‘¢ï¼Ÿ

### å†…å­˜æ¨¡å‹ä¸å›æ”¶ç­–ç•¥

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/jvm/gc-59dddea1-b6bc-4fd4-bb79-d81adbdc7bed.jpg)

Java å †ï¼ˆJava Heapï¼‰æ˜¯JVMæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼Œå †åˆæ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦åˆ†æä¸€ä¸‹ Java å †çš„ç»“æ„ã€‚

Java å †ä¸»è¦åˆ†ä¸º2ä¸ªåŒºåŸŸ-å¹´è½»ä»£ä¸è€å¹´ä»£ï¼Œå…¶ä¸­å¹´è½»ä»£åˆåˆ† Eden åŒºå’Œ Survivor åŒºï¼Œå…¶ä¸­ Survivor åŒºåˆåˆ† From å’Œ To 2ä¸ªåŒºã€‚å¯èƒ½è¿™æ—¶å€™å¤§å®¶ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆéœ€è¦ Survivor åŒºï¼Œä¸ºä»€ä¹ˆSurvivor è¿˜è¦åˆ†2ä¸ªåŒºã€‚ä¸ç€æ€¥ï¼Œæˆ‘ä»¬ä»å¤´åˆ°å°¾ï¼Œçœ‹çœ‹å¯¹è±¡åˆ°åº•æ˜¯æ€ä¹ˆæ¥çš„ï¼Œè€Œå®ƒåˆæ˜¯æ€ä¹ˆæ²¡çš„ã€‚

**Eden åŒº**

IBM å…¬å¸çš„ä¸“ä¸šç ”ç©¶è¡¨æ˜ï¼Œæœ‰å°†è¿‘98%çš„å¯¹è±¡æ˜¯æœç”Ÿå¤•æ­»ï¼Œæ‰€ä»¥é’ˆå¯¹è¿™ä¸€ç°çŠ¶ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹è±¡ä¼šåœ¨æ–°ç”Ÿä»£ Eden åŒºä¸­è¿›è¡Œåˆ†é…ï¼Œå½“ Eden åŒºæ²¡æœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œè™šæ‹Ÿæœºä¼šå‘èµ·ä¸€æ¬¡ Minor GCï¼ŒMinor GC ç›¸æ¯” Major GC æ›´é¢‘ç¹ï¼Œå›æ”¶é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚

é€šè¿‡ Minor GC ä¹‹åï¼ŒEden ä¼šè¢«æ¸…ç©ºï¼ŒEden åŒºä¸­ç»å¤§éƒ¨åˆ†å¯¹è±¡ä¼šè¢«å›æ”¶ï¼Œè€Œé‚£äº›æ— éœ€å›æ”¶çš„å­˜æ´»å¯¹è±¡ï¼Œå°†ä¼šè¿›åˆ° Survivor çš„ From åŒºï¼ˆè‹¥ From åŒºä¸å¤Ÿï¼Œåˆ™ç›´æ¥è¿›å…¥ Old åŒºï¼‰ã€‚

**Survivor åŒº**

Survivor åŒºç›¸å½“äºæ˜¯ Eden åŒºå’Œ Old åŒºçš„ä¸€ä¸ªç¼“å†²ï¼Œç±»ä¼¼äºæˆ‘ä»¬äº¤é€šç¯ä¸­çš„é»„ç¯ã€‚Survivor åˆåˆ†ä¸º2ä¸ªåŒºï¼Œä¸€ä¸ªæ˜¯ From åŒºï¼Œä¸€ä¸ªæ˜¯ To åŒºã€‚æ¯æ¬¡æ‰§è¡Œ Minor GCï¼Œä¼šå°† Eden åŒºå’Œ From å­˜æ´»çš„å¯¹è±¡æ”¾åˆ° Survivor çš„ To åŒºï¼ˆå¦‚æœ To åŒºä¸å¤Ÿï¼Œåˆ™ç›´æ¥è¿›å…¥ Old åŒºï¼‰ã€‚

1ã€ä¸ºå•¥éœ€è¦ï¼Ÿ

ä¸å°±æ˜¯æ–°ç”Ÿä»£åˆ°è€å¹´ä»£ä¹ˆï¼Œç›´æ¥ Eden åˆ° Old ä¸å¥½äº†å—ï¼Œä¸ºå•¥è¦è¿™ä¹ˆå¤æ‚ã€‚æƒ³æƒ³å¦‚æœæ²¡æœ‰ Survivor åŒºï¼ŒEden åŒºæ¯è¿›è¡Œä¸€æ¬¡ Minor GCï¼Œå­˜æ´»çš„å¯¹è±¡å°±ä¼šè¢«é€åˆ°è€å¹´ä»£ï¼Œè€å¹´ä»£å¾ˆå¿«å°±ä¼šè¢«å¡«æ»¡ã€‚è€Œæœ‰å¾ˆå¤šå¯¹è±¡è™½ç„¶ä¸€æ¬¡ Minor GC æ²¡æœ‰æ¶ˆç­ï¼Œä½†å…¶å®ä¹Ÿå¹¶ä¸ä¼šè¹¦è·¶å¤šä¹…ï¼Œæˆ–è®¸ç¬¬äºŒæ¬¡ï¼Œç¬¬ä¸‰æ¬¡å°±éœ€è¦è¢«æ¸…é™¤ã€‚è¿™æ—¶å€™ç§»å…¥è€å¹´åŒºï¼Œå¾ˆæ˜æ˜¾ä¸æ˜¯ä¸€ä¸ªæ˜æ™ºçš„å†³å®šã€‚

æ‰€ä»¥ï¼ŒSurvivor çš„å­˜åœ¨æ„ä¹‰å°±æ˜¯å‡å°‘è¢«é€åˆ°è€å¹´ä»£çš„å¯¹è±¡ï¼Œè¿›è€Œå‡å°‘ Major GC çš„å‘ç”Ÿã€‚Survivor çš„é¢„ç­›é€‰ä¿è¯ï¼Œåªæœ‰ç»å†16æ¬¡ Minor GC è¿˜èƒ½åœ¨æ–°ç”Ÿä»£ä¸­å­˜æ´»çš„å¯¹è±¡ï¼Œæ‰ä¼šè¢«é€åˆ°è€å¹´ä»£ã€‚

2ã€ä¸ºå•¥éœ€è¦ä¿©ï¼Ÿ

è®¾ç½®ä¸¤ä¸ª Survivor åŒºæœ€å¤§çš„å¥½å¤„å°±æ˜¯è§£å†³å†…å­˜ç¢ç‰‡åŒ–ã€‚

æˆ‘ä»¬å…ˆå‡è®¾ä¸€ä¸‹ï¼ŒSurvivor å¦‚æœåªæœ‰ä¸€ä¸ªåŒºåŸŸä¼šæ€æ ·ã€‚Minor GC æ‰§è¡Œåï¼ŒEden åŒºè¢«æ¸…ç©ºäº†ï¼Œå­˜æ´»çš„å¯¹è±¡æ”¾åˆ°äº† Survivor åŒºï¼Œè€Œä¹‹å‰ Survivor åŒºä¸­çš„å¯¹è±¡ï¼Œå¯èƒ½ä¹Ÿæœ‰ä¸€äº›æ˜¯éœ€è¦è¢«æ¸…é™¤çš„ã€‚é—®é¢˜æ¥äº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ€ä¹ˆæ¸…é™¤å®ƒä»¬ï¼Ÿåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬åªèƒ½æ ‡è®°æ¸…é™¤ï¼Œè€Œæˆ‘ä»¬çŸ¥é“æ ‡è®°æ¸…é™¤æœ€å¤§çš„é—®é¢˜å°±æ˜¯å†…å­˜ç¢ç‰‡ï¼Œåœ¨æ–°ç”Ÿä»£è¿™ç§ç»å¸¸ä¼šæ¶ˆäº¡çš„åŒºåŸŸï¼Œé‡‡ç”¨æ ‡è®°æ¸…é™¤å¿…ç„¶ä¼šè®©å†…å­˜äº§ç”Ÿä¸¥é‡çš„ç¢ç‰‡åŒ–ã€‚å› ä¸º Survivor æœ‰2ä¸ªåŒºåŸŸï¼Œæ‰€ä»¥æ¯æ¬¡ Minor GCï¼Œä¼šå°†ä¹‹å‰ Eden åŒºå’Œ From åŒºä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ° To åŒºåŸŸã€‚ç¬¬äºŒæ¬¡ Minor GC æ—¶ï¼ŒFrom ä¸ To èŒè´£å…‘æ¢ï¼Œè¿™æ—¶å€™ä¼šå°† Eden åŒºå’Œ To åŒºä¸­çš„å­˜æ´»å¯¹è±¡å†å¤åˆ¶åˆ° From åŒºåŸŸï¼Œä»¥æ­¤åå¤ã€‚

è¿™ç§æœºåˆ¶æœ€å¤§çš„å¥½å¤„å°±æ˜¯ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ°¸è¿œæœ‰ä¸€ä¸ª Survivor space æ˜¯ç©ºçš„ï¼Œå¦ä¸€ä¸ªéç©ºçš„ Survivor space æ˜¯æ— ç¢ç‰‡çš„ã€‚é‚£ä¹ˆï¼ŒSurvivor ä¸ºä»€ä¹ˆä¸åˆ†æ›´å¤šå—å‘¢ï¼Ÿæ¯”æ–¹è¯´åˆ†æˆä¸‰ä¸ªã€å››ä¸ªã€äº”ä¸ª?æ˜¾ç„¶ï¼Œå¦‚æœ Survivor åŒºå†ç»†åˆ†ä¸‹å»ï¼Œæ¯ä¸€å—çš„ç©ºé—´å°±ä¼šæ¯”è¾ƒå°ï¼Œå®¹æ˜“å¯¼è‡´ Survivor åŒºæ»¡ï¼Œä¸¤å— Survivor åŒºå¯èƒ½æ˜¯ç»è¿‡æƒè¡¡ä¹‹åçš„æœ€ä½³æ–¹æ¡ˆã€‚

**Old åŒº**

è€å¹´ä»£å æ®ç€2/3çš„å †å†…å­˜ç©ºé—´ï¼Œåªæœ‰åœ¨ Major GC çš„æ—¶å€™æ‰ä¼šè¿›è¡Œæ¸…ç†ï¼Œæ¯æ¬¡ GC éƒ½ä¼šè§¦å‘â€œStop-The-Worldâ€ã€‚å†…å­˜è¶Šå¤§ï¼ŒSTW çš„æ—¶é—´ä¹Ÿè¶Šé•¿ï¼Œæ‰€ä»¥å†…å­˜ä¹Ÿä¸ä»…ä»…æ˜¯è¶Šå¤§å°±è¶Šå¥½ã€‚ç”±äºå¤åˆ¶ç®—æ³•åœ¨å¯¹è±¡å­˜æ´»ç‡è¾ƒé«˜çš„è€å¹´ä»£ä¼šè¿›è¡Œå¾ˆå¤šæ¬¡çš„å¤åˆ¶æ“ä½œï¼Œæ•ˆç‡å¾ˆä½ï¼Œæ‰€ä»¥è€å¹´ä»£è¿™é‡Œé‡‡ç”¨çš„æ˜¯æ ‡è®° --- æ•´ç†ç®—æ³•ã€‚

é™¤äº†ä¸Šè¿°æ‰€è¯´ï¼Œåœ¨å†…å­˜æ‹…ä¿æœºåˆ¶ä¸‹ï¼Œæ— æ³•å®‰ç½®çš„å¯¹è±¡ä¼šç›´æ¥è¿›åˆ°è€å¹´ä»£ï¼Œä»¥ä¸‹å‡ ç§æƒ…å†µä¹Ÿä¼šè¿›å…¥è€å¹´ä»£ã€‚

1ã€å¤§å¯¹è±¡

å¤§å¯¹è±¡æŒ‡éœ€è¦å¤§é‡è¿ç»­å†…å­˜ç©ºé—´çš„å¯¹è±¡ï¼Œè¿™éƒ¨åˆ†å¯¹è±¡ä¸ç®¡æ˜¯ä¸æ˜¯â€œæœç”Ÿå¤•æ­»â€ï¼Œéƒ½ä¼šç›´æ¥è¿›åˆ°è€å¹´ä»£ã€‚è¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†é¿å…åœ¨ Eden åŒºåŠ2ä¸ª Survivor åŒºä¹‹é—´å‘ç”Ÿå¤§é‡çš„å†…å­˜å¤åˆ¶ã€‚å½“ä½ çš„ç³»ç»Ÿæœ‰éå¸¸å¤šâ€œæœç”Ÿå¤•æ­»â€çš„å¤§å¯¹è±¡æ—¶ï¼Œå¾—æ³¨æ„äº†ã€‚

2ã€é•¿æœŸå­˜æ´»å¯¹è±¡

è™šæ‹Ÿæœºç»™æ¯ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡å¹´é¾„ï¼ˆAgeï¼‰è®¡æ•°å™¨ã€‚æ­£å¸¸æƒ…å†µä¸‹å¯¹è±¡ä¼šä¸æ–­çš„åœ¨ Survivor çš„ From åŒºä¸ To åŒºä¹‹é—´ç§»åŠ¨ï¼Œå¯¹è±¡åœ¨ Survivor åŒºä¸­æ²¡ç»å†ä¸€æ¬¡ Minor GCï¼Œå¹´é¾„å°±å¢åŠ 1å²ã€‚å½“å¹´é¾„å¢åŠ åˆ°15å²æ—¶ï¼Œè¿™æ—¶å€™å°±ä¼šè¢«è½¬ç§»åˆ°è€å¹´ä»£ã€‚å½“ç„¶ï¼Œè¿™é‡Œçš„15ï¼ŒJVM ä¹Ÿæ”¯æŒè¿›è¡Œç‰¹æ®Šè®¾ç½®ã€‚

3ã€åŠ¨æ€å¯¹è±¡å¹´é¾„

è™šæ‹Ÿæœºå¹¶ä¸é‡è§†è¦æ±‚å¯¹è±¡å¹´é¾„å¿…é¡»åˆ°15å²ï¼Œæ‰ä¼šæ”¾å…¥è€å¹´åŒºï¼Œå¦‚æœ Survivor ç©ºé—´ä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°çš„ç»¼åˆå¤§äº Survivor ç©ºé—´çš„ä¸€èˆ¬ï¼Œå¹´é¾„å¤§äºç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å°±å¯ä»¥ç›´æ¥è¿›å»è€å¹´åŒºï¼Œæ— éœ€ç­‰ä½ â€œæˆå¹´â€ã€‚

è¿™å…¶å®æœ‰ç‚¹ç±»ä¼¼äºè´Ÿè½½å‡è¡¡ï¼Œè½®è¯¢æ˜¯è´Ÿè½½å‡è¡¡çš„ä¸€ç§ï¼Œä¿è¯æ¯å°æœºå™¨éƒ½åˆ†å¾—åŒæ ·çš„è¯·æ±‚ã€‚çœ‹ä¼¼å¾ˆå‡è¡¡ï¼Œä½†æ¯å°æœºçš„ç¡¬ä»¶ä¸é€šï¼Œå¥åº·çŠ¶å†µä¸åŒï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŸºäºæ¯å°æœºæ¥å—çš„è¯·æ±‚æ•°ï¼Œæˆ–æ¯å°æœºçš„å“åº”æ—¶é—´ç­‰ï¼Œæ¥è°ƒæ•´æˆ‘ä»¬çš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚

>- æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼ŒåŸæ–‡é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/73628158
>- https://segmentfault.com/a/1190000038256027

----

GitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„å¼€æºçŸ¥è¯†åº“ã€Š[äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯](https://github.com/itwanger/toBeBetterJavaer)ã€‹ç¬¬ä¸€ç‰ˆ PDF ç»ˆäºæ¥äº†ï¼åŒ…æ‹¬JavaåŸºç¡€è¯­æ³•ã€æ•°ç»„&å­—ç¬¦ä¸²ã€OOPã€é›†åˆæ¡†æ¶ã€Java IOã€å¼‚å¸¸å¤„ç†ã€Java æ–°ç‰¹æ€§ã€ç½‘ç»œç¼–ç¨‹ã€NIOã€å¹¶å‘ç¼–ç¨‹ã€JVMç­‰ç­‰ï¼Œå…±è®¡ 32 ä¸‡ä½™å­—ï¼Œ500+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯é€šä¿—æ˜“æ‡‚ã€é£è¶£å¹½é»˜â€¦â€¦è¯¦æƒ…æˆ³ï¼š[å¤ªèµäº†ï¼ŒGitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„ Java æ•™ç¨‹](https://javabetter.cn/overview/)


å¾®ä¿¡æœ **æ²‰é»˜ç‹äºŒ** æˆ–æ‰«æä¸‹æ–¹äºŒç»´ç å…³æ³¨äºŒå“¥çš„åŸåˆ›å…¬ä¼—å·æ²‰é»˜ç‹äºŒï¼Œå›å¤ **222** å³å¯å…è´¹é¢†å–ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png)
