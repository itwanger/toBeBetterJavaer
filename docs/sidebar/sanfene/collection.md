---
title: Javaé¢è¯•é¢˜ä¹‹Javaé›†åˆæ¡†æ¶ç¯‡ï¼ˆJavaå®¹å™¨ç¯‡ï¼‰ï¼Œ29é“Javaé›†åˆæ¡†æ¶å…«è‚¡æ–‡ï¼ˆ7åƒå­—38å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘
shortTitle: é¢æ¸£é€†è¢­-Javaé›†åˆæ¡†æ¶
author: ä¸‰åˆ†æ¶
category:
  - é¢æ¸£é€†è¢­
tag:
  - é¢æ¸£é€†è¢­
description: ä¸‹è½½æ¬¡æ•°è¶… 1 ä¸‡æ¬¡ï¼Œ7200 å­— 38 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 29 é“ Java é›†åˆæ¡†æ¶é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› Java å®¹å™¨å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚
head:
  - - meta
    - name: keywords
      content: Java,é›†åˆæ¡†æ¶,Javaå®¹å™¨,List,Map,Set,é¢è¯•é¢˜,å…«è‚¡æ–‡,java
---

7200 å­— 38 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 29 é“ Java é›†åˆæ¡†æ¶é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› Java å®¹å™¨å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³[è½¬è½½é“¾æ¥](https://mp.weixin.qq.com/s/ptbM0EqlnCWeWm9VdSCDLg)ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³[åŸæ–‡é“¾æ¥](https://mp.weixin.qq.com/s/SHkQ7LEOT0itt4bXMoDBPw)ã€‚

## å¼•è¨€

### 1.è¯´è¯´æœ‰å“ªäº›å¸¸è§çš„é›†åˆæ¡†æ¶ï¼Ÿ

- æ¨èé˜…è¯»ï¼š[äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šJava é›†åˆæ¡†æ¶](https://javabetter.cn/collection/gailan.html)
- æ¨èé˜…è¯»ï¼š[é˜»å¡é˜Ÿåˆ— BlockingQueue](https://javabetter.cn/thread/BlockingQueue.html)ã€‚

Java é›†åˆæ¡†æ¶å¯ä»¥åˆ†ä¸ºä¸¤æ¡å¤§çš„æ”¯çº¿ï¼š

â‘ ã€Collectionï¼Œä¸»è¦ç”± Listã€Setã€Queue ç»„æˆï¼š

- List ä»£è¡¨æœ‰åºã€å¯é‡å¤çš„é›†åˆï¼Œå…¸å‹ä»£è¡¨å°±æ˜¯å°è£…äº†åŠ¨æ€æ•°ç»„çš„ [ArrayList](https://javabetter.cn/collection/arraylist.html) å’Œå°è£…äº†é“¾è¡¨çš„ [LinkedList](https://javabetter.cn/collection/linkedlist.html)ï¼›
- Set ä»£è¡¨æ— åºã€ä¸å¯é‡å¤çš„é›†åˆï¼Œå…¸å‹ä»£è¡¨å°±æ˜¯ HashSet å’Œ TreeSetï¼›
- Queue ä»£è¡¨é˜Ÿåˆ—ï¼Œå…¸å‹ä»£è¡¨å°±æ˜¯åŒç«¯é˜Ÿåˆ— [ArrayDeque](https://javabetter.cn/collection/arraydeque.html)ï¼Œä»¥åŠä¼˜å…ˆçº§é˜Ÿåˆ— [PriorityQueue](https://javabetter.cn/collection/PriorityQueue.html)ã€‚

â‘¡ã€Mapï¼Œä»£è¡¨é”®å€¼å¯¹çš„é›†åˆï¼Œå…¸å‹ä»£è¡¨å°±æ˜¯ [HashMap](https://javabetter.cn/collection/hashmap.html)ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šJavaé›†åˆä¸»è¦å…³ç³»](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/gailan-01.png)

æ¦‚è§ˆå›¾è¯´æ˜ï¼š

â‘ ã€Collection æ¥å£ï¼šæœ€åŸºæœ¬çš„é›†åˆæ¡†æ¶è¡¨ç¤ºæ–¹å¼ï¼Œæä¾›äº†æ·»åŠ ã€åˆ é™¤ã€æ¸…ç©ºç­‰åŸºæœ¬æ“ä½œï¼Œå®ƒä¸»è¦æœ‰ä¸‰ä¸ªå­æ¥å£ï¼š

- `List`ï¼šä¸€ä¸ªæœ‰åºçš„é›†åˆï¼Œå¯ä»¥åŒ…å«é‡å¤çš„å…ƒç´ ã€‚å®ç°ç±»åŒ…æ‹¬ ArrayListã€LinkedList ç­‰ã€‚
- `Set`ï¼šä¸€ä¸ªä¸åŒ…å«é‡å¤å…ƒç´ çš„é›†åˆã€‚å®ç°ç±»åŒ…æ‹¬ HashSetã€LinkedHashSetã€TreeSet ç­‰ã€‚
- `Queue`ï¼šä¸€ä¸ªç”¨äºä¿æŒå…ƒç´ é˜Ÿåˆ—çš„é›†åˆã€‚å®ç°ç±»åŒ…æ‹¬ PriorityQueueã€ArrayDeque ç­‰ã€‚

â‘¡ã€`Map` æ¥å£ï¼šè¡¨ç¤ºé”®å€¼å¯¹çš„é›†åˆï¼Œä¸€ä¸ªé”®æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚é”®ä¸èƒ½é‡å¤ï¼Œæ¯ä¸ªé”®åªèƒ½å¯¹åº”ä¸€ä¸ªå€¼ã€‚Map æ¥å£çš„å®ç°ç±»åŒ…æ‹¬ HashMapã€LinkedHashMapã€TreeMap ç­‰ã€‚

é›†åˆæ¡†æ¶ä½äº java.util åŒ…ä¸‹ï¼Œè¯¥åŒ…å«æä¾›äº†ä¸¤ä¸ªå¸¸ç”¨çš„å·¥å…·ç±»ï¼š

- [Collections](https://javabetter.cn/common-tool/collections.html)ï¼šæä¾›äº†ä¸€äº›å¯¹é›†åˆè¿›è¡Œæ’åºã€äºŒåˆ†æŸ¥æ‰¾ã€åŒæ­¥çš„é™æ€æ–¹æ³•ã€‚
- [Arrays](https://javabetter.cn/common-tool/arrays.html)ï¼šæä¾›äº†ä¸€äº›å¯¹æ•°ç»„è¿›è¡Œæ’åºã€æ‰“å°ã€å’Œ List è¿›è¡Œè½¬æ¢çš„é™æ€æ–¹æ³•ã€‚

#### ç®€å•ä»‹ç»ä¸€ä¸‹é˜Ÿåˆ— Queue

Java ä¸­çš„é˜Ÿåˆ—ä¸»è¦é€šè¿‡ java.util.Queue æ¥å£å’Œ java.util.concurrent.BlockingQueue ä¸¤ä¸ªæ¥å£æ¥å®ç°ã€‚

PriorityQueue æ˜¯ä¸€ä¸ªåŸºäºä¼˜å…ˆçº§å †çš„æ— ç•Œé˜Ÿåˆ—ï¼Œå®ƒçš„å…ƒç´ æŒ‰ç…§è‡ªç„¶é¡ºåºæ’åºæˆ–è€… Comparator è¿›è¡Œæ’åºã€‚

![æè±ªï¼šä¼˜å…ˆçº§é˜Ÿåˆ—](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/PriorityQueue-8dca2f55-a7c7-49e1-95a5-df1a34f2aef5.png)

ArrayDeque æ˜¯ä¸€ä¸ªåŸºäºæ•°ç»„çš„åŒç«¯é˜Ÿåˆ—ï¼Œå¯ä»¥åœ¨ä¸¤ç«¯æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚

![æè±ªï¼šåŒç«¯é˜Ÿåˆ—](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/arraydeque-1e7086a3-3d31-4553-aa16-5eaf2193649e.png)

è¿˜æœ‰ä¸€ä¸ªå¤§å®¶å¯èƒ½å¿½ç•¥çš„é˜Ÿåˆ—ï¼Œé‚£å°±æ˜¯ LinkedListï¼Œå®ƒæ—¢å¯ä»¥å½“ä½œ List ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œ Queue ä½¿ç”¨ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/list-war-2-02.png)

BlockingQueue ä»£è¡¨çš„æ˜¯çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ï¼Œä¸ä»…å¯ä»¥ç”±å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®ï¼Œè¿˜æ·»åŠ äº†ç­‰å¾…/é€šçŸ¥æœºåˆ¶ï¼Œä»¥ä¾¿åœ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶é˜»å¡è·å–å…ƒç´ çš„çº¿ç¨‹ï¼Œç›´åˆ°é˜Ÿåˆ—å˜å¾—å¯ç”¨ï¼Œæˆ–è€…åœ¨é˜Ÿåˆ—æ»¡æ—¶é˜»å¡æ’å…¥å…ƒç´ çš„çº¿ç¨‹ï¼Œç›´åˆ°é˜Ÿåˆ—å˜å¾—å¯ç”¨ã€‚

é˜»å¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰è¢«å¹¿æ³›ç”¨äºâ€œç”Ÿäº§è€…-æ¶ˆè´¹è€…â€é—®é¢˜ä¸­ï¼Œå…¶åŸå› æ˜¯ BlockingQueue æä¾›äº†å¯é˜»å¡çš„æ’å…¥å’Œç§»é™¤æ–¹æ³•ã€‚å½“é˜Ÿåˆ—å®¹å™¨å·²æ»¡ï¼Œç”Ÿäº§è€…çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—æœªæ»¡ï¼›å½“é˜Ÿåˆ—å®¹å™¨ä¸ºç©ºæ—¶ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´è‡³é˜Ÿåˆ—éç©ºæ—¶ä¸ºæ­¢ã€‚

BlockingQueue æ¥å£çš„å®ç°ç±»æœ‰ ArrayBlockingQueueã€DelayQueueã€LinkedBlockingDequeã€LinkedBlockingQueueã€LinkedTransferQueueã€PriorityBlockingQueueã€SynchronousQueue ç­‰ã€‚

![äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯](https://cdn.tobebetterjavaer.com/stutymore/BlockingQueue-20230818153420.png)

é˜»å¡æŒ‡çš„æ˜¯ä¸€ç§ç¨‹åºæ‰§è¡ŒçŠ¶æ€ï¼Œå…¶ä¸­æŸä¸ªçº¿ç¨‹åœ¨ç­‰å¾…æŸä¸ªæ¡ä»¶æ»¡è¶³æ—¶æš‚åœå…¶æ‰§è¡Œï¼ˆå³é˜»å¡ï¼‰ï¼Œç›´åˆ°æ¡ä»¶æ»¡è¶³æ—¶æ¢å¤å…¶æ‰§è¡Œã€‚

#### é˜»å¡é˜Ÿåˆ—æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ

å°±æ‹¿ ArrayBlockingQueue æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäºæ•°ç»„çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œé‡‡ç”¨ ReentrantLock é”æ¥å®ç°çº¿ç¨‹çš„äº’æ–¥ï¼Œè€Œ ReentrantLock åº•å±‚é‡‡ç”¨çš„æ˜¯ AQS å®ç°çš„é˜Ÿåˆ—åŒæ­¥ï¼Œçº¿ç¨‹çš„é˜»å¡è°ƒç”¨ LockSupport.park å®ç°ï¼Œå”¤é†’è°ƒç”¨ LockSupport.unpark å®ç°ã€‚

```java
public void put(E e) throws InterruptedException {
    checkNotNull(e);
    // ä½¿ç”¨ReentrantLocké”
    final ReentrantLock lock = this.lock;
    // è·å–é”
    lock.lockInterruptibly();
    try {
        // å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œé˜»å¡
        while (count == items.length)
            notFull.await();
        // æ’å…¥å…ƒç´ 
        enqueue(e);
    } finally {
        // é‡Šæ”¾é”
        lock.unlock();
    }
}

/**
 * æ’å…¥å…ƒç´ 
 */
private void enqueue(E x) {
    final Object[] items = this.items;
    items[putIndex] = x;
    if (++putIndex == items.length)
        putIndex = 0;
    count++;
	// æ’å…¥å…ƒç´ åï¼Œé€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹å¯ä»¥ç»§ç»­å–å…ƒç´ 
    notEmpty.signal();
}

/**
 * è·å–å…ƒç´ 
 */
public E take() throws InterruptedException {
    final ReentrantLock lock = this.lock;
    // è·å–é”
    lock.lockInterruptibly();
    try {
        // å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œé˜»å¡ï¼Œç­‰å¾…ç”Ÿäº§è€…çº¿ç¨‹æ”¾å…¥å…ƒç´ 
        while (count == 0)
            notEmpty.await();
        // ç§»é™¤å…ƒç´ å¹¶è¿”å›
        return dequeue();
    } finally {
        lock.unlock();
    }
}

/**
 * ç§»é™¤å…ƒç´ å¹¶è¿”å›
 */
private E dequeue() {
    final Object[] items = this.items;
    @SuppressWarnings("unchecked")
    E x = (E) items[takeIndex];
    items[takeIndex] = null;
    // æ•°ç»„æ˜¯å¾ªç¯é˜Ÿåˆ—ï¼Œå¦‚æœåˆ°è¾¾æ•°ç»„æœ«å°¾ï¼Œä»å¤´å¼€å§‹
    if (++takeIndex == items.length)
        takeIndex = 0;
    count--;
    if (itrs != null)
        itrs.elementDequeued();
    // ç§»é™¤å…ƒç´ åï¼Œé€šçŸ¥ç”Ÿäº§è€…çº¿ç¨‹å¯ä»¥ç»§ç»­æ”¾å…¥å…ƒç´ 
    notFull.signal();
    return x;
}
```

#### ç”¨è¿‡å“ªäº›é›†åˆç±»ï¼Œå®ƒä»¬çš„ä¼˜åŠ£ï¼Ÿ

åœ¨ Java ä¸­ï¼Œå¸¸ç”¨çš„é›†åˆç±»æœ‰ ArrayListã€LinkedListã€HashMapã€LinkedHashMap ç­‰ã€‚

1. ArrayListï¼šArrayList å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå®ƒå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ‰©å®¹ã€‚ä¼˜ç‚¹æ˜¯è®¿é—®é€Ÿåº¦å¿«ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•ç›´æ¥æŸ¥åˆ°å…ƒç´ ã€‚ç¼ºç‚¹æ˜¯æ’å…¥å’Œåˆ é™¤å…ƒç´ å¯èƒ½éœ€è¦ç§»åŠ¨å…ƒç´ ï¼Œæ•ˆç‡å°±ä¼šé™ä½ã€‚

2. LinkedListï¼šLinkedList æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå®ƒé€‚åˆé¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚ä¼˜ç‚¹æ˜¯æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ—¶å€™åªéœ€è¦æ”¹å˜èŠ‚ç‚¹çš„å‰åæŒ‡é’ˆï¼Œç¼ºç‚¹æ˜¯è®¿é—®å…ƒç´ æ—¶éœ€è¦éå†é“¾è¡¨ã€‚

3. HashMapï¼šHashMap æ˜¯ä¸€ä¸ªåŸºäºå“ˆå¸Œè¡¨çš„é”®å€¼å¯¹é›†åˆã€‚ä¼˜ç‚¹æ˜¯æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾å…ƒç´ çš„é€Ÿåº¦éƒ½å¾ˆå¿«ã€‚ç¼ºç‚¹æ˜¯å®ƒä¸ä¿ç•™é”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚

4. LinkedHashMapï¼šLinkedHashMap åœ¨ HashMap çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚

#### é˜Ÿåˆ—å’Œæ ˆçš„åŒºåˆ«äº†è§£å—ï¼Ÿ

é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºï¼ˆFIFO, First-In-First-Outï¼‰çš„æ•°æ®ç»“æ„ã€‚åœ¨é˜Ÿåˆ—ä¸­ï¼Œç¬¬ä¸€ä¸ªåŠ å…¥é˜Ÿåˆ—çš„å…ƒç´ ä¼šæ˜¯ç¬¬ä¸€ä¸ªè¢«ç§»é™¤çš„ã€‚é˜Ÿåˆ—å¸¸ç”¨äºå¤„ç†æŒ‰é¡ºåºæ¥çš„ä»»åŠ¡ã€‚

![ç–¯ç‹‚çš„æŠ€æœ¯å®…ï¼šé˜Ÿåˆ—](https://cdn.tobebetterjavaer.com/stutymore/collection-20240412224341.png)

æ ˆæ˜¯ä¸€ç§åè¿›å…ˆå‡ºï¼ˆLIFO, Last-In-First-Outï¼‰çš„æ•°æ®ç»“æ„ã€‚åœ¨è¿™ç§ç»“æ„ä¸­ï¼Œæœ€åä¸€ä¸ªåŠ å…¥æ ˆçš„å…ƒç´ ä¼šæ˜¯ç¬¬ä¸€ä¸ªè¢«ç§»é™¤çš„ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—æ ˆéå¸¸é€‚åˆäºé‚£äº›éœ€è¦è®¿é—®æœ€æ–°æ·»åŠ çš„æ•°æ®å…ƒç´ çš„åœºåˆã€‚

![Wang Weiï¼šæ ˆ](https://cdn.tobebetterjavaer.com/stutymore/collection-20240412224549.png)

#### å“ªäº›æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ

åƒ Vectorã€Hashtableã€ConcurrentHashMapã€CopyOnWriteArrayListã€ConcurrentLinkedQueueã€ArrayBlockingQueueã€LinkedBlockingQueue è¿™äº›éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„ç”¨å‹é‡‘èä¸€é¢åŸé¢˜ï¼šä½ äº†è§£å“ªäº›é›†åˆæ¡†æ¶ï¼Ÿ
> 2. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„åä¸ºä¸€é¢åŸé¢˜ï¼šè¯´ä¸‹ Java å®¹å™¨å’Œ HashMap
> 3. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°ç±³æš‘æœŸå®ä¹ åŒå­¦ E ä¸€é¢é¢è¯•åŸé¢˜ï¼šä½ äº†è§£å“ªäº›é›†åˆï¼Ÿ
> 4. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 16 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šçŸ¥é“å“ªäº›é›†åˆï¼Œè®²è®² HashMap å’Œ TreeMap çš„åŒºåˆ«ï¼Œè®²è®²ä¸¤è€…åº”ç”¨åœºæ™¯çš„åŒºåˆ«ï¼›è®²ä¸€ä¸‹æœ‰å“ªäº›é˜Ÿåˆ—ï¼Œé˜»å¡é˜Ÿåˆ—çš„é˜»å¡æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ
> 5. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å†œä¸šé“¶è¡Œé¢ç»åŒå­¦ 7 Java åç«¯é¢è¯•åŸé¢˜ï¼šç”¨è¿‡å“ªäº›é›†åˆç±»ï¼Œå®ƒä»¬çš„ä¼˜åŠ£
> 6. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„åä¸º OD é¢ç»åŒå­¦ 1 ä¸€é¢é¢è¯•åŸé¢˜ï¼šé˜Ÿåˆ—å’Œæ ˆçš„åŒºåˆ«äº†è§£å—?
> 7. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å†œä¸šé“¶è¡ŒåŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šé˜»å¡é˜Ÿåˆ—çš„å®ç°æ–¹å¼
> 8. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šJava å®¹å™¨æœ‰å“ªäº›ï¼ŸListã€Set è¿˜æœ‰ Map çš„åŒºåˆ«ï¼Ÿ
> 9. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„ 360 é¢ç»åŒå­¦ 3 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šjava æœ‰å“ªäº›é›†åˆ
> 10. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 11 é¢è¯•åŸé¢˜ï¼šjava ä¸­çš„é›†åˆç±»å‹ï¼Ÿå“ªäº›æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ
> 11. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„æ‹›å•†é“¶è¡Œé¢ç»åŒå­¦ 6 æ‹›é“¶ç½‘ç»œç§‘æŠ€é¢è¯•åŸé¢˜ï¼šJava é›†åˆæœ‰å“ªäº›ï¼Ÿ
> 12. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„ç”¨å‹é¢è¯•åŸé¢˜ï¼šé›†åˆå®¹å™¨èƒ½åˆ—ä¸¾å‡ ä¸ªå—?

## List

### 2.ArrayList å’Œ LinkedList æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

æ¨èé˜…è¯»ï¼š[äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šArrayList å’Œ LinkedList](https://javabetter.cn/collection/list-war-2.html)

ArrayList å’Œ LinkedList çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨æ•°æ®ç»“æ„ã€ç”¨é€”ã€æ˜¯å¦æ”¯æŒéšæœºè®¿é—®ã€å†…å­˜å ç”¨ç­‰æ–¹é¢ã€‚

#### æ•°æ®ç»“æ„æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ

- ArrayList åŸºäºæ•°ç»„å®ç°
- LinkedList åŸºäºé“¾è¡¨å®ç°

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šArrayListå’ŒLinkedListçš„æ•°æ®ç»“æ„](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-2.png)

#### ç”¨é€”æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ

å¤šæ•°æƒ…å†µä¸‹ï¼ŒArrayList æ›´åˆ©äºæŸ¥æ‰¾ï¼ŒLinkedList æ›´åˆ©äºå¢åˆ 

â‘ ã€ç”±äº ArrayList æ˜¯åŸºäºæ•°ç»„å®ç°çš„ï¼Œæ‰€ä»¥ `get(int index)` å¯ä»¥ç›´æ¥é€šè¿‡æ•°ç»„ä¸‹æ ‡è·å–ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼›LinkedList æ˜¯åŸºäºé“¾è¡¨å®ç°çš„ï¼Œ`get(int index)` éœ€è¦éå†é“¾è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚

å½“ç„¶ï¼Œ`get(E element)` è¿™ç§æŸ¥æ‰¾ï¼Œä¸¤ç§é›†åˆéƒ½éœ€è¦éå†é€šè¿‡ equals æ¯”è¾ƒè·å–å…ƒç´ ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(n)ã€‚

â‘¡ã€ArrayList å¦‚æœå¢åˆ çš„æ˜¯æ•°ç»„çš„å°¾éƒ¨ï¼Œç›´æ¥æ’å…¥æˆ–è€…åˆ é™¤å°±å¯ä»¥äº†ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼›å¦‚æœ add çš„æ—¶å€™æ¶‰åŠåˆ°æ‰©å®¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šæå‡åˆ° O(n)ã€‚

ä½†å¦‚æœæ’å…¥çš„æ˜¯ä¸­é—´çš„ä½ç½®ï¼Œå°±éœ€è¦æŠŠæ’å…¥ä½ç½®åçš„å…ƒç´ å‘å‰æˆ–è€…å‘åç§»åŠ¨ï¼Œç”šè‡³è¿˜æœ‰å¯èƒ½è§¦å‘æ‰©å®¹ï¼Œæ•ˆç‡å°±ä¼šä½å¾ˆå¤šï¼ŒO(n)ã€‚

LinkedList å› ä¸ºæ˜¯é“¾è¡¨ç»“æ„ï¼Œæ’å…¥å’Œåˆ é™¤åªéœ€è¦æ”¹å˜å‰ç½®èŠ‚ç‚¹ã€åç½®èŠ‚ç‚¹å’Œæ’å…¥èŠ‚ç‚¹çš„å¼•ç”¨å°±è¡Œäº†ï¼Œä¸éœ€è¦ç§»åŠ¨å…ƒç´ ã€‚

å¦‚æœæ˜¯åœ¨é“¾è¡¨çš„å¤´éƒ¨æ’å…¥æˆ–è€…åˆ é™¤ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼›å¦‚æœæ˜¯åœ¨é“¾è¡¨çš„ä¸­é—´æ’å…¥æˆ–è€…åˆ é™¤ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œå› ä¸ºéœ€è¦éå†é“¾è¡¨æ‰¾åˆ°æ’å…¥ä½ç½®ï¼›å¦‚æœæ˜¯åœ¨é“¾è¡¨çš„å°¾éƒ¨æ’å…¥æˆ–è€…åˆ é™¤ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šArrayListå’ŒLinkedListä¸­é—´æ’å…¥](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-3.png)

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šArrayListå’ŒLinkedListä¸­é—´åˆ é™¤](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-4.png)

æ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸ªé™·é˜±ï¼ŒLinkedList æ›´åˆ©äºå¢åˆ ä¸æ˜¯ä½“ç°åœ¨æ—¶é—´å¤æ‚åº¦ä¸Šï¼Œå› ä¸ºäºŒè€…å¢åˆ çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(n)ï¼Œéƒ½éœ€è¦éå†åˆ—è¡¨ï¼›è€Œæ˜¯ä½“ç°åœ¨å¢åˆ çš„æ•ˆç‡ä¸Šï¼Œå› ä¸º LinkedList çš„å¢åˆ åªéœ€è¦æ”¹å˜å¼•ç”¨ï¼Œè€Œ ArrayList çš„å¢åˆ å¯èƒ½éœ€è¦ç§»åŠ¨å…ƒç´ ã€‚

#### æ˜¯å¦æ”¯æŒéšæœºè®¿é—®ï¼Ÿ

â‘ ã€ArrayList æ˜¯åŸºäºæ•°ç»„çš„ï¼Œä¹Ÿå®ç°äº† RandomAccess æ¥å£ï¼Œæ‰€ä»¥å®ƒæ”¯æŒéšæœºè®¿é—®ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡ç›´æ¥è·å–å…ƒç´ ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/collection-20240319092907.png)

â‘¡ã€LinkedList æ˜¯åŸºäºé“¾è¡¨çš„ï¼Œæ‰€ä»¥å®ƒæ²¡æ³•æ ¹æ®ä¸‹æ ‡ç›´æ¥è·å–å…ƒç´ ï¼Œä¸æ”¯æŒéšæœºè®¿é—®ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ²¡æœ‰å®ç° RandomAccess æ¥å£ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/collection-20240319093038.png)

#### å†…å­˜å ç”¨æœ‰ä½•ä¸åŒï¼Ÿ

ArrayList æ˜¯åŸºäºæ•°ç»„çš„ï¼Œæ˜¯ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥å®ƒçš„å†…å­˜å ç”¨æ˜¯æ¯”è¾ƒç´§å‡‘çš„ï¼›ä½†å¦‚æœæ¶‰åŠåˆ°æ‰©å®¹ï¼Œå°±ä¼šé‡æ–°åˆ†é…å†…å­˜ï¼Œç©ºé—´æ˜¯åŸæ¥çš„ 1.5 å€ï¼Œå­˜åœ¨ä¸€å®šçš„ç©ºé—´æµªè´¹ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/collection-20240319093453.png)

LinkedList æ˜¯åŸºäºé“¾è¡¨çš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å’Œä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ï¼Œäºæ˜¯æ¯ä¸ªèŠ‚ç‚¹å ç”¨çš„å†…å­˜ç©ºé—´ç¨å¾®å¤§ä¸€ç‚¹ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šArrayList å’Œ LinkedList çš„æ—¶é—´å¤æ‚åº¦
> 2. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°ç±³æš‘æœŸå®ä¹ åŒå­¦ E ä¸€é¢é¢è¯•åŸé¢˜ï¼šä½ äº†è§£å“ªäº›é›†åˆï¼Ÿ

### 3.ArrayList çš„æ‰©å®¹æœºåˆ¶äº†è§£å—ï¼Ÿ

ArrayList ç¡®åˆ‡åœ°è¯´ï¼Œåº”è¯¥å«åšåŠ¨æ€æ•°ç»„ï¼Œå› ä¸ºå®ƒçš„åº•å±‚æ˜¯é€šè¿‡æ•°ç»„æ¥å®ç°çš„ï¼Œå½“å¾€ ArrayList ä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œä¼šå…ˆæ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œå¦‚æœå½“å‰å®¹é‡+1 è¶…è¿‡æ•°ç»„é•¿åº¦ï¼Œå°±ä¼šè¿›è¡Œæ‰©å®¹ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šArrayListæ‰©å®¹](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-5.png)

æ‰©å®¹åçš„æ–°æ•°ç»„é•¿åº¦æ˜¯åŸæ¥çš„ 1.5 å€ï¼Œç„¶åå†æŠŠåŸæ•°ç»„çš„å€¼æ‹·è´åˆ°æ–°æ•°ç»„ä¸­ã€‚

```java
private void grow(int minCapacity) {
    // overflow-conscious code
    int oldCapacity = elementData.length;
    int newCapacity = oldCapacity + (oldCapacity >> 1);
    if (newCapacity - minCapacity < 0)
        newCapacity = minCapacity;
    if (newCapacity - MAX_ARRAY_SIZE > 0)
        newCapacity = hugeCapacity(minCapacity);
    // minCapacity is usually close to size, so this is a win:
    elementData = Arrays.copyOf(elementData, newCapacity);
}
```



> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„è”æƒ³é¢ç»åŒå­¦ 7 é¢è¯•åŸé¢˜ï¼šJava é›†åˆç±»ä»‹ç»ï¼ŒæŒ‘ä¸€ä¸ªè®²åŸç†ã€‚


### 4.ArrayList æ€ä¹ˆåºåˆ—åŒ–çš„çŸ¥é“å—ï¼Ÿ ä¸ºä»€ä¹ˆç”¨ transient ä¿®é¥°æ•°ç»„ï¼Ÿ

ArrayList çš„åºåˆ—åŒ–ä¸å¤ªä¸€æ ·ï¼Œå®ƒä½¿ç”¨`transient`ä¿®é¥°å­˜å‚¨å…ƒç´ çš„`elementData`çš„æ•°ç»„ï¼Œ`transient`å…³é”®å­—çš„ä½œç”¨æ˜¯è®©è¢«ä¿®é¥°çš„æˆå‘˜å±æ€§ä¸è¢«åºåˆ—åŒ–ã€‚

**ä¸ºä»€ä¹ˆæœ€ ArrayList ä¸ç›´æ¥åºåˆ—åŒ–å…ƒç´ æ•°ç»„å‘¢ï¼Ÿ**

å‡ºäºæ•ˆç‡çš„è€ƒè™‘ï¼Œæ•°ç»„å¯èƒ½é•¿åº¦ 100ï¼Œä½†å®é™…åªç”¨äº† 50ï¼Œå‰©ä¸‹çš„ 50 ä¸ç”¨å…¶å®ä¸ç”¨åºåˆ—åŒ–ï¼Œè¿™æ ·å¯ä»¥æé«˜åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ•ˆç‡ï¼Œè¿˜å¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚

**é‚£ ArrayList æ€ä¹ˆåºåˆ—åŒ–å‘¢ï¼Ÿ**

ArrayList é€šè¿‡ä¸¤ä¸ªæ–¹æ³•**readObjectã€writeObject**è‡ªå®šä¹‰åºåˆ—åŒ–å’Œååºåˆ—åŒ–ç­–ç•¥ï¼Œå®é™…ç›´æ¥ä½¿ç”¨ä¸¤ä¸ªæµ`ObjectOutputStream`å’Œ`ObjectInputStream`æ¥è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚

![ArrayListè‡ªå®šä¹‰åºåˆ—åŒ–](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-6.png)

### 5.å¿«é€Ÿå¤±è´¥(fail-fast)å’Œå®‰å…¨å¤±è´¥(fail-safe)äº†è§£å—ï¼Ÿ

**å¿«é€Ÿå¤±è´¥ï¼ˆfailâ€”fastï¼‰**ï¼šå¿«é€Ÿå¤±è´¥æ˜¯ Java é›†åˆçš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶

- åœ¨ç”¨è¿­ä»£å™¨éå†ä¸€ä¸ªé›†åˆå¯¹è±¡æ—¶ï¼Œå¦‚æœçº¿ç¨‹ A éå†è¿‡ç¨‹ä¸­ï¼Œçº¿ç¨‹ B å¯¹é›†åˆå¯¹è±¡çš„å†…å®¹è¿›è¡Œäº†ä¿®æ”¹ï¼ˆå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ï¼‰ï¼Œåˆ™ä¼šæŠ›å‡º Concurrent Modification Exceptionã€‚
- åŸç†ï¼šè¿­ä»£å™¨åœ¨éå†æ—¶ç›´æ¥è®¿é—®é›†åˆä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ª ` modCount` å˜é‡ã€‚é›†åˆåœ¨è¢«éå†æœŸé—´å¦‚æœå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¹å˜`modCount`çš„å€¼ã€‚æ¯å½“è¿­ä»£å™¨ä½¿ç”¨ hashNext()/next()éå†ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æµ‹ modCount å˜é‡æ˜¯å¦ä¸º expectedmodCount å€¼ï¼Œæ˜¯çš„è¯å°±è¿”å›éå†ï¼›å¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œç»ˆæ­¢éå†ã€‚
- æ³¨æ„ï¼šè¿™é‡Œå¼‚å¸¸çš„æŠ›å‡ºæ¡ä»¶æ˜¯æ£€æµ‹åˆ° modCountï¼=expectedmodCount è¿™ä¸ªæ¡ä»¶ã€‚å¦‚æœé›†åˆå‘ç”Ÿå˜åŒ–æ—¶ä¿®æ”¹ modCount å€¼åˆšå¥½åˆè®¾ç½®ä¸ºäº† expectedmodCount å€¼ï¼Œåˆ™å¼‚å¸¸ä¸ä¼šæŠ›å‡ºã€‚å› æ­¤ï¼Œä¸èƒ½ä¾èµ–äºè¿™ä¸ªå¼‚å¸¸æ˜¯å¦æŠ›å‡ºè€Œè¿›è¡Œå¹¶å‘æ“ä½œçš„ç¼–ç¨‹ï¼Œè¿™ä¸ªå¼‚å¸¸åªå»ºè®®ç”¨äºæ£€æµ‹å¹¶å‘ä¿®æ”¹çš„ bugã€‚
- åœºæ™¯ï¼šjava.util åŒ…ä¸‹çš„é›†åˆç±»éƒ½æ˜¯å¿«é€Ÿå¤±è´¥çš„ï¼Œä¸èƒ½åœ¨å¤šçº¿ç¨‹ä¸‹å‘ç”Ÿå¹¶å‘ä¿®æ”¹ï¼ˆè¿­ä»£è¿‡ç¨‹ä¸­è¢«ä¿®æ”¹ï¼‰ï¼Œæ¯”å¦‚ ArrayList ç±»ã€‚

**å®‰å…¨å¤±è´¥ï¼ˆfailâ€”safeï¼‰**

- é‡‡ç”¨å®‰å…¨å¤±è´¥æœºåˆ¶çš„é›†åˆå®¹å™¨ï¼Œåœ¨éå†æ—¶ä¸æ˜¯ç›´æ¥åœ¨é›†åˆå†…å®¹ä¸Šè®¿é—®çš„ï¼Œè€Œæ˜¯å…ˆå¤åˆ¶åŸæœ‰é›†åˆå†…å®¹ï¼Œåœ¨æ‹·è´çš„é›†åˆä¸Šè¿›è¡Œéå†ã€‚
- åŸç†ï¼šç”±äºè¿­ä»£æ—¶æ˜¯å¯¹åŸé›†åˆçš„æ‹·è´è¿›è¡Œéå†ï¼Œæ‰€ä»¥åœ¨éå†è¿‡ç¨‹ä¸­å¯¹åŸé›†åˆæ‰€ä½œçš„ä¿®æ”¹å¹¶ä¸èƒ½è¢«è¿­ä»£å™¨æ£€æµ‹åˆ°ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘ Concurrent Modification Exceptionã€‚
- ç¼ºç‚¹ï¼šåŸºäºæ‹·è´å†…å®¹çš„ä¼˜ç‚¹æ˜¯é¿å…äº† Concurrent Modification Exceptionï¼Œä½†åŒæ ·åœ°ï¼Œè¿­ä»£å™¨å¹¶ä¸èƒ½è®¿é—®åˆ°ä¿®æ”¹åçš„å†…å®¹ï¼Œå³ï¼šè¿­ä»£å™¨éå†çš„æ˜¯å¼€å§‹éå†é‚£ä¸€åˆ»æ‹¿åˆ°çš„é›†åˆæ‹·è´ï¼Œåœ¨éå†æœŸé—´åŸé›†åˆå‘ç”Ÿçš„ä¿®æ”¹è¿­ä»£å™¨æ˜¯ä¸çŸ¥é“çš„ã€‚
- åœºæ™¯ï¼šjava.util.concurrent åŒ…ä¸‹çš„å®¹å™¨éƒ½æ˜¯å®‰å…¨å¤±è´¥ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹å¹¶å‘ä½¿ç”¨ï¼Œå¹¶å‘ä¿®æ”¹ï¼Œæ¯”å¦‚ CopyOnWriteArrayList ç±»ã€‚

### 6.æœ‰å“ªå‡ ç§å®ç° ArrayList çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ï¼Ÿ

å¯ä»¥ä½¿ç”¨ `Collections.synchronizedList()` æ–¹æ³•ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ Listã€‚

```java
SynchronizedList list = Collections.synchronizedList(new ArrayList());
```

å†…éƒ¨æ˜¯é€šè¿‡ [synchronized å…³é”®å­—](https://javabetter.cn/thread/synchronized-1.html)åŠ é”æ¥å®ç°çš„ã€‚

ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ [CopyOnWriteArrayList](https://javabetter.cn/thread/CopyOnWriteArrayList.html)ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œéµå¾ªå†™æ—¶å¤åˆ¶çš„åŸåˆ™ï¼Œæ¯å½“å¯¹åˆ—è¡¨è¿›è¡Œä¿®æ”¹ï¼ˆä¾‹å¦‚æ·»åŠ ã€åˆ é™¤æˆ–æ›´æ”¹å…ƒç´ ï¼‰æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºåˆ—è¡¨çš„ä¸€ä¸ªæ–°å‰¯æœ¬ï¼Œè¿™ä¸ªæ–°å‰¯æœ¬ä¼šæ›¿æ¢æ—§çš„åˆ—è¡¨ï¼Œè€Œå¯¹æ—§åˆ—è¡¨çš„æ‰€æœ‰è¯»å–æ“ä½œä»ç„¶å¯ä»¥ç»§ç»­ã€‚

```java
CopyOnWriteArrayList list = new CopyOnWriteArrayList();
```

é€šä¿—çš„è®²ï¼ŒCopyOnWrite å°±æ˜¯å½“æˆ‘ä»¬å¾€ä¸€ä¸ªå®¹å™¨æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç›´æ¥å¾€å®¹å™¨ä¸­æ·»åŠ ï¼Œè€Œæ˜¯å…ˆå¤åˆ¶å‡ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œç„¶ååœ¨æ–°çš„å®¹å™¨é‡Œæ·»åŠ å…ƒç´ ï¼Œæ·»åŠ å®Œä¹‹åï¼Œå†å°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°çš„å®¹å™¨ã€‚å¤šä¸ªçº¿ç¨‹åœ¨è¯»çš„æ—¶å€™ï¼Œä¸éœ€è¦åŠ é”ï¼Œå› ä¸ºå½“å‰å®¹å™¨ä¸ä¼šæ·»åŠ ä»»ä½•å…ƒç´ ã€‚è¿™æ ·å°±å®ç°äº†çº¿ç¨‹å®‰å…¨ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„æ‹›å•†é“¶è¡Œé¢ç»åŒå­¦ 6 æ‹›é“¶ç½‘ç»œç§‘æŠ€é¢è¯•åŸé¢˜ï¼šçº¿ç¨‹ä¸å®‰å…¨çš„é›†åˆå˜æˆçº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ï¼Ÿ

### 7.CopyOnWriteArrayList äº†è§£å¤šå°‘ï¼Ÿ

CopyOnWriteArrayList å°±æ˜¯çº¿ç¨‹å®‰å…¨ç‰ˆæœ¬çš„ ArrayListã€‚

å®ƒçš„åå­—å«`CopyOnWrite`â€”â€”å†™æ—¶å¤åˆ¶ï¼Œå·²ç»æ˜ç¤ºäº†å®ƒçš„åŸç†ã€‚

CopyOnWriteArrayList é‡‡ç”¨äº†ä¸€ç§è¯»å†™åˆ†ç¦»çš„å¹¶å‘ç­–ç•¥ã€‚CopyOnWriteArrayList å®¹å™¨å…è®¸å¹¶å‘è¯»ï¼Œè¯»æ“ä½œæ˜¯æ— é”çš„ï¼Œæ€§èƒ½è¾ƒé«˜ã€‚è‡³äºå†™æ“ä½œï¼Œæ¯”å¦‚å‘å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™é¦–å…ˆå°†å½“å‰å®¹å™¨å¤åˆ¶ä¸€ä»½ï¼Œç„¶ååœ¨æ–°å‰¯æœ¬ä¸Šæ‰§è¡Œå†™æ“ä½œï¼Œç»“æŸä¹‹åå†å°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°å®¹å™¨ã€‚

![CopyOnWriteArrayListåŸç†](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-7.png)

GitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„å¼€æºçŸ¥è¯†åº“ã€Š[äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯](https://github.com/itwanger/toBeBetterJavaer)ã€‹ç¬¬ä¸€ç‰ˆ PDF ç»ˆäºæ¥äº†ï¼åŒ…æ‹¬ Java åŸºç¡€è¯­æ³•ã€æ•°ç»„&å­—ç¬¦ä¸²ã€OOPã€é›†åˆæ¡†æ¶ã€Java IOã€å¼‚å¸¸å¤„ç†ã€Java æ–°ç‰¹æ€§ã€ç½‘ç»œç¼–ç¨‹ã€NIOã€å¹¶å‘ç¼–ç¨‹ã€JVM ç­‰ç­‰ï¼Œå…±è®¡ 32 ä¸‡ä½™å­—ï¼Œ500+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯é€šä¿—æ˜“æ‡‚ã€é£è¶£å¹½é»˜â€¦â€¦è¯¦æƒ…æˆ³ï¼š[å¤ªèµäº†ï¼ŒGitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„ Java æ•™ç¨‹](https://javabetter.cn/overview/)

å¾®ä¿¡æœ **æ²‰é»˜ç‹äºŒ** æˆ–æ‰«æä¸‹æ–¹äºŒç»´ç å…³æ³¨äºŒå“¥çš„åŸåˆ›å…¬ä¼—å·æ²‰é»˜ç‹äºŒï¼Œå›å¤ **222** å³å¯å…è´¹é¢†å–ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png)

## Map

Map ä¸­ï¼Œæ¯«æ— ç–‘é—®ï¼Œæœ€é‡è¦çš„å°±æ˜¯ HashMapï¼Œé¢è¯•åŸºæœ¬è¢«ç›˜å‡ºåŒ…æµ†äº†ï¼Œå„ç§é—®æ³•ï¼Œä¸€å®šè¦å¥½å¥½å‡†å¤‡ã€‚

### 8.èƒ½è¯´ä¸€ä¸‹ HashMap çš„åº•å±‚æ•°æ®ç»“æ„å—ï¼Ÿ

æ¨èé˜…è¯»ï¼š[äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè¯¦è§£ HashMap](https://javabetter.cn/collection/hashmap.html)

JDK 8 ä¸­ HashMap çš„æ•°æ®ç»“æ„æ˜¯`æ•°ç»„`+`é“¾è¡¨`+`çº¢é»‘æ ‘`ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šJDK 8 HashMap æ•°æ®ç»“æ„ç¤ºæ„å›¾](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-8.png)

HashMap çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼ˆ`Node[] table`ï¼‰ï¼Œç”¨äºå­˜å‚¨é”®å€¼å¯¹ã€‚è¿™ä¸ªæ•°ç»„çš„æ¯ä¸ªå…ƒç´ ç§°ä¸ºä¸€ä¸ªâ€œæ¡¶â€ï¼ˆBucketï¼‰ï¼Œæ¯ä¸ªæ¡¶çš„ç´¢å¼•æ˜¯é€šè¿‡å¯¹é”®çš„å“ˆå¸Œå€¼è¿›è¡Œå“ˆå¸Œå‡½æ•°å¤„ç†å¾—åˆ°çš„ã€‚

å½“å¤šä¸ªé”®ç»å“ˆå¸Œå¤„ç†åå¾—åˆ°ç›¸åŒçš„ç´¢å¼•æ—¶ï¼Œä¼šå‘ç”Ÿå“ˆå¸Œå†²çªã€‚HashMap é€šè¿‡é“¾è¡¨æ¥è§£å†³å“ˆå¸Œå†²çªâ€”â€”å³å°†å…·æœ‰ç›¸åŒç´¢å¼•çš„é”®å€¼å¯¹é€šè¿‡é“¾è¡¨è¿æ¥èµ·æ¥ã€‚

ä¸è¿‡ï¼Œé“¾è¡¨è¿‡é•¿æ—¶ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¼šæ¯”è¾ƒä½ï¼Œäºæ˜¯å½“é“¾è¡¨çš„é•¿åº¦è¶…è¿‡ 8 æ—¶ï¼ˆä¸”æ•°ç»„çš„é•¿åº¦å¤§äº 64ï¼‰ï¼Œé“¾è¡¨å°±ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚çº¢é»‘æ ‘çš„æŸ¥è¯¢æ•ˆç‡æ˜¯ O(logn)ï¼Œæ¯”é“¾è¡¨çš„ O(n) è¦å¿«ã€‚æ•°ç»„çš„æŸ¥è¯¢æ•ˆç‡æ˜¯ O(1)ã€‚

å½“å‘ HashMap ä¸­æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œä¼šä½¿ç”¨å“ˆå¸Œå‡½æ•°è®¡ç®—é”®çš„å“ˆå¸Œç ï¼Œç¡®å®šå…¶åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œå“ˆå¸Œå‡½æ•°çš„ç›®æ ‡æ˜¯å°½é‡å‡å°‘å“ˆå¸Œå†²çªï¼Œä¿è¯å…ƒç´ èƒ½å¤Ÿå‡åŒ€åœ°åˆ†å¸ƒåœ¨æ•°ç»„çš„æ¯ä¸ªä½ç½®ä¸Šã€‚

```java
static final int hash(Object key) {
    int h;
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```

å½“å‘ HashMap ä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œå¦‚æœè¯¥ä½ç½®å·²æœ‰å…ƒç´ ï¼ˆå‘ç”Ÿå“ˆå¸Œå†²çªï¼‰ï¼Œåˆ™æ–°å…ƒç´ å°†è¢«æ·»åŠ åˆ°é“¾è¡¨çš„æœ«å°¾æˆ–çº¢é»‘æ ‘ä¸­ã€‚å¦‚æœé”®å·²ç»å­˜åœ¨ï¼Œå…¶å¯¹åº”çš„å€¼å°†è¢«æ–°å€¼è¦†ç›–ã€‚

å½“ä» HashMap ä¸­è·å–å…ƒç´ æ—¶ï¼Œä¹Ÿä¼šä½¿ç”¨å“ˆå¸Œå‡½æ•°è®¡ç®—é”®çš„ä½ç½®ï¼Œç„¶åæ ¹æ®ä½ç½®åœ¨æ•°ç»„ã€é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘ä¸­æŸ¥æ‰¾å…ƒç´ ã€‚

HashMap çš„åˆå§‹å®¹é‡æ˜¯ 16ï¼Œéšç€å…ƒç´ çš„ä¸æ–­æ·»åŠ ï¼ŒHashMap çš„å®¹é‡ï¼ˆä¹Ÿå°±æ˜¯æ•°ç»„å¤§å°ï¼‰å¯èƒ½ä¸è¶³ï¼Œäºæ˜¯å°±éœ€è¦è¿›è¡Œæ‰©å®¹ï¼Œé˜ˆå€¼æ˜¯`capacity * loadFactor`ï¼Œcapacity ä¸ºå®¹é‡ï¼ŒloadFactor ä¸ºè´Ÿè½½å› å­ï¼Œé»˜è®¤ä¸º 0.75ã€‚

æ‰©å®¹åçš„æ•°ç»„å¤§å°æ˜¯åŸæ¥çš„ 2 å€ï¼Œç„¶åæŠŠåŸæ¥çš„å…ƒç´ é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ”¾åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚

æ€»çš„æ¥è¯´ï¼ŒHashMap æ˜¯ä¸€ç§é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„é”®å€¼å¯¹é›†åˆï¼Œå®ƒé€šè¿‡å°†é”®å“ˆå¸ŒåŒ–æˆæ•°ç»„ç´¢å¼•ï¼Œå¹¶åœ¨å†²çªæ—¶ä½¿ç”¨é“¾è¡¨æˆ–çº¢é»‘æ ‘æ¥å­˜å‚¨å…ƒç´ ï¼Œä»è€Œå®ç°å¿«é€Ÿçš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°ç±³ 25 å±Šæ—¥å¸¸å®ä¹ ä¸€é¢åŸé¢˜ï¼šè®²ä¸€è®² HashMap çš„åŸç†
> 2. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„åä¸ºä¸€é¢åŸé¢˜ï¼šè¯´ä¸‹ Java å®¹å™¨å’Œ HashMap
> 3. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„åä¸ºä¸€é¢åŸé¢˜ï¼šè¯´ä¸‹ Redis å’Œ HashMap çš„åŒºåˆ«
> 4. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å›½ä¼é¢è¯•åŸé¢˜ï¼šè¯´è¯´ HashMap çš„åº•å±‚æ•°æ®ç»“æ„ï¼Œé“¾è¡¨å’Œçº¢é»‘æ ‘çš„è½¬æ¢ï¼ŒHashMap çš„é•¿åº¦
> 5. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´ä¸€ä¸‹ HashMap æ•°æ®åº“ç»“æ„ å’Œ ä¸€äº›é‡è¦å‚æ•°
> 6. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šHashMap çš„åº•å±‚å®ç°ï¼Œå®ƒä¸ºä»€ä¹ˆæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Ÿ
> 7. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 1 éƒ¨é—¨ä¸»ç«™æŠ€æœ¯éƒ¨é¢è¯•åŸé¢˜ï¼šHashMap çš„ç»“æ„ï¼Ÿ
> 8. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šhashmap çš„åº•å±‚å®ç°åŸç†ã€put()æ–¹æ³•å®ç°æµç¨‹ã€æ‰©å®¹æœºåˆ¶ï¼Ÿ

### 9.ä½ å¯¹çº¢é»‘æ ‘äº†è§£å¤šå°‘ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æ ‘/å¹³è¡¡æ ‘å‘¢ï¼Ÿ

çº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼š

1. æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯çº¢è‰²ï¼Œè¦ä¹ˆæ˜¯é»‘è‰²ï¼›
2. æ ¹èŠ‚ç‚¹æ°¸è¿œæ˜¯é»‘è‰²ï¼›
3. æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹éƒ½æ˜¯æ˜¯é»‘è‰²çš„ï¼ˆä¸‹å›¾ä¸­çš„ NULL èŠ‚ç‚¹ï¼‰ï¼›
4. çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸€å®šæ˜¯é»‘è‰²çš„ï¼›
5. ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰ç®€å•è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šçº¢é»‘æ ‘](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-9.png)

#### ä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æ ‘ï¼Ÿ

äºŒå‰æ ‘æ˜¯æœ€åŸºæœ¬çš„æ ‘ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œä½†æ˜¯äºŒå‰æ ‘å®¹æ˜“å‡ºç°æç«¯æƒ…å†µï¼Œæ¯”å¦‚æ’å…¥çš„æ•°æ®æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆäºŒå‰æ ‘å°±ä¼šé€€åŒ–æˆé“¾è¡¨ï¼ŒæŸ¥è¯¢æ•ˆç‡å°±ä¼šå˜æˆ O(n)ã€‚

#### ä¸ºä»€ä¹ˆä¸ç”¨å¹³è¡¡äºŒå‰æ ‘ï¼Ÿ

å¹³è¡¡äºŒå‰æ ‘æ¯”çº¢é»‘æ ‘çš„è¦æ±‚æ›´é«˜ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦æœ€å¤šç›¸å·® 1ï¼Œè¿™ç§é«˜åº¦çš„å¹³è¡¡ä¿è¯äº†æä½³çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œä½†åœ¨è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œæ—¶ï¼Œå¯èƒ½éœ€è¦é¢‘ç¹åœ°è¿›è¡Œæ—‹è½¬æ¥ç»´æŒæ ‘çš„å¹³è¡¡ï¼Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´æ›´é«˜çš„ç»´æŠ¤æˆæœ¬ã€‚

çº¢é»‘æ ‘æ˜¯ä¸€ç§æŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œå®ƒåœ¨ä¿è¯äº†æ ‘å¹³è¡¡çš„åŒæ—¶ï¼Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ€§èƒ½ä¹Ÿå¾—åˆ°äº†ä¿è¯ï¼ŒæŸ¥è¯¢æ•ˆç‡æ˜¯ O(logn)ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„æºç¨‹é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šHashMap ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ï¼Œé“¾è¡¨è½¬æ•°æ¡ä»¶ï¼Œçº¢é»‘æ ‘æ’å…¥åˆ é™¤è§„åˆ™

### 10.çº¢é»‘æ ‘æ€ä¹ˆä¿æŒå¹³è¡¡çš„ï¼Ÿ

çº¢é»‘æ ‘æœ‰ä¸¤ç§æ–¹å¼ä¿æŒå¹³è¡¡ï¼š`æ—‹è½¬`å’Œ`æŸ“è‰²`ã€‚

â‘ ã€æ—‹è½¬ï¼šæ—‹è½¬åˆ†ä¸ºä¸¤ç§ï¼Œå·¦æ—‹å’Œå³æ—‹

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå·¦æ—‹](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-10.png)

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå³æ—‹](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-11.png)

â‘¡ã€æŸ“â¾Šï¼š

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæŸ“è‰²](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-12.png)

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„æºç¨‹é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šHashMap ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ï¼Œé“¾è¡¨è½¬æ•°æ¡ä»¶ï¼Œçº¢é»‘æ ‘æ’å…¥åˆ é™¤è§„åˆ™

### 11.HashMap çš„ put æµç¨‹çŸ¥é“å—ï¼Ÿ

ç›´æ¥çœ‹æµç¨‹å›¾ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šHashMapæ’å…¥æ•°æ®æµç¨‹å›¾](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-13.jpg)

ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡ hash æ–¹æ³•è®¡ç®— key çš„å“ˆå¸Œå€¼ã€‚

```java
static final int hash(Object key) {
    int h;
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```

ç¬¬äºŒæ­¥ï¼Œæ•°ç»„è¿›è¡Œç¬¬ä¸€æ¬¡æ‰©å®¹ã€‚

```java
if ((tab = table) == null || (n = tab.length) == 0)
    n = (tab = resize()).length;
```

ç¬¬ä¸‰æ­¥ï¼Œæ ¹æ®å“ˆå¸Œå€¼è®¡ç®— key åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œå¦‚æœå¯¹åº”ä¸‹æ ‡æ­£å¥½æ²¡æœ‰å­˜æ”¾æ•°æ®ï¼Œåˆ™ç›´æ¥æ’å…¥ã€‚

```java
if ((p = tab[i = (n - 1) & hash]) == null)
    tab[i] = newNode(hash, key, value, null);
```

å¦‚æœå¯¹åº”ä¸‹æ ‡å·²ç»æœ‰æ•°æ®äº†ï¼Œå°±éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºç›¸åŒçš„ keyï¼Œæ˜¯åˆ™è¦†ç›– valueï¼Œå¦åˆ™éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºæ ‘èŠ‚ç‚¹ï¼Œæ˜¯åˆ™å‘æ ‘ä¸­æ’å…¥èŠ‚ç‚¹ï¼Œå¦åˆ™å‘é“¾è¡¨ä¸­æ’å…¥æ•°æ®ã€‚

```java
else {
    Node<K,V> e; K k;
    if (p.hash == hash &&
        ((k = p.key) == key || (key != null && key.equals(k))))
        e = p;
    else if (p instanceof TreeNode)
        e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);
    else {
        for (int binCount = 0; ; ++binCount) {
            if ((e = p.next) == null) {
                p.next = newNode(hash, key, value, null);
                if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st
                    treeifyBin(tab, hash);
                break;
            }
            if (e.hash == hash &&
                ((k = e.key) == key || (key != null && key.equals(k))))
                break;
            p = e;
        }
    }
}
```

æ³¨æ„ï¼Œåœ¨é“¾è¡¨ä¸­æ’å…¥èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¤§äºç­‰äº 8ï¼Œåˆ™éœ€è¦æŠŠé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚

```java
if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st
    treeifyBin(tab, hash);
```

æ‰€æœ‰å…ƒç´ å¤„ç†å®Œåï¼Œè¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦è¶…è¿‡é˜ˆå€¼`threshold`ï¼Œè¶…è¿‡åˆ™æ‰©å®¹ã€‚

```java
if (++size > threshold)
    resize();
```

#### åªé‡å†™ equals æ²¡é‡å†™ hashcodeï¼Œmap put çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆ?

å¦‚æœåªé‡å†™ equals æ–¹æ³•ï¼Œæ²¡æœ‰é‡å†™ hashcode æ–¹æ³•ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´ equals ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œhashcode ä¸ç›¸ç­‰ï¼Œè¿™æ ·çš„è¯ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡ä¼šè¢«æ”¾åˆ°ä¸åŒçš„æ¡¶ä¸­ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ get çš„æ—¶å€™ï¼Œæ‰¾ä¸åˆ°å¯¹åº”çš„å€¼ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šhashcode å’Œ equals æ–¹æ³•åªé‡å†™ä¸€ä¸ªè¡Œä¸è¡Œï¼Œåªé‡å†™ equals æ²¡é‡å†™ hashcodeï¼Œmap put çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆ
> 2. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 1 éƒ¨é—¨ä¸»ç«™æŠ€æœ¯éƒ¨é¢è¯•åŸé¢˜ï¼šHashMap çš„ put è¿‡ç¨‹
> 3. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šhashmap çš„åº•å±‚å®ç°åŸç†ã€put()æ–¹æ³•å®ç°æµç¨‹ã€æ‰©å®¹æœºåˆ¶ï¼Ÿ

### 12.HashMap æ€ä¹ˆæŸ¥æ‰¾å…ƒç´ çš„å‘¢ï¼Ÿ

å…ˆçœ‹æµç¨‹å›¾ï¼š

![HashMapæŸ¥æ‰¾æµç¨‹å›¾](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-14.png)

HashMap çš„æŸ¥æ‰¾å°±ç®€å•å¾ˆå¤šï¼š

1. ä½¿ç”¨æ‰°åŠ¨å‡½æ•°ï¼Œè·å–æ–°çš„å“ˆå¸Œå€¼
2. è®¡ç®—æ•°ç»„ä¸‹æ ‡ï¼Œè·å–èŠ‚ç‚¹
3. å½“å‰èŠ‚ç‚¹å’Œ key åŒ¹é…ï¼Œç›´æ¥è¿”å›
4. å¦åˆ™ï¼Œå½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºæ ‘èŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾çº¢é»‘æ ‘
5. å¦åˆ™ï¼Œéå†é“¾è¡¨æŸ¥æ‰¾

### 13.HashMap çš„ hash å‡½æ•°æ˜¯æ€ä¹ˆè®¾è®¡çš„?

HashMap çš„å“ˆå¸Œå‡½æ•°æ˜¯å…ˆæ‹¿åˆ° key çš„ hashcodeï¼Œæ˜¯ä¸€ä¸ª 32 ä½çš„ int ç±»å‹çš„æ•°å€¼ï¼Œç„¶åè®© hashcode çš„é«˜ 16 ä½å’Œä½ 16 ä½è¿›è¡Œå¼‚æˆ–æ“ä½œã€‚

```java
static final int hash(Object key) {
    int h;
    // keyçš„hashCodeå’Œkeyçš„hashCodeå³ç§»16ä½åšå¼‚æˆ–è¿ç®—
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```

è¿™ä¹ˆè®¾è®¡æ˜¯ä¸ºäº†é™ä½å“ˆå¸Œç¢°æ’çš„æ¦‚ç‡ã€‚

### 14.ä¸ºä»€ä¹ˆ hash å‡½æ•°èƒ½é™å“ˆå¸Œç¢°æ’ï¼Ÿ

![JDK 8](https://cdn.tobebetterjavaer.com/stutymore/collection-20240325100934.png)

åœ¨ hash å‡½æ•°ä¸­ï¼Œå…ˆè°ƒç”¨äº† key çš„`hashCode()` æ–¹æ³•ï¼Œè¿™å°†ä¼šè¿”å›ä¸€ä¸ª int ç±»å‹çš„å“ˆå¸Œå€¼ï¼Œæ¯”å¦‚è¯´å­—ç¬¦ä¸²çš„ hashCodeã€‚

```java
public int hashCode() {
    int h = hash;
    if (h == 0 && value.length > 0) {
        char val[] = value;

        for (int i = 0; i < value.length; i++) {
            h = 31 * h + val[i];
        }
        hash = h;
    }
    return h;
}
```

int çš„èŒƒå›´æ˜¯ **-2147483648~2147483647**ï¼ŒåŠ èµ·æ¥å¤§æ¦‚ 40 äº¿ä¸Šä¸‹çš„æµ®åŠ¨ã€‚

åªè¦ key çš„ hashCode æ–¹æ³•è®¾è®¡çš„æ¯”è¾ƒåˆç†ï¼Œä¸€èˆ¬æ˜¯å¾ˆéš¾å‡ºç°ç¢°æ’çš„ã€‚ä½†é—®é¢˜æ˜¯ï¼Œä¸å¯èƒ½ç›´æ¥æä¸€ä¸ª 40 äº¿é•¿åº¦çš„æ•°ç»„å•Šï¼Œé‚£ä¹Ÿå¤ªé“ºå¼ æµªè´¹äº†ã€‚

æˆ‘ä»¬ä¸€èˆ¬ä¼šè®¾ç½®ä¸€ä¸ªè¾ƒå°çš„æ•°ç»„é•¿åº¦ï¼Œæ¯”å¦‚è¯´ HashMap çš„æ•°ç»„åˆå§‹å¤§å°æ‰ 16ï¼Œå½“å‘ç°å®¹é‡ä¸æ»¡è¶³çš„æ—¶å€™å†æ‰©å®¹ï¼Œé¿å…æµªè´¹ã€‚

é‚£å½“æ•°ç»„é•¿åº¦æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦è®¾è®¡ä¸€ç§æ¯”è¾ƒå·§å¦™çš„ hash ç®—æ³•ï¼Œæ¥é¿å…å‘ç”Ÿå“ˆå¸Œå†²çªï¼Œå°½å¯èƒ½åœ°è®©å…ƒç´ å‡åŒ€åœ°åˆ†å¸ƒåœ¨æ•°ç»„å½“ä¸­ã€‚

è¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼ŒHashMap åœ¨ä¸¤æ–¹é¢ä¸‹è¶³äº†åŠŸå¤«ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯æ•°ç»„çš„é•¿åº¦å¿…é¡»æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ `hash & (n-1)` çš„ç»“æœèƒ½å‡åŒ€åœ°åˆ†å¸ƒåœ¨æ•°ç»„ä¸­ã€‚

å…¶ä½œç”¨å°±ç›¸å½“äº hash % nï¼Œn ä¸ºæ•°ç»„çš„é•¿åº¦ï¼Œæ¯”å¦‚è¯´æ•°ç»„é•¿åº¦æ˜¯ 16ï¼Œhash å€¼ä¸º 20ï¼Œé‚£ä¹ˆ 20 % 16 = 4ï¼Œä¹Ÿå°±æ˜¯è¯´ 20 è¿™ä¸ªå…ƒç´ åº”è¯¥æ”¾åœ¨æ•°ç»„çš„ç¬¬ 4 ä¸ªä½ç½®ï¼›hash å€¼ä¸º 23ï¼Œé‚£ä¹ˆ 23 % 16 = 7ï¼Œä¹Ÿå°±æ˜¯è¯´ 23 è¿™ä¸ªå…ƒç´ åº”è¯¥æ”¾åœ¨æ•°ç»„çš„ç¬¬ 7 ä¸ªä½ç½®ã€‚

`&` æ“ä½œçš„ç»“æœå°±æ˜¯å“ˆå¸Œå€¼çš„é«˜ä½å…¨éƒ¨å½’é›¶ï¼Œåªä¿ç•™ n ä¸ªä½ä½ï¼Œç”¨æ¥åšæ•°ç»„ä¸‹æ ‡è®¿é—®ã€‚

æ¯”å¦‚è¯´ hash & ($2^{4} - 1$) çš„ç»“æœå®é™…ä¸Šæ˜¯å– hash çš„ä½ 4 ä½ï¼Œè¿™å››ä½èƒ½è¡¨ç¤ºçš„å–å€¼èŒƒå›´åˆšå¥½æ˜¯ 0000 åˆ° 1111ï¼Œä¹Ÿå°±æ˜¯ 0 åˆ° 15ï¼Œæ­£å¥½æ˜¯æ•°ç»„é•¿åº¦ä¸º 16 çš„ä¸‹æ ‡èŒƒå›´ã€‚

ä»¥åˆå§‹é•¿åº¦ 16 ä¸ºä¾‹ï¼Œ16-1=15ã€‚2 è¿›åˆ¶è¡¨ç¤ºæ˜¯`0000 0000 0000 0000 0000 0000 0000 1111`ã€‚å’ŒæŸä¸ªå“ˆå¸Œå€¼åš `&` è¿ç®—ï¼Œç»“æœå°±æ˜¯æˆªå–äº†æœ€ä½çš„å››ä½ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå“ˆå¸Œ&è¿ç®—](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-15.png)

é‚£é—®é¢˜åˆæ¥äº†ï¼Œé‚£ä¹ˆå¤§ä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œä¹Ÿåªå–æœ€å 4 ä½ï¼Œä¸å°±ç­‰äºå“ˆå¸Œå€¼çš„é«˜ä½éƒ½ä¸¢å¼ƒäº†å—ï¼Ÿ

æ¯”å¦‚è¯´ 1111 1111 1111 1111 1111 1111 1111 1111ï¼Œå–æœ€å 4 ä½ï¼Œä¹Ÿå°±æ˜¯ 1111ã€‚

æ¯”å¦‚è¯´ 1110 1111 1111 1111 1111 1111 1111 1111ï¼Œå–æœ€å 4 ä½ï¼Œä¹Ÿæ˜¯ 1111ã€‚

ä¸å°±å‘ç”Ÿå“ˆå¸Œå†²çªäº†å—ï¼Ÿ

è¿™æ—¶å€™ hash å‡½æ•° `(h = key.hashCode()) ^ (h >>> 16)` å°±æ´¾ä¸Šç”¨åœºäº†å‘€ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šhash å‡½æ•°ç¤ºæ„å›¾](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-16.jpg)

å°†å“ˆå¸Œå€¼æ— ç¬¦å·å³ç§» 16 ä½ï¼Œæ„å‘³ç€åŸå“ˆå¸Œå€¼çš„é«˜ 16 ä½è¢«ç§»åˆ°äº†ä½ 16 ä½çš„ä½ç½®ã€‚è¿™æ ·ï¼ŒåŸå§‹å“ˆå¸Œå€¼çš„é«˜ 16 ä½å’Œä½ 16 ä½å°±å¯ä»¥å‚ä¸åˆ°æœ€ç»ˆç”¨äºç´¢å¼•è®¡ç®—çš„ä½ä½ä¸­ã€‚

é€‰æ‹© 16 ä½æ˜¯å› ä¸ºå®ƒæ˜¯ 32 ä½æ•´æ•°çš„ä¸€åŠï¼Œè¿™æ ·å¤„ç†æ—¢è€ƒè™‘äº†é«˜ä½çš„ä¿¡æ¯ï¼Œåˆæ²¡æœ‰å®Œå…¨å¿½è§†ä½ä½åŸæœ¬çš„ä¿¡æ¯ï¼Œå°è¯•è¾¾åˆ°ä¸€ä¸ªå¹³è¡¡çŠ¶æ€ã€‚

ä¸¾ä¸ªä¾‹å­ï¼ˆæ•°ç»„é•¿åº¦ä¸º 16ï¼‰ã€‚

- ç¬¬ä¸€ä¸ªæ•°ï¼šh1 = 0001 0010 0011 0100 0101 0110 0111 1000
- ç¬¬äºŒä¸ªæ•°ï¼šh2 = 0001 0010 0011 0101 0101 0110 0111 1000

å¦‚æœæ²¡æœ‰ hash å‡½æ•°ï¼Œç›´æ¥å–ä½ 4 ä½ï¼Œé‚£ä¹ˆ h1 å’Œ h2 çš„ä½ 4 ä½éƒ½æ˜¯ 1000ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªæ•°éƒ½ä¼šæ”¾åœ¨æ•°ç»„çš„ç¬¬ 8 ä¸ªä½ç½®ã€‚

æ¥çœ‹ä¸€ä¸‹ hash å‡½æ•°çš„å¤„ç†è¿‡ç¨‹ã€‚

â‘ ã€å¯¹äºç¬¬ä¸€ä¸ªæ•°`h1`çš„è®¡ç®—ï¼š

```
åŸå§‹: 0001 0010 0011 0100 0101 0110 0111 1000
å³ç§»: 0000 0000 0000 0000 0001 0010 0011 0100
å¼‚æˆ–: ---------------------------------------
ç»“æœ: 0001 0010 0011 0100 0100 0100 0100 1100
```

â‘¡ã€å¯¹äºç¬¬äºŒä¸ªæ•°`h2`çš„è®¡ç®—ï¼š

```
åŸå§‹: 0001 0010 0011 0101 0101 0110 0111 1000
å³ç§»: 0000 0000 0000 0000 0001 0010 0011 0101
å¼‚æˆ–: ---------------------------------------
ç»“æœ: 0001 0010 0011 0101 0100 0100 0100 1101
```

é€šè¿‡ä¸Šè¿°è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°`h1`å’Œ`h2`ç»è¿‡`h ^ (h >>> 16)`æ“ä½œåå¾—åˆ°äº†ä¸åŒçš„ç»“æœã€‚

ç°åœ¨ï¼Œè€ƒè™‘æ•°ç»„é•¿åº¦ä¸º 16 æ—¶ï¼ˆéœ€è¦æœ€ä½ 4 ä½æ¥ç¡®å®šç´¢å¼•ï¼‰ï¼š

- å¯¹äº`h1`çš„æœ€ä½ 4 ä½æ˜¯`1100`ï¼ˆåè¿›åˆ¶ä¸­ä¸º 12ï¼‰
- å¯¹äº`h2`çš„æœ€ä½ 4 ä½æ˜¯`1101`ï¼ˆåè¿›åˆ¶ä¸­ä¸º 13ï¼‰

è¿™æ ·ï¼Œ`h1`å’Œ`h2`å°±ä¼šè¢«åˆ†åˆ«æ”¾åœ¨æ•°ç»„çš„ç¬¬ 12 ä¸ªä½ç½®å’Œç¬¬ 13 ä¸ªä½ç½®ä¸Šï¼Œé¿å…äº†å“ˆå¸Œå†²çªã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„æ”¯ä»˜å®é¢ç»åŒå­¦ 2 æ˜¥æ‹›æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¸ºä»€ä¹ˆè¦ç”¨é«˜ä½åšå¼‚æˆ–è¿ç®—ï¼Ÿä¸ºä»€ä¹ˆéå¾—é«˜ä½ 16 ä½å¼‚æˆ–ï¼Ÿ

### 15.ä¸ºä»€ä¹ˆ HashMap çš„å®¹é‡æ˜¯ 2 çš„å€æ•°å‘¢ï¼Ÿ

HashMap çš„å®¹é‡æ˜¯ 2 çš„å€æ•°ï¼Œæˆ–è€…è¯´æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚ï¼Œæ˜¯ä¸ºäº†å¿«é€Ÿå®šä½å…ƒç´ çš„ä¸‹æ ‡ï¼š

HashMap åœ¨å®šä½å…ƒç´ ä½ç½®æ—¶ï¼Œå…ˆé€šè¿‡ `hash(key) = (h = key.hashCode()) ^ (h >>> 16)` è®¡ç®—å‡ºå“ˆå¸Œå€¼ï¼Œå†é€šè¿‡ `hash & (n-1)` æ¥å®šä½å…ƒç´ ä½ç½®çš„ï¼Œn ä¸ºæ•°ç»„çš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯ HashMap çš„å®¹é‡ã€‚

å› ä¸ºï¼ˆæ•°ç»„é•¿åº¦-1ï¼‰æ­£å¥½ç›¸å½“äºä¸€ä¸ªâ€œä½ä½æ©ç â€â€”â€”è¿™ä¸ªæ©ç çš„ä½ä½æœ€å¥½å…¨æ˜¯ 1ï¼Œè¿™æ · & æ“ä½œæ‰æœ‰æ„ä¹‰ï¼Œå¦åˆ™ç»“æœå°±è‚¯å®šæ˜¯ 0ã€‚

> a&b æ“ä½œçš„ç»“æœæ˜¯ï¼šaã€b ä¸­å¯¹åº”ä½åŒæ—¶ä¸º 1ï¼Œåˆ™å¯¹åº”ç»“æœä½ä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚ä¾‹å¦‚ 5&3=1ï¼Œ5 çš„äºŒè¿›åˆ¶æ˜¯ 0101ï¼Œ3 çš„äºŒè¿›åˆ¶æ˜¯ 0011ï¼Œ5&3=0001=1ã€‚

2 çš„æ•´æ¬¡å¹‚ï¼ˆæˆ–è€…å« 2 çš„æ•´æ•°å€ï¼‰åˆšå¥½æ˜¯å¶æ•°ï¼Œå¶æ•°-1 æ˜¯å¥‡æ•°ï¼Œå¥‡æ•°çš„äºŒè¿›åˆ¶æœ€åä¸€ä½æ˜¯ 1ï¼Œä¿è¯äº† `hash &(length-1)` çš„æœ€åä¸€ä½å¯èƒ½ä¸º 0ï¼Œä¹Ÿå¯èƒ½ä¸º 1ï¼ˆå–å†³äº hash çš„å€¼ï¼‰ï¼Œå³ & è¿ç®—åçš„ç»“æœå¯èƒ½ä¸ºå¶æ•°ï¼Œä¹Ÿå¯èƒ½ä¸ºå¥‡æ•°ï¼Œè¿™æ ·ä¾¿å¯ä»¥ä¿è¯å“ˆå¸Œå€¼çš„å‡åŒ€åˆ†å¸ƒã€‚

æ¢å¥è¯è¯´ï¼Œ& æ“ä½œçš„ç»“æœå°±æ˜¯å°†å“ˆå¸Œå€¼çš„é«˜ä½å…¨éƒ¨å½’é›¶ï¼Œåªä¿ç•™ä½ä½å€¼ã€‚

å‡è®¾æŸå“ˆå¸Œå€¼çš„äºŒè¿›åˆ¶ä¸º `10100101 11000100 00100101`ï¼Œç”¨å®ƒæ¥åš & è¿ç®—ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç»“æœã€‚

æˆ‘ä»¬çŸ¥é“ï¼ŒHashMap çš„åˆå§‹é•¿åº¦ä¸º 16ï¼Œ16-1=15ï¼ŒäºŒè¿›åˆ¶æ˜¯ `00000000 00000000 00001111`ï¼ˆé«˜ä½ç”¨ 0 æ¥è¡¥é½ï¼‰ï¼š

```
	 10100101 11000100 00100101
&	 00000000 00000000 00001111
----------------------------------
	 00000000 00000000 00000101
```

å› ä¸º 15 çš„é«˜ä½å…¨éƒ¨æ˜¯ 0ï¼Œæ‰€ä»¥ & è¿ç®—åçš„é«˜ä½ç»“æœè‚¯å®šä¹Ÿæ˜¯ 0ï¼Œåªå‰©ä¸‹ 4 ä¸ªä½ä½ `0101`ï¼Œä¹Ÿå°±æ˜¯åè¿›åˆ¶çš„ 5ã€‚

è¿™æ ·ï¼Œå“ˆå¸Œå€¼ä¸º `10100101 11000100 00100101` çš„é”®å°±ä¼šæ”¾åœ¨æ•°ç»„çš„ç¬¬ 5 ä¸ªä½ç½®ä¸Šã€‚

#### hashCode å¯¹æ•°ç»„é•¿åº¦å–æ¨¡å®šä½æ•°ç»„ä¸‹æ ‡ï¼Œè¿™å—æœ‰æ²¡æœ‰ä¼˜åŒ–ç­–ç•¥ï¼Ÿ

æˆ‘å…ˆè¯´ä¸€ä¸‹å–æ¨¡è¿ç®—ã€‚

å–æ¨¡è¿ç®—ï¼ˆModulo Operationï¼‰å’Œå–ä½™è¿ç®—ï¼ˆRemainder Operationï¼‰ä»ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²ï¼Œæ˜¯ä¸¤ç§ä¸åŒçš„è¿ç®—æ–¹å¼ï¼Œå®ƒä»¬åœ¨è®¡ç®—æœºä¸­çš„å®ç°ä¹Ÿä¸åŒã€‚

åœ¨ Java ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ % è¿ç®—ç¬¦æ¥è¡¨ç¤ºå–ä½™ï¼Œç”¨ `Math.floorMod()` æ¥è¡¨ç¤ºå–æ¨¡ã€‚

- å½“æ“ä½œæ•°éƒ½æ˜¯æ­£æ•°çš„è¯ï¼Œå–æ¨¡è¿ç®—å’Œå–ä½™è¿ç®—çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚
- åªæœ‰å½“æ“ä½œæ•°å‡ºç°è´Ÿæ•°çš„æƒ…å†µï¼Œç»“æœæ‰ä¼šæœ‰æ‰€ä¸åŒã€‚
- **å–æ¨¡è¿ç®—çš„å•†å‘è´Ÿæ— ç©·é è¿‘ï¼›å–ä½™è¿ç®—çš„å•†å‘ 0 é è¿‘**ã€‚è¿™æ˜¯å¯¼è‡´å®ƒä»¬ä¸¤ä¸ªåœ¨å¤„ç†æœ‰è´Ÿæ•°æƒ…å†µä¸‹ï¼Œç»“æœä¸åŒçš„æ ¹æœ¬åŸå› ã€‚
- å½“æ•°ç»„çš„é•¿åº¦æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼Œæˆ–è€… n æ¬¡å¹‚ï¼Œæˆ–è€… n çš„æ•´æ•°å€æ—¶ï¼Œå–æ¨¡è¿ç®—/å–ä½™è¿ç®—å¯ä»¥ç”¨ä½è¿ç®—æ¥ä»£æ›¿ï¼Œæ•ˆç‡æ›´é«˜ï¼Œæ¯•ç«Ÿè®¡ç®—æœºæœ¬èº«åªè®¤äºŒè¿›åˆ¶å˜›ã€‚

æ¯”å¦‚è¯´ï¼Œ7 å¯¹ 3 å–ä½™ï¼Œå’Œ 7 å¯¹ 3 å–æ¨¡ï¼Œç»“æœéƒ½æ˜¯ 1ã€‚å› ä¸ºä¸¤è€…éƒ½æ˜¯åŸºäºé™¤æ³•è¿ç®—çš„ï¼Œ7 / 3 çš„å•†æ˜¯ 2ï¼Œä½™æ•°æ˜¯ 1ã€‚

äºæ˜¯ï¼Œæˆ‘ä»¬ä¼šåœ¨å¾ˆå¤šåœ°æ–¹çœ‹åˆ°ï¼Œ**å–ä½™å°±æ˜¯å–æ¨¡ï¼Œå–æ¨¡å°±æ˜¯å–ä½™ã€‚**ã€‚

å¯¹äº HashMap æ¥è¯´ï¼Œå®ƒéœ€è¦é€šè¿‡ `hash % table.length` æ¥ç¡®å®šå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œè¿™ç§åšæ³•å¯ä»¥åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè®©å…ƒç´ å‡åŒ€çš„åˆ†å¸ƒåœ¨æ•°ç»„ä¸­ã€‚

æ¯”å¦‚è¯´ï¼Œæ•°ç»„é•¿åº¦æ˜¯ 3ï¼Œhash æ˜¯ 7ï¼Œé‚£ä¹ˆ 7 % 3 çš„ç»“æœå°±æ˜¯ 1ï¼Œä¹Ÿå°±æ˜¯æ­¤æ—¶å¯ä»¥æŠŠå…ƒç´ æ”¾åœ¨ä¸‹æ ‡ä¸º 1 çš„ä½ç½®ã€‚

å½“ hash æ˜¯ 8ï¼Œ8 % 3 çš„ç»“æœå°±æ˜¯ 2ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æŠŠå…ƒç´ æ”¾åœ¨ä¸‹æ ‡ä¸º 2 çš„ä½ç½®ã€‚

å½“ hash æ˜¯ 9ï¼Œ9 % 3 çš„ç»“æœå°±æ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æŠŠå…ƒç´ æ”¾åœ¨ä¸‹æ ‡ä¸º 0 çš„ä½ç½®ä¸Šã€‚

æ˜¯ä¸æ˜¯å¾ˆå¥‡å¦™ï¼Œæ•°ç»„çš„å¤§å°ä¸º 3ï¼Œåˆšå¥½ 3 ä¸ªä½ç½®éƒ½åˆ©ç”¨ä¸Šäº†ã€‚

é‚£ä¸ºä»€ä¹ˆ HashMap åœ¨è®¡ç®—ä¸‹æ ‡çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨å–ä½™è¿ç®—ï¼ˆæˆ–è€…å–æ¨¡è¿ç®—ï¼‰ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ä½ä¸è¿ç®— & å‘¢ï¼Ÿ

è¿™å…¶å®å°±æ˜¯ HashMap çš„ä¸€ä¸ªä¼˜åŒ–ç­–ç•¥ã€‚

å› ä¸ºå½“æ•°ç»„çš„é•¿åº¦æ˜¯ 2 çš„ n æ¬¡æ–¹æ—¶ï¼Œ`hash & (length - 1) = hash % length`ã€‚

æ¯”å¦‚è¯´ 9 % 4 = 1ï¼Œ9 çš„äºŒè¿›åˆ¶æ˜¯ 1001ï¼Œ4 - 1 = 3ï¼Œ3 çš„äºŒè¿›åˆ¶æ˜¯ 0011ï¼Œ9 & 3 = 1001 & 0011 = 0001 = 1ã€‚

å†æ¯”å¦‚è¯´ 10 % 4 = 2ï¼Œ10 çš„äºŒè¿›åˆ¶æ˜¯ 1010ï¼Œ4 - 1 = 3ï¼Œ3 çš„äºŒè¿›åˆ¶æ˜¯ 0011ï¼Œ10 & 3 = 1010 & 0011 = 0010 = 2ã€‚

å½“æ•°ç»„çš„é•¿åº¦ä¸æ˜¯ 2 çš„ n æ¬¡æ–¹æ—¶ï¼Œ`hash % length` å’Œ `hash & (length - 1)` çš„ç»“æœå°±ä¸ä¸€è‡´äº†ã€‚

æ¯”å¦‚è¯´ 7 % 3 = 1ï¼Œ7 çš„äºŒè¿›åˆ¶æ˜¯ 0111ï¼Œ3 - 1 = 2ï¼Œ2 çš„äºŒè¿›åˆ¶æ˜¯ 0010ï¼Œ7 & 2 = 0111 & 0010 = 0010 = 2ã€‚

å› ä¸ºä»äºŒè¿›åˆ¶è§’åº¦æ¥çœ‹ï¼Œhash / length = hash / $2^n$ = hash >> nï¼Œå³æŠŠ hash å³ç§» n ä½ï¼Œæ­¤æ—¶å¾—åˆ°äº† hash / $2^n$ çš„å•†ã€‚

è€Œè¢«ç§»è°ƒçš„éƒ¨åˆ†ï¼Œåˆ™æ˜¯ hash % $2^n$ï¼Œä¹Ÿå°±æ˜¯ä½™æ•°ã€‚

$2^n$ çš„äºŒè¿›åˆ¶å½¢å¼ä¸º 1ï¼Œåé¢è·Ÿç€ n ä¸ª 0ï¼Œé‚£ $2^n$ - 1 çš„äºŒè¿›åˆ¶åˆ™æ˜¯ n ä¸ª 1ã€‚ä¾‹å¦‚ 8 = $2^3$ï¼ŒäºŒè¿›åˆ¶æ˜¯ 1000ï¼Œ7 = $2^3$ - 1ï¼ŒäºŒè¿›åˆ¶ä¸º 0111ã€‚

`hash % length`çš„æ“ä½œæ˜¯æ±‚ hash é™¤ä»¥ $2^n$ çš„ä½™æ•°ã€‚åœ¨äºŒè¿›åˆ¶ä¸­ï¼Œè¿™ä¸ªæ“ä½œçš„ç»“æœå°±æ˜¯ hash çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€ä½ n ä½çš„å€¼ã€‚

å› ä¸ºåœ¨ $2^n$ å–æ¨¡çš„æ“ä½œä¸­ï¼Œé«˜äº $2^n$ è¡¨ç¤ºä½çš„æ‰€æœ‰æ•°å€¼å¯¹ç»“æœæ²¡æœ‰è´¡çŒ®ï¼Œåªæœ‰ä½äºè¿™ä¸ªé˜ˆå€¼çš„éƒ¨åˆ†æ‰å†³å®šä½™æ•°ã€‚

æ¯”å¦‚è¯´ 26 çš„äºŒè¿›åˆ¶æ˜¯ 11010ï¼Œè¦è®¡ç®— 26 % 8ï¼Œ8 æ˜¯ $2^3$ï¼Œæ‰€ä»¥æˆ‘ä»¬å…³æ³¨çš„æ˜¯ 26 çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€ä½ 3 ä½ï¼š11010 çš„æœ€ä½ 3 ä½æ˜¯ 010ã€‚

010 å¯¹åº”äºåè¿›åˆ¶ä¸­çš„ 2ï¼Œ26 % 8 çš„ç»“æœæ˜¯ 2ã€‚

å½“æ‰§è¡Œ`hash & (length - 1)`æ—¶ï¼Œå®é™…ä¸Šæ˜¯ä¿ç•™ hash äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ n ä½ï¼Œå…¶ä»–é«˜ä½éƒ½è¢«æ¸…é›¶ã€‚

> & ä¸è¿ç®—ï¼šä¸¤ä¸ªæ“ä½œæ•°ä¸­ä½éƒ½ä¸º 1ï¼Œç»“æœæ‰ä¸º 1ï¼Œå¦åˆ™ç»“æœä¸º 0ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œhash ä¸º 14ï¼Œn ä¸º 3ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„é•¿åº¦ä¸º $2^3$ï¼Œä¹Ÿå°±æ˜¯ 8ã€‚

```
  1110 (hash = 14)
& 0111 (length - 1 = 7)
  ----
  0110 (ç»“æœ = 6)
```

ä¿ç•™ 14 çš„æœ€ä½ 3 ä½ï¼Œé«˜ä½è¢«æ¸…é›¶ã€‚

ä»æ­¤ï¼Œä¸¤ä¸ªè¿ç®— `hash % length` å’Œ `hash & (length - 1)` æœ‰äº†å®Œç¾çš„é—­ç¯ã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œä½è¿ç®—çš„é€Ÿåº¦è¦è¿œé«˜äºå–ä½™è¿ç®—ï¼Œå› ä¸ºè®¡ç®—æœºæœ¬è´¨ä¸Šå°±æ˜¯äºŒè¿›åˆ¶å˜›ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¸ºä»€ä¹ˆæ˜¯ 2 æ¬¡å¹‚ åˆ°ä»€ä¹ˆæ—¶å€™å¼€å§‹æ‰©å®¹ æ‰©å®¹æœºåˆ¶æµç¨‹
> 2. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„æ”¯ä»˜å®é¢ç»åŒå­¦ 2 æ˜¥æ‹›æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šhashCode å¯¹æ•°ç»„é•¿åº¦å–æ¨¡å®šä½æ•°ç»„ä¸‹æ ‡ï¼Œè¿™å—æœ‰æ²¡æœ‰ä¼˜åŒ–ç­–ç•¥ï¼Ÿ

### 16.å¦‚æœåˆå§‹åŒ– HashMapï¼Œä¼ ä¸€ä¸ª 17 å®¹é‡ï¼Œå®ƒä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ

HashMap ä¼šå°†è¿™ä¸ªå€¼è½¬æ¢ä¸ºå¤§äºæˆ–ç­‰äº 17 çš„æœ€å°çš„ 2 çš„å¹‚ã€‚è¿™æ˜¯å› ä¸º HashMap çš„è®¾è®¡æ˜¯åŸºäºå“ˆå¸Œè¡¨çš„ï¼Œè€Œå“ˆå¸Œè¡¨çš„å¤§å°æœ€å¥½æ˜¯ 2 çš„å¹‚ï¼Œè¿™æ ·å¯ä»¥ä¼˜åŒ–å“ˆå¸Œå€¼çš„è®¡ç®—ï¼Œå¹¶å‡å°‘å“ˆå¸Œå†²çªã€‚

æ‰€ä»¥ï¼Œå¦‚æœä½ ä¼ å…¥ 17 ä½œä¸ºåˆå§‹å®¹é‡ï¼ŒHashMap å®é™…ä¸Šä¼šè¢«åˆå§‹åŒ–ä¸ºå¤§å°ä¸º 32 çš„å“ˆå¸Œè¡¨ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå®¹é‡è®¡ç®—](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-18.png)

åœ¨ HashMap çš„åˆå§‹åŒ–æ„é€ æ–¹æ³•ä¸­ï¼Œæœ‰è¿™æ ·â¼€æ®µä»£ç ï¼š

```java
public HashMap(int initialCapacity, float loadFactor) {
 ...
 this.loadFactor = loadFactor;
 this.threshold = tableSizeFor(initialCapacity);
}
```

é˜€å€¼ threshold ä¼šé€šè¿‡â½…æ³•` tableSizeFor()` è¿›â¾è®¡ç®—ã€‚

```java
static final int tableSizeFor(int cap) {
    int n = cap - 1;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    return (n < 0) ? 1 : (n >= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;
}
```

â‘ ã€`int n = cap - 1;` å°†ä¼ å…¥çš„å®¹é‡å‡ 1ï¼Œç”¨äºç¡®ä¿å¦‚æœä¼ å…¥çš„å®¹é‡å·²ç»æ˜¯ 2 çš„å¹‚æ¬¡æ–¹ï¼Œè®¡ç®—ç»“æœä¸ä¼šè¶…è¿‡è¿™ä¸ªæ•°ã€‚

â‘¡ã€æ¥ä¸‹æ¥é€šè¿‡ä¸æ–­å³ç§»ï¼ˆ`>>>`ï¼‰å¹¶ä¸è‡ªèº«è¿›è¡Œæˆ–è¿ç®—ï¼ˆ`|=`ï¼‰ï¼Œå°† n çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æ‰€æœ‰ä½ä½è®¾ç½®ä¸º 1ã€‚

- `n |= n >>> 1;` æŠŠ n çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ€é«˜ä½çš„ 1 ä¹‹åçš„ä¸€ä¸ª 0 å˜æˆ 1ã€‚
- `n |= n >>> 2;` æ¥ç€æŠŠåä¸¤ä½ä¸­çš„ 0 éƒ½å˜æˆ 1ã€‚
- ä¾æ­¤ç±»æ¨ï¼Œç›´åˆ° `n |= n >>> 16;`ï¼Œæ­¤æ—¶ n çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ï¼Œä»æœ€é«˜ä½çš„ 1 å¼€å§‹åˆ°æœ€ä½ä½ï¼Œéƒ½å˜æˆäº† 1ã€‚

â‘¢ã€å¦‚æœ n å°äº 0ï¼Œè¯´æ˜ cap æ˜¯è´Ÿæ•°ï¼Œç›´æ¥è¿”å› 1ï¼ˆç†è®ºä¸Šå“ˆå¸Œè¡¨çš„å¤§å°ä¸åº”è¯¥æ˜¯è´Ÿæ•°æˆ– 0ï¼‰ã€‚

å¦‚æœ n å¤§äºæˆ–ç­‰äº MAXIMUM_CAPACITYï¼ˆé€šå¸¸æ˜¯$2^{30}$ï¼‰ï¼Œåˆ™è¿”å› MAXIMUM_CAPACITYã€‚

å¦åˆ™ï¼Œè¿”å› n + 1ï¼Œè¿™æ˜¯å› ä¸º n çš„æ‰€æœ‰ä½ä½éƒ½æ˜¯ 1ï¼Œæ‰€ä»¥ n + 1 å°±æ˜¯å¤§äº cap çš„æœ€å°çš„ 2 çš„å¹‚æ¬¡æ–¹ã€‚

#### åˆå§‹åŒ– HashMap çš„æ—¶å€™éœ€è¦ä¼ å…¥å®¹é‡å€¼å—ï¼Ÿ

åœ¨åˆ›å»º HashMap æ—¶å¯ä»¥æŒ‡å®šåˆå§‹å®¹é‡å€¼ã€‚è¿™ä¸ªå®¹é‡æ˜¯æŒ‡ Map å†…éƒ¨ç”¨äºå­˜å‚¨æ•°æ®çš„æ•°ç»„å¤§å°ã€‚

å¦‚æœé¢„å…ˆçŸ¥é“ Map å°†å­˜å‚¨å¤§é‡é”®å€¼å¯¹ï¼Œæå‰æŒ‡å®šä¸€ä¸ªè¶³å¤Ÿå¤§çš„åˆå§‹å®¹é‡å¯ä»¥å‡å°‘å› æ‰©å®¹å¯¼è‡´çš„é‡å“ˆå¸Œï¼ˆrehashingï¼‰æ“ä½œï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚

å› ä¸ºæ¯æ¬¡æ‰©å®¹æ—¶ï¼ŒHashMap éœ€è¦æ–°åˆ†é…ä¸€ä¸ªæ›´å¤§çš„æ•°ç»„å¹¶é‡æ–°å°†ç°æœ‰çš„å…ƒç´ æ’å…¥åˆ°è¿™ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹ç›¸å¯¹è€—æ—¶ï¼Œå°¤å…¶æ˜¯å½“ Map ä¸­å·²æœ‰å¤§é‡æ•°æ®æ—¶ã€‚

å½“ç„¶äº†ï¼Œè¿‡å¤§çš„åˆå§‹å®¹é‡ä¼šæµªè´¹å†…å­˜ï¼Œç‰¹åˆ«æ˜¯å½“å®é™…å­˜å‚¨çš„å…ƒç´ è¿œå°‘äºåˆå§‹å®¹é‡æ—¶ã€‚å¦‚æœä¸æŒ‡å®šåˆå§‹å®¹é‡ï¼ŒHashMap å°†ä½¿ç”¨é»˜è®¤çš„åˆå§‹å®¹é‡ 16ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å¥‡å®‰ä¿¡é¢ç»åŒå­¦ 1 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šmap é›†åˆåœ¨ä½¿ç”¨æ—¶å€™ä¸€èˆ¬éƒ½éœ€è¦å†™å®¹é‡å€¼ï¼Ÿä¸ºä»€ä¹ˆè¦å†™ï¼Ÿæ‰©å®¹æœºåˆ¶ï¼Ÿ

### 17.ä½ è¿˜çŸ¥é“å“ªäº›å“ˆå¸Œå‡½æ•°çš„æ„é€ æ–¹æ³•å‘¢ï¼Ÿ

HashMap é‡Œå“ˆå¸Œæ„é€ å‡½æ•°çš„æ–¹æ³•å«ï¼š

- **é™¤ç•™å–ä½™æ³•**ï¼š`H(key)=key%p(p<=N)`ï¼Œå…³é”®å­—é™¤ä»¥ä¸€ä¸ªä¸å¤§äºå“ˆå¸Œè¡¨é•¿åº¦çš„æ­£æ•´æ•° pï¼Œæ‰€å¾—ä½™æ•°ä¸ºåœ°å€ï¼Œå½“ç„¶ HashMap é‡Œè¿›è¡Œäº†ä¼˜åŒ–æ”¹é€ ï¼Œæ•ˆç‡æ›´é«˜ï¼Œæ•£åˆ—ä¹Ÿæ›´å‡è¡¡ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰è¿™å‡ ç§å¸¸è§çš„å“ˆå¸Œå‡½æ•°æ„é€ æ–¹æ³•ï¼š

- **ç›´æ¥å®šå€æ³•**

  ç›´æ¥æ ¹æ®`key`æ¥æ˜ å°„åˆ°å¯¹åº”çš„æ•°ç»„ä½ç½®ï¼Œä¾‹å¦‚ 1232 æ”¾åˆ°ä¸‹æ ‡ 1232 çš„ä½ç½®ã€‚

- **æ•°å­—åˆ†ææ³•**

  å–`key`çš„æŸäº›æ•°å­—ï¼ˆä¾‹å¦‚åä½å’Œç™¾ä½ï¼‰ä½œä¸ºæ˜ å°„çš„ä½ç½®

- **å¹³æ–¹å–ä¸­æ³•**

  å–`key`å¹³æ–¹çš„ä¸­é—´å‡ ä½ä½œä¸ºæ˜ å°„çš„ä½ç½®

- **æŠ˜å æ³•**

  å°†`key`åˆ†å‰²æˆä½æ•°ç›¸åŒçš„å‡ æ®µï¼Œç„¶åæŠŠå®ƒä»¬çš„å åŠ å’Œä½œä¸ºæ˜ å°„çš„ä½ç½®

![æ•£åˆ—å‡½æ•°æ„é€ ](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-19.png)

### 18.è§£å†³å“ˆå¸Œå†²çªæœ‰å“ªäº›æ–¹æ³•å‘¢ï¼Ÿ

è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•æˆ‘çŸ¥é“çš„æœ‰ 3 ç§ï¼š

â‘ ã€å†å“ˆå¸Œæ³•

å‡†å¤‡ä¸¤å¥—å“ˆå¸Œç®—æ³•ï¼Œå½“å‘ç”Ÿå“ˆå¸Œå†²çªçš„æ—¶å€™ï¼Œä½¿ç”¨å¦å¤–ä¸€ç§å“ˆå¸Œç®—æ³•ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºæ§½ä¸ºæ­¢ã€‚å¯¹å“ˆå¸Œç®—æ³•çš„è®¾è®¡è¦æ±‚æ¯”è¾ƒé«˜ã€‚

â‘¡ã€å¼€æ”¾åœ°å€æ³•

é‡åˆ°å“ˆå¸Œå†²çªçš„æ—¶å€™ï¼Œå°±å»å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„æ§½ã€‚æœ‰ 3 ç§æ–¹æ³•ï¼š

- çº¿æ€§æ¢æµ‹ï¼šä»å†²çªçš„ä½ç½®å¼€å§‹ï¼Œä¾æ¬¡å¾€åæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºæ§½ã€‚
- äºŒæ¬¡æ¢æµ‹ï¼šä»å†²çªçš„ä½ç½® x å¼€å§‹ï¼Œç¬¬ä¸€æ¬¡å¢åŠ  $1^2$ ä¸ªä½ç½®ï¼Œç¬¬äºŒæ¬¡å¢åŠ  $2^2$ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºæ§½ã€‚
- åŒé‡å“ˆå¸Œï¼šå’Œå†å“ˆå¸Œæ³•ç±»ä¼¼ï¼Œå‡†å¤‡å¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼Œå‘ç”Ÿå†²çªçš„æ—¶å€™ï¼Œä½¿ç”¨å¦å¤–ä¸€ä¸ªå“ˆå¸Œå‡½æ•°ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ‹‰é“¾æ³• VS å¼€æ”¾åœ°å€æ³•](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-20.png)

â‘¢ã€æ‹‰é“¾æ³•

ä¹Ÿå°±æ˜¯æ‰€è°“çš„é“¾åœ°å€æ³•ï¼Œå½“å‘ç”Ÿå“ˆå¸Œå†²çªçš„æ—¶å€™ï¼Œä½¿ç”¨é“¾è¡¨å°†å†²çªçš„å…ƒç´ ä¸²èµ·æ¥ã€‚HashMap é‡‡ç”¨çš„æ­£æ˜¯æ‹‰é“¾æ³•ã€‚

#### æ€ä¹ˆåˆ¤æ–­ key ç›¸ç­‰å‘¢ï¼Ÿ

`HashMap`åˆ¤æ–­ä¸¤ä¸ª`key`æ˜¯å¦ç›¸ç­‰ï¼Œä¾èµ–äº`key`çš„`equals()`æ–¹æ³•å’Œ`hashCode()`æ–¹æ³•ï¼Œä»¥åŠ `==` è¿ç®—ç¬¦ã€‚

```java
if (e.hash == hash &&
((k = e.key) == key || (key != null && key.equals(k))))
```

â‘ ã€**hashCode()** ï¼šé¦–å…ˆï¼Œä½¿ç”¨`key`çš„`hashCode()`æ–¹æ³•è®¡ç®—`key`çš„å“ˆå¸Œç ã€‚ç”±äºä¸åŒçš„`key`å¯èƒ½æœ‰ç›¸åŒçš„å“ˆå¸Œç ï¼Œ`hashCode()`åªæ˜¯ç¬¬ä¸€æ­¥ç­›é€‰ã€‚

â‘¡ã€**equals()** ï¼šå½“ä¸¤ä¸ª`key`çš„å“ˆå¸Œç ç›¸åŒæ—¶ï¼Œ`HashMap`è¿˜ä¼šè°ƒç”¨`key`çš„`equals()`æ–¹æ³•è¿›è¡Œç²¾ç¡®æ¯”è¾ƒã€‚åªæœ‰å½“`equals()`æ–¹æ³•è¿”å›`true`æ—¶ï¼Œä¸¤ä¸ª`key`æ‰è¢«è®¤ä¸ºæ˜¯å®Œå…¨ç›¸åŒçš„ã€‚

â‘¢ã€==ï¼šå½“ç„¶äº†ï¼Œå¦‚æœä¸¤ä¸ª`key`çš„å¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä»¬çš„`hashCode()`å’Œ`equals()`æ–¹æ³•éƒ½ä¼šè¿”å›`true`ï¼Œæ‰€ä»¥åœ¨ equals åˆ¤æ–­ä¹‹å‰ä¼šä¼˜å…ˆä½¿ç”¨`==`è¿ç®—ç¬¦åˆ¤æ–­ä¸€æ¬¡ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„æ”¯ä»˜å®é¢ç»åŒå­¦ 2 æ˜¥æ‹›æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šHashMap æ€ä¹ˆè§£å†³å†²çªï¼Ÿæ€ä¹ˆåˆ¤æ–­ key ç›¸ç­‰ï¼Ÿ

### 19.ä¸ºä»€ä¹ˆ HashMap é“¾è¡¨è½¬çº¢é»‘æ ‘çš„é˜ˆå€¼ä¸º 8 å‘¢ï¼Ÿ

æ ‘åŒ–å‘ç”Ÿåœ¨ table æ•°ç»„çš„é•¿åº¦å¤§äº 64ï¼Œä¸”é“¾è¡¨çš„é•¿åº¦å¤§äº 8 çš„æ—¶å€™ã€‚

ä¸ºä»€ä¹ˆæ˜¯ 8 å‘¢ï¼Ÿæºç çš„æ³¨é‡Šä¹Ÿç»™å‡ºäº†ç­”æ¡ˆã€‚

![æºç æ³¨é‡Š](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-21.png)

çº¢é»‘æ ‘èŠ‚ç‚¹çš„å¤§å°å¤§æ¦‚æ˜¯æ™®é€šèŠ‚ç‚¹å¤§å°çš„ä¸¤å€ï¼Œæ‰€ä»¥è½¬çº¢é»‘æ ‘ï¼Œç‰ºç‰²äº†ç©ºé—´æ¢æ—¶é—´ï¼Œæ›´å¤šçš„æ˜¯ä¸€ç§å…œåº•çš„ç­–ç•¥ï¼Œä¿è¯æç«¯æƒ…å†µä¸‹çš„æŸ¥æ‰¾æ•ˆç‡ã€‚

é˜ˆå€¼ä¸ºä»€ä¹ˆè¦é€‰ 8 å‘¢ï¼Ÿå’Œç»Ÿè®¡å­¦æœ‰å…³ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä½¿ç”¨éšæœºå“ˆå¸Œç ï¼Œé“¾è¡¨é‡Œçš„èŠ‚ç‚¹ç¬¦åˆæ³Šæ¾åˆ†å¸ƒï¼Œå‡ºç°èŠ‚ç‚¹ä¸ªæ•°çš„æ¦‚ç‡æ˜¯é€’å‡çš„ï¼ŒèŠ‚ç‚¹ä¸ªæ•°ä¸º 8 çš„æƒ…å†µï¼Œå‘ç”Ÿæ¦‚ç‡ä»…ä¸º`0.00000006`ã€‚

è‡³äºçº¢é»‘æ ‘è½¬å›é“¾è¡¨çš„é˜ˆå€¼ä¸ºä»€ä¹ˆæ˜¯ 6ï¼Œè€Œä¸æ˜¯ 8ï¼Ÿæ˜¯å› ä¸ºå¦‚æœè¿™ä¸ªé˜ˆå€¼ä¹Ÿè®¾ç½®æˆ 8ï¼Œå‡å¦‚å‘ç”Ÿç¢°æ’ï¼ŒèŠ‚ç‚¹å¢å‡åˆšå¥½åœ¨ 8 é™„è¿‘ï¼Œä¼šå‘ç”Ÿé“¾è¡¨å’Œçº¢é»‘æ ‘çš„ä¸æ–­è½¬æ¢ï¼Œå¯¼è‡´èµ„æºæµªè´¹ã€‚

### 20.æ‰©å®¹åœ¨ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿä¸ºä»€ä¹ˆæ‰©å®¹å› å­æ˜¯ 0.75ï¼Ÿ

HashMap ä¼šåœ¨å­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡è¶…è¿‡é˜ˆå€¼ï¼ˆå³å®¹é‡ \* åŠ è½½å› å­ï¼‰æ—¶è¿›è¡Œæ‰©å®¹ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/collection-20240323113620.png)

é»˜è®¤çš„åŠ è½½å› å­æ˜¯ 0.75ï¼Œè¿™æ„å‘³ç€å½“ HashMap å¡«æ»¡äº†å¤§çº¦ 75%çš„å®¹é‡æ—¶ï¼Œå°±ä¼šè¿›è¡Œæ‰©å®¹ã€‚

```java
static final int DEFAULT_INITIAL_CAPACITY = 1 << 4; // aka 16
```

é»˜è®¤çš„åˆå§‹å®¹é‡æ˜¯ 16ï¼Œé‚£å°±æ˜¯å¤§äº`16x0.75=12`æ—¶ï¼Œå°±ä¼šè§¦å‘ç¬¬ä¸€æ¬¡æ‰©å®¹æ“ä½œã€‚

#### é‚£ä¹ˆä¸ºä»€ä¹ˆé€‰æ‹©äº† 0.75 ä½œä¸º HashMap çš„é»˜è®¤åŠ è½½å› å­å‘¢ï¼Ÿ

ç®€å•æ¥è¯´ï¼Œè¿™æ˜¯å¯¹`ç©ºé—´`æˆæœ¬å’Œ`æ—¶é—´`æˆæœ¬å¹³è¡¡çš„è€ƒè™‘ã€‚

åœ¨ HashMap ä¸­æœ‰è¿™æ ·ä¸€æ®µæ³¨é‡Šï¼š

![å…³äºé»˜è®¤è´Ÿè½½å› å­çš„æ³¨é‡Š](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-24.png)

æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒHashMap çš„æ•£åˆ—æ„é€ æ–¹å¼æ˜¯ Hash å–ä½™ï¼Œè´Ÿè½½å› å­å†³å®šå…ƒç´ ä¸ªæ•°è¾¾åˆ°å¤šå°‘æ—¶å€™æ‰©å®¹ã€‚

å‡å¦‚æˆ‘ä»¬è®¾çš„æ¯”è¾ƒå¤§ï¼Œå…ƒç´ æ¯”è¾ƒå¤šï¼Œç©ºä½æ¯”è¾ƒå°‘çš„æ—¶å€™æ‰æ‰©å®¹ï¼Œé‚£ä¹ˆå‘ç”Ÿå“ˆå¸Œå†²çªçš„æ¦‚ç‡å°±å¢åŠ äº†ï¼ŒæŸ¥æ‰¾çš„æ—¶é—´æˆæœ¬å°±å¢åŠ äº†ã€‚

æˆ‘ä»¬è®¾çš„æ¯”è¾ƒå°çš„è¯ï¼Œå…ƒç´ æ¯”è¾ƒå°‘ï¼Œç©ºä½æ¯”è¾ƒå¤šçš„æ—¶å€™å°±æ‰©å®¹äº†ï¼Œå‘ç”Ÿå“ˆå¸Œç¢°æ’çš„æ¦‚ç‡å°±é™ä½äº†ï¼ŒæŸ¥æ‰¾æ—¶é—´æˆæœ¬é™ä½ï¼Œä½†æ˜¯å°±éœ€è¦æ›´å¤šçš„ç©ºé—´å»å­˜å‚¨å…ƒç´ ï¼Œç©ºé—´æˆæœ¬å°±å¢åŠ äº†ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¸ºä»€ä¹ˆæ˜¯ 2 æ¬¡å¹‚ åˆ°ä»€ä¹ˆæ—¶å€™å¼€å§‹æ‰©å®¹ æ‰©å®¹æœºåˆ¶æµç¨‹

### 21.é‚£æ‰©å®¹æœºåˆ¶äº†è§£å—ï¼Ÿ

æ‰©å®¹æ—¶ï¼ŒHashMap ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶å®¹é‡æ˜¯åŸæ•°ç»„å®¹é‡çš„ä¸¤å€ã€‚

ç„¶åå°†é”®å€¼å¯¹æ”¾åˆ°æ–°è®¡ç®—å‡ºçš„ç´¢å¼•ä½ç½®ä¸Šã€‚ä¸€éƒ¨åˆ†ç´¢å¼•ä¸å˜ï¼Œå¦ä¸€éƒ¨åˆ†ç´¢å¼•ä¸ºâ€œåŸç´¢å¼•+æ—§å®¹é‡â€ã€‚

åœ¨ JDK 7 ä¸­ï¼Œå®šä½å…ƒç´ ä½ç½®çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š

```java
static int indexFor(int h, int length) {
    // assert Integer.bitCount(length) == 1 : "length must be a non-zero power of 2";
    return h & (length-1);
}
```

å…¶å®å°±ç›¸å½“äºç”¨é”®çš„å“ˆå¸Œå€¼å’Œæ•°ç»„å¤§å°å–æ¨¡ï¼Œä¹Ÿå°±æ˜¯ `hashCode % table.length`ã€‚

é‚£æˆ‘ä»¬æ¥å‡è®¾ï¼š

- æ•°ç»„ table çš„é•¿åº¦ä¸º 2
- é”®çš„å“ˆå¸Œå€¼ä¸º 3ã€7ã€5

å–æ¨¡è¿ç®—åï¼Œé”®å‘ç”Ÿäº†å“ˆå¸Œå†²çªï¼Œéƒ½åˆ° `table[1]` ä¸Šäº†ã€‚é‚£ä¹ˆæ‰©å®¹å‰å°±æ˜¯è¿™ä¸ªæ ·å­ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ‰©å®¹å‰](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-resize-01.png)

æ•°ç»„çš„å®¹é‡ä¸º 2ï¼Œkey ä¸º 3ã€7ã€5 çš„å…ƒç´ åœ¨ `table[1]` ä¸Šï¼Œéœ€è¦é€šè¿‡æ‹‰é“¾æ³•æ¥è§£å†³å“ˆå¸Œå†²çªã€‚

å‡è®¾è´Ÿè½½å› å­ loadFactor ä¸º 1ï¼Œä¹Ÿå°±æ˜¯å½“å…ƒç´ çš„ä¸ªæ•°å¤§äº table çš„é•¿åº¦æ—¶è¿›è¡Œæ‰©å®¹ã€‚

æ‰©å®¹åçš„æ•°ç»„å®¹é‡ä¸º 4ã€‚

- key 3 å–æ¨¡ï¼ˆ3%4ï¼‰åæ˜¯ 3ï¼Œæ”¾åœ¨ `table[3]` ä¸Šã€‚
- key 7 å–æ¨¡ï¼ˆ7%4ï¼‰åæ˜¯ 3ï¼Œæ”¾åœ¨ `table[3]` ä¸Šçš„é“¾è¡¨å¤´éƒ¨ã€‚
- key 5 å–æ¨¡ï¼ˆ5%4ï¼‰åæ˜¯ 1ï¼Œæ”¾åœ¨ `table[1]` ä¸Šã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š JDK7æ‰©å®¹å](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-resize-02.png)

7 è·‘åˆ° 3 çš„å‰é¢äº†ï¼Œå› ä¸º JDK 7 ä½¿ç”¨çš„æ˜¯å¤´æ’æ³•ã€‚

```java
e.next = newTable[i];
```

åŒæ—¶ï¼Œæ‰©å®¹åçš„ 5 è·‘åˆ°äº†ä¸‹æ ‡ä¸º 1 çš„ä½ç½®ã€‚

æœ€å¥½çš„æƒ…å†µå°±æ˜¯ï¼Œæ‰©å®¹åçš„ 7 åœ¨ 3 çš„åé¢ï¼Œ5 åœ¨ 7 çš„åé¢ï¼Œä¿æŒåŸæ¥çš„é¡ºåºã€‚

JDK 8 å®Œå…¨æ‰­è½¬äº†è¿™ä¸ªå±€é¢ï¼Œå› ä¸º JDK 8 çš„å“ˆå¸Œç®—æ³•è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå½“æ•°ç»„é•¿åº¦ä¸º 2 çš„å¹‚æ¬¡æ–¹æ—¶ï¼Œèƒ½å¤Ÿå¾ˆå·§å¦™åœ°è§£å†³ JDK 7 ä¸­é‡åˆ°çš„é—®é¢˜ã€‚

JDK 8 çš„æ‰©å®¹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
Node<K,V>[] newTab = new Node[newCapacity];
for (int j = 0; j < oldTab.length; j++) {
    Node<K,V> e = oldTab[j];
    if (e != null) {
        int hash = e.hash;
        int newIndex = hash & (newCapacity - 1); // è®¡ç®—åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®
        // å°†èŠ‚ç‚¹ç§»åŠ¨åˆ°æ–°æ•°ç»„çš„å¯¹åº”ä½ç½®
        newTab[newIndex] = e;
    }
}
```

æ–°ç´¢å¼•çš„è®¡ç®—æ–¹å¼æ˜¯ `hash & (newCapacity - 1)`ï¼Œå’Œ JDK 7 çš„ `h & (length-1)`æ²¡ä»€ä¹ˆå¤§çš„å·®åˆ«ï¼Œå·®åˆ«ä¸»è¦åœ¨ hash æ–¹æ³•ä¸Šï¼ŒJDK 8 æ˜¯è¿™æ ·ï¼š

```java
static final int hash(Object key) {
    int h;
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```

è¿‡å°†é”®çš„`hashCode()`è¿”å›çš„ 32 ä½å“ˆå¸Œå€¼ä¸è¿™ä¸ªå“ˆå¸Œå€¼æ— ç¬¦å·å³ç§» 16 ä½çš„ç»“æœè¿›è¡Œå¼‚æˆ–ã€‚

JDK 7 æ˜¯è¿™æ ·ï¼š

```java
final int hash(Object k) {
    int h = hashSeed;
    if (0 != h && k instanceof String) {
        return sun.misc.Hashing.stringHash32((String) k);
    }

    h ^= k.hashCode();

    // This function ensures that hashCodes that differ only by
    // constant multiples at each bit position have a bounded
    // number of collisions (approximately 8 at default load factor).
    h ^= (h >>> 20) ^ (h >>> 12);
    return h ^ (h >>> 7) ^ (h >>> 4);
}
```

æˆ‘ä»¬ç”¨ JDK 8 çš„å“ˆå¸Œç®—æ³•æ¥è®¡ç®—ä¸€ä¸‹å“ˆå¸Œå€¼ï¼Œå°±ä¼šå‘ç°åˆ«æœ‰æ´å¤©ã€‚

å‡è®¾æ‰©å®¹å‰çš„æ•°ç»„é•¿åº¦ä¸º 16ï¼ˆn-1 ä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶çš„ 0000 1111ï¼Œ1X$2^0$+1X$2^1$+1X$2^2$+1X$2^3$=1+2+4+8=15ï¼‰ï¼Œkey1 ä¸º 5ï¼ˆäºŒè¿›åˆ¶ä¸º 0000 0101ï¼‰ï¼Œkey2 ä¸º 21ï¼ˆäºŒè¿›åˆ¶ä¸º 0001 0101ï¼‰ã€‚

- key1 å’Œ n-1 åš & è¿ç®—åä¸º 0000 0101ï¼Œä¹Ÿå°±æ˜¯ 5ï¼›
- key2 å’Œ n-1 åš & è¿ç®—åä¸º 0000 0101ï¼Œä¹Ÿå°±æ˜¯ 5ã€‚
- æ­¤æ—¶å“ˆå¸Œå†²çªäº†ï¼Œç”¨æ‹‰é“¾æ³•æ¥è§£å†³å“ˆå¸Œå†²çªã€‚

ç°åœ¨ï¼ŒHashMap è¿›è¡Œäº†æ‰©å®¹ï¼Œå®¹é‡ä¸ºåŸæ¥çš„ 2 å€ï¼Œä¹Ÿå°±æ˜¯ 32ï¼ˆn-1 ä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶çš„ 0001 1111ï¼Œ1X$2^0$+1X$2^1$+1X$2^2$+1X$2^3$+1X$2^4$=1+2+4+8+16=31ï¼‰ã€‚

- key1 å’Œ n-1 åš & è¿ç®—åä¸º 0000 0101ï¼Œä¹Ÿå°±æ˜¯ 5ï¼›
- key2 å’Œ n-1 åš & è¿ç®—åä¸º 0001 0101ï¼Œä¹Ÿå°±æ˜¯ 21=5+16ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„æ‰©å®¹å‰çš„ä½ç½®+åŸæ•°ç»„çš„é•¿åº¦ã€‚

ç¥å¥‡å§ï¼Ÿ

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ‰©å®¹ä½ç½®å˜åŒ–](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-26.png)

ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ JDK 8 çš„æ–° hash ç®—æ³•ä¸‹ï¼Œæ•°ç»„æ‰©å®¹åçš„ç´¢å¼•ä½ç½®ï¼Œè¦ä¹ˆå°±æ˜¯åŸæ¥çš„ç´¢å¼•ä½ç½®ï¼Œè¦ä¹ˆå°±æ˜¯â€œåŸç´¢å¼•+åŸæ¥çš„å®¹é‡â€ï¼Œéµå¾ªä¸€å®šçš„è§„å¾‹ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ‰©å®¹èŠ‚ç‚¹è¿ç§»ç¤ºæ„å›¾](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-27.png)

å½“ç„¶äº†ï¼Œè¿™ä¸ªåŠŸåŠ³æ—¢å±äºæ–°çš„å“ˆå¸Œç®—æ³•ï¼Œä¹Ÿç¦»ä¸å¼€ n ä¸º 2 çš„æ•´æ•°æ¬¡å¹‚è¿™ä¸ªå‰æï¼Œè¿™æ˜¯å®ƒä¿©é€šåŠ›åˆä½œåçš„ç»“æœ `hash & (newCapacity - 1)`ã€‚

#### é‚£ä½ è¯´è¯´æ‰©å®¹çš„æ—¶å€™æ¯ä¸ªèŠ‚ç‚¹éƒ½è¦è¿›è¡Œä½è¿ç®—å—ï¼Œå¦‚æœæˆ‘è¿™ä¸ª HashMap é‡Œé¢æœ‰å‡ åä¸‡æ¡æ•°æ®ï¼Œéƒ½è¦è¿›è¡Œä½è¿ç®—å—ï¼Ÿ

åœ¨ JDK 8 çš„æ–° hash ç®—æ³•ä¸‹ï¼Œæ•°ç»„æ‰©å®¹åçš„ç´¢å¼•ä½ç½®ï¼Œè¦ä¹ˆå°±æ˜¯åŸæ¥çš„ç´¢å¼•ä½ç½®ï¼Œè¦ä¹ˆå°±æ˜¯â€œåŸç´¢å¼•+åŸæ¥çš„å®¹é‡â€ï¼Œéµå¾ªä¸€å®šçš„è§„å¾‹ã€‚

å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åˆ¤æ–­åŸå“ˆå¸Œå€¼çš„é«˜ä½ä¸­æ–°å¢çš„é‚£ä¸€ä½æ˜¯å¦ä¸º 1ï¼Œå¦‚æœæ˜¯ï¼Œè¯¥å…ƒç´ ä¼šè¢«ç§»åŠ¨åˆ°åŸä½ç½®åŠ ä¸Šæ—§å®¹é‡çš„ä½ç½®ï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ™ä¿æŒåœ¨åŸä½ç½®ã€‚

æ‰€ä»¥ï¼Œå°½ç®¡æœ‰å‡ åä¸‡æ¡æ•°æ®ï¼Œæ¯ä¸ªæ•°æ®é¡¹çš„ä½ç½®å†³å®šä»…éœ€è¦ä¸€æ¬¡ç®€å•çš„ä½è¿ç®—ã€‚ä½è¿ç®—çš„è®¡ç®—é€Ÿåº¦éå¸¸å¿«ï¼Œå› æ­¤ï¼Œå°½ç®¡æ‰©å®¹æ“ä½œæ¶‰åŠéå†æ•´ä¸ªå“ˆå¸Œè¡¨å¹¶å¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œæ“ä½œï¼Œä½†è¿™éƒ¨åˆ†æ“ä½œçš„è®¡ç®—æˆæœ¬æ˜¯ç›¸å¯¹è¾ƒä½çš„ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¸ºä»€ä¹ˆæ˜¯ 2 æ¬¡å¹‚ åˆ°ä»€ä¹ˆæ—¶å€™å¼€å§‹æ‰©å®¹ æ‰©å®¹æœºåˆ¶æµç¨‹
> 2. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°ç±³æš‘æœŸå®ä¹ åŒå­¦ E ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´ HashMap çš„æ‰©å®¹æœºåˆ¶ï¼Œ1.8 æ‰©å®¹å…·ä½“å®ç°
> 3. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å¥‡å®‰ä¿¡é¢ç»åŒå­¦ 1 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šmap é›†åˆåœ¨ä½¿ç”¨æ—¶å€™ä¸€èˆ¬éƒ½éœ€è¦å†™å®¹é‡å€¼ï¼Ÿä¸ºä»€ä¹ˆè¦å†™ï¼Ÿæ‰©å®¹æœºåˆ¶ï¼Ÿ
> 4. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šhashmap çš„åº•å±‚å®ç°åŸç†ã€put()æ–¹æ³•å®ç°æµç¨‹ã€æ‰©å®¹æœºåˆ¶ï¼Ÿ

### 22.JDK 8 å¯¹ HashMap ä¸»è¦åšäº†å“ªäº›ä¼˜åŒ–å‘¢ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

ç›¸æ¯”è¾ƒ JDK 7ï¼ŒJDK 8 çš„ HashMap ä¸»è¦åšäº†å››ç‚¹ä¼˜åŒ–ï¼š

â‘ ã€åº•å±‚æ•°æ®ç»“æ„ç”±æ•°ç»„ + é“¾è¡¨æ”¹æˆäº†æ•°ç»„ + é“¾è¡¨æˆ–çº¢é»‘æ ‘çš„ç»“æ„ã€‚

åŸå› ï¼šå¦‚æœå¤šä¸ªé”®æ˜ å°„åˆ°äº†åŒä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œé“¾è¡¨ä¼šå˜å¾—å¾ˆé•¿ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå½“æ‰€æœ‰çš„é”®éƒ½æ˜ å°„åˆ°åŒä¸€ä¸ªæ¡¶ä¸­æ—¶ï¼Œæ€§èƒ½ä¼šé€€åŒ–åˆ° O(n)ï¼Œè€Œçº¢é»‘æ ‘çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(logn)ã€‚

â‘¡ã€é“¾è¡¨çš„æ’å…¥æ–¹å¼ç”±å¤´æ’æ³•æ”¹ä¸ºäº†å°¾æ’æ³•ã€‚

åŸå› ï¼šå¤´æ’æ³•è™½ç„¶ç®€å•å¿«æ·ï¼Œä½†æ‰©å®¹åå®¹æ˜“æ”¹å˜åŸæ¥é“¾è¡¨çš„é¡ºåºã€‚

â‘¢ã€æ‰©å®¹çš„æ—¶æœºç”±æ’å…¥æ—¶åˆ¤æ–­æ”¹ä¸ºæ’å…¥ååˆ¤æ–­ã€‚

åŸå› ï¼šå¯ä»¥é¿å…åœ¨æ¯æ¬¡æ’å…¥æ—¶éƒ½è¿›è¡Œä¸å¿…è¦çš„æ‰©å®¹æ£€æŸ¥ï¼Œå› ä¸ºæœ‰å¯èƒ½æ’å…¥åä»ç„¶ä¸éœ€è¦æ‰©å®¹ã€‚

â‘£ã€ä¼˜åŒ–äº†å“ˆå¸Œç®—æ³•ã€‚

JDK 7 è¿›è¡Œäº†å¤šæ¬¡ç§»ä½å’Œå¼‚æˆ–æ“ä½œæ¥è®¡ç®—å…ƒç´ çš„å“ˆå¸Œå€¼ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šJDK 7 çš„ hash æ–¹æ³•](https://cdn.tobebetterjavaer.com/stutymore/collection-20240512093223.png)

JDK 8 ä¼˜åŒ–äº†è¿™ä¸ªç®—æ³•ï¼Œåªè¿›è¡Œäº†ä¸€æ¬¡å¼‚æˆ–æ“ä½œï¼Œä½†ä»ç„¶èƒ½æœ‰æ•ˆåœ°å‡å°‘å†²çªã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šJDK 8 çš„ hash æ–¹æ³•](https://cdn.tobebetterjavaer.com/stutymore/collection-20240512093327.png)

å¹¶ä¸”èƒ½å¤Ÿä¿è¯æ‰©å®¹åï¼Œå…ƒç´ çš„æ–°ä½ç½®è¦ä¹ˆæ˜¯åŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åŸä½ç½®åŠ ä¸Šæ—§å®¹é‡å¤§å°ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„ç¾å›¢åŒå­¦ 2 ä¼˜é€‰ç‰©æµè°ƒåº¦æŠ€æœ¯ 2 é¢é¢è¯•åŸé¢˜ï¼šHashMap çš„å†…éƒ¨ç»“æ„ï¼Œ1.7 å’Œ 1.8 çš„åŒºåˆ«ï¼Œæœ‰ä»€ä¹ˆæ”¹è¿›

### 23.ä½ èƒ½è‡ªå·±è®¾è®¡å®ç°ä¸€ä¸ª HashMap å—ï¼Ÿ

è¿™é“é¢˜**å¿«æ‰‹**å¸¸è€ƒã€‚

ä¸è¦æ…Œï¼Œçº¢é»‘æ ‘ç‰ˆå’±ä»¬å¤šåŠæ˜¯å†™ä¸å‡ºæ¥ï¼Œä½†æ˜¯æ•°ç»„+é“¾è¡¨ç‰ˆè¿˜æ˜¯é—®é¢˜ä¸å¤§çš„ï¼Œè¯¦ç»†å¯è§ï¼š [æ‰‹å†™ HashMapï¼Œå¿«æ‰‹é¢è¯•å®˜ç›´å‘¼å†…è¡Œï¼](https://mp.weixin.qq.com/s/Z9yoRZW5itrtgbS-cj0bUg)ã€‚

æ•´ä½“çš„è®¾è®¡ï¼š

- æ•£åˆ—å‡½æ•°ï¼šhashCode()+é™¤ç•™ä½™æ•°æ³•
- å†²çªè§£å†³ï¼šé“¾åœ°å€æ³•
- æ‰©å®¹ï¼šèŠ‚ç‚¹é‡æ–° hash è·å–ä½ç½®

![è‡ªå®šä¹‰HashMapæ•´ä½“ç»“æ„](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-29.png)

å®Œæ•´ä»£ç ï¼š

![å®Œæ•´ä»£ç ](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-30.png)

### 24.HashMap æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿå¤šçº¿ç¨‹ä¸‹ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ

æ¨èé˜…è¯»ï¼š[HashMap è¯¦è§£](https://javabetter.cn/collection/hashmap.html#_04%E3%80%81%E7%BA%BF%E7%A8%8B%E4%B8%8D%E5%AE%89%E5%85%A8)

HashMap ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š

â‘ ã€å¤šçº¿ç¨‹ä¸‹æ‰©å®¹ä¼šæ­»å¾ªç¯ã€‚JDK1.7 ä¸­çš„ HashMap ä½¿ç”¨çš„æ˜¯å¤´æ’æ³•æ’å…¥å…ƒç´ ï¼Œåœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œæ‰©å®¹çš„æ—¶å€™å°±æœ‰å¯èƒ½å¯¼è‡´å‡ºç°ç¯å½¢é“¾è¡¨ï¼Œé€ æˆæ­»å¾ªç¯ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-thread-nosafe-07.png)

ä¸è¿‡ï¼ŒJDK 8 æ—¶å·²ç»ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼Œæ‰©å®¹æ—¶ä¼šä¿æŒé“¾è¡¨åŸæ¥çš„é¡ºåºã€‚

â‘¡ã€å¤šçº¿ç¨‹çš„ put å¯èƒ½ä¼šå¯¼è‡´å…ƒç´ çš„ä¸¢å¤±ã€‚å› ä¸ºè®¡ç®—å‡ºæ¥çš„ä½ç½®å¯èƒ½ä¼šè¢«å…¶ä»–çº¿ç¨‹çš„ put è¦†ç›–ï¼Œå¾ˆå¥½ç†è§£ã€‚æœ¬æ¥å“ˆå¸Œå†²çªæ˜¯åº”è¯¥ç”¨é“¾è¡¨çš„ï¼Œä½†å¤šçº¿ç¨‹æ—¶ç”±äºæ²¡æœ‰åŠ é”ï¼Œç›¸åŒä½ç½®çš„å…ƒç´ å¯èƒ½å°±è¢«å¹²æ‰äº†ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/collection/hashmap-thread-nosafe-10.png)

â‘¢ã€put å’Œ get å¹¶å‘æ—¶ï¼Œå¯èƒ½å¯¼è‡´ get ä¸º nullã€‚çº¿ç¨‹ 1 æ‰§è¡Œ put æ—¶ï¼Œå› ä¸ºå…ƒç´ ä¸ªæ•°è¶…å‡ºé˜ˆå€¼è€Œå¯¼è‡´å‡ºç°æ‰©å®¹ï¼Œçº¿ç¨‹ 2 æ­¤æ—¶æ‰§è¡Œ getï¼Œå°±æœ‰å¯èƒ½å‡ºç°è¿™ä¸ªé—®é¢˜ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæºç æˆªå›¾](https://cdn.tobebetterjavaer.com/stutymore/collection-20240326085630.png)

å› ä¸ºçº¿ç¨‹ 1 æ‰§è¡Œå®Œ table = newTab ä¹‹åï¼Œçº¿ç¨‹ 2 ä¸­çš„ table æ­¤æ—¶ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œæ­¤æ—¶å» get çš„æ—¶å€™å½“ç„¶ä¼š get åˆ° null äº†ï¼Œå› ä¸ºå…ƒç´ è¿˜æ²¡æœ‰è½¬ç§»ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„åä¸º OD åŸé¢˜ï¼šHashMap æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ
> 2. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šHashMap æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ
> 3. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 9 é£ä¹¦åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šHashMap ä¸ºä»€ä¹ˆä¸å®‰å…¨ï¼Œå¦‚ä½•æ”¹è¿›ï¼Œä»¥åŠ ConcurrentHashMap
> 4. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šHashMap çš„åº•å±‚å®ç°ï¼Œå®ƒä¸ºä»€ä¹ˆæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Ÿ

### 25.æœ‰ä»€ä¹ˆåŠæ³•èƒ½è§£å†³ HashMap çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜å‘¢ï¼Ÿ

åœ¨ Java ä¸­ï¼Œæœ‰ 3 ç§çº¿ç¨‹å®‰å…¨çš„ Map å®ç°ï¼Œæœ€å¸¸ç”¨çš„æ˜¯[ConcurrentHashMap](https://javabetter.cn/thread/ConcurrentHashMap.html)å’Œ`Collections.synchronizedMap(Map)`åŒ…è£…å™¨ã€‚

Hashtable ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†å®ƒçš„ä½¿ç”¨å·²ç»ä¸å†æ¨èä½¿ç”¨ï¼Œå› ä¸º ConcurrentHashMap æä¾›äº†æ›´é«˜çš„å¹¶å‘æ€§å’Œæ€§èƒ½ã€‚

â‘ ã€HashTable æ˜¯ç›´æ¥åœ¨æ–¹æ³•ä¸ŠåŠ  [synchronized å…³é”®å­—](https://javabetter.cn/thread/synchronized-1.html)ï¼Œæ¯”è¾ƒç²—æš´ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šHashTable](https://cdn.tobebetterjavaer.com/stutymore/collection-20240323125211.png)

â‘¡ã€`Collections.synchronizedMap` è¿”å›çš„æ˜¯ [Collections](https://javabetter.cn/common-tool/collections.html) å·¥å…·ç±»çš„å†…éƒ¨ç±»ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šCollections.synchronizedMap](https://cdn.tobebetterjavaer.com/stutymore/collection-20240323125418.png)

å†…éƒ¨æ˜¯é€šè¿‡ synchronized å¯¹è±¡é”æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„ã€‚

â‘¢ã€[ConcurrentHashMap](https://javabetter.cn/thread/ConcurrentHashMap.html) åœ¨ JDK 7 ä¸­ä½¿ç”¨åˆ†æ®µé”ï¼Œåœ¨ JKD 8 ä¸­ä½¿ç”¨äº† [CASï¼ˆCompare-And-Swapï¼‰](https://javabetter.cn/thread/cas.html)+ [synchronized å…³é”®å­—](https://javabetter.cn/thread/synchronized-1.html)ï¼Œæ€§èƒ½å¾—åˆ°è¿›ä¸€æ­¥æå‡ã€‚

![åˆå¿µåˆæ‹ï¼šConcurrentHashMap 8 ä¸­çš„å®ç°](https://cdn.tobebetterjavaer.com/stutymore/map-20230816155924.png)

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šæœ‰å“ªäº›çº¿ç¨‹å®‰å…¨çš„ mapï¼ŒConcurrentHashMap æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸ºä»€ä¹ˆæ¯” hashTable æ•ˆç‡å¥½
> 2. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šJava ä¸­çš„çº¿ç¨‹å®‰å…¨çš„é›†åˆæ˜¯ä»€ä¹ˆï¼Ÿ
> 3. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 9 é£ä¹¦åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šHashMap ä¸ºä»€ä¹ˆä¸å®‰å…¨ï¼Œå¦‚ä½•æ”¹è¿›ï¼Œä»¥åŠ ConcurrentHashMap
> 4. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šçŸ¥é“å“ªäº›çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»å‹ï¼Ÿ
> 5. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„æ‹›å•†é“¶è¡Œé¢ç»åŒå­¦ 6 æ‹›é“¶ç½‘ç»œç§‘æŠ€é¢è¯•åŸé¢˜ï¼šçº¿ç¨‹ä¸å®‰å…¨çš„é›†åˆå˜æˆçº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ï¼Ÿ

### 26.HashMap å†…éƒ¨èŠ‚ç‚¹æ˜¯æœ‰åºçš„å—ï¼Ÿ

HashMap æ˜¯æ— åºçš„ï¼Œæ ¹æ® hash å€¼éšæœºæ’å…¥ã€‚å¦‚æœæƒ³ä½¿ç”¨æœ‰åºçš„ Mapï¼Œå¯ä»¥ä½¿ç”¨ LinkedHashMap æˆ–è€… TreeMapã€‚

### 27.è®²è®² LinkedHashMap æ€ä¹ˆå®ç°æœ‰åºçš„ï¼Ÿ

LinkedHashMap ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œæœ‰å¤´å°¾èŠ‚ç‚¹ï¼ŒåŒæ—¶ LinkedHashMap èŠ‚ç‚¹ Entry å†…éƒ¨é™¤äº†ç»§æ‰¿ HashMap çš„ Node å±æ€§ï¼Œè¿˜æœ‰ before å’Œ after ç”¨äºæ ‡è¯†å‰ç½®èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹ã€‚

![EntryèŠ‚ç‚¹](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-33.png)

å¯ä»¥å®ç°æŒ‰æ’å…¥çš„é¡ºåºæˆ–è®¿é—®é¡ºåºæ’åºã€‚

![LinkedHashMapå®ç°åŸç†](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-34.png)

### 28.è®²è®² TreeMap æ€ä¹ˆå®ç°æœ‰åºçš„ï¼Ÿ

TreeMap é€šè¿‡ key çš„æ¯”è¾ƒå™¨æ¥å†³å®šå…ƒç´ çš„é¡ºåºï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæ¯”è¾ƒå™¨ï¼Œé‚£ä¹ˆ key å¿…é¡»å®ç° [Comparable æ¥å£](https://javabetter.cn/collection/comparable-omparator.html)ã€‚

![äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯](https://cdn.tobebetterjavaer.com/stutymore/collection-20240330124711.png)

TreeMap çš„åº•å±‚æ˜¯çº¢é»‘æ ‘ï¼Œçº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¤§äºå…¶å·¦å­æ ‘ä¸­çš„ä»»ä½•èŠ‚ç‚¹ï¼Œå°äºå…¶å³å­èŠ‚ç‚¹æ ‘ç§çš„ä»»ä½•èŠ‚ç‚¹ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šTreeMap](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-35.png)

æ’å…¥æˆ–è€…åˆ é™¤å…ƒç´ æ—¶é€šè¿‡æ—‹è½¬å’Œç€è‰²æ¥ä¿æŒæ ‘çš„å¹³è¡¡ã€‚

æŸ¥æ‰¾çš„æ—¶å€™é€šè¿‡ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œåˆ©ç”¨äºŒå‰æŸ¥æ‰¾æ ‘çš„æ€§è´¨ï¼Œé€æ­¥å‘å·¦æˆ–è€…å³å­æ ‘é€’å½’æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å…ƒç´ ã€‚

### 29.TreeMap å’Œ HashMap çš„åŒºåˆ«

â‘ ã€HashMap æ˜¯åŸºäºæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘å®ç°çš„ï¼Œput å…ƒç´ çš„æ—¶å€™ä¼šå…ˆè®¡ç®— key çš„å“ˆå¸Œå€¼ï¼Œç„¶åé€šè¿‡å“ˆå¸Œå€¼è®¡ç®—å‡ºæ•°ç»„çš„ç´¢å¼•ï¼Œç„¶åå°†å…ƒç´ æ’å…¥åˆ°æ•°ç»„ä¸­ï¼Œå¦‚æœå‘ç”Ÿå“ˆå¸Œå†²çªï¼Œä¼šä½¿ç”¨é“¾è¡¨æ¥è§£å†³ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¤§äº 8ï¼Œä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚

get å…ƒç´ çš„æ—¶å€™åŒæ ·ä¼šå…ˆè®¡ç®— key çš„å“ˆå¸Œå€¼ï¼Œç„¶åé€šè¿‡å“ˆå¸Œå€¼è®¡ç®—å‡ºæ•°ç»„çš„ç´¢å¼•ï¼Œå¦‚æœé‡åˆ°é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘ï¼Œä¼šé€šè¿‡ key çš„ equals æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦æ˜¯è¦æ‰¾çš„å…ƒç´ ã€‚

â‘¡ã€TreeMap æ˜¯åŸºäºçº¢é»‘æ ‘å®ç°çš„ï¼Œput å…ƒç´ çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­æ ¹èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œç›´æ¥æ’å…¥åˆ°æ ¹èŠ‚ç‚¹ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œä¼šé€šè¿‡ key çš„æ¯”è¾ƒå™¨æ¥åˆ¤æ–­å…ƒç´ åº”è¯¥æ’å…¥åˆ°å·¦å­æ ‘è¿˜æ˜¯å³å­æ ‘ã€‚

get å…ƒç´ çš„æ—¶å€™ä¼šé€šè¿‡ key çš„æ¯”è¾ƒå™¨æ¥åˆ¤æ–­å…ƒç´ çš„ä½ç½®ï¼Œç„¶åé€’å½’æŸ¥æ‰¾ã€‚

ç”±äº HashMap æ˜¯åŸºäºå“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰å‘ç”Ÿå“ˆå¸Œå†²çªçš„æƒ…å†µä¸‹ï¼ŒHashMap çš„æŸ¥æ‰¾æ•ˆç‡æ˜¯ O(1)ã€‚é€‚ç”¨äºæŸ¥æ‰¾æ“ä½œæ¯”è¾ƒé¢‘ç¹çš„åœºæ™¯ã€‚

è€Œ TreeMap æ˜¯åŸºäºçº¢é»‘æ ‘å®ç°çš„ï¼Œæ‰€ä»¥ TreeMap çš„æŸ¥æ‰¾æ•ˆç‡æ˜¯ O(logn)ã€‚å¹¶ä¸”ä¿è¯äº†å…ƒç´ çš„é¡ºåºï¼Œå› æ­¤é€‚ç”¨äºéœ€è¦å¤§é‡èŒƒå›´æŸ¥æ‰¾æˆ–è€…æœ‰åºéå†çš„åœºæ™¯ã€‚

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 16 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šçŸ¥é“å“ªäº›é›†åˆï¼Œè®²è®² HashMap å’Œ TreeMap çš„åŒºåˆ«ï¼Œè®²è®²ä¸¤è€…åº”ç”¨åœºæ™¯çš„åŒºåˆ«

## Set

### 30.è®²è®² HashSet çš„åº•å±‚å®ç°ï¼Ÿ

HashSet å…¶å®æ˜¯ç”± HashMap å®ç°çš„ï¼Œåªä¸è¿‡å€¼ç”±ä¸€ä¸ªå›ºå®šçš„ Object å¯¹è±¡å¡«å……ï¼Œè€Œé”®ç”¨äºæ“ä½œã€‚

```java
public class HashSet<E>
    extends AbstractSet<E>
    implements Set<E>, Cloneable, java.io.Serializable
{
    static final long serialVersionUID = -5024744406713321676L;
    private transient HashMap<E,Object> map;
    // Dummy value to associate with an Object in the backing Map
    private static final Object PRESENT = new Object();
    // â€¦â€¦
}
```

å®é™…å¼€å‘ä¸­ï¼ŒHashSet å¹¶ä¸å¸¸ç”¨ï¼Œæ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æŒ‰ç…§é¡ºåºå­˜å‚¨ä¸€ç»„å…ƒç´ ï¼Œé‚£ä¹ˆ ArrayList å’Œ LinkedList å¯èƒ½æ›´é€‚åˆï¼›å¦‚æœæˆ‘ä»¬éœ€è¦å­˜å‚¨é”®å€¼å¯¹å¹¶æ ¹æ®é”®è¿›è¡ŒæŸ¥æ‰¾ï¼Œé‚£ä¹ˆ HashMap å¯èƒ½æ›´é€‚åˆã€‚

HashSet ä¸»è¦ç”¨äºå»é‡ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡ä¸€ç¯‡æ–‡ç« ä¸­æœ‰å¤šå°‘ä¸ªä¸é‡å¤çš„å•è¯ï¼Œå°±å¯ä»¥ä½¿ç”¨ HashSet æ¥å®ç°ã€‚

```java
// åˆ›å»ºä¸€ä¸ª HashSet å¯¹è±¡
HashSet<String> set = new HashSet<>();

// æ·»åŠ å…ƒç´ 
set.add("æ²‰é»˜");
set.add("ç‹äºŒ");
set.add("é™ˆæ¸…æ‰¬");
set.add("æ²‰é»˜");

// è¾“å‡º HashSet çš„å…ƒç´ ä¸ªæ•°
System.out.println("HashSet size: " + set.size()); // output: 3

// éå† HashSet
for (String s : set) {
    System.out.println(s);
}
```

HashSet ä¼šè‡ªåŠ¨å»é‡ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨ HashMap å®ç°çš„ï¼ŒHashMap çš„é”®æ˜¯å”¯ä¸€çš„ï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼Œç›¸åŒé”®çš„å€¼ä¼šè¦†ç›–æ‰åŸæ¥çš„å€¼ï¼Œäºæ˜¯ç¬¬äºŒæ¬¡ set.add("æ²‰é»˜") çš„æ—¶å€™å°±è¦†ç›–äº†ç¬¬ä¸€æ¬¡çš„ set.add("æ²‰é»˜")ã€‚

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šHashSetå¥—å¨ƒ](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-36.png)

#### HashSet å’Œ ArrayList çš„åŒºåˆ«

- ArrayList æ˜¯åŸºäºåŠ¨æ€æ•°ç»„å®ç°çš„ï¼ŒHashSet æ˜¯åŸºäº HashMap å®ç°çš„ã€‚
- ArrayList å…è®¸é‡å¤å…ƒç´ å’Œ null å€¼ï¼Œå¯ä»¥æœ‰å¤šä¸ªç›¸åŒçš„å…ƒç´ ï¼›HashSet ä¿è¯æ¯ä¸ªå…ƒç´ å”¯ä¸€ï¼Œä¸å…è®¸é‡å¤å…ƒç´ ï¼ŒåŸºäºå…ƒç´ çš„ hashCode å’Œ equals æ–¹æ³•æ¥ç¡®å®šå…ƒç´ çš„å”¯ä¸€æ€§ã€‚
- ArrayList ä¿æŒå…ƒç´ çš„æ’å…¥é¡ºåºï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®å…ƒç´ ï¼›HashSet ä¸ä¿è¯å…ƒç´ çš„é¡ºåºï¼Œå…ƒç´ çš„å­˜å‚¨é¡ºåºä¾èµ–äºå“ˆå¸Œç®—æ³•ï¼Œå¹¶ä¸”å¯èƒ½éšç€å…ƒç´ çš„æ·»åŠ æˆ–åˆ é™¤è€Œæ”¹å˜ã€‚

#### HashSet æ€ä¹ˆåˆ¤æ–­å…ƒç´ é‡å¤ï¼Œé‡å¤äº†æ˜¯å¦ put

HashSet çš„ add æ–¹æ³•æ˜¯é€šè¿‡è°ƒç”¨ HashMap çš„ put æ–¹æ³•å®ç°çš„ï¼š

```java
public boolean add(E e) {
    return map.put(e, PRESENT)==null;
}
```

æ‰€ä»¥ HashSet åˆ¤æ–­å…ƒç´ é‡å¤çš„é€»è¾‘åº•å±‚ä¾ç„¶æ˜¯ HashMap çš„åº•å±‚é€»è¾‘ï¼š

![ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šHashMapæ’å…¥æ•°æ®æµç¨‹å›¾](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/collection-13.jpg)

HashMap åœ¨æ’å…¥å…ƒç´ æ—¶ï¼Œé€šå¸¸éœ€è¦ä¸‰æ­¥ï¼š

ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡ hash æ–¹æ³•è®¡ç®— key çš„å“ˆå¸Œå€¼ã€‚

```java
static final int hash(Object key) {
    int h;
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```

ç¬¬äºŒæ­¥ï¼Œæ•°ç»„è¿›è¡Œç¬¬ä¸€æ¬¡æ‰©å®¹ã€‚

```java
if ((tab = table) == null || (n = tab.length) == 0)
    n = (tab = resize()).length;
```

ç¬¬ä¸‰æ­¥ï¼Œæ ¹æ®å“ˆå¸Œå€¼è®¡ç®— key åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œå¦‚æœå¯¹åº”ä¸‹æ ‡æ­£å¥½æ²¡æœ‰å­˜æ”¾æ•°æ®ï¼Œåˆ™ç›´æ¥æ’å…¥ã€‚

```java
if ((p = tab[i = (n - 1) & hash]) == null)
    tab[i] = newNode(hash, key, value, null);
```

å¦‚æœå¯¹åº”ä¸‹æ ‡å·²ç»æœ‰æ•°æ®äº†ï¼Œå°±éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºç›¸åŒçš„ keyï¼Œæ˜¯åˆ™è¦†ç›– valueï¼Œå¦åˆ™éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºæ ‘èŠ‚ç‚¹ï¼Œæ˜¯åˆ™å‘æ ‘ä¸­æ’å…¥èŠ‚ç‚¹ï¼Œå¦åˆ™å‘é“¾è¡¨ä¸­æ’å…¥æ•°æ®ã€‚

```java
else {
    Node<K,V> e; K k;
    if (p.hash == hash &&
        ((k = p.key) == key || (key != null && key.equals(k))))
        e = p;
    else if (p instanceof TreeNode)
        e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);
    else {
        for (int binCount = 0; ; ++binCount) {
            if ((e = p.next) == null) {
                p.next = newNode(hash, key, value, null);
                if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st
                    treeifyBin(tab, hash);
                break;
            }
            if (e.hash == hash &&
                ((k = e.key) == key || (key != null && key.equals(k))))
                break;
            p = e;
        }
    }
}
```

ä¹Ÿå°±æ˜¯è¯´ï¼ŒHashSet é€šè¿‡å…ƒç´ çš„å“ˆå¸Œå€¼æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦é‡å¤ï¼Œå¦‚æœé‡å¤äº†ï¼Œä¼šè¦†ç›–åŸæ¥çš„å€¼ã€‚

```java
if (e != null) { // existing mapping for key
    V oldValue = e.value;
    if (!onlyIfAbsent || oldValue == null)
        e.value = value;
    afterNodeAccess(e);
    return oldValue;
}
```

> 1. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šHashSet å’Œ ArrayList çš„åŒºåˆ«
> 2. [Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰](https://javabetter.cn/zhishixingqiu/mianshi.html)æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šHashSet æ€ä¹ˆåˆ¤æ–­å…ƒç´ é‡å¤ï¼Œé‡å¤äº†æ˜¯å¦ put

> å›¾æ–‡è¯¦è§£ 29 é“ Java é›†åˆæ¡†æ¶é¢è¯•é«˜é¢‘é¢˜ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³[è½¬è½½é“¾æ¥](https://mp.weixin.qq.com/s/ptbM0EqlnCWeWm9VdSCDLg)ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³[åŸæ–‡é“¾æ¥](https://mp.weixin.qq.com/s/SHkQ7LEOT0itt4bXMoDBPw)ã€‚

---

_æ²¡æœ‰ä»€ä¹ˆä½¿æˆ‘åœç•™â€”â€”é™¤äº†ç›®çš„ï¼Œçºµç„¶å²¸æ—æœ‰ç«ç‘°ã€æœ‰ç»¿è«ã€æœ‰å®é™çš„æ¸¯æ¹¾ï¼Œæˆ‘æ˜¯ä¸ç³»ä¹‹èˆŸ_ã€‚

**ç³»åˆ—å†…å®¹**ï¼š

- [é¢æ¸£é€†è¢­ Java SE ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/javase.html)
- [é¢æ¸£é€†è¢­ Java é›†åˆæ¡†æ¶ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/javathread.html)
- [é¢æ¸£é€†è¢­ Java å¹¶å‘ç¼–ç¨‹ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/collection.html)
- [é¢æ¸£é€†è¢­ JVM ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/jvm.html)
- [é¢æ¸£é€†è¢­ Spring ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/spring.html)
- [é¢æ¸£é€†è¢­ Redis ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/redis.html)
- [é¢æ¸£é€†è¢­ MyBatis ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/mybatis.html)
- [é¢æ¸£é€†è¢­ MySQL ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/mysql.html)
- [é¢æ¸£é€†è¢­æ“ä½œç³»ç»Ÿç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/os.html)
- [é¢æ¸£é€†è¢­è®¡ç®—æœºç½‘ç»œç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/network.html)
- [é¢æ¸£é€†è¢­ RocketMQ ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/rocketmq.html)
- [é¢æ¸£é€†è¢­åˆ†å¸ƒå¼ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/fenbushi.html)
- [é¢æ¸£é€†è¢­å¾®æœåŠ¡ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/weifuwu.html)
- [é¢æ¸£é€†è¢­è®¾è®¡æ¨¡å¼ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/shejimoshi.html)
- [é¢æ¸£é€†è¢­ Linux ç¯‡ ğŸ‘](https://javabetter.cn/sidebar/sanfene/linux.html)

---

GitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„å¼€æºçŸ¥è¯†åº“ã€Š[äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯](https://github.com/itwanger/toBeBetterJavaer)ã€‹ç¬¬ä¸€ç‰ˆ PDF ç»ˆäºæ¥äº†ï¼åŒ…æ‹¬ Java åŸºç¡€è¯­æ³•ã€æ•°ç»„&å­—ç¬¦ä¸²ã€OOPã€é›†åˆæ¡†æ¶ã€Java IOã€å¼‚å¸¸å¤„ç†ã€Java æ–°ç‰¹æ€§ã€ç½‘ç»œç¼–ç¨‹ã€NIOã€å¹¶å‘ç¼–ç¨‹ã€JVM ç­‰ç­‰ï¼Œå…±è®¡ 32 ä¸‡ä½™å­—ï¼Œ500+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯é€šä¿—æ˜“æ‡‚ã€é£è¶£å¹½é»˜â€¦â€¦è¯¦æƒ…æˆ³ï¼š[å¤ªèµäº†ï¼ŒGitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„ Java æ•™ç¨‹](https://javabetter.cn/overview/)

å¾®ä¿¡æœ **æ²‰é»˜ç‹äºŒ** æˆ–æ‰«æä¸‹æ–¹äºŒç»´ç å…³æ³¨äºŒå“¥çš„åŸåˆ›å…¬ä¼—å·æ²‰é»˜ç‹äºŒï¼Œå›å¤ **222** å³å¯å…è´¹é¢†å–ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png)
