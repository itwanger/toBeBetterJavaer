---
category:
  - Javaä¼ä¸šçº§å¼€å‘
tag:
  - Spring Boot
  - Vue
title: ç¼–ç¨‹å–µğŸ±å®æˆ˜é¡¹ç›®å¦‚ä½•åœ¨äº‘æœåŠ¡å™¨ä¸Šè·‘èµ·æ¥ï¼Ÿ
shortTitle: ä¸€é”®éƒ¨ç½²ç¼–ç¨‹å–µåˆ°ç”Ÿäº§ç¯å¢ƒ
---

## äº‘æœåŠ¡å™¨

æˆ‘ä»¬éœ€è¦ä¸€å°äº‘æœåŠ¡å™¨ï¼Œæˆ‘ä¹‹å‰ç™½å«–è¿‡ä¸€å°ä¸ç‰ˆçš„ï¼Œ1 æ ¸1G å†…å­˜ï¼Œå¹¶ä¸”å·²ç»å®‰è£…äº†å®å¡”é¢æ¿ï¼ˆå®‰è£…æ•™ç¨‹æˆ³[é“¾æ¥ğŸ”—](https://javabetter.cn/szjy/install-baota-mianban.html)ï¼‰ã€‚

è¿™æ˜¯ä»å®å¡”é¢æ¿é¦–é¡µçœ‹åˆ°çš„æœåŠ¡å™¨é…ç½®è¯¦æƒ…ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10ef01787c-ee09-4474-a182-70bd6a2daf72.png)

é©¬ä¸Š 618 äº†ï¼Œé˜¿é‡Œäº‘æœåŠ¡å™¨ä¹Ÿå¼€å§‹æ•´æ´»äº†ï¼Œéœ€è¦ç™½å«–çš„å°ä¼™ä¼´å¯ä»¥å…ˆåŠ ç¾¤ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10c69c16d4-b9e3-4add-b316-0c4670e76789.png)

## MySQL

ç™»å½•å®å¡”é¢æ¿ï¼Œç‚¹å‡»ã€Œæ•°æ®åº“ã€â†’ã€Œæ·»åŠ æ•°æ®åº“ã€ï¼Œå¡«å†™æ•°æ®åº“åï¼Œå®å¡”é¢æ¿ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå’Œæ•°æ®åº“åŒåçš„è´¦å·ï¼Œæ³¨æ„è®¿é—®æƒé™é€‰æ‹©ã€Œæœ¬åœ°æœåŠ¡å™¨ã€ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10b64e7890-552d-47d5-91bd-03d74bff7974.png)

åœ¨ codingmore æ ç›®ä¸­ç‚¹å‡»ã€Œå¯¼å…¥ã€ã€Œä»æœ¬åœ°ä¸Šä¼ ã€ç¼–ç¨‹å–µçš„æ•°æ®åº“æ–‡ä»¶ã€‚ä¸Šä¼ å®Œæˆåç‚¹å‡»å¯¼å…¥ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10eec6b672-9089-414b-9f69-65cae18ae45d.png)

DB æ–‡ä»¶æ”¾åœ¨ coding-more/doc ç›®å½•ä¸‹ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-102f8aa2a1-1443-49e6-85d0-6b983863d161.png)

å»ºè®®å…ˆåšä¸€æ¬¡å¤‡ä»½ï¼Œç‚¹å‡»ã€Œæ— å¤‡ä»½ã€ã€Œå¤‡ä»½ã€å°±å¯ä»¥å°†æˆ‘ä»¬çš„æ•°æ®åº“æ–‡ä»¶å¤‡ä»½ä¸‹æ¥äº†ï¼Œå¦‚æœåé¢æƒ³æ¢å¤çš„è¯ï¼Œç›´æ¥ç‚¹å‡»ã€Œæ¢å¤ã€å°±å¯ä»¥äº†ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10c8edb874-95ad-405c-a57c-9c8b9fab8f6e.png)

è®°ä½ç”¨æˆ·åï¼Œå¹¶å¤åˆ¶å¯†ç ï¼Œç„¶ååœ¨æ•°æ®åº“æ¡ç›®ä¸­ç‚¹å‡»ã€Œç®¡ç†ã€

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1032b5cafc-74ef-4e62-b65d-7e36980c14ed.png)

å¡«å†™ç”¨æˆ·åå’Œå¯†ç åï¼Œç‚¹å‡»æ‰§è¡Œã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-105579299a-bc0c-495d-a41b-31d9214835f3.png)

å°±å¯ä»¥çœ‹åˆ°ç¼–ç¨‹å–µçš„æ•°æ®åº“æ–‡ä»¶äº†ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-100877b273-1ba2-40ed-8f96-0031c75e3680.png)

## Nginx

[Nginx](https://javabetter.cn/nginx/nginx.html) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç† Web æœåŠ¡å™¨ï¼ŒåŸºæœ¬ä¸Šå°±å˜æˆäº†ä¸€ä¸ªæœåŠ¡å™¨å¿…é¡»å®‰è£…çš„å‰ç½®æ¡ä»¶ä¹‹ä¸€ã€‚

å®å¡”é¢æ¿ä¸­å®‰è£… Nginx æ¯”è¾ƒç®€å•ï¼Œç›´æ¥åœ¨è½¯ä»¶å•†åº—ä¸­æœã€ŒNginxã€å°±å¯ä»¥ç‚¹å‡»å®‰è£…äº†ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10cedec531-ae0e-402c-87ca-ee705a469288.png)

## Redis

å®å¡”é¢æ¿ä¸­å®‰è£… Redis ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç›´æ¥åœ¨è½¯ä»¶å•†åº—ä¸­æœã€ŒRedisã€å°±å¯ä»¥ç‚¹å‡»å®‰è£…äº†ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10eab69fa2-b7cd-419a-a290-0cc0da2b30c3.png)



## é¡¹ç›®æ‰“åŒ…

### 1ï¼‰codingmore-admin

ç¼–ç¨‹å–µçš„ç®¡ç†åç«¯ï¼Œæ³¨æ„ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒä¸‹çš„ MySQL ç”¨æˆ·åå’Œå¯†ç ï¼Œåœ¨ application-prod.yml æ–‡ä»¶ä¸­ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-100a38b5dd-ecd4-4734-bf6a-448397fa5463.png)

ç„¶åæŠŠ application.yml æ–‡ä»¶ä¸­çš„ active ä¿®æ”¹ä¸º prod ç”Ÿäº§ç¯å¢ƒã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10dd44a2ce-600d-43b1-8707-4de25287eed9.png)

æ›¿æ¢ OSS é…ç½®ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-108ebb40d9-64a1-43cd-89fd-4b83e47025de.png)



### 2ï¼‰codingmore-web

ç¼–ç¨‹å–µçš„ Web å‰ç«¯ï¼ˆç½‘ç«™é—¨æˆ·ã€æ–‡ç« å±•ç¤º/æ–‡ç« è¯¦æƒ…ç­‰ï¼‰ï¼Œæ³¨æ„ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒä¸‹çš„ MySQL ç”¨æˆ·åå’Œå¯†ç ï¼Œåœ¨ application-prod.yml æ–‡ä»¶ä¸­ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1066ba1162-a198-45e4-87ad-717c62fae6c7.png)


ç„¶åæŠŠ application.yml æ–‡ä»¶ä¸­çš„ active ä¿®æ”¹ä¸º prod ç”Ÿäº§ç¯å¢ƒã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10560633b8-439d-418e-a3bb-61f21efbae9f.png)

ç„¶åå°±å¯ä»¥åŒå‡» Maven çš„ package æ‰“åŒ…äº†ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1089745ff7-9222-4d49-b6b9-66fbddba1e52.png)

### 3ï¼‰codingmore-admin-web

admin ç®¡ç†ç«¯çš„å‰ç«¯ç•Œé¢ã€‚åœ¨ Visual Studio Code ä¸­ï¼Œç°åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ `yarn install` å®‰è£…é¡¹ç›®çš„ä¾èµ–æ’ä»¶ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10d6a9cbaf-fd70-4567-b6b0-b2c50b61407a.png)


å†æ‰§è¡Œ `yarn run build` å°±å¯ä»¥æ„å»º codingmore-admin-web çš„é™æ€é¡µé¢äº†ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-101aedea50-7f21-4199-9ff2-c264b614e711.png)

ä¼šåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ª dist ç›®å½•ï¼Œé‡Œé¢å°±æ˜¯æ‰“åŒ…å¥½çš„ç®¡ç†ç«¯é™æ€é¡µé¢ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10128e58f4-172a-4c77-acf1-324ed310412c.png)

æ‰“åŒ…çš„æ—¶å€™æœ‰ä¸¤ä¸ªè¦ç‚¹è¦è¡¥å……ä¸‹ï¼Œåœ¨ config ç›®å½•ä¸‹æœ‰ä¸‰ä¸ªé…ç½®æ–‡ä»¶ï¼Œdev.env.js æ˜¯å¼€å‘ç¯å¢ƒä¸‹çš„ä¸€äº›é…ç½®ï¼Œindex.js æ˜¯ä¸»é…ç½®ï¼Œprod.env.js æ˜¯ç”Ÿäº§ç¯å¢ƒä¸‹çš„é…ç½®ã€‚

ä¸ºäº†æé«˜ç½‘ç«™çš„æ€§èƒ½ï¼Œæˆ‘ä»¬éœ€è¦å…³é—­ source mapï¼Œè®¾ç½® `productionSourceMap: false`ï¼ŒåŒæ—¶å¼€å¯ js å’Œ css çš„æ–‡ä»¶å‹ç¼©åŠŸèƒ½ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10c2b78cd1-4c55-4fce-9c7a-0afbdd21a659.png)

è¿™æ ·æ‰“åŒ…åçš„æ–‡ä»¶å¤§å°å°±ä¼šå°å¾ˆå¤šï¼Œæ”¾åˆ°æœåŠ¡å™¨ä¸Šä¹Ÿèƒ½å‡å°‘ç½‘ç»œè¯·æ±‚çš„å“åº”æ—¶é—´ã€‚

å¯ä»¥çœ‹å¾—å‡ºï¼Œæœ€å¤§çš„ä¸€ä¸ª js æ–‡ä»¶ä¸º 3.7Mï¼Œå‹ç¼©ç‰ˆåªæœ‰ 662kbï¼Œä½“ç§¯ç¼©å°äº†äº”å€ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1009d6dc89-05a3-4a43-972b-bbad4bdd34e5.png)



## å°†æ‰“åŒ…å¥½çš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨

åœ¨å®å¡”é¢æ¿ä¸­ç‚¹å‡»ã€ŒFTPã€ã€Œæ·»åŠ  FTPã€ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1047c54369-e3af-48ea-8143-ea1dbce36894.png)

ç‚¹å‡»ã€Œæ ¹ç›®å½•ã€


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-103cdb501e-0145-48b2-ac3f-96b6e99e8ecf.png)

è·³è½¬åˆ°æ–‡ä»¶é¡µã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-106d8e3ef4-e032-4c2d-b872-c7ede968a051.png)

ç‚¹å‡»ä¸Šä¼ ï¼Œåœ¨ target ç›®å½•ä¸‹é€‰æ‹©ä¸Šä¼ çš„ä¸¤ä¸ª jar åŒ…ï¼Œadmin å’Œ webã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10b1544314-3fc7-4fba-a9e5-28a1760d3517.png)

ç‚¹å‡»ã€Œå¼€å§‹ä¸Šä¼ ã€


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10ffe802fb-da43-404a-aaaf-f5b5eb4bdcc3.png)

è¿˜æœ‰ codingmore-admin-web çš„é™æ€æ–‡ä»¶ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10f55854dd-b6a5-4a46-8232-e21bb03b788f.png)



## ä¸€é”®éƒ¨ç½²

åœ¨è½¯ä»¶å•†åº—é‡Œæœã€Œ**Java**ã€å…³é”®å­—ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªã€Œ**Java é¡¹ç›®ä¸€é”®éƒ¨ç½² 3.5**ã€çš„æ’ä»¶ï¼Œå®‰è£…å®ƒã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10e784ae11-5d73-41c3-929e-60f7c1114f73.png)

è¿›å…¥ã€ŒJava é¡¹ç›®ä¸€é”®éƒ¨ç½²ã€é¢æ¿ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-102724c169-4f6c-4208-aa3e-ab4936a14e7a.png)

å¯ä»¥åœ¨ã€Œå®¹å™¨ç®¡ç†ã€é¢æ¿ä¸­é€‰æ‹© Tomcat 8 å®‰è£…ä¸‹ï¼Œå¦‚æœæ²¡æœ‰å®‰è£… JDKï¼Œåœ¨å®‰è£… Tomcat 8 çš„æ—¶å€™ä¼šé»˜è®¤å®‰è£…ä¸€ä¸ª JDK 1.8ã€‚

![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1059bcd44e-be2d-4c7b-81c3-c974f5c9a33a.png)

è¿›å…¥ Spring Boot é¢æ¿ï¼Œç‚¹å‡»ã€Œæ·»åŠ é¡¹ç›®ã€ï¼Œç‚¹å‡»ã€Œé¡¹ç›®è·¯å¾„ã€å³ä¾§çš„æ–‡ä»¶å¤¹å›¾æ ‡ï¼Œå°±å¯ä»¥ä¸Šä¼ éƒ¨ç½²æˆ‘ä»¬çš„ Spring Boot é¡¹ç›®äº†ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10f39e778b-2d59-4087-bd89-86d71231ff6e.png)

### codingmore-webï¼ˆç½‘ç«™å‰ç«¯ï¼‰

å…ˆé€‰æ‹© codingmore-webã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-108d03852e-c207-442d-9ce9-770c6a16710b.png)

å¡«å†™åŸŸåï¼ˆç¼–ç¨‹å–µçš„åŸŸåä¸º [codingmore.top](codingmore.top)ï¼‰ï¼Œä¿®æ”¹ç«¯å£å·ä¸º 8081ï¼Œapplication.yml æ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10358f631c-27c8-4460-a00e-5c17a3077f28.png)

ç‚¹å‡»ç¡®å®šã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1099646018-e244-421c-9232-4f40c4e07444.png)

å¯ä»¥çœ‹åˆ°æœåŠ¡å·²ç»åœ¨å¯åŠ¨äº†ï¼Œç‚¹ã€Œæ—¥å¿—ã€çœ‹ä¸€ä¸‹ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1053ab9712-5874-4650-92da-e6978803c4de.png)

æ²¡é—®é¢˜ã€‚

ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªè·¯å¾„ä¸‹ä½¿ç”¨ç»ˆç«¯å·¥å…·çœ‹æ—¥å¿—ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-107242861b-2cfc-4eb2-8414-6afade214a74.png)


åœ¨å®‰å…¨é¢æ¿é‡Œç¡®è®¤ä¸€ä¸‹ 8081 ç«¯å£æ˜¯å¦æ”¾å¼€ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-109c7d80a2-fb84-43b9-86fc-670221607b22.png)

ç¡®è®¤æ”¾å¼€åï¼Œæ‰“å¼€ Chrome æµè§ˆå™¨çš„æ— ç—•æ¨¡å¼ï¼Œè¾“å…¥ IP+ç«¯å£å·ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-109f8efbcd-3e6f-4877-ad90-b766dda67879.png)

é€šè¿‡åŸŸå+ç«¯å£å·çš„å½¢å¼ä¹Ÿå¯ä»¥è®¿é—®åˆ°ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10f50b5c71-35bd-439c-bb82-07348a5155d3.png)

### codingmore-adminï¼ˆç½‘ç«™ç®¡ç†ç«¯ï¼‰

å†æ¬¡è¿›å…¥ ã€ŒJava é¡¹ç›®ä¸€é”®éƒ¨ç½²ã€Spring Boot é¢æ¿ä¸­ï¼Œæ·»åŠ  codingmore-admin é¡¹ç›®ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1001b5b9f3-05f8-4fdf-9c8a-111ec449826f.png)

ç¨ç­‰ç‰‡åˆ»ï¼Œæ¥çœ‹ä¸€ä¸‹æ—¥å¿—ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-103a4c0249-f250-4199-ba3c-eeb1ca005bd0.png)

å¯åŠ¨æ²¡é—®é¢˜ã€‚

codingmore-admin åªæ˜¯ä¸€ä¸ªåç«¯æœåŠ¡ï¼Œç•Œé¢æ˜¯ç”¨ vue å®Œæˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ­¤æ—¶å¯ä»¥é€šè¿‡ Swagger æ¥ç¡®è®¤ä¸€ä¸‹æ¥å£æ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®ã€‚

å…ˆæ”¾è¡Œ 9002 ç«¯å£ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10f6b25066-3ffa-4dfc-a61c-b6ebb16e339b.png)

åœ¨æµè§ˆå™¨åœ°å€æ é‡Œè¾“å…¥ `http://www.codingmore.top:9002/doc.html`ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç”¨ Knife4j+Swagger ç”Ÿæˆçš„ API æ–‡æ¡£æ¥å£ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-10a04aa484-a7f1-48f1-a3ff-1525b9bd7035.png)

OKï¼Œè¿™æ ·å°±å¯ä»¥éªŒè¯æˆ‘ä»¬çš„ admin ç«¯æœåŠ¡ä¹Ÿæ­£ç¡®è¿è¡Œäº†ã€‚

éšåï¼Œä¸ºäº†å‡å°‘æœåŠ¡å™¨è¢«æ”»å‡»çš„å¯èƒ½æ€§ï¼Œæˆ‘ä»¬å…³æ‰ 9002 çš„ç«¯å£ã€‚

## Nginx é…ç½®

### codingmore-web

åŸŸå+ç«¯å£å·è™½ç„¶å¯ä»¥è®¿é—®ï¼Œä½†ä¸å¤Ÿä¼˜é›…ï¼Œæˆ‘ä»¬æƒ³ç›´æ¥è®¿é—®åŸŸå codingmore.topï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

å¯ä»¥ä½¿ç”¨ [Nginx](https://javabetter.cn/nginx/nginx.html) è¿›è¡Œç«¯å£è½¬å‘ã€‚

Nginx çš„å®ç°åŸç†æ˜¯ï¼Œç”¨ Nginx ç›‘å¬ 80 ç«¯å£ï¼Œå½“æœ‰ HTTP è¯·æ±‚åˆ°æ¥æ—¶ï¼Œå°† HTTP è¯·æ±‚çš„ HOST ç­‰ä¿¡æ¯ä¸é…ç½®æ–‡ä»¶è¿›è¡ŒåŒ¹é…å¹¶è½¬å‘ç»™å¯¹åº”çš„ç«¯å£ã€‚

æ¯”å¦‚è¯´ï¼Œå½“ç”¨æˆ·è®¿é—® codingmore.top æ—¶ï¼ŒNginx ä»é…ç½®æ–‡ä»¶ä¸­å¾—çŸ¥è¿™æ˜¯ä¸€ä¸ª HTTP è¯·æ±‚ï¼Œäºæ˜¯å°†æ­¤è¯·æ±‚è½¬å‘ç»™ 8081 ç«¯å£çš„åº”ç”¨å¤„ç†ã€‚

```
upstream codingmore_web_pool{
    server 127.0.0.1:8081;
}

server {
    listen       80;
    server_name  codingmore.top;
    access_log logs/codingmore_web.log;
    error_log logs/codingmore_web.error;
    
    #å°†æ‰€æœ‰è¯·æ±‚è½¬å‘ç»™poolæ± çš„åº”ç”¨å¤„ç†
    location / {
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://codingmore_web_pool;
    }
}
```

è¿™å°±æ˜¯æ‰€è°“çš„ç«¯å£è½¬å‘ï¼Œç”±è½¯ä»¶ç»Ÿä¸€ç›‘å¬æŸä¸ªåŸŸåä¸Šçš„æŸä¸ªç«¯å£ï¼ˆä¸€èˆ¬æ˜¯80ç«¯å£ï¼‰ï¼Œå½“è®¿é—®æœåŠ¡å™¨çš„åŸŸåå’Œç«¯å£ç¬¦åˆè¦æ±‚æ—¶ï¼Œå°±æŒ‰ç…§é…ç½®è½¬å‘ç»™æŒ‡å®šçš„ Tomcat æœåŠ¡å™¨å¤„ç†ã€‚æˆ‘ä»¬å¸¸ç”¨çš„ Nginx ä¹Ÿæœ‰ç«¯å£è½¬å‘åŠŸèƒ½ã€‚

OKï¼ŒåŸç†äº†è§£å®Œåï¼Œæˆ‘ä»¬æŠŠè¿™æ®µé…ç½®å¤åˆ¶åˆ°å®å¡”é¢æ¿ä¸­çš„ Nginx é…ç½®ä¸­ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1053849d03-ca6c-4871-9103-b65238557c50.png)

ç‚¹å‡»ã€Œä¿å­˜ã€ã€‚

å†åœ¨æµè§ˆå™¨ä¸­è®¿é—® [codingmore.top](http://www.codingmore.top/) å°±å¯ä»¥è¯·æ±‚åˆ°å†…å®¹äº†ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-106302a681-0dbe-4d76-ac54-243ef67914c7.png)

æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬é¡ºå¸¦æŠŠ 8081 ç«¯å£ç»™å…³æ‰ï¼Œå‡å°‘ä¸€ä¸ªæœåŠ¡å™¨è¢«æ”»å‡»çš„å¯èƒ½æ€§ã€‚

OKï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº† codingmore-web ä¹Ÿå°±æ˜¯ç¼–ç¨‹å–µğŸ±å‰ç«¯çš„æœåŠ¡éƒ¨ç½²äº†ã€‚

### codingmore-admin-web

codingmore-admin-web æ‰“åŒ…åçš„æ–‡ä»¶æ˜¯é™æ€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨ Nginx é‡Œæ·»åŠ  admin çš„é…ç½®è·¯å¾„å°± OK äº†ã€‚

```
upstream codingmore_web_pool{
    server 127.0.0.1:8081;
}

server {
    listen       80;
    server_name  codingmore.top;
    access_log /home/www/codingmore_web.log;
    error_log /home/www/codingmore_web.error;

    location /admin {
        alias /www/wwwroot/itwanger/dist/; # æ ¹ç›®å½•
        index index.html;
    }
    
    #å°†æ‰€æœ‰è¯·æ±‚è½¬å‘ç»™poolæ± çš„åº”ç”¨å¤„ç†
    location / {
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://codingmore_web_pool;
    }
}
```

æˆ‘ä»¬åœ¨ server ä¸­å¢åŠ äº†ä¸€ä¸ª admin çš„ locationï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬è®¿é—® [codingmore.top/admin](http://codingmore.top/admin) çš„æ—¶å€™ï¼Œå°±å»è¯·æ±‚ `/www/wwwroot/itwanger/dist/` ç›®å½•ä¸‹çš„é™æ€æ–‡ä»¶ã€‚

è¿™é‡Œè®²ä¸€ä¸‹ root å’Œ alias çš„åŒºåˆ«ï¼š

- rootï¼šå®é™…è®¿é—®çš„åœ°å€å‰ç¼€æ˜¯  root  + è¯·æ±‚çš„ pathè·¯å¾„ï¼Œå³ `admin =>  /www/wwwroot/itwanger/dist/admin`
- alias:  å®é™…è®¿é—®çš„å°±æ˜¯ `/www/wwwroot/itwanger/dist`

æ³¨æ„ä¸¤è€…çš„åŒºåˆ«ã€‚æˆ‘ä»¬æ¥è®¿é—®ä¸‹[codingmore.top/admin](http://codingmore.top/admin)ï¼š


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1050bb8a6a-aeee-4514-a62a-cd87cb82b3d4.png)

OKã€‚

ç¼–ç¨‹å–µğŸ±æ˜¯ä¸€ä¸ªå‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå‰ç«¯çš„è¯·æ±‚å¦‚ä½•è®¿é—®åç«¯çš„ API æ¥å£å‘¢ï¼Ÿç®€å•èŠä¸€ä¸‹ã€‚

æ‰“å¼€ codingmore-admin-web/config/prod.env.js æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª VUE_APP_BASE_API å±æ€§ï¼Œå®ƒçš„å€¼ä¸º `/api`ï¼Œä¹Ÿå°±æ„å‘³ç€å‰ç«¯çš„è¯·æ±‚ä¼šå‘é€åˆ° `/api` è¿™ä¸ªå‰ç¼€è·¯å¾„ä¸‹ã€‚

```
'use strict'
module.exports = {
  NODE_ENV: '"production"',
  VUE_APP_BASE_API: '"/api"'
}
```

é‚£æˆ‘ä»¬çš„ codingmore-admin åç«¯æœåŠ¡æ˜¯è·‘åœ¨ 9002 ç«¯å£ä¸‹çš„ï¼Œè¿™å°±æ„å‘³ç€ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Nginx ä¸­å¢åŠ ä¸€ä¸ªè·¯å¾„ï¼Œå°† api å‰ç¼€çš„è¯·æ±‚è½¬å‘åˆ° 9002 ä¸‹ã€‚

OKï¼Œæ¥çœ‹ä¸€ä¸‹å®Œæ•´çš„é…ç½®å†…å®¹ã€‚

```
upstream codingmore_web_pool{
    server 127.0.0.1:8081;
}

upstream codingmore_admin_pool{
    server 127.0.0.1:9002/;
}

server {
    listen       80;
    server_name  codingmore.top;
    access_log /home/www/codingmore_web.log;
    error_log /home/www/codingmore_web.error;

    location /admin {
        alias /www/wwwroot/itwanger/dist/; # æ ¹ç›®å½•
        index index.html;
    }

    location /api/ {
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://codingmore_admin_pool;
    }
    
    #å°†æ‰€æœ‰è¯·æ±‚è½¬å‘ç»™poolæ± çš„åº”ç”¨å¤„ç†
    location / {
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://codingmore_web_pool;
    }
}
```

okï¼Œç™»å½• admin ç«¯ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ–‡ç« ç®¡ç†é¡µé¢äº†ã€‚


![](https://cdn.tobebetterjavaer.com/codingmore/images/2022-06-1061fbe711-7715-47d5-9bb9-21b872881be1.png)

## ç½‘ç«™åŸŸå

- ç¼–ç¨‹å–µ web ç«¯ï¼š[www.codingmore.top](http://www.codingmore.top/admin/)
- ç¼–ç¨‹å–µ admin ç«¯ï¼š[www.codingmore.top/admin](http://www.codingmore.top/admin)
