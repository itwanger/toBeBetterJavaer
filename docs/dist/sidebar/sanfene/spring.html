<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta name="keywords" content="Springé¢è¯•é¢˜,Spring,é¢è¯•é¢˜,å…«è‚¡æ–‡,java,springå…¨å®¶æ¡¶,springå…«è‚¡"><meta property="og:url" content="https://javabetter.cn/sidebar/sanfene/spring.html"><meta property="og:site_name" content="äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯"><meta property="og:title" content="Springé¢è¯•é¢˜ï¼Œ41é“Springå…«è‚¡æ–‡ï¼ˆ1.3ä¸‡å­—63å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘"><meta property="og:description" content="ä¸‹è½½æ¬¡æ•°è¶… 1 ä¸‡æ¬¡ï¼Œ1.3 ä¸‡å­— 63 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 41 é“ Spring é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› Spring å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚"><meta property="og:type" content="article"><meta property="og:image" content="https://cdn.tobebetterjavaer.com/stutymore/spring-mianzhanixi-spring1.jpg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-07-28T00:14:17.000Z"><meta property="article:author" content="ä¸‰åˆ†æ¶&æ²‰é»˜ç‹äºŒ"><meta property="article:tag" content="é¢æ¸£é€†è¢­"><meta property="article:tag" content="Spring"><meta property="article:tag" content="é¢è¯•é¢˜"><meta property="article:published_time" content="2025-07-17T00:00:00.000Z"><meta property="article:modified_time" content="2025-07-28T00:14:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Springé¢è¯•é¢˜ï¼Œ41é“Springå…«è‚¡æ–‡ï¼ˆ1.3ä¸‡å­—63å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘","image":["https://cdn.tobebetterjavaer.com/stutymore/spring-mianzhanixi-spring1.jpg","https://cdn.tobebetterjavaer.com/stutymore/redis-20250614154255.png","https://cdn.tobebetterjavaer.com/stutymore/redis-20250614154416.png","https://cdn.tobebetterjavaer.com/stutymore/collection-20250512160410.png","https://cdn.tobebetterjavaer.com/stutymore/redis-20250614154601.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-165c27b4-2ea0-409a-8fa5-389c105db0fa.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250615105532.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250615105726.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-a0f0ef9d-3289-41ea-94c2-34b7e37ef854.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250615110533.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250615111039.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250615111917.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250615113219.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20241207102105.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20241207101910.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250615120504.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-bb7c13ea-3174-4b32-84b8-821849ddc377.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250616105042.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250616105224.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250616105807.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250616110317.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-8d0a1518-a425-4887-9735-45321095d927.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250617110609.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250617110755.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250617110859.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250617111100.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250617111256.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250617111359.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250617111727.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-ee1c5cee-8462-4bae-93ea-ec936cc77640.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250618113356.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250618114035.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250618114211.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250618115033.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250618115153.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250621062819.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250621063345.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250621064205.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240310191630.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-619da277-c15e-4dd7-9f2b-dbd809a9aaa0.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20241117132929.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250622091928.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250622093007.png","https://cdn.tobebetterjavaer.com/stutymore/spring-äºŒå“¥ï¼Œç›®å‰æ‹¿åˆ°äº†ä¸¤ä¸ªofferã€‚ç¬¬ä¸€ä¸ªæ˜¯åšbç«¯ç”µ.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-1d55c63d-2d12-43b1-9f43-428f5f4a1413.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250623094742.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250623101221.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250628110426.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-7678c40f-a48d-4bd5-80f8-e902ad688e11.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250623105438.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-66328446-f89f-4b7a-8d9f-0e1145dd9b2f.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-6e6d4b69-f36c-41e6-b8ba-9277be147c9b.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-e201c9a3-f23c-4768-b844-ac7e0ba4bcec.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250625111259.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250625111617.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250627101759.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250627102651.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250627103801.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250628110931.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250628111222.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20241224163146.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250628114006.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250628114149.png","https://cdn.tobebetterjavaer.com/stutymore/spring-è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-595fce5b-36cb-4dcb-b08c-8205a1e98d8a.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-942a927a-86e4-4a01-8f52-9addd89642ff.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240311101430.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-d2da20a3-08d0-4648-b9a3-2fff8512b159.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240311101658.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250630100429.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250630101647.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20241224164722.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20241224165628.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20241224170055.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250701154344.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250711165339.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-034120d9-88c7-490b-af07-7d48f3b6b7bc.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250702101032.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250702101812.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-08a9cb31-5a4f-4224-94cd-0c0f643a57ea.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250704144758.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-35dacef4-1a9e-45e1-b3f2-5a91227eb244.png","https://cdn.tobebetterjavaer.com/stutymore/spring-2023.09-2026.06.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-f8fea53f-56fa-4cca-9199-ec7f648da625.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-01d92863-a2cb-4f61-8d8d-30ecf0279b28.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-cfc09f84-f8e1-4702-80b6-d115843e81fe.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-1a8bdc29-ff43-4ff4-9b61-3eedd9da59b3.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-bf2507bf-96aa-4b88-a58b-7ec41d11bc70.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-022f7cb9-2c83-4fe9-b252-b02bd0fb2435.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-37bb576d-b4af-42ed-91f4-d846ceb012b6.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240310202703.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250705072809.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-6ece8a46-25b1-459b-8cfa-19fc696dd7d6.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250706065436.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250706065722.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250706070700.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-09dbcda4-7c1b-42d6-8520-1a5fc84abbde.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250707112900.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250707114823.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250707120111.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240806100537.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-320fa34f-6620-419c-b17a-4f516a83caeb.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250707151431.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240806102547.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250707153345.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250708161139.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240310180334.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240310180741.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240310181233.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250708165006.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-d1dbe9d9-c55f-4293-8622-d9759064d613.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250709150533.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250709152040.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250709152111.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250714162356.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-c5c4b247-62dd-43a2-a043-da51c58f77c8.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-65b14a3f-2653-463e-af77-a8875d3d635c.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-74da87af-20d1-4a5b-a212-3837a15f0bab.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250711172049.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250711173334.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250711174214.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250715175632.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-97493c7f-c596-4e98-a6a8-dab254d6d1ab.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250715180830.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250716144039.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-04053b02-3264-4d7f-b868-560a0333f08d.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250716145121.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240326082116.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250713101016.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-a6e2a8dc-9771-4d8b-9d91-76ddee98af1a.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250714160050.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250714171236.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250714171739.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250714172641.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250717090650.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250717091424.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250717092624.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250717092904.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250717095915.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-e29a122b-db07-48b8-8289-7251032e87a1.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240506102456.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240506103022.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250718105710.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250718105928.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250718111849.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250719102056.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-2da963a0-5da9-4b3a-aafd-fd8dbc7e1807.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250719103018.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-d9164ee6-5c86-4313-8fd9-efb9acfa5f0b.png","https://cdn.tobebetterjavaer.com/stutymore/spring-ä»å­¦æ ¡åˆ°èŒåœºï¼Œä¸€èˆ¬éƒ½è¿™æ ·ï¼Œæ­£å¸¸çš„ï¼Œæƒ³å¹²äº†ï¼Œ.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240316121711.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250726163615.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250726163759.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-df77ee15-2ff0-4ec7-8e65-e4ebb8ba88f1.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250726164552.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240409114642.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240409114610.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20250727165400.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-68744556-a1ba-4e1f-a092-1582875f0da6.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240422090338.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240327105552.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-92ab53d5-f303-4fc5-bd26-e62cefe374b3.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-2b988a72-0739-4fed-b271-eaf12589444f.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20240422094511.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20241031111306.png","https://cdn.tobebetterjavaer.com/stutymore/spring-20241031113743.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png"],"datePublished":"2025-07-17T00:00:00.000Z","dateModified":"2025-07-28T00:14:17.000Z","author":[{"@type":"Person","name":"ä¸‰åˆ†æ¶&æ²‰é»˜ç‹äºŒ"}]}</script><meta name="robots" content="all"><meta name="author" content="æ²‰é»˜ç‹äºŒ"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="apple-mobile-web-app-capable" content="yes"><script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?5230ac143650bf5eb3c14f3fb9b1d3ec";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script><script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?59aa453e7e706422c636c079fc1cb031";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script><link rel="stylesheet" href="//at.alicdn.com/t/font_3180624_7cy10l7jqqh.css"><link rel="icon" href="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/favicon.ico"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><title>Springé¢è¯•é¢˜ï¼Œ41é“Springå…«è‚¡æ–‡ï¼ˆ1.3ä¸‡å­—63å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘ | äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯</title><meta name="description" content="ä¸‹è½½æ¬¡æ•°è¶… 1 ä¸‡æ¬¡ï¼Œ1.3 ä¸‡å­— 63 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 41 é“ Spring é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› Spring å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚">
    <link rel="preload" href="/assets/style-Dlp_gcQZ.css" as="style"><link rel="stylesheet" href="/assets/style-Dlp_gcQZ.css">
    <link rel="modulepreload" href="/assets/app-DlNMEcLQ.js"><link rel="modulepreload" href="/assets/spring.html-C8ME3ieb.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/logo-02.png" alt><!----><span class="vp-site-name hide-in-pad">äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog.html" aria-label="åšå®¢"><!--[--><span class="font-icon icon iconfont icon-gaishu" style=""></span><!--]-->åšå®¢<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/home.html" aria-label="è¿›é˜¶ä¹‹è·¯"><!--[--><span class="font-icon icon iconfont icon-lujing" style=""></span><!--]-->è¿›é˜¶ä¹‹è·¯<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/zhishixingqiu/" aria-label="çŸ¥è¯†æ˜Ÿçƒ"><!--[--><span class="font-icon icon iconfont icon-Artboard" style=""></span><!--]-->çŸ¥è¯†æ˜Ÿçƒ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/xuexiluxian/" aria-label="å­¦ä¹ è·¯çº¿"><!--[--><span class="font-icon icon iconfont icon-luxian" style=""></span><!--]-->å­¦ä¹ è·¯çº¿<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/sidebar/sanfene/nixi.html" aria-label="é¢æ¸£é€†è¢­"><!--[--><span class="font-icon icon iconfont icon-zhunbei" style=""></span><!--]-->é¢æ¸£é€†è¢­<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="çè—èµ„æº"><!--[--><span class="font-icon icon iconfont icon-youzhi" style=""></span>çè—èµ„æº<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/pdf/" aria-label="PDFä¸‹è½½"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span><!--]-->PDFä¸‹è½½<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/nice-article/itmind/" aria-label="ç ´è§£åˆé›†"><!--[--><span class="font-icon icon iconfont icon-zhongyaotishi" style=""></span><!--]-->ç ´è§£åˆé›†<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/sidebar/sjtu/" aria-label="ä¸Šäº¤å¤§ç”Ÿå­˜æ‰‹å†Œ"><!---->ä¸Šäº¤å¤§ç”Ÿå­˜æ‰‹å†Œ<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/itwanger/toBeBetterJavaer" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/nixi.html" aria-label="é¢æ¸£é€†è¢­"><!---->é¢æ¸£é€†è¢­<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/mysql.html" aria-label="é¢æ¸£é€†è¢­-MySQL"><!---->é¢æ¸£é€†è¢­-MySQL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/redis.html" aria-label="é¢æ¸£é€†è¢­-Redis"><!---->é¢æ¸£é€†è¢­-Redis<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/sidebar/sanfene/spring.html" aria-label="é¢æ¸£é€†è¢­-Spring"><!---->é¢æ¸£é€†è¢­-Spring<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/javase.html" aria-label="é¢æ¸£é€†è¢­-Java SE"><!---->é¢æ¸£é€†è¢­-Java SE<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/collection.html" aria-label="é¢æ¸£é€†è¢­-Javaé›†åˆæ¡†æ¶"><!---->é¢æ¸£é€†è¢­-Javaé›†åˆæ¡†æ¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/javathread.html" aria-label="é¢æ¸£é€†è¢­-Javaå¹¶å‘ç¼–ç¨‹"><!---->é¢æ¸£é€†è¢­-Javaå¹¶å‘ç¼–ç¨‹<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/jvm.html" aria-label="é¢æ¸£é€†è¢­-JVM"><!---->é¢æ¸£é€†è¢­-JVM<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/mybatis.html" aria-label="é¢æ¸£é€†è¢­-MyBatis"><!---->é¢æ¸£é€†è¢­-MyBatis<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/os.html" aria-label="é¢æ¸£é€†è¢­-æ“ä½œç³»ç»Ÿ"><!---->é¢æ¸£é€†è¢­-æ“ä½œç³»ç»Ÿ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/network.html" aria-label="é¢æ¸£é€†è¢­-è®¡ç®—æœºç½‘ç»œ"><!---->é¢æ¸£é€†è¢­-è®¡ç®—æœºç½‘ç»œ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/rocketmq.html" aria-label="é¢æ¸£é€†è¢­-RocketMQ"><!---->é¢æ¸£é€†è¢­-RocketMQ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/fenbushi.html" aria-label="é¢æ¸£é€†è¢­-åˆ†å¸ƒå¼"><!---->é¢æ¸£é€†è¢­-åˆ†å¸ƒå¼<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/weifuwu.html" aria-label="é¢æ¸£é€†è¢­-å¾®æœåŠ¡"><!---->é¢æ¸£é€†è¢­-å¾®æœåŠ¡<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/shejimoshi.html" aria-label="é¢æ¸£é€†è¢­-è®¾è®¡æ¨¡å¼"><!---->é¢æ¸£é€†è¢­-è®¾è®¡æ¨¡å¼<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/linux.html" aria-label="é¢æ¸£é€†è¢­-Linux"><!---->é¢æ¸£é€†è¢­-Linux<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Springé¢è¯•é¢˜ï¼Œ41é“Springå…«è‚¡æ–‡ï¼ˆ1.3ä¸‡å­—63å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">ä¸‰åˆ†æ¶&amp;æ²‰é»˜ç‹äºŒ</span></span><span property="author" content="ä¸‰åˆ†æ¶&amp;æ²‰é»˜ç‹äºŒ"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2025-07-17T00:00:00.000Z"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color3 clickable" role="navigation">é¢æ¸£é€†è¢­</span><!--]--><meta property="articleSection" content="é¢æ¸£é€†è¢­"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color3 clickable" role="navigation">é¢æ¸£é€†è¢­</span><span class="page-tag-item color1 clickable" role="navigation">Spring</span><span class="page-tag-item color1 clickable" role="navigation">é¢è¯•é¢˜</span><!--]--><meta property="keywords" content="é¢æ¸£é€†è¢­,Spring,é¢è¯•é¢˜"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 39966 å­—</span><meta property="wordCount" content="39966"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 133 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT133M"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å‰è¨€">å‰è¨€</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åŸºç¡€">åŸºç¡€</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-springæ˜¯ä»€ä¹ˆ">1.Springæ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-springæœ‰å“ªäº›æ¨¡å—å‘¢">2.Springæœ‰å“ªäº›æ¨¡å—å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢">3.Springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-ğŸŒŸspringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼">4.ğŸŒŸSpringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-springå®¹å™¨å’Œwebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—-è¡¥å……">5.Springå®¹å™¨å’ŒWebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ioc">IoC</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ioc">6.ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯IoCï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-èƒ½è¯´ä¸€ä¸‹iocçš„å®ç°æœºåˆ¶å—">7.èƒ½è¯´ä¸€ä¸‹IoCçš„å®ç°æœºåˆ¶å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-è¯´è¯´beanfactoryå’Œapplicantcontextçš„åŒºåˆ«">8.è¯´è¯´BeanFactoryå’ŒApplicantContextçš„åŒºåˆ«?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶springçš„iocä¼šåšä»€ä¹ˆ">9.ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶Springçš„IoCä¼šåšä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-ä½ æ˜¯æ€ä¹ˆç†è§£beançš„">10.ä½ æ˜¯æ€ä¹ˆç†è§£Beançš„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-ğŸŒŸèƒ½è¯´ä¸€ä¸‹beançš„ç”Ÿå‘½å‘¨æœŸå—">11.ğŸŒŸèƒ½è¯´ä¸€ä¸‹Beançš„ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-ä¸ºä»€ä¹ˆideaä¸æ¨èä½¿ç”¨-autowiredæ³¨è§£æ³¨å…¥bean">12.ä¸ºä»€ä¹ˆIDEAä¸æ¨èä½¿ç”¨@Autowiredæ³¨è§£æ³¨å…¥Beanï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_13-autowiredçš„å®ç°åŸç†äº†è§£å—">13.@Autowiredçš„å®ç°åŸç†äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_14-ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…">14.ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_15-beançš„ä½œç”¨åŸŸæœ‰å“ªäº›">15.Beançš„ä½œç”¨åŸŸæœ‰å“ªäº›?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_16-springä¸­çš„å•ä¾‹beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—">16.Springä¸­çš„å•ä¾‹Beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_17-ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–">17.ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_18-ğŸŒŸspringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢">18.ğŸŒŸSpringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_19-ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§">19.ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#aop">AOP</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_20-ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯-aop">20.ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯ AOPï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_21-ğŸŒŸaopçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›">21.ğŸŒŸAOPçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_22-è¯´è¯´-spring-aop-å’Œ-aspectj-åŒºåˆ«">22.è¯´è¯´ Spring AOP å’Œ AspectJ åŒºåˆ«?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_23-è¯´è¯´-aop-å’Œåå°„çš„åŒºåˆ«-è¡¥å……">23.è¯´è¯´ AOP å’Œåå°„çš„åŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_24-ğŸŒŸè¯´è¯´jdkåŠ¨æ€ä»£ç†å’Œcglibä»£ç†çš„åŒºåˆ«">24.ğŸŒŸè¯´è¯´JDKåŠ¨æ€ä»£ç†å’ŒCGLIBä»£ç†çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äº‹åŠ¡">äº‹åŠ¡</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_25-ğŸŒŸè¯´è¯´ä½ å¯¹springäº‹åŠ¡çš„ç†è§£">25.ğŸŒŸè¯´è¯´ä½ å¯¹Springäº‹åŠ¡çš„ç†è§£ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_26-å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—">26.å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_27-transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆ">27.@Transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_28-è¯´è¯´springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«">28.è¯´è¯´Springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_29-ğŸŒŸè¯´è¯´springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶">29.ğŸŒŸè¯´è¯´Springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#mvc">MVC</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_30-spring-mvc-çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›">30.Spring MVC çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_31-ğŸŒŸspring-mvc-çš„å·¥ä½œæµç¨‹äº†è§£å—">31.ğŸŒŸSpring MVC çš„å·¥ä½œæµç¨‹äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_32-springmvc-restful-é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢">32.SpringMVC Restful é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#spring-boot">Spring Boot</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_33-ğŸŒŸä»‹ç»ä¸€ä¸‹-springboot">33.ğŸŒŸä»‹ç»ä¸€ä¸‹ SpringBootï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_34-ğŸŒŸspring-bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—">34.ğŸŒŸSpring Bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_35-ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª-springboot-starter">35.ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª SpringBoot Starter?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_36-ğŸŒŸspring-boot-å¯åŠ¨åŸç†äº†è§£å—">36.ğŸŒŸSpring Boot å¯åŠ¨åŸç†äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_37-springboot-å’Œ-springmvc-çš„åŒºåˆ«-è¡¥å……">37.SpringBoot å’Œ SpringMVC çš„åŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_38-spring-boot-å’Œ-spring-æœ‰ä»€ä¹ˆåŒºåˆ«-è¡¥å……">38.Spring Boot å’Œ Spring æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#spring-cloud">Spring Cloud</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_39-å¯¹-springcloud-äº†è§£å¤šå°‘">39.å¯¹ SpringCloud äº†è§£å¤šå°‘ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è¡¥å……">è¡¥å……</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_40-springtask-äº†è§£å—">40.SpringTask äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_41-spring-cache-äº†è§£å—">41.Spring Cache äº†è§£å—ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-mianzhanixi-spring1.jpg" alt="é¢æ¸£é€†è¢­ Spring ç¯‡å°é¢å›¾" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­ Spring ç¯‡å°é¢å›¾</figcaption></figure><h2 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€"><span>å‰è¨€</span></a></h2><p>1.3 ä¸‡å­— 63 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 41 é“ Spring é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› Spring å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/EQge6DmgIqYITM3mAxkatg" target="_blank" rel="noopener noreferrer">è½¬è½½é“¾æ¥</a>ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/Y17S85ntHm_MLTZMJdtjQQ" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>ã€‚</p><p>äº®ç™½ç‰ˆæœ¬æ›´é€‚åˆæ‹¿å‡ºæ¥æ‰“å°ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šå­¦ç”Ÿå…šå–œæ¬¢çš„æ–¹å¼ï¼Œæ‰“å°å‡ºæ¥èƒŒè¯µçš„æ•ˆç‡ä¼šæ›´é«˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/redis-20250614154255.png" alt="é¢æ¸£é€†è¢­Redisç¯‡.pdfç¬¬äºŒç‰ˆ" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­Redisç¯‡.pdfç¬¬äºŒç‰ˆ</figcaption></figure><p>2025 å¹´ 06 æœˆ 15 æ—¥å¼€å§‹ç€æ‰‹ç¬¬äºŒç‰ˆæ›´æ–°ã€‚</p><ul><li>å¯¹äºé«˜é¢‘é¢˜ï¼Œä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ã€‹ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”ä¼šåŠ ğŸŒŸï¼Œç›®å½•ä¸€ç›®äº†ç„¶ï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li>åŒºåˆ†å…«è‚¡ç²¾åå›ç­”ç‰ˆæœ¬å’ŒåŸç†åº•å±‚è§£é‡Šï¼Œè®©å¤§å®¶çŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼ŒåŒæ—¶åˆèƒ½åšåˆ°é¢è¯•æ—¶çš„é«˜æ•ˆå›ç­”ã€‚</li><li>ç»“åˆé¡¹ç›®ï¼ˆ<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" target="_blank" rel="noopener noreferrer">pmhub</a>ï¼‰æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li>ä¿®å¤ç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ <a href="https://github.com/itwanger/toBeBetterJavaer/issues" target="_blank" rel="noopener noreferrer">GitHub ä»“åº“</a>ä¸­çš„ issueï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li>å¢åŠ <a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">äºŒå“¥ç¼–ç¨‹æ˜Ÿçƒ</a>çš„çƒå‹ä»¬æ‹¿åˆ°çš„ä¸€äº› offerï¼Œå¯¹é¢æ¸£é€†è¢­çš„æ„Ÿè°¢ï¼Œä»¥åŠå¯¹ç®€å†ä¿®æ”¹çš„ä¸€äº›è®¤å¯ï¼Œä»¥æ­¤æ¥æ¿€åŠ±å¤§å®¶ï¼Œç»™å¤§å®¶æ›´å¤šä¿¡å¿ƒã€‚</li><li>ä¼˜åŒ–æ’ç‰ˆï¼Œå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/redis-20250614154416.png" alt="é¢æ¸£é€†è¢­å·²ç»æäº¤ 1478 æ¬¡ GitHub è®°å½•" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­å·²ç»æäº¤ 1478 æ¬¡ GitHub è®°å½•</figcaption></figure><p>ç”±äº PDF æ²¡åŠæ³•è‡ªæˆ‘æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦æœ€æ–°ç‰ˆçš„å°ä¼™ä¼´ï¼Œå¯ä»¥å¾®ä¿¡æœã€<strong>æ²‰é»˜ç‹äºŒ</strong>ã€‘ï¼Œæˆ–è€…æ‰«æ/é•¿æŒ‰è¯†åˆ«ä¸‹é¢çš„äºŒç»´ç ï¼Œå…³æ³¨äºŒå“¥çš„å…¬ä¼—å·ï¼Œå›å¤ã€<strong>222</strong>ã€‘å³å¯æ‹‰å–æœ€æ–°ç‰ˆæœ¬ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>å½“ç„¶äº†ï¼Œè¯·å…è®¸æˆ‘çš„ä¸€ç‚¹ç‚¹ç§å¿ƒï¼Œé‚£å°±æ˜¯æ˜Ÿçƒçš„ PDF ç‰ˆæœ¬ä¼šæ¯”å…¬ä¼—å·æ—©ä¸€ä¸ªæœˆæ—¶é—´ï¼Œæ¯•ç«Ÿæ˜Ÿçƒç”¨æˆ·éƒ½ä»˜è´¹è¿‡äº†ï¼Œæˆ‘æœ‰å¿…è¦è®©ä»–ä»¬å…ˆäº«å—åˆ°ä¸€ç‚¹ç‚¹ç¦åˆ©ã€‚ç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½èƒ½ç†è§£ï¼Œæ¯•ç«Ÿåœ¨çº¿ç‰ˆæ˜¯å…è´¹çš„ï¼ŒCDNã€æœåŠ¡å™¨ã€åŸŸåã€OSS ç­‰ç­‰éƒ½æ˜¯éœ€è¦æˆæœ¬çš„ã€‚</p><p>æ›´åˆ«è¯´æˆ‘ä»˜å‡ºçš„æ—¶é—´å’Œç²¾åŠ›äº†ï¼Œå¤§å®¶è§‰å¾—æœ‰å¸®åŠ©è¿˜è¯·ç»™ä¸ªå£ç¢‘ï¼Œè®©ä½ èº«è¾¹çš„åŒäº‹ã€åŒå­¦éƒ½èƒ½å—ç›Šåˆ°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/collection-20250512160410.png" alt="å›å¤ 222" tabindex="0" loading="lazy"><figcaption>å›å¤ 222</figcaption></figure><p>æˆ‘æŠŠäºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ã€JVM è¿›é˜¶ä¹‹è·¯ã€å¹¶å‘ç¼–ç¨‹è¿›é˜¶ä¹‹è·¯ï¼Œä»¥åŠæ‰€æœ‰é¢æ¸£é€†è¢­çš„ç‰ˆæœ¬éƒ½æ”¾è¿›æ¥äº†ï¼Œæ¶µç›– JavaåŸºç¡€ã€Javaé›†åˆã€Javaå¹¶å‘ã€JVMã€Springã€MyBatisã€è®¡ç®—æœºç½‘ç»œã€æ“ä½œç³»ç»Ÿã€MySQLã€Redisã€RocketMQã€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡ã€è®¾è®¡æ¨¡å¼ã€Linux ç­‰ 16 ä¸ªå¤§çš„ä¸»é¢˜ï¼Œå…±æœ‰ 40 å¤šä¸‡å­—ï¼Œ2000+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯è¯šæ„æ»¡æ»¡ã€‚</p><p>å±•ç¤ºä¸€ä¸‹æš—é»‘ç‰ˆæœ¬çš„ PDF å§ï¼Œæ’ç‰ˆæ¸…æ™°ï¼Œå­—ä½“ä¼˜é›…ï¼Œæ›´åŠ é€‚åˆå¤œæœï¼Œæ™šä¸Šçœ‹ä¼šæ›´èˆ’æœä¸€ç‚¹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/redis-20250614154601.png" alt="é¢æ¸£é€†è¢­RSpringç¯‡.pdfæš—é»‘ç‰ˆ" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­RSpringç¯‡.pdfæš—é»‘ç‰ˆ</figcaption></figure><h2 id="åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€"><span>åŸºç¡€</span></a></h2><h3 id="_1-springæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_1-springæ˜¯ä»€ä¹ˆ"><span>1.Springæ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h3><p>Spring æ˜¯ä¸€ä¸ª Java åç«¯å¼€å‘æ¡†æ¶ï¼Œå…¶æœ€æ ¸å¿ƒçš„ä½œç”¨æ˜¯å¸®æˆ‘ä»¬ç®¡ç† Java å¯¹è±¡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-165c27b4-2ea0-409a-8fa5-389c105db0fa.png" alt="Spring Logo" tabindex="0" loading="lazy"><figcaption>Spring Logo</figcaption></figure><p>å…¶æœ€é‡è¦çš„ç‰¹æ€§å°±æ˜¯ IoCï¼Œä¹Ÿå°±æ˜¯æ§åˆ¶åè½¬ã€‚ä»¥å‰æˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œéƒ½è¦è‡ªå·±å…ˆ new å‡ºæ¥ã€‚ä½†æœ‰äº† Spring ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦å‘Šè¯‰ Spring æˆ‘ä»¬éœ€è¦ä»€ä¹ˆå¯¹è±¡ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºå¥½å¹¶æ³¨å…¥åˆ° Spring å®¹å™¨å½“ä¸­ã€‚</p><p>æ¯”å¦‚æˆ‘åœ¨ä¸€ä¸ª Service ç±»é‡Œéœ€è¦ç”¨åˆ° Dao å¯¹è±¡ï¼Œåªéœ€è¦åŠ ä¸ª <code>@Autowired</code> æ³¨è§£ï¼ŒSpring å°±ä¼šè‡ªåŠ¨æŠŠ Dao å¯¹è±¡æ³¨å…¥åˆ° Spring å®¹å™¨å½“ä¸­ï¼Œè¿™æ ·å°±ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»ç®¡ç†è¿™äº›å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250615105532.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæŠ€æœ¯æ´¾@Autowiredæºç " tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæŠ€æœ¯æ´¾@Autowiredæºç </figcaption></figure><p>å¦å¤–ï¼ŒSpring è¿˜æä¾›äº† AOPï¼Œä¹Ÿå°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œåœ¨æˆ‘ä»¬éœ€è¦åšä¸€äº›é€šç”¨åŠŸèƒ½çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚è¯´æ—¥å¿—è®°å½•ã€æƒé™æ ¡éªŒã€äº‹åŠ¡ç®¡ç†è¿™äº›ï¼Œæˆ‘ä»¬ä¸ç”¨åœ¨æ¯ä¸ªæ–¹æ³•é‡Œéƒ½å†™é‡å¤çš„ä»£ç ï¼Œç›´æ¥ç”¨ AOP å°±èƒ½ç»Ÿä¸€å¤„ç†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250615105726.png" alt="æŠ€æœ¯æ´¾ï¼šAOP äº‹åŠ¡æºç " tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼šAOP äº‹åŠ¡æºç </figcaption></figure><p>Spring çš„ç”Ÿæ€ä¹Ÿç‰¹åˆ«ä¸°å¯Œï¼Œåƒ Spring Boot èƒ½è®©æˆ‘ä»¬å¿«é€Ÿæ­å»ºé¡¹ç›®ï¼ŒSpring MVC èƒ½å¸®æˆ‘ä»¬å¤„ç† web è¯·æ±‚ï¼ŒSpring Data èƒ½å¸®æˆ‘ä»¬ç®€åŒ–æ•°æ®åº“æ“ä½œï¼ŒSpring Cloud èƒ½å¸®æˆ‘ä»¬åšå¾®æœåŠ¡æ¶æ„ç­‰ç­‰ã€‚</p><h4 id="springæœ‰å“ªäº›ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#springæœ‰å“ªäº›ç‰¹æ€§"><span>Springæœ‰å“ªäº›ç‰¹æ€§ï¼Ÿ</span></a></h4><p>Spring çš„ç‰¹æ€§è¿˜æ˜¯æŒºå¤šçš„ï¼Œæˆ‘æŒ‰ç…§åœ¨å®é™…å·¥ä½œ/å­¦ä¹ ä¸­ç”¨å¾—æœ€å¤šçš„å‡ ä¸ªæ¥è¯´å§ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-a0f0ef9d-3289-41ea-94c2-34b7e37ef854.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringç‰¹æ€§" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringç‰¹æ€§</figcaption></figure><p>é¦–å…ˆæœ€æ ¸å¿ƒçš„å°±æ˜¯ IoC æ§åˆ¶åè½¬å’Œ DI ä¾èµ–æ³¨å…¥ã€‚è¿™ä¸ªæˆ‘å‰é¢ä¹Ÿæåˆ°äº†ï¼Œå°±æ˜¯ Spring èƒ½å¸®æˆ‘ä»¬ç®¡ç†å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»ã€‚</p><p>æ¯”å¦‚æˆ‘å†™ä¸€ä¸ª UserServiceï¼Œéœ€è¦ç”¨åˆ° UserDaoï¼Œä»¥å‰å¾—è‡ªå·± new ä¸€ä¸ª UserDao å‡ºæ¥ï¼Œç°åœ¨åªè¦åœ¨ UserService ä¸ŠåŠ ä¸ª <code>@Service</code> æ³¨è§£ï¼Œåœ¨ UserDao å­—æ®µä¸ŠåŠ ä¸ª <code>@Autowired</code>ï¼ŒSpring å°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†å¥½è¿™äº›ä¾èµ–å…³ç³»ã€‚</p><p>è¿™æ ·ä»£ç çš„è€¦åˆåº¦å°±å¤§å¤§é™ä½äº†ï¼Œæµ‹è¯•çš„æ—¶å€™ä¹Ÿæ›´å®¹æ˜“ mockã€‚</p><p>ç¬¬äºŒä¸ªå°±æ˜¯ AOP é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚è¿™ä¸ªåœ¨æˆ‘ä»¬å¤„ç†ä¸€äº›æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬è¦ç»™æŸäº› Controller æ–¹æ³•éƒ½åŠ ä¸Šæƒé™æ§åˆ¶ï¼Œå¦‚æœæ²¡æœ‰ AOP çš„è¯ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¦å†™ä¸€éåŠ æƒä»£ç ï¼Œç»´æŠ¤èµ·æ¥å¾ˆéº»çƒ¦ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250615110533.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Permissionæ³¨è§£åŠ æƒé™éªŒè¯" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Permissionæ³¨è§£åŠ æƒé™éªŒè¯</figcaption></figure><p>ç”¨äº† AOP ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦å†™ä¸€ä¸ªåˆ‡é¢ç±»ï¼Œå®šä¹‰å¥½åˆ‡ç‚¹å’Œé€šçŸ¥ï¼Œå°±èƒ½ç»Ÿä¸€å¤„ç†äº†ã€‚äº‹åŠ¡ç®¡ç†ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼ŒåŠ ä¸ª <code>@Transactional</code> æ³¨è§£å°±æå®šäº†ã€‚</p><p>è¿˜æœ‰å°±æ˜¯ Spring å¯¹å„ç§ä¼ä¸šçº§åŠŸèƒ½çš„é›†æˆæ”¯æŒä¹Ÿç‰¹åˆ«å¥½ã€‚æ¯”å¦‚æ•°æ®åº“è®¿é—®ï¼Œä¸ç®¡æˆ‘ä»¬ç”¨ JDBCã€MyBatis-Plus è¿˜æ˜¯ Hibernateï¼ŒSpring éƒ½èƒ½å¾ˆå¥½åœ°é›†æˆã€‚æ¶ˆæ¯é˜Ÿåˆ—ã€ç¼“å­˜ã€å®‰å…¨è®¤è¯è¿™äº›ï¼Œ Spring éƒ½æœ‰å¯¹åº”çš„æ¨¡å—æ¥æ”¯æŒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250615111039.png" alt="æŠ€æœ¯æ´¾æºç ï¼šSpring Boot çš„çº¦å®šå¤§äºé…ç½®" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šSpring Boot çš„çº¦å®šå¤§äºé…ç½®</figcaption></figure><p>å¦å¤– Spring çš„é…ç½®ä¹Ÿå¾ˆçµæ´»ï¼Œæ—¢æ”¯æŒ XML é…ç½®ï¼Œä¹Ÿæ”¯æŒæ³¨è§£é…ç½®ï¼Œç°åœ¨æˆ‘ä»¬åŸºæœ¬éƒ½ç”¨æ³¨è§£äº†ï¼Œå†™èµ·æ¥æ›´ç®€æ´ã€‚Spring Boot å‡ºæ¥ä¹‹åå°±æ›´æ–¹ä¾¿äº†ï¼Œçº¦å®šå¤§äºé…ç½®ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯å¼€ç®±å³ç”¨çš„ã€‚</p><h4 id="ç®€å•è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯aopå’Œioc" tabindex="-1"><a class="header-anchor" href="#ç®€å•è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯aopå’Œioc"><span>ç®€å•è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯AOPå’ŒIoCï¼Ÿ</span></a></h4><p>AOP é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œç®€å•ç‚¹è¯´å°±æ˜¯æŠŠä¸€äº›é€šç”¨çš„åŠŸèƒ½ä»ä¸šåŠ¡ä»£ç é‡ŒæŠ½å–å‡ºæ¥ï¼Œç»Ÿä¸€å¤„ç†ã€‚æ¯”å¦‚è¯´<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>ä¸­çš„ <code>@MdcDot</code> æ³¨è§£çš„ä½œç”¨æ˜¯é…åˆ AOP åœ¨æ—¥å¿—ä¸­åŠ å…¥ MDC ä¿¡æ¯ï¼Œæ–¹ä¾¿è¿›è¡Œæ—¥å¿—è¿½è¸ªã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250615111917.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@MdcDotæ³¨è§£é…åˆ AOP å®Œæˆæ—¥å¿—è¿½è¸ª" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@MdcDotæ³¨è§£é…åˆ AOP å®Œæˆæ—¥å¿—è¿½è¸ª</figcaption></figure><p>IoC æ§åˆ¶åè½¬æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨è¿‡ç¨‹äº¤ç»™ Spring å®¹å™¨æ¥ç®¡ç†ã€‚æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®å½“ä¸­ï¼Œ<code>@PostConstruct</code> æ³¨è§£è¡¨æ˜è¿™ä¸ªæ–¹æ³•ç”± Spring å®¹å™¨åœ¨ Bean åˆå§‹åŒ–å®Œæˆåè‡ªåŠ¨è°ƒç”¨ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ init æ–¹æ³•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250615113219.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@PostConstructåº”ç”¨" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@PostConstructåº”ç”¨</figcaption></figure><h4 id="springæºç çœ‹è¿‡å—" tabindex="-1"><a class="header-anchor" href="#springæºç çœ‹è¿‡å—"><span>Springæºç çœ‹è¿‡å—ï¼Ÿ</span></a></h4><p>çœ‹è¿‡ä¸€äº›ï¼Œä¸»è¦æ˜¯å¸¦ç€é—®é¢˜å»çœ‹çš„ï¼Œæ¯”å¦‚é‡åˆ°ä¸€äº›æŠ€æœ¯éš¾ç‚¹æˆ–è€…æƒ³æ·±å…¥ç†è§£æŸä¸ªåŠŸèƒ½çš„æ—¶å€™ã€‚</p><p>æˆ‘é‡ç‚¹çœ‹è¿‡çš„æ˜¯ IoC å®¹å™¨çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯ ApplicationContext çš„å¯åŠ¨æµç¨‹ã€‚ä» <code>refresh()</code> æ–¹æ³•å¼€å§‹ï¼ŒåŒ…æ‹¬ Bean çš„å®šä¹‰å’ŒåŠ è½½ã€Bean å·¥å‚çš„å‡†å¤‡ã€Bean çš„å®ä¾‹åŒ–å’Œåˆå§‹åŒ–è¿™äº›å…³é”®æ­¥éª¤ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20241207102105.png" alt="æ˜Ÿçƒå˜‰å®¾æ¥¼ä»”ï¼šSpring æºç è§£æ" tabindex="0" loading="lazy"><figcaption>æ˜Ÿçƒå˜‰å®¾æ¥¼ä»”ï¼šSpring æºç è§£æ</figcaption></figure><p>çœ‹æºç çš„æ—¶å€™å‘ç° Spring ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼ï¼Œæ¯”å¦‚å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç­‰ç­‰ï¼Œè¿™å¯¹æˆ‘å¹³æ—¶å†™ä»£ç ä¹Ÿå¾ˆæœ‰å¯å‘ã€‚</p><p>è¿˜æœ‰å°±æ˜¯ Spring çš„ Bean ç”Ÿå‘½å‘¨æœŸï¼Œä» BeanDefinition çš„åˆ›å»ºåˆ° Bean çš„å®ä¾‹åŒ–ã€å±æ€§æ³¨å…¥ã€åˆå§‹åŒ–å›è°ƒï¼Œå†åˆ°æœ€åçš„é”€æ¯ï¼Œæ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯æŒºå¤æ‚çš„ã€‚çœ‹äº†æºç ä¹‹åå¯¹ <code>@PostConstruct</code>ã€<code>@PreDestroy</code> è¿™äº›æ³¨è§£çš„æ‰§è¡Œæ—¶æœºå°±æ›´æ¸…æ¥šäº†ã€‚</p><p>ä¸è¿‡è¯´å®è¯ï¼ŒSpring çš„æºç ç¡®å®æ¯”è¾ƒéš¾å•ƒï¼Œæ¶‰åŠçš„æ¦‚å¿µå’ŒæŠ€æœ¯ç‚¹å¤ªå¤šäº†ã€‚æˆ‘ä¸€èˆ¬æ˜¯ç»“åˆä¸€äº›æŠ€æœ¯åšå®¢å’Œ Claude ä¸€èµ·çœ‹ï¼Œè¿™æ ·ç†è§£èµ·æ¥ä¼šç›¸å¯¹å®¹æ˜“ä¸€äº›ã€‚</p><p>PSï¼šå…³äºè¿™ä»½å°å†Œçš„ PDF ç‰ˆæœ¬ï¼Œç›®å‰åªæœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æ˜Ÿçƒ</a>çš„ç”¨æˆ·å¯ä»¥è·å–ï¼Œåç»­ä¼šè€ƒè™‘å¼€æ”¾ç»™å¤§å®¶ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20241207101910.png" alt="æ¥¼ä»”çš„ Spring æºç è§£ææ‰‹å†Œ" tabindex="0" loading="lazy"><figcaption>æ¥¼ä»”çš„ Spring æºç è§£ææ‰‹å†Œ</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šIOCä¸AOP</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 15 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä»¬ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªä¸­å±±å¤§å­¦æœ¬ç¡•çš„çƒå‹ï¼Œæ ¡å›­è£èª‰åŸºæœ¬ä¸Šæ‹‰æ»¡äº†ï¼Œéå¸¸ä¼˜ç§€ï¼Œé‚£æˆ‘ä¹Ÿå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°æ›´å¤šçš„çƒå‹ä»¬ï¼Œå¸®ä»–ä»¬æ‹¿åˆ°æ›´å¥½çš„ offerã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250615120504.png" alt="ä¸­å±±å¤§å­¦çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>ä¸­å±±å¤§å­¦çš„çƒå‹</figcaption></figure><h3 id="_2-springæœ‰å“ªäº›æ¨¡å—å‘¢" tabindex="-1"><a class="header-anchor" href="#_2-springæœ‰å“ªäº›æ¨¡å—å‘¢"><span>2.Springæœ‰å“ªäº›æ¨¡å—å‘¢ï¼Ÿ</span></a></h3><p>æˆ‘æŒ‰ç…§å¹³æ—¶å·¥ä½œ/å­¦ä¹ ä¸­æ¥è§¦çš„é¢‘ç‡æ¥è¯´ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆæ˜¯ Spring Core æ¨¡å—ï¼Œè¿™æ˜¯æ•´ä¸ª Spring æ¡†æ¶çš„åŸºç¡€ï¼ŒåŒ…å«äº† IoC å®¹å™¨å’Œä¾èµ–æ³¨å…¥ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚è¿˜æœ‰ Spring Beans æ¨¡å—ï¼Œè´Ÿè´£ Bean çš„é…ç½®å’Œç®¡ç†ã€‚è¿™ä¸¤ä¸ªæ¨¡å—åŸºæœ¬ä¸Šæ˜¯å…¶ä»–æ‰€æœ‰æ¨¡å—çš„åŸºç¡€ï¼Œä¸ç®¡ç”¨ Spring çš„å“ªä¸ªåŠŸèƒ½éƒ½ä¼šç”¨åˆ°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-bb7c13ea-3174-4b32-84b8-821849ddc377.png" alt="Springå®˜ç½‘ï¼šæ¨¡å—åˆ’åˆ†" tabindex="0" loading="lazy"><figcaption>Springå®˜ç½‘ï¼šæ¨¡å—åˆ’åˆ†</figcaption></figure><p>ç„¶åæ˜¯ Spring Context ä¸Šä¸‹æ–‡æ¨¡å—ï¼Œå®ƒåœ¨ Core çš„åŸºç¡€ä¸Šæä¾›äº†æ›´å¤šä¼ä¸šçº§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å›½é™…åŒ–ã€äº‹ä»¶ä¼ æ’­ã€èµ„æºåŠ è½½è¿™äº›ã€‚ApplicationContext å°±æ˜¯åœ¨è¿™ä¸ªæ¨¡å—é‡Œé¢çš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Spring Bootä¼šè‡ªåŠ¨åˆ›å»ºApplicationContext</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ApplicationContext</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Spring AOP æ¨¡å—æä¾›äº†é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ”¯æŒï¼Œæˆ‘ä»¬ç”¨çš„ <code>@Transactional</code>ã€è‡ªå®šä¹‰åˆ‡é¢è¿™äº›éƒ½æ˜¯åŸºäºè¿™ä¸ªæ¨¡å—ã€‚</p><p>Web å¼€å‘æ–¹é¢ï¼ŒSpring Web æ¨¡å—æä¾›äº†åŸºç¡€çš„ Web åŠŸèƒ½ï¼ŒSpring WebMVC å°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ MVC æ¡†æ¶ï¼Œç”¨æ¥å¤„ç† HTTP è¯·æ±‚å’Œå“åº”ã€‚ç°åœ¨è¿˜æœ‰ Spring WebFluxï¼Œæ”¯æŒå“åº”å¼ç¼–ç¨‹ã€‚</p><p>æ¯”å¦‚è¯´<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œ<code>GlobalExceptionHandler</code> ç±»å°±ä½¿ç”¨äº† <code>@RestControllerAdvice</code> æ¥å®ç°ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RestControllerAdvice</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> GlobalExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ForumAdviceException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResVo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleForumAdviceException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ForumAdviceException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ResVo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fail</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getStatus</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°æ®è®¿é—®æ–¹é¢ï¼ŒSpring JDBC ç®€åŒ–äº† JDBC çš„ä½¿ç”¨ï¼Œåœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°± <code>JdbcTemplate</code> æ¥æ£€æŸ¥è¡¨æ˜¯å¦å­˜åœ¨ã€æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250616105042.png" alt="æŠ€æœ¯æ´¾æºç ï¼šJdbcTemplate" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šJdbcTemplate</figcaption></figure><p>Spring ORM æä¾›äº†å¯¹ MyBatis-Plus ç­‰ ORM æ¡†æ¶çš„é›†æˆæ”¯æŒã€‚åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°±ç”¨äº† <code>@TableName</code>ã€<code>@TableField</code> ç­‰æ³¨è§£è¿›è¡Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œé€šè¿‡ç»§æ‰¿ BaseMapper æ¥è·å–é€šç”¨çš„ CRUD èƒ½åŠ›ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250616105224.png" alt="æŠ€æœ¯æ´¾æºç ï¼šBaseMapper" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šBaseMapper</figcaption></figure><p>Spring Test æ¨¡å—æä¾›äº†æµ‹è¯•æ”¯æŒï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚æˆ‘ä»¬å†™æµ‹è¯•ç”¨ä¾‹çš„æ—¶å€™ç»å¸¸ç”¨ <code>@SpringBootTest</code> è¿™äº›æ³¨è§£ã€‚æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°±ç”¨ <code>@SpringBootTest</code> æ³¨è§£æ¥åŠ è½½ Spring ä¸Šä¸‹æ–‡ï¼Œè¿›è¡Œé›†æˆæµ‹è¯•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootTest</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">classes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> QuickForumApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RunWith</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SpringJUnit4ClassRunner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BasicTest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ¨¡å—ï¼Œæ¯”å¦‚ Spring Security è´Ÿè´£å®‰å…¨è®¤è¯ï¼ŒSpring Batch å¤„ç†æ‰¹å¤„ç†ä»»åŠ¡ç­‰ç­‰ã€‚</p><p>ç°åœ¨æˆ‘ä»¬åŸºæœ¬éƒ½æ˜¯ç”¨ Spring Boot æ¥å¼€å‘ï¼Œå®ƒæŠŠè¿™äº›æ¨¡å—éƒ½æ•´åˆå¥½äº†ï¼Œç”¨èµ·æ¥æ›´æ–¹ä¾¿ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250616105807.png" alt="æŠ€æœ¯æ´¾ï¼šæŠ€æœ¯é€‰å‹" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼šæŠ€æœ¯é€‰å‹</figcaption></figure><p>memoï¼š2025 å¹´ 6 æœˆ 16 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä»¬ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªå¤§è¿æµ·äº‹å¤§å­¦ç¡•æ²³å—ç†å·¥å¤§å­¦æœ¬çš„çƒå‹ï¼Œä»–è£èª‰å¥–é¡¹é‡Œæåˆ°çš„ä¼˜ç§€ç ”ç©¶ç”Ÿã€å¥–å­¦é‡‘ã€è‹±è¯­å››å…­çº§ï¼Œæˆ‘å¸Œæœ›çœ‹åˆ°çš„åŒå­¦ä¹Ÿéƒ½èƒ½äº‰å–ä¸€ä¸‹ï¼Œä¸è¦æŠŠè¿™äº›è£èª‰æ‹±æ‰‹è®©äººï¼Œæˆ–è€…å‹æ ¹å°±ä¸çŸ¥é“ï¼Œæˆ–è€…ä¸å±‘äºå»å‚åŠ ï¼Œåˆ°æ—¶å€™ä½ ç®€å†ä¸Šè¿™ä¸€æ å°±ä¼šæ¯”è¾ƒè‹ç™½ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250616110317.png" alt="å¤§è¿æµ·äº‹å¤§å­¦ç¡•æ²³å—ç†å·¥å¤§å­¦æœ¬çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>å¤§è¿æµ·äº‹å¤§å­¦ç¡•æ²³å—ç†å·¥å¤§å­¦æœ¬çš„çƒå‹</figcaption></figure><h3 id="_3-springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢" tabindex="-1"><a class="header-anchor" href="#_3-springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢"><span>3.Springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢ï¼Ÿ</span></a></h3><p>Spring çš„æ³¨è§£æŒºå¤šçš„ï¼Œæˆ‘æŒ‰ç…§ä¸åŒçš„åŠŸèƒ½åˆ†ç±»æ¥è¯´ä¸€ä¸‹å¹³æ—¶ç”¨å¾—æœ€å¤šçš„é‚£äº›ã€‚</p><p>é¦–å…ˆæ˜¯ Bean ç®¡ç†ç›¸å…³çš„æ³¨è§£ã€‚<code>@Component</code> æ˜¯æœ€åŸºç¡€çš„ï¼Œç”¨æ¥æ ‡è¯†ä¸€ä¸ªç±»æ˜¯ Spring ç»„ä»¶ã€‚åƒ <code>@Service</code>ã€<code>@Repository</code>ã€<code>@Controller</code> è¿™äº›éƒ½æ˜¯ <code>@Component</code> çš„ç‰¹åŒ–ç‰ˆæœ¬ï¼Œåˆ†åˆ«ç”¨åœ¨æœåŠ¡å±‚ã€æ•°æ®è®¿é—®å±‚å’Œæ§åˆ¶å™¨å±‚ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-8d0a1518-a425-4887-9735-45321095d927.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå¸¸ç”¨æ³¨è§£" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå¸¸ç”¨æ³¨è§£</figcaption></figure><p>ä¾èµ–æ³¨å…¥æ–¹é¢ï¼Œ<code>@Autowired</code> æ˜¯ç”¨å¾—æœ€å¤šçš„ï¼Œå¯ä»¥æ ‡æ³¨åœ¨å­—æ®µã€setter æ–¹æ³•æˆ–è€…æ„é€ æ–¹æ³•ä¸Šã€‚<code>@Qualifier</code> åœ¨æœ‰å¤šä¸ªåŒç±»å‹ Bean çš„æ—¶å€™ç”¨æ¥æŒ‡å®šå…·ä½“æ³¨å…¥å“ªä¸€ä¸ªã€‚<code>@Resource</code> å’Œ <code>@Autowired</code> åŠŸèƒ½å·®ä¸å¤šï¼Œä¸è¿‡å®ƒæ˜¯æŒ‰åç§°æ³¨å…¥çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250617110609.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Resourceå’Œ@Autowired" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Resourceå’Œ@Autowired</figcaption></figure><p>é…ç½®ç›¸å…³çš„æ³¨è§£ä¹Ÿå¾ˆå¸¸ç”¨ã€‚<code>@Configuration</code> æ ‡è¯†é…ç½®ç±»ï¼Œ<code>@Bean</code> ç”¨æ¥å®šä¹‰ Beanï¼Œ<code>@Value</code> ç”¨æ¥æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å€¼ã€‚æˆ‘ä»¬é¡¹ç›®é‡Œçš„æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Redis é…ç½®è¿™äº›éƒ½æ˜¯ç”¨ <code>@Value</code> æ¥æ³¨å…¥çš„ã€‚<code>@PropertySource</code> ç”¨æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250617110755.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Value" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Value</figcaption></figure><p>Web å¼€å‘çš„æ³¨è§£å°±æ›´å¤šäº†ã€‚<code>@RestController</code> ç›¸å½“äº <code>@Controller</code> åŠ  <code>@ResponseBody</code>ï¼Œç”¨æ¥åš RESTful æ¥å£ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250617110859.png" alt="æŠ€æœ¯æ´¾æºç ï¼šweb å¼€å‘çš„æ³¨è§£" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šweb å¼€å‘çš„æ³¨è§£</figcaption></figure><p><code>@RequestMapping</code> åŠå…¶å˜ä½“<code>@GetMapping</code>ã€<code>@PostMapping</code>ã€<code>@PutMapping</code>ã€<code>@DeleteMapping</code> ç”¨æ¥æ˜ å°„ HTTP è¯·æ±‚ã€‚<code>@PathVariable</code> è·å–è·¯å¾„å‚æ•°ï¼Œ<code>@RequestParam</code> è·å–è¯·æ±‚å‚æ•°ï¼Œ<code>@RequestBody</code> æ¥æ”¶ JSON æ•°æ®ã€‚</p><p>AOP ç›¸å…³çš„æ³¨è§£ï¼Œ<code>@Aspect</code> å®šä¹‰åˆ‡é¢ï¼Œ<code>@Pointcut</code> å®šä¹‰åˆ‡ç‚¹ï¼Œ<code>@Before</code>ã€<code>@After</code>ã€<code>@Around</code> è¿™äº›å®šä¹‰é€šçŸ¥ç±»å‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250617111100.png" alt="æŠ€æœ¯æ´¾æºç ï¼šAOP ç›¸å…³æ³¨è§£" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šAOP ç›¸å…³æ³¨è§£</figcaption></figure><p>ä¸è¿‡æˆ‘ä»¬ç”¨å¾—æœ€å¤šçš„è¿˜æ˜¯<code>@Transactional</code>ï¼ŒåŸºæœ¬ä¸Š Service å±‚éœ€è¦ä¿è¯äº‹åŠ¡åŸå­æ€§çš„æ–¹æ³•éƒ½ä¼šåŠ ä¸Šè¿™ä¸ªæ³¨è§£ã€‚</p><p>ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„ï¼Œ<code>@PostConstruct</code> åœ¨ Bean åˆå§‹åŒ–åæ‰§è¡Œï¼Œ<code>@PreDestroy</code> åœ¨ Bean é”€æ¯å‰æ‰§è¡Œã€‚æµ‹è¯•çš„æ—¶å€™ <code>@SpringBootTest</code> ä¹Ÿç»å¸¸ç”¨åˆ°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250617111256.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@PostConstruct" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@PostConstruct</figcaption></figure><p>è¿˜æœ‰ä¸€äº› Spring Boot ç‰¹æœ‰çš„æ³¨è§£ï¼Œæ¯”å¦‚ <code>@SpringBootApplication</code> è¿™ä¸ªå¯åŠ¨ç±»æ³¨è§£ï¼Œ<code>@ConditionalOnProperty</code> åšæ¡ä»¶è£…é…ï¼Œ<code>@EnableAutoConfiguration</code> å¼€å¯è‡ªåŠ¨é…ç½®ç­‰ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250617111359.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@ConditionalOnProperty" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@ConditionalOnProperty</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾®ä¼—é“¶è¡ŒåŒå­¦ 1 Java åç«¯ä¸€é¢çš„åŸé¢˜ï¼šè¯´è¯´ Spring å¸¸è§çš„æ³¨è§£ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 17 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä»¬ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªå­¦é™¢æœ¬çš„çƒå‹ï¼Œä»–çš„è£èª‰å¥–é¡¹è¿˜æ˜¯ OKçš„ï¼Œæ€åº¦ä¹Ÿéå¸¸å¥½ï¼Œä¹‹å‰æœ‰å­¦é™¢æœ¬çƒå‹æ‹¿åˆ°æ»´æ»´ SP offer çš„ï¼Œå¸Œæœ›è¿™ä½çƒå‹ä¹Ÿèƒ½å¤Ÿæˆä¸ºæ˜Ÿçƒé‡Œæ–°çš„æ¦œæ ·ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250617111727.png" alt="é—½æ±Ÿå­¦é™¢çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>é—½æ±Ÿå­¦é™¢çš„çƒå‹</figcaption></figure><h3 id="_4-ğŸŒŸspringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-ğŸŒŸspringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼"><span>4.ğŸŒŸSpringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</span></a></h3><p>Spring æ¡†æ¶é‡Œé¢ç¡®å®ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»å¹³æ—¶å·¥ä½œä¸­èƒ½è§‚å¯Ÿåˆ°çš„å‡ ä¸ªæ¥è¯´è¯´ã€‚</p><p>é¦–å…ˆæ˜¯å·¥å‚æ¨¡å¼ï¼Œè¿™ä¸ªåœ¨ Spring é‡Œç”¨å¾—éå¸¸å¤šã€‚BeanFactory å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å·¥å‚ï¼Œå®ƒè´Ÿè´£åˆ›å»ºå’Œç®¡ç†æ‰€æœ‰çš„ Bean å¯¹è±¡ã€‚æˆ‘ä»¬å¹³æ—¶ç”¨çš„ ApplicationContext å…¶å®ä¹Ÿæ˜¯ BeanFactory çš„ä¸€ä¸ªå®ç°ã€‚å½“æˆ‘ä»¬é€šè¿‡ <code>@Autowired</code> è·å–ä¸€ä¸ª Bean çš„æ—¶å€™ï¼Œåº•å±‚å°±æ˜¯é€šè¿‡å·¥å‚æ¨¡å¼æ¥åˆ›å»ºå’Œè·å–å¯¹è±¡çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-ee1c5cee-8462-4bae-93ea-ec936cc77640.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringä¸­ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringä¸­ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼</figcaption></figure><p>å•ä¾‹æ¨¡å¼ä¹Ÿæ˜¯ Spring çš„é»˜è®¤è¡Œä¸ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å®¹å™¨ä¸­çš„ Bean éƒ½æ˜¯å•ä¾‹çš„ï¼Œæ•´ä¸ªåº”ç”¨ä¸­åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹ã€‚è¿™æ ·å¯ä»¥èŠ‚çœå†…å­˜ï¼Œæé«˜æ€§èƒ½ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>@Scope</code> æ³¨è§£æ¥æ”¹å˜ Bean çš„ä½œç”¨åŸŸï¼Œæ¯”å¦‚è®¾ç½®ä¸º prototype å°±æ˜¯æ¯æ¬¡è·å–éƒ½åˆ›å»ºæ–°å®ä¾‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250618113356.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@Scopeæ³¨è§£" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@Scopeæ³¨è§£</figcaption></figure><p>ä»£ç†æ¨¡å¼åœ¨ AOP ä¸­ç”¨å¾—ç‰¹åˆ«å¤šã€‚Spring AOP çš„åº•å±‚å®ç°å°±æ˜¯åŸºäºåŠ¨æ€ä»£ç†çš„ï¼Œå¯¹äºå®ç°äº†æ¥å£çš„ç±»ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œæ²¡æœ‰å®ç°æ¥å£çš„ç±»ç”¨ CGLIB ä»£ç†ã€‚æ¯”å¦‚æˆ‘ä»¬ç”¨ <code>@Transactional</code> æ³¨è§£çš„æ—¶å€™ï¼ŒSpring ä¼šä¸ºæˆ‘ä»¬çš„ç±»åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰åæ·»åŠ äº‹åŠ¡å¤„ç†é€»è¾‘ã€‚</p><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨ Spring é‡Œä¹Ÿå¾ˆå¸¸è§ï¼Œæ¯”å¦‚ JdbcTemplateã€‚å®ƒå®šä¹‰äº†æ•°æ®åº“æ“ä½œçš„åŸºæœ¬æµç¨‹ï¼šè·å–è¿æ¥ã€æ‰§è¡Œ SQLã€å¤„ç†ç»“æœã€å…³é—­è¿æ¥ï¼Œä½†æ˜¯å…·ä½“çš„ SQL è¯­å¥å’Œç»“æœå¤„ç†é€»è¾‘ç”±æˆ‘ä»¬æ¥å®ç°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250618114035.png" alt="æŠ€æœ¯æ´¾æºç ï¼šJdbcTemplate" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šJdbcTemplate</figcaption></figure><p>è§‚å¯Ÿè€…æ¨¡å¼åœ¨ Spring çš„äº‹ä»¶æœºåˆ¶ä¸­æœ‰æ‰€ä½“ç°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ ApplicationEvent å’Œ ApplicationListener æ¥å®ç°äº‹ä»¶çš„å‘å¸ƒå’Œç›‘å¬ã€‚æ¯”å¦‚ç”¨æˆ·æ³¨å†ŒæˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥å‘å¸ƒä¸€ä¸ªç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼Œç„¶åæœ‰å¤šä¸ªç›‘å¬å™¨æ¥å¤„ç†åç»­çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚å‘é€é‚®ä»¶ã€è®°å½•æ—¥å¿—ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250618114211.png" alt="æŠ€æœ¯æ´¾æºç ï¼šApplicationListener" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šApplicationListener</figcaption></figure><p>è¿™äº›è®¾è®¡æ¨¡å¼çš„åº”ç”¨è®© Spring æ¡†æ¶æ—¢çµæ´»åˆå¼ºå¤§ï¼Œä¹Ÿè®©æˆ‘åœ¨å®é™…çš„å¼€å‘ä¸­å­¦åˆ°å¾ˆå¤šç»å…¸çš„è®¾è®¡æ€æƒ³ã€‚</p><h4 id="springå¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#springå¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼"><span>Springå¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ</span></a></h4><p>ä¼ ç»Ÿçš„å•ä¾‹æ¨¡å¼æ˜¯åœ¨ç±»çš„å†…éƒ¨æ§åˆ¶åªèƒ½åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œæ¯”å¦‚ç”¨ private æ„é€ æ–¹æ³•åŠ  <code>static getInstance()</code> è¿™ç§æ–¹å¼ã€‚ä½†æ˜¯ Spring çš„å•ä¾‹æ˜¯å®¹å™¨çº§åˆ«çš„ï¼ŒåŒä¸€ä¸ª Bean åœ¨æ•´ä¸ª Spring å®¹å™¨ä¸­åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p><p>å…·ä½“çš„å®ç°æœºåˆ¶æ˜¯è¿™æ ·çš„ï¼šSpring åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šæŠŠæ‰€æœ‰çš„ Bean å®šä¹‰ä¿¡æ¯åŠ è½½è¿›æ¥ï¼Œç„¶ååœ¨ DefaultSingletonBeanRegistry è¿™ä¸ªç±»é‡Œé¢ç»´æŠ¤äº†ä¸€ä¸ªå« singletonObjects çš„ ConcurrentHashMapï¼Œè¿™ä¸ª Map å°±æ˜¯ç”¨æ¥å­˜å‚¨å•ä¾‹ Bean çš„ã€‚key æ˜¯ Bean çš„åç§°ï¼Œvalue å°±æ˜¯ Bean çš„å®ä¾‹å¯¹è±¡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250618115033.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šDefaultSingletonBeanRegistry" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šDefaultSingletonBeanRegistry</figcaption></figure><p>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è·å–æŸä¸ª Bean çš„æ—¶å€™ï¼ŒSpring ä¼šå…ˆæ£€æŸ¥ singletonObjects è¿™ä¸ª Map é‡Œé¢æœ‰æ²¡æœ‰è¿™ä¸ª Beanï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œç„¶åæ”¾åˆ° Map é‡Œé¢ã€‚åé¢å†è·å–åŒä¸€ä¸ª Bean çš„æ—¶å€™ï¼Œç›´æ¥ä» Map é‡Œé¢å–å°±è¡Œäº†ï¼Œè¿™æ ·å°±ä¿è¯äº†å•ä¾‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250618115153.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šregisterSingleton" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šregisterSingleton</figcaption></figure><p>è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚å°±æ˜¯ Spring ä¸ºäº†è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œè¿˜ç”¨äº†ä¸‰çº§ç¼“å­˜ã€‚é™¤äº† singletonObjects è¿™ä¸ªä¸€çº§ç¼“å­˜ï¼Œè¿˜æœ‰ earlySingletonObjects äºŒçº§ç¼“å­˜å’Œ singletonFactories ä¸‰çº§ç¼“å­˜ã€‚è¿™æ ·å³ä½¿æœ‰å¾ªç¯ä¾èµ–ï¼ŒSpring ä¹Ÿèƒ½æ­£ç¡®å¤„ç†ã€‚</p><p>è€Œä¸” Spring çš„å•ä¾‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºç”¨çš„æ˜¯ ConcurrentHashMapï¼Œå¤šçº¿ç¨‹è®¿é—®ä¸ä¼šæœ‰é—®é¢˜ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æºç¨‹é¢ç»åŒå­¦ 10 Java æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring IoC çš„è®¾è®¡æ¨¡å¼ï¼ŒAOP çš„è®¾è®¡æ¨¡å¼</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šSpring æ¡†æ¶ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpringç”¨äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šSpringä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Œä»¥å…¶ä¸­ä¸€ç§æ¨¡å¼ä¸¾ä¾‹è¯´æ˜ï¼ŸSpringå¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 20 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œæœ‰ç¢°åˆ°é‡åº†é‚®ç”µå¤§å­¦æœ¬ï¼Œç”µå­ç§‘æŠ€å¤§å­¦ç¡•çš„çƒå‹ï¼ŒæœŸé—´è¿˜æœ‰è¿‡æ¸…åå¤§å­¦ç§‘ç ”é¡¹ç›®çš„ç»å†ï¼ŒåŸºæœ¬ä¸Šä¹Ÿæ˜¯æŠŠå­¦å†è¿™å—æ‹‰çš„æ»¡ä¸­æ»¡äº†ï¼Œé‚£å¸Œæœ›æ˜Ÿçƒèƒ½å¸®åŠ©åˆ°æ›´å¤šé™¢æ ¡çš„åŒå­¦ï¼Œä¸ç®¡æ˜¯å·¥ä½œå…šè¿˜æ˜¯å­¦ç”Ÿå…šï¼Œéƒ½å¸Œæœ›å¤§å®¶éƒ½æ‹¿åˆ°æ›´å¥½çš„ offerã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250621062819.png" alt="é‡é‚®æœ¬ï¼Œç”µå­ç§‘æŠ€å¤§å­¦ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>é‡é‚®æœ¬ï¼Œç”µå­ç§‘æŠ€å¤§å­¦ç¡•çš„çƒå‹</figcaption></figure><h3 id="_5-springå®¹å™¨å’Œwebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_5-springå®¹å™¨å’Œwebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—-è¡¥å……"><span>5.Springå®¹å™¨å’ŒWebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 7 æœˆ 11 æ—¥å¢è¡¥</p></blockquote><p>é¦–å…ˆä»æ¦‚å¿µä¸Šæ¥è¯´ï¼ŒSpring å®¹å™¨æ˜¯ä¸€ä¸ª IoC å®¹å™¨ï¼Œä¸»è¦è´Ÿè´£ç®¡ç† Java å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³»ã€‚è€Œ Web å®¹å™¨ï¼Œæ¯”å¦‚ Tomcatã€Jetty è¿™äº›ï¼Œæ˜¯ç”¨æ¥è¿è¡Œ Web åº”ç”¨çš„å®¹å™¨ï¼Œè´Ÿè´£å¤„ç† HTTP è¯·æ±‚å’Œå“åº”ï¼Œç®¡ç† Servlet çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * SpringUtil.java</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * ç”¨äºè·å– Spring å®¹å™¨ä¸­çš„ Beanï¼ŒæŠ€æœ¯æ´¾æºç ï¼šhttps://github.com/itwanger/paicoding</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SpringUtil</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ApplicationContextAware</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> volatile</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ApplicationContext</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setApplicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ApplicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> applicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringUtil</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">context</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> applicationContext;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(bean);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»åŠŸèƒ½ä¸Šçœ‹ï¼ŒSpring å®¹å™¨ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å±‚é¢çš„å¯¹è±¡ç®¡ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„ Serviceã€Daoã€Controller è¿™äº› Bean éƒ½æ˜¯ç”± Spring å®¹å™¨æ¥åˆ›å»ºå’Œç®¡ç†çš„ã€‚è€Œ Web å®¹å™¨ä¸»è¦å¤„ç†ç½‘ç»œé€šä¿¡ï¼Œæ¯”å¦‚æ¥æ”¶ HTTP è¯·æ±‚ã€è§£æè¯·æ±‚å‚æ•°ã€è°ƒç”¨ç›¸åº”çš„ Servletï¼Œç„¶åæŠŠå“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250621063345.png" alt="åšå®¢å›­ hiy1995ï¼šweb å®¹å™¨" tabindex="0" loading="lazy"><figcaption>åšå®¢å›­ hiy1995ï¼šweb å®¹å™¨</figcaption></figure><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ä¸¤ä¸ªå®¹å™¨æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚æˆ‘ä»¬çš„ Web é¡¹ç›®éƒ¨ç½²åœ¨ Tomcat ä¸Šçš„æ—¶å€™ï¼ŒTomcat ä¼šè´Ÿè´£æ¥æ”¶ HTTP è¯·æ±‚ï¼Œç„¶åæŠŠè¯·æ±‚äº¤ç»™ DispatcherServlet å¤„ç†ï¼Œè€Œ DispatcherServlet åˆä¼šå» Spring å®¹å™¨ä¸­æŸ¥æ‰¾ç›¸åº”çš„ Controller æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * GlobalViewInterceptor.java</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * ç”¨äºå…¨å±€æ‹¦æˆªå™¨ï¼ŒæŠ€æœ¯æ´¾æºç ï¼šhttps://github.com/itwanger/paicoding</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> GlobalViewInterceptor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HandlerInterceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> GlobalInitService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> globalInitService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> preHandle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                           HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                           Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Web å®¹å™¨çš„ HTTP è¯·æ±‚ + Spring å®¹å™¨çš„ä¸šåŠ¡æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯ç”Ÿå‘½å‘¨æœŸã€‚Web å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸè·Ÿ Web åº”ç”¨ç¨‹åºçš„éƒ¨ç½²å’Œå¸è½½ç›¸å…³ï¼Œè€Œ Spring å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯åœ¨ Web åº”ç”¨å¯åŠ¨çš„æ—¶å€™åˆå§‹åŒ–ï¼Œåº”ç”¨å…³é—­çš„æ—¶å€™é”€æ¯ã€‚</p><p>ç°åœ¨æˆ‘ä»¬éƒ½ç”¨ Spring Boot äº†ï¼ŒSpring Boot å†…ç½®äº† Tomcatï¼ŒæŠŠ Web å®¹å™¨å’Œ Spring å®¹å™¨éƒ½æ•´åˆåœ¨ä¸€èµ·äº†ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œä¸€ä¸ª jar åŒ…å°±å¯ä»¥äº†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QuickForumApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">QuickForumApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å»å“ªå„¿åŒå­¦ 1 æŠ€æœ¯äºŒé¢åŸé¢˜ï¼šspringçš„å®¹å™¨ã€webå®¹å™¨ã€springmvcçš„å®¹å™¨ä¹‹é—´çš„åŒºåˆ«</li></ol></blockquote><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div><p>memoï¼š2024 å¹´ 7 æœˆ 11 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä»¬ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°åŒ—äº¬äº¤é€šå¤§å­¦æœ¬ï¼ŒåŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ç¡•çš„çƒå‹ï¼Œå¥¹çš„ç®€å†ä¸Šæœ‰å¾ˆå¤šæ ¡å›­è£èª‰å¥–é¡¹ï¼Œåƒä¼˜ç§€å­¦ç”Ÿã€å¥–å­¦é‡‘ã€è‹±è¯­å››å…­çº§ç­‰ï¼Œè¿™äº›éƒ½æ˜¯éå¸¸å¥½çš„åŠ åˆ†é¡¹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250621064205.png" alt="åŒ—äº¬äº¤é€šå¤§å­¦æœ¬ï¼ŒåŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>åŒ—äº¬äº¤é€šå¤§å­¦æœ¬ï¼ŒåŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ç¡•çš„çƒå‹</figcaption></figure><h2 id="ioc" tabindex="-1"><a class="header-anchor" href="#ioc"><span>IoC</span></a></h2><h3 id="_6-ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ioc" tabindex="-1"><a class="header-anchor" href="#_6-ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ioc"><span>6.ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯IoCï¼Ÿ</span></a></h3><p>æ¨èé˜…è¯»ï¼š<a href="https://javabetter.cn/springboot/ioc.html" target="_blank" rel="noopener noreferrer">IoC æ‰«ç›²</a></p><p>IoC çš„å…¨ç§°æ˜¯ Inversion of Controlï¼Œä¹Ÿå°±æ˜¯æ§åˆ¶åè½¬ã€‚è¿™é‡Œçš„â€œæ§åˆ¶â€æŒ‡çš„æ˜¯å¯¹è±¡åˆ›å»ºå’Œä¾èµ–å…³ç³»ç®¡ç†çš„æ§åˆ¶æƒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240310191630.png" alt="å›¾ç‰‡æ¥æºäºç½‘ç»œï¼šIoC" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡æ¥æºäºç½‘ç»œï¼šIoC</figcaption></figure><p>ä»¥å‰æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœ A ç±»éœ€è¦ç”¨åˆ° B ç±»ï¼Œæˆ‘ä»¬å°±åœ¨ A ç±»é‡Œé¢ç›´æ¥ new ä¸€ä¸ª B å¯¹è±¡å‡ºæ¥ï¼Œè¿™æ · A ç±»å°±æ§åˆ¶äº† B ç±»å¯¹è±¡çš„åˆ›å»ºã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ä¼ ç»Ÿæ–¹å¼ï¼šå¯¹è±¡ä¸»åŠ¨åˆ›å»ºä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserDaoImpl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰äº† IoC ä¹‹åï¼Œè¿™ä¸ªæ§åˆ¶æƒå°±â€œåè½¬â€äº†ï¼Œä¸å†ç”± A ç±»æ¥æ§åˆ¶ B å¯¹è±¡çš„åˆ›å»ºï¼Œè€Œæ˜¯äº¤ç»™å¤–éƒ¨çš„å®¹å™¨æ¥ç®¡ç†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/** </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * ä½¿ç”¨ Spring IoC å®¹å™¨æ¥ç®¡ç† UserDao çš„åˆ›å»ºå’Œæ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * æŠ€æœ¯æ´¾æºç ï¼šhttps://github.com/itwanger/paicoding</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ä¸éœ€è¦ä¸»åŠ¨åˆ›å»º UserDaoï¼Œç”± Spring å®¹å™¨æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BaseUserInfoDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getAndUpdateUserIpInfoBySessionId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> session</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> clientIp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ç›´æ¥ä½¿ç”¨æ³¨å…¥çš„ userDao</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBySessionId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(session);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>----è¿™éƒ¨åˆ†é¢è¯•ä¸­å¯ä»¥ä¸èƒŒ start----</p><p>æ²¡æœ‰ IoC ä¹‹å‰ï¼š</p><blockquote><p>æˆ‘éœ€è¦ä¸€ä¸ªå¥³æœ‹å‹ï¼Œåˆšå¥½å¤§è¡—ä¸Šçªç„¶çœ‹åˆ°äº†ä¸€ä¸ªå°å§å§ï¼Œäººå¾ˆå¥½çœ‹ï¼Œäºæ˜¯æˆ‘å°±è‡ªå·±ä¸»åŠ¨ä¸Šå»æ­è®ªï¼Œè¦å¥¹çš„å¾®ä¿¡å·ï¼Œæ‰¾æœºä¼šèŠå¤©å…³å¿ƒå¥¹ï¼Œç„¶åçº¦å¥¹å‡ºæ¥åƒé¥­ï¼Œæ‰“å¬å¥¹çš„çˆ±å¥½ï¼Œä¸‰è§‚ã€‚ã€‚ã€‚</p></blockquote><p>æœ‰äº† IoC ä¹‹åï¼š</p><blockquote><p>æˆ‘éœ€è¦ä¸€ä¸ªå¥³æœ‹å‹ï¼Œäºæ˜¯æˆ‘å°±å»æ‰¾å©šä»‹æ‰€ï¼Œå‘Šè¯‰å©šä»‹æ‰€ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªé•¿çš„åƒèµµéœ²æ€çš„ï¼Œä¼šæ‰“ Dota2 çš„ï¼Œäºæ˜¯å©šä»‹æ‰€åœ¨å®ƒçš„äººæ‰åº“é‡Œå¼€å§‹æ‰¾ï¼Œæ‰¾ä¸åˆ°å®ƒå°±ç›´æ¥è¯´æ²¡æœ‰ï¼Œæ‰¾åˆ°å®ƒå°±ç›´æ¥ä»‹ç»ç»™æˆ‘ã€‚</p></blockquote><p>å©šä»‹æ‰€å°±ç›¸å½“äºä¸€ä¸ª IoC å®¹å™¨ï¼Œæˆ‘å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘éœ€è¦çš„å¥³æœ‹å‹å°±æ˜¯å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä¸ç”¨å…³å¿ƒå¥³æœ‹å‹æ˜¯æ€ä¹ˆæ¥çš„ï¼Œæˆ‘åªéœ€è¦å‘Šè¯‰å©šä»‹æ‰€æˆ‘éœ€è¦ä»€ä¹ˆæ ·çš„å¥³æœ‹å‹ï¼Œå©šä»‹æ‰€å°±å¸®æˆ‘å»æ‰¾ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-619da277-c15e-4dd7-9f2b-dbd809a9aaa0.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¼•å…¥IoCä¹‹å‰å’Œå¼•å…¥IoCä¹‹å" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¼•å…¥IoCä¹‹å‰å’Œå¼•å…¥IoCä¹‹å</figcaption></figure><p>----è¿™éƒ¨åˆ†é¢è¯•ä¸­å¯ä»¥ä¸èƒŒ end----</p><h4 id="diå’Œiocçš„åŒºåˆ«äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#diå’Œiocçš„åŒºåˆ«äº†è§£å—"><span>DIå’ŒIoCçš„åŒºåˆ«äº†è§£å—ï¼Ÿ</span></a></h4><p>IoC çš„æ€æƒ³æ˜¯æŠŠå¯¹è±¡åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„æ§åˆ¶æƒç”±ä¸šåŠ¡ä»£ç è½¬ç§»ç»™ Spring å®¹å™¨ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæŠ½è±¡çš„æ¦‚å¿µï¼Œå‘Šè¯‰æˆ‘ä»¬åº”è¯¥æ€ä¹ˆå»è®¾è®¡ç³»ç»Ÿæ¶æ„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20241117132929.png" alt="Martin Fowlerâ€™s Definition" tabindex="0" loading="lazy"><figcaption>Martin Fowlerâ€™s Definition</figcaption></figure><p>è€Œ DIï¼Œä¹Ÿå°±æ˜¯ä¾èµ–æ³¨å…¥ï¼Œå®ƒæ˜¯å®ç° IoC è¿™ç§æ€æƒ³çš„å…·ä½“æŠ€æœ¯æ‰‹æ®µã€‚åœ¨ Spring é‡Œï¼Œæˆ‘ä»¬ç”¨ <code>@Autowired</code> æ³¨è§£å°±æ˜¯åœ¨ä½¿ç”¨ DI çš„å­—æ®µæ³¨å…¥æ–¹å¼ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleReadServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleReadService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> articleDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // å­—æ®µæ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»å®ç°è§’åº¦æ¥çœ‹ï¼ŒDI é™¤äº†å­—æ®µæ³¨å…¥ï¼Œè¿˜æœ‰æ„é€ æ–¹æ³•æ³¨å…¥å’Œ Setter æ–¹æ³•æ³¨å…¥ç­‰æ–¹å¼ã€‚åœ¨åš<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘å°±å°è¯•è¿‡æ„é€ æ–¹æ³•æ³¨å…¥çš„æ–¹å¼ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250622091928.png" alt="æŠ€æœ¯æ´¾æºç ï¼šæ„é€ æ–¹æ³•çš„æ³¨å…¥æ–¹å¼" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šæ„é€ æ–¹æ³•çš„æ³¨å…¥æ–¹å¼</figcaption></figure><p>å½“ç„¶äº†ï¼ŒDI å¹¶ä¸æ˜¯å®ç° IoC çš„å”¯ä¸€æ–¹å¼ï¼Œè¿˜æœ‰ Service Locator æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡å®ç° ApplicationContextAware æ¥å£æ¥è·å– Spring å®¹å™¨ä¸­çš„ Beanã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250622093007.png" alt="æŠ€æœ¯æ´¾æºç ï¼šIoC çš„Service Locator æ¨¡å¼" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šIoC çš„Service Locator æ¨¡å¼</figcaption></figure><p>ä¹‹æ‰€ä»¥ ID åæˆä¸º IoC çš„é¦–é€‰å®ç°æ–¹å¼ï¼Œæ˜¯å› ä¸ºä»£ç æ›´æ¸…æ™°ã€å¯è¯»æ€§æ›´é«˜ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>IoCï¼ˆæ§åˆ¶åè½¬ï¼‰</span></span>
<span class="line"><span>â”œâ”€â”€ DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰          â† ä¸»è¦å®ç°æ–¹å¼</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ æ„é€ å™¨æ³¨å…¥</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ å­—æ®µæ³¨å…¥</span></span>
<span class="line"><span>â”‚   â””â”€â”€ Setteræ³¨å…¥</span></span>
<span class="line"><span>â”œâ”€â”€ æœåŠ¡å®šä½å™¨æ¨¡å¼</span></span>
<span class="line"><span>â”œâ”€â”€ å·¥å‚æ¨¡å¼</span></span>
<span class="line"><span>â””â”€â”€ å…¶ä»–å®ç°æ–¹å¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-ioc-å‘¢" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-ioc-å‘¢"><span>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ IoC å‘¢ï¼Ÿ</span></a></h4><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å®ç°æŸä¸€ä¸ªåŠŸèƒ½ï¼Œå¯èƒ½è‡³å°‘éœ€è¦ä¸¤ä¸ªä»¥ä¸Šçš„å¯¹è±¡æ¥ååŠ©å®Œæˆï¼Œåœ¨æ²¡æœ‰ Spring ä¹‹å‰ï¼Œæ¯ä¸ªå¯¹è±¡åœ¨éœ€è¦å®ƒçš„åˆä½œå¯¹è±¡æ—¶ï¼Œéœ€è¦è‡ªå·± new ä¸€ä¸ªï¼Œæ¯”å¦‚è¯´ A è¦ä½¿ç”¨ Bï¼ŒA å°±å¯¹ B äº§ç”Ÿäº†ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ A å’Œ B ä¹‹é—´å­˜åœ¨äº†ä¸€ç§è€¦åˆå…³ç³»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ä¼ ç»Ÿæ–¹å¼ï¼šå¯¹è±¡è‡ªå·±åˆ›å»ºä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserDaoImpl</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // ç¡¬ç¼–ç ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰äº† Spring ä¹‹åï¼Œåˆ›å»º B çš„å·¥ä½œäº¤ç»™äº† Spring æ¥å®Œæˆï¼ŒSpring åˆ›å»ºå¥½äº† B å¯¹è±¡åå°±æ”¾åˆ°å®¹å™¨ä¸­ï¼ŒA å‘Šè¯‰ Spring æˆ‘éœ€è¦ Bï¼ŒSpring å°±ä»å®¹å™¨ä¸­å–å‡º B äº¤ç»™ A æ¥ä½¿ç”¨ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// IoC æ–¹å¼ï¼šä¾èµ–ç”±å¤–éƒ¨æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // ä¾èµ–æ³¨å…¥ï¼Œä¸å…³å¿ƒå…·ä½“å®ç°</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡³äº B æ˜¯æ€ä¹ˆæ¥çš„ï¼ŒA å°±ä¸å†å…³å¿ƒäº†ï¼ŒSpring å®¹å™¨æƒ³é€šè¿‡ newnew åˆ›å»º B è¿˜æ˜¯ new åˆ›å»º Bï¼Œæ— æ‰€è°“ã€‚</p><p>è¿™å°±æ˜¯ IoC çš„å¥½å¤„ï¼Œå®ƒé™ä½äº†å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œè®©æ¯ä¸ªå¯¹è±¡åªå…³æ³¨è‡ªå·±çš„ä¸šåŠ¡å®ç°ï¼Œä¸å…³å¿ƒå…¶ä»–å¯¹è±¡æ˜¯æ€ä¹ˆåˆ›å»ºçš„ã€‚</p><p>æ¨èé˜…è¯»ï¼š<a href="https://www.cnblogs.com/xdp-gacl/p/4249939.html" target="_blank" rel="noopener noreferrer">å­¤å‚²è‹ç‹¼ï¼šè°ˆè°ˆå¯¹ Spring IOC çš„ç†è§£</a></p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³ 25 å±Šæ—¥å¸¸å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´ä½ å¯¹ AOP å’Œ IoC çš„ç†è§£ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šä»‹ç» Spring IoC å’Œ AOP?</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ‹›å•†é“¶è¡Œé¢ç»åŒå­¦ 6 æ‹›é“¶ç½‘ç»œç§‘æŠ€é¢è¯•åŸé¢˜ï¼šSpringBootæ¡†æ¶çš„AOPã€IOC/DIï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 8 é¢è¯•åŸé¢˜ï¼šIOCï¼ŒAOP</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šè§£é‡Šä¸‹ä»€ä¹ˆæ˜¯IOCå’ŒAOPï¼Ÿåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼ŸIOCå’ŒDIçš„åŒºåˆ«ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 22 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹å‘å–œæŠ¥è¯´æ‹¿åˆ°äº†ä¸¤ä¸ª offer</a>ï¼Œä¸€ä¸ªæ˜¯åš B ç«¯ç”µå•†çš„ï¼Œå¦ä¸€ä¸ªæ˜¯å¤–ä¼ï¼Œä¸»è¦åš Power BI çš„ä½ä»£ç å¼€å‘ï¼Œæˆ‘çš„å»ºè®®æ˜¯å»å¤–ä¼ï¼Œå› ä¸ºå®ä¹ æœ€é‡è¦çš„æ˜¯æ··ä¸ª titleï¼Œæœ‰æ›´å¤šçš„æ—¶é—´ï¼Œå¯ä»¥å»å­¦ä¹ æ˜Ÿçƒé‡Œçš„é¡¹ç›®ï¼Œå…¶å®ä¼šæ›´å®åœ¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-äºŒå“¥ï¼Œç›®å‰æ‹¿åˆ°äº†ä¸¤ä¸ªofferã€‚ç¬¬ä¸€ä¸ªæ˜¯åšbç«¯ç”µ.png" alt="çƒå‹æ‹¿åˆ°äº†å¤–ä¼å’Œç”µå•†çš„ offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†å¤–ä¼å’Œç”µå•†çš„ offer</figcaption></figure><h3 id="_7-èƒ½è¯´ä¸€ä¸‹iocçš„å®ç°æœºåˆ¶å—" tabindex="-1"><a class="header-anchor" href="#_7-èƒ½è¯´ä¸€ä¸‹iocçš„å®ç°æœºåˆ¶å—"><span>7.èƒ½è¯´ä¸€ä¸‹IoCçš„å®ç°æœºåˆ¶å—ï¼Ÿ</span></a></h3><p>å¥½çš„ï¼ŒSpring IoC çš„å®ç°æœºåˆ¶è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæˆ‘å°½é‡ç”¨æ¯”è¾ƒé€šä¿—çš„æ–¹å¼æ¥è§£é‡Šä¸€ä¸‹æ•´ä¸ªæµç¨‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-1d55c63d-2d12-43b1-9f43-428f5f4a1413.png" alt="é¢æ¸£é€†è¢­ï¼šminiç‰ˆæœ¬Spring IoC" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­ï¼šminiç‰ˆæœ¬Spring IoC</figcaption></figure><p>ç¬¬ä¸€æ­¥æ˜¯åŠ è½½ Bean çš„å®šä¹‰ä¿¡æ¯ã€‚Spring ä¼šæ‰«ææˆ‘ä»¬é…ç½®çš„åŒ…è·¯å¾„ï¼Œæ‰¾åˆ°æ‰€æœ‰æ ‡æ³¨äº† <code>@Component</code>ã€<code>@Service</code>ã€<code>@Repository</code> è¿™äº›æ³¨è§£çš„ç±»ï¼Œç„¶åæŠŠè¿™äº›ç±»çš„å…ƒä¿¡æ¯å°è£…æˆ BeanDefinition å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Beanå®šä¹‰ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beanClassName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     // ç±»å</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> scope</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // ä½œç”¨åŸŸ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> lazyInit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ˜¯å¦æ‡’åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">[] dependsOn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // ä¾èµ–çš„Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConstructorArgumentValues</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> constructorArgumentValues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // æ„é€ å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MutablePropertyValues</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> propertyValues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // å±æ€§å€¼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥æ˜¯ Bean å·¥å‚çš„å‡†å¤‡ã€‚Spring ä¼šåˆ›å»ºä¸€ä¸ª DefaultListableBeanFactory ä½œä¸º Bean å·¥å‚æ¥è´Ÿè´£ Bean çš„åˆ›å»ºå’Œç®¡ç†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250623094742.png" alt="æŠ€æœ¯æ´¾æºç ï¼šDefaultListableBeanFactory" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šDefaultListableBeanFactory</figcaption></figure><p>ç¬¬ä¸‰æ­¥æ˜¯ Bean çš„å®ä¾‹åŒ–å’Œåˆå§‹åŒ–ã€‚è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼ŒSpring ä¼šæ ¹æ® BeanDefinition æ¥åˆ›å»º Bean å®ä¾‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250623101221.png" alt="IoCçš„å®ç°æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>IoCçš„å®ç°æœºåˆ¶</figcaption></figure><p>å¯¹äºå•ä¾‹ Beanï¼ŒSpring ä¼šå…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºæ–°å®ä¾‹ã€‚åˆ›å»ºå®ä¾‹çš„æ—¶å€™ä¼šé€šè¿‡åå°„è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œç„¶åè¿›è¡Œå±æ€§æ³¨å…¥ï¼Œæœ€åæ‰§è¡Œåˆå§‹åŒ–å›è°ƒæ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ç®€åŒ–çš„Beanåˆ›å»ºæµç¨‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AbstractBeanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> bd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 1. å®ä¾‹åŒ–å‰å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> resolveBeforeInstantiation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bd);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 2. å®é™…åˆ›å»ºBean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doCreateBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bd);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doCreateBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> bd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 2.1 å®ä¾‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createBeanInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bd);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 2.2 å±æ€§å¡«å……ï¼ˆä¾èµ–æ³¨å…¥ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        populateBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bd, bean);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 2.3 åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> exposedObject</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> initializeBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bean, bd);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> exposedObject;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾èµ–æ³¨å…¥çš„å®ç°ä¸»è¦æ˜¯é€šè¿‡åå°„æ¥å®Œæˆçš„ã€‚æ¯”å¦‚æˆ‘ä»¬ç”¨ <code>@Autowired</code> æ ‡æ³¨äº†ä¸€ä¸ªå­—æ®µï¼ŒSpring åœ¨åˆ›å»º Bean çš„æ—¶å€™ä¼šæ‰«æè¿™ä¸ªå­—æ®µï¼Œç„¶åä»å®¹å™¨ä¸­æ‰¾åˆ°å¯¹åº”ç±»å‹çš„ Beanï¼Œé€šè¿‡åå°„çš„æ–¹å¼è®¾ç½®åˆ°è¿™ä¸ªå­—æ®µä¸Šã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250628110426.png" alt="è´°å¸ˆå…„çš„å± å®°åœºï¼šå„ä¸ªæ³¨è§£çš„æ³¨å…¥æµç¨‹" tabindex="0" loading="lazy"><figcaption>è´°å¸ˆå…„çš„å± å®°åœºï¼šå„ä¸ªæ³¨è§£çš„æ³¨å…¥æµç¨‹</figcaption></figure><h4 id="ä½ æ˜¯æ€ä¹ˆç†è§£-spring-ioc-çš„" tabindex="-1"><a class="header-anchor" href="#ä½ æ˜¯æ€ä¹ˆç†è§£-spring-ioc-çš„"><span>ä½ æ˜¯æ€ä¹ˆç†è§£ Spring IoC çš„ï¼Ÿ</span></a></h4><p>IoC æœ¬è´¨ä¸Šä¸€ä¸ªè¶…çº§å·¥å‚ï¼Œè¿™ä¸ªå·¥å‚çš„äº§å“å°±æ˜¯å„ç§ Bean å¯¹è±¡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-7678c40f-a48d-4bd5-80f8-e902ad688e11.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå·¥å‚è¿è¡Œ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå·¥å‚è¿è¡Œ</figcaption></figure><p>æˆ‘ä»¬é€šè¿‡ <code>@Component</code>ã€<code>@Service</code> è¿™äº›æ³¨è§£å‘Šè¯‰å·¥å‚ï¼šâ€œæˆ‘è¦ç”Ÿäº§ä»€ä¹ˆæ ·çš„äº§å“ï¼Œè¿™ä¸ªäº§å“æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Œéœ€è¦ä»€ä¹ˆåŸææ–™â€ã€‚</p><p>ç„¶åå·¥å‚é‡Œå„ç§ç”Ÿäº§çº¿ï¼Œåœ¨ Spring ä¸­å°±æ˜¯å„ç§ BeanPostProcessorã€‚æ¯”å¦‚ <code>AutowiredAnnotationBeanPostProcessor</code> ä¸“é—¨è´Ÿè´£å¤„ç† <code>@Autowired</code> æ³¨è§£ã€‚</p><p>å·¥å‚é‡Œè¿˜æœ‰å„ç§ç¼“å­˜æœºåˆ¶ç”¨æ¥å­˜æ”¾äº§å“ï¼Œæ¯”å¦‚è¯´ singletonObjects æ˜¯æˆå“ä»“åº“ï¼Œå­˜æ”¾å®Œå·¥çš„å•ä¾‹ Beanï¼›earlySingletonObjects æ˜¯åŠæˆå“ä»“åº“ï¼Œç”¨æ¥è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Springå•ä¾‹Beanæ³¨å†Œè¡¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DefaultSingletonBeanRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ä¸€çº§ç¼“å­˜ï¼šå®Œæˆåˆå§‹åŒ–çš„å•ä¾‹Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">256</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // äºŒçº§ç¼“å­˜ï¼šæ—©æœŸæš´éœ²çš„å•ä¾‹Beanï¼ˆè§£å†³å¾ªç¯ä¾èµ–ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> earlySingletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">16</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ä¸‰çº§ç¼“å­˜ï¼šå•ä¾‹Beanå·¥å‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonFactories </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">16</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getSingleton</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObject</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">singletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">singletonFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (singletonFactory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, singletonObject);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> singletonObject;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€æœ‰æ„æ€çš„æ˜¯ï¼Œè¿™ä¸ªå·¥å‚è¿˜å¾ˆæ™ºèƒ½ï¼Œå®ƒçŸ¥é“äº§å“ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å®ƒä¼šæ ¹æ®ä¾èµ–å…³ç³»æ¥å†³å®š Bean çš„åˆ›å»ºé¡ºåºã€‚å¦‚æœå‘ç°å¾ªç¯ä¾èµ–ï¼Œå®ƒè¿˜ä¼šç”¨ä¸‰çº§ç¼“å­˜æœºåˆ¶æ¥å·§å¦™åœ°è§£å†³ã€‚</p><h4 id="èƒ½æ‰‹å†™ä¸€ä¸ªç®€å•çš„-ioc-å®¹å™¨å—" tabindex="-1"><a class="header-anchor" href="#èƒ½æ‰‹å†™ä¸€ä¸ªç®€å•çš„-ioc-å®¹å™¨å—"><span>èƒ½æ‰‹å†™ä¸€ä¸ªç®€å•çš„ IoC å®¹å™¨å—ï¼Ÿ</span></a></h4><p>1ã€é¦–å…ˆå®šä¹‰åŸºç¡€çš„æ³¨è§£ï¼Œæ¯”å¦‚è¯´ <code>@Component</code>ã€<code>@Autowired</code> ç­‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ç»„ä»¶æ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Target</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">ElementType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">TYPE</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Retention</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RetentionPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RUNTIME</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">interface</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;"> Component</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// è‡ªåŠ¨æ³¨å…¥æ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Target</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">ElementType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">FIELD</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Retention</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RetentionPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RUNTIME</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">interface</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;"> Autowired</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€æ ¸å¿ƒçš„ IoC å®¹å™¨ç±»ï¼Œè´Ÿè´£æ‰«æåŒ…è·¯å¾„ï¼Œåˆ›å»º Bean å®ä¾‹ï¼Œå¹¶å¤„ç†ä¾èµ–æ³¨å…¥ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SimpleIoC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // Beanå®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beans </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * æ³¨å†ŒBean</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // åˆ›å»ºå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> instance</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredConstructor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz, instance);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ›å»ºBeanå¤±è´¥: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * è·å–Bean</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SuppressWarnings</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;unchecked&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (T) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * ä¾èµ–æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> inject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">values</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            injectFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(bean);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * å­—æ®µæ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> injectFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Field</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">fields</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Field</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> field</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> fields) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isAnnotationPresent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Autowired</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setAccessible</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                    Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(bean, dependency);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ³¨å…¥å¤±è´¥: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ã€ä½¿ç”¨ç¤ºä¾‹ï¼Œå®šä¹‰ä¸€äº› Bean ç±»ï¼Œå¹¶æ³¨å†Œåˆ° IoC å®¹å™¨ä¸­ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// DAOå±‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ä¿å­˜ç”¨æˆ·: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Serviceå±‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(name);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç”¨æˆ·åˆ›å»ºå®Œæˆ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        SimpleIoC</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SimpleIoC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ³¨å†ŒBean</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä¾èµ–æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">inject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç‹äºŒ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4ã€å¯ä»¥åŠ ä¸Šç»„ä»¶æ‰«æã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.lang.reflect.Field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SimpleIoC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beans </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * æ‰«æå¹¶æ³¨å†Œç»„ä»¶</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> scan</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> packageName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ç®€åŒ–ç‰ˆï¼šæ‰‹åŠ¨æ·»åŠ éœ€è¦æ‰«æçš„ç±»</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">classes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getClassesInPackage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(packageName);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">clazz</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> classes) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isAnnotationPresent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä¾èµ–æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        inject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     * è·å–åŒ…ä¸‹çš„ç±»ï¼ˆç®€åŒ–å®ç°ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getClassesInPackage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> packageName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // é¢è¯•æ—¶å¯ä»¥è¯´ï¼š&quot;å®é™…å®ç°éœ€è¦æ‰«æclasspathï¼Œè¿™é‡Œç®€åŒ–å¤„ç†&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Arrays</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">asList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> instance</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredConstructor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz, instance);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ›å»ºBeanå¤±è´¥&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SuppressWarnings</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;unchecked&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (T) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> inject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">values</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Field</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">fields</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Field</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> field</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> fields) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isAnnotationPresent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Autowired</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setAccessible</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(bean, dependency);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                        throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ³¨å…¥å¤±è´¥&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>IoC å®¹å™¨çš„æ ¸å¿ƒæ˜¯ç®¡ç†å¯¹è±¡å’Œä¾èµ–æ³¨å…¥ï¼Œé¦–å…ˆå®šä¹‰æ³¨è§£ï¼Œç„¶åå®ç°å®¹å™¨çš„ä¸‰ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼šæ³¨å†ŒBeanã€è·å–Beanã€ä¾èµ–æ³¨å…¥ï¼›å…³é”®æ˜¯ç”¨åå°„åˆ›å»ºå¯¹è±¡å’Œæ³¨å…¥ä¾èµ–ã€‚</p><p>memoï¼š2025 å¹´ 6 æœˆ 23 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹å‘å–œæŠ¥è¯´æ‹¿åˆ°äº†äº¬ä¸œçš„ç¤¾æ‹› offer</a>ï¼Œè¿™çœŸçš„è¦æ­å–œä»–ï¼Œä¹Ÿå¸Œæœ›æ‰€æœ‰çœ‹åˆ°è¿™é‡Œçš„å°ä¼™ä¼´éƒ½èƒ½æœ‰ä¸€ä¸ªå¥½çš„ç»“æœã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250623105438.png" alt="çƒå‹æ‹¿åˆ°äº¬ä¸œç¤¾æ‹› offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº¬ä¸œç¤¾æ‹› offer</figcaption></figure><h3 id="_8-è¯´è¯´beanfactoryå’Œapplicantcontextçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_8-è¯´è¯´beanfactoryå’Œapplicantcontextçš„åŒºåˆ«"><span>8.è¯´è¯´BeanFactoryå’ŒApplicantContextçš„åŒºåˆ«?</span></a></h3><p>BeanFactory ç®—æ˜¯ Spring çš„â€œå¿ƒè„â€ï¼Œè€Œ ApplicantContext å¯ä»¥è¯´æ˜¯ Spring çš„å®Œæ•´â€œèº«èº¯â€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-66328446-f89f-4b7a-8d9f-0e1145dd9b2f.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanFactoryå’ŒApplicantContext" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanFactoryå’ŒApplicantContext</figcaption></figure><p>BeanFactory æä¾›äº†æœ€åŸºæœ¬çš„ IoC èƒ½åŠ›ã€‚å®ƒå°±åƒæ˜¯ä¸€ä¸ª Bean å·¥å‚ï¼Œè´Ÿè´£ Bean çš„åˆ›å»ºå’Œç®¡ç†ã€‚ä»–é‡‡ç”¨çš„æ˜¯æ‡’åŠ è½½çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å½“æˆ‘ä»¬çœŸæ­£å»è·å–æŸä¸ª Bean çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šå»åˆ›å»ºè¿™ä¸ª Beanã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-6e6d4b69-f36c-41e6-b8ba-9277be147c9b.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring5 BeanFactoryç»§æ‰¿ä½“ç³»" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring5 BeanFactoryç»§æ‰¿ä½“ç³»</figcaption></figure><p>å®ƒæœ€ä¸»è¦çš„æ–¹æ³•å°±æ˜¯ <code>getBean()</code>ï¼Œè´Ÿè´£ä»å®¹å™¨ä¸­è¿”å›ç‰¹å®šåç§°æˆ–è€…ç±»å‹çš„ Bean å®ä¾‹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BeanFactoryExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // åˆ›å»º BeanFactory</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        DefaultListableBeanFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DefaultListableBeanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰‹åŠ¨æ³¨å†Œ Bean å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        BeanDefinition</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RootBeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        beanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">registerBeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userService&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, beanDefinition);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‡’åŠ è½½ï¼šæ­¤æ—¶æ‰åˆ›å»º Bean å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> beanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userService&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ApplicationContext æ˜¯ BeanFactory çš„å­æ¥å£ï¼Œåœ¨ BeanFactory çš„åŸºç¡€ä¸Šæ‰©å±•äº†å¾ˆå¤šä¼ä¸šçº§çš„åŠŸèƒ½ã€‚å®ƒä¸ä»…åŒ…å«äº† BeanFactory çš„æ‰€æœ‰åŠŸèƒ½ï¼Œè¿˜æä¾›äº†å›½é™…åŒ–æ”¯æŒã€äº‹ä»¶å‘å¸ƒæœºåˆ¶ã€AOPã€JDBCã€ORM æ¡†æ¶é›†æˆç­‰ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-e201c9a3-f23c-4768-b844-ac7e0ba4bcec.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring5 ApplicationContextéƒ¨åˆ†ä½“ç³»ç±»å›¾" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring5 ApplicationContextéƒ¨åˆ†ä½“ç³»ç±»å›¾</figcaption></figure><p>ApplicationContext é‡‡ç”¨çš„æ˜¯é¥¿åŠ è½½çš„æ–¹å¼ï¼Œå®¹å™¨å¯åŠ¨çš„æ—¶å€™å°±ä¼šæŠŠæ‰€æœ‰çš„å•ä¾‹ Bean éƒ½åˆ›å»ºå¥½ï¼Œè™½ç„¶è¿™æ ·ä¼šå¯¼è‡´å¯åŠ¨æ—¶é—´é•¿ä¸€ç‚¹ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½æ›´å¥½ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ApplicationContextExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // åˆ›å»º ApplicationContextï¼Œå¯åŠ¨æ—¶å°±åˆ›å»ºæ‰€æœ‰ Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ApplicationContext</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> AnnotationConfigApplicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // è·å– Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å‘å¸ƒäº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">publishEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CustomEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Hello World&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»ä½¿ç”¨åœºæ™¯æ¥è¯´ï¼Œå®é™…å¼€å‘ä¸­ç”¨å¾—æœ€å¤šçš„æ˜¯ ApplicationContextã€‚åƒ AnnotationConfigApplicationContextã€WebApplicationContext è¿™äº›éƒ½æ˜¯ ApplicationContext çš„å®ç°ç±»ã€‚</p><p>å¦å¤–ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚ApplicationContext ä¼šè‡ªåŠ¨è°ƒç”¨ Bean çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼Œè€Œ BeanFactory éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç®¡ç†ã€‚</p><p>åœ¨ Spring Boot é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>@Autowired</code> æ³¨å…¥ ApplicationContextï¼Œæˆ–è€…é€šè¿‡å®ç° ApplicationContextAware æ¥å£æ¥è·å– ApplicationContextã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250625111259.png" alt="æŠ€æœ¯æ´¾æºç ï¼šè·å–ApplicationContext" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šè·å–ApplicationContext</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 2 ä¼˜é€‰ç‰©æµè°ƒåº¦æŠ€æœ¯ 2 é¢é¢è¯•åŸé¢˜ï¼šBeanFactoryå’ŒApplicationContext</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 25 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©ç»™ä¸€ä¸ªåç§‘æœ¬ç¡•ç ” 0 çš„<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä¿®æ”¹ç®€å†</a>åï¼Œå‘æ¥è¿™æ ·çš„æ„Ÿæ…¨ï¼Œè¦æ˜¯æ—©ç‚¹çŸ¥é“ä½ çš„<a href="https://javabetter.cn/home.html" target="_blank" rel="noopener noreferrer">ç½‘ç«™</a>å’Œ<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æ˜Ÿçƒ</a>å°±å¥½äº†ï¼Œ<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>ä¸æ¯”å¤–å–å¼ºå¤šäº†ï¼Ÿå†æ¬¡æ„Ÿè°¢äºŒå“¥ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250625111617.png" alt="çƒå‹å¯¹æ˜Ÿçƒç›¸è§æ¨æ™š" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹æ˜Ÿçƒç›¸è§æ¨æ™š</figcaption></figure><h3 id="_9-ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶springçš„iocä¼šåšä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_9-ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶springçš„iocä¼šåšä»€ä¹ˆ"><span>9.ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶Springçš„IoCä¼šåšä»€ä¹ˆï¼Ÿ</span></a></h3><p>ç¬¬ä¸€ä»¶äº‹æ˜¯æ‰«æå’Œæ³¨å†Œ Beanã€‚IoC å®¹å™¨ä¼šæ ¹æ®æˆ‘ä»¬çš„é…ç½®ï¼Œæ¯”å¦‚ <code>@ComponentScan</code> æŒ‡å®šçš„åŒ…è·¯å¾„ï¼Œå»æ‰«ææ‰€æœ‰æ ‡æ³¨äº† <code>@Component</code>ã€<code>@Service</code>ã€<code>@Controller</code> è¿™äº›æ³¨è§£çš„ç±»ã€‚ç„¶åæŠŠè¿™äº›ç±»çš„å…ƒä¿¡æ¯åŒ…è£…æˆ BeanDefinition å¯¹è±¡ï¼Œæ³¨å†Œåˆ°å®¹å™¨çš„ BeanDefinitionRegistry ä¸­ã€‚è¿™ä¸ªé˜¶æ®µåªæ˜¯æ”¶é›†ä¿¡æ¯ï¼Œè¿˜æ²¡æœ‰çœŸæ­£åˆ›å»ºå¯¹è±¡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250627101759.png" alt="pdai.techï¼šIoC" tabindex="0" loading="lazy"><figcaption>pdai.techï¼šIoC</figcaption></figure><p>ç¬¬äºŒä»¶äº‹æ˜¯ Bean çš„å®ä¾‹åŒ–å’Œæ³¨å…¥ã€‚è¿™æ˜¯æœ€æ ¸å¿ƒçš„è¿‡ç¨‹ï¼ŒIoC å®¹å™¨ä¼šæŒ‰ç…§ä¾èµ–å…³ç³»çš„é¡ºåºå¼€å§‹åˆ›å»º Bean å®ä¾‹ã€‚å¯¹äºå•ä¾‹ Beanï¼Œå®¹å™¨ä¼šé€šè¿‡åå°„è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå®ä¾‹ï¼Œç„¶åè¿›è¡Œå±æ€§æ³¨å…¥ï¼Œæœ€åæ‰§è¡Œåˆå§‹åŒ–å›è°ƒæ–¹æ³•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250627102651.png" alt="Tomå¼¹æ¶æ„ï¼šBean çš„å®ä¾‹åŒ–å’Œæ³¨å…¥" tabindex="0" loading="lazy"><figcaption>Tomå¼¹æ¶æ„ï¼šBean çš„å®ä¾‹åŒ–å’Œæ³¨å…¥</figcaption></figure><p>åœ¨ä¾èµ–æ³¨å…¥æ—¶ï¼Œå®¹å™¨ä¼šæ ¹æ® <code>@Autowired</code>ã€<code>@Resource</code> è¿™äº›æ³¨è§£ï¼ŒæŠŠç›¸åº”çš„ä¾èµ–å¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡ Bean ä¸­ã€‚æ¯”å¦‚ UserService éœ€è¦ UserDaoï¼Œå®¹å™¨å°±ä¼šæŠŠ UserDao çš„å®ä¾‹æ³¨å…¥åˆ° UserService ä¸­ã€‚</p><h4 id="è¯´è¯´springçš„beanå®ä¾‹åŒ–æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´springçš„beanå®ä¾‹åŒ–æ–¹å¼"><span>è¯´è¯´Springçš„Beanå®ä¾‹åŒ–æ–¹å¼ï¼Ÿ</span></a></h4><p>Spring æä¾›äº† 4 ç§æ–¹å¼æ¥å®ä¾‹åŒ– Beanï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚</p><p>ç¬¬ä¸€ç§æ˜¯é€šè¿‡æ„é€ æ–¹æ³•å®ä¾‹åŒ–ï¼Œè¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼ã€‚å½“æˆ‘ä»¬ç”¨ <code>@Component</code>ã€<code>@Service</code> è¿™äº›æ³¨è§£æ ‡æ³¨ç±»çš„æ—¶å€™ï¼ŒSpring é»˜è®¤é€šè¿‡æ— å‚æ„é€ å™¨æ¥åˆ›å»ºå®ä¾‹çš„ã€‚å¦‚æœç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ æ–¹æ³•ï¼ŒSpring ä¼šè‡ªåŠ¨è¿›è¡Œæ„é€ æ–¹æ³•æ³¨å…¥ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">UserDao</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ„é€ æ–¹æ³•æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> userDao;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§æ˜¯é€šè¿‡é™æ€å·¥å‚æ–¹æ³•å®ä¾‹åŒ–ã€‚æœ‰æ—¶å€™å¯¹è±¡çš„åˆ›å»ºæ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ä¼šå†™ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•æ¥åˆ›å»ºï¼Œç„¶åç”¨ <code>@Bean</code> æ³¨è§£æ¥æ ‡æ³¨è¿™ä¸ªæ–¹æ³•ã€‚Spring ä¼šè°ƒç”¨è¿™ä¸ªé™æ€æ–¹æ³•æ¥è·å– Bean å®ä¾‹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å¤æ‚çš„DataSourceåˆ›å»ºé€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> HikariDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰ç§æ˜¯é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•å®ä¾‹åŒ–ã€‚è¿™ç§æ–¹å¼æ˜¯å…ˆåˆ›å»ºå·¥å‚å¯¹è±¡ï¼Œç„¶åé€šè¿‡å·¥å‚å¯¹è±¡çš„æ–¹æ³•æ¥åˆ›å»ºBeanï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConnectionFactory</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> connectionFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ConnectionFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Connection</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createConnection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ConnectionFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createConnection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››ç§æ˜¯é€šè¿‡ FactoryBean æ¥å£å®ä¾‹åŒ–ã€‚è¿™æ˜¯ Spring æä¾›çš„ä¸€ä¸ªç‰¹æ®Šæ¥å£ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ›å»ºå¤æ‚å¯¹è±¡çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyFactoryBean</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> FactoryBean</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyObject</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyObject</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å¤æ‚çš„å¯¹è±¡åˆ›å»ºé€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getObjectType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> MyObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œç”¨å¾—æœ€å¤šçš„è¿˜æ˜¯æ„é€ æ–¹æ³•å®ä¾‹åŒ–ï¼Œå› ä¸ºç®€å•ç›´æ¥ã€‚å·¥å‚æ–¹æ³•ä¸€èˆ¬ç”¨åœ¨éœ€è¦å¤æ‚åˆå§‹åŒ–é€»è¾‘çš„åœºæ™¯ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥æ± ã€æ¶ˆæ¯é˜Ÿåˆ—è¿æ¥è¿™äº›ã€‚FactoryBean ä¸»è¦æ˜¯åœ¨æ¡†æ¶å¼€å‘æˆ–è€…éœ€è¦åŠ¨æ€åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ä½¿ç”¨ã€‚</p><p>Spring åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ä¼šæ ¹æ® Bean çš„å®šä¹‰è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ–¹å¼ï¼Œæˆ‘ä»¬ä½œä¸ºå¼€å‘è€…ä¸»è¦æ˜¯é€šè¿‡æ³¨è§£å’Œé…ç½®æ¥å‘Šè¯‰ Spring åº”è¯¥æ€ä¹ˆåˆ›å»ºå¯¹è±¡ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´ Spring çš„ Bean å®ä¾‹åŒ–æ–¹å¼</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 2 ä¼˜é€‰ç‰©æµè°ƒåº¦æŠ€æœ¯ 2 é¢é¢è¯•åŸé¢˜ï¼šbeanåŠ å·¥æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 27 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©çœ‹åˆ°<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹å‘çš„ offer é€‰æ‹©æé—®è´´</a>ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯æ­å·å…­å°é¾™ç¾¤æ ¸ç§‘æŠ€ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºè¿˜æ˜¯éå¸¸å€¼å¾—å»çš„ï¼Œæ¯•ç«Ÿæ˜¯æ­å·çš„ç‹¬è§’å…½å…¬å¸ï¼Œè–ªèµ„å¾…é‡éƒ½ä¸é”™ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250627103801.png" alt="çƒå‹æ‹¿åˆ°äº†æ­å·ç¾¤æ ¸ç§‘æŠ€çš„ offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†æ­å·ç¾¤æ ¸ç§‘æŠ€çš„ offer</figcaption></figure><h3 id="_10-ä½ æ˜¯æ€ä¹ˆç†è§£beançš„" tabindex="-1"><a class="header-anchor" href="#_10-ä½ æ˜¯æ€ä¹ˆç†è§£beançš„"><span>10.ä½ æ˜¯æ€ä¹ˆç†è§£Beançš„ï¼Ÿ</span></a></h3><p>åœ¨æˆ‘çœ‹æ¥ï¼ŒBean æœ¬è´¨ä¸Šå°±æ˜¯ç”± Spring å®¹å™¨ç®¡ç†çš„ Java å¯¹è±¡ï¼Œä½†å®ƒå’Œæ™®é€šçš„ Java å¯¹è±¡æœ‰å¾ˆå¤§åŒºåˆ«ã€‚æ™®é€šçš„ Java å¯¹è±¡æˆ‘ä»¬æ˜¯é€šè¿‡ new å…³é”®å­—åˆ›å»ºçš„ã€‚è€Œ Bean æ˜¯äº¤ç»™ Spring å®¹å™¨æ¥ç®¡ç†çš„ï¼Œä»åˆ›å»ºåˆ°é”€æ¯éƒ½ç”±å®¹å™¨è´Ÿè´£ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250628110931.png" alt="stack overflowï¼šbean çš„åˆå§‹åŒ–è¿‡ç¨‹" tabindex="0" loading="lazy"><figcaption>stack overflowï¼šbean çš„åˆå§‹åŒ–è¿‡ç¨‹</figcaption></figure><p>ä»å®é™…ä½¿ç”¨çš„è§’åº¦æ¥è¯´ï¼Œæˆ‘ä»¬é¡¹ç›®é‡Œçš„ Serviceã€Daoã€Controller è¿™äº›éƒ½æ˜¯ Beanã€‚æ¯”å¦‚ UserService è¢«æ ‡æ³¨äº† <code>@Service</code> æ³¨è§£ï¼Œå®ƒå°±æˆäº†ä¸€ä¸ª Beanï¼ŒSpring ä¼šè‡ªåŠ¨åˆ›å»ºå®ƒçš„å®ä¾‹ï¼Œç®¡ç†å®ƒçš„ä¾èµ–å…³ç³»ï¼Œå½“å…¶ä»–åœ°æ–¹éœ€è¦ç”¨åˆ° UserService çš„æ—¶å€™ï¼ŒSpring å°±ä¼šæŠŠè¿™ä¸ªå®ä¾‹æ³¨å…¥è¿›å»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250628111222.png" alt="æŠ€æœ¯æ´¾æºç ï¼šUserService" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šUserService</figcaption></figure><p>è¿™ç§ä¾èµ–æ³¨å…¥çš„æ–¹å¼è®©å¯¹è±¡ä¹‹é—´çš„å…³ç³»å˜å¾—æ¾è€¦åˆã€‚</p><p>Spring æä¾›äº†å¤šç§ Bean çš„é…ç½®æ–¹å¼ï¼ŒåŸºäºæ³¨è§£çš„æ–¹å¼æ˜¯æœ€å¸¸ç”¨çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20241224163146.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šBean çš„å£°æ˜æ–¹å¼" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šBean çš„å£°æ˜æ–¹å¼</figcaption></figure><p>åŸºäº XML é…ç½®çš„æ–¹å¼åœ¨ Spring Boot é¡¹ç›®ä¸­å·²ç»ä¸æ€ä¹ˆç”¨äº†ã€‚Java é…ç½®ç±»çš„æ–¹å¼åˆ™å¯ä»¥ç”¨æ¥è§£å†³ä¸€äº›æ¯”è¾ƒå¤æ‚çš„åœºæ™¯ï¼Œæ¯”å¦‚è¯´ä¸»ä»æ•°æ®æºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>@Primary</code> æ³¨è§£æ ‡æ³¨ä¸»æ•°æ®æºï¼Œç”¨ <code>@Qualifier</code> æ¥æŒ‡å®šå¤‡ç”¨æ•°æ®æºã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Primary</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // ä¸»è¦å€™é€‰è€…</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> primaryDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> HikariDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Qualifier</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;secondary&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> secondaryDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> BasicDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬ç›´æ¥ç”¨ <code>@Autowired</code> æ³¨è§£æ³¨å…¥ DataSource æ—¶ï¼ŒSpring é»˜è®¤ä¼šä½¿ç”¨ HikariDataSourceï¼›å½“åŠ ä¸Š <code>@Qualifier(&quot;secondary&quot;)</code> æ³¨è§£æ—¶ï¼ŒSpring åˆ™ä¼šæ³¨å…¥ BasicDataSourceã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // ä¼šæ³¨å…¥ primaryDataSourceï¼ˆå› ä¸ºæœ‰ @Primaryï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Qualifier</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;secondary&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> secondaryDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="component-å’Œ-bean-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#component-å’Œ-bean-æœ‰ä»€ä¹ˆåŒºåˆ«"><span>@Component å’Œ @Bean æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h4><p>é¦–å…ˆä»ä½¿ç”¨ä¸Šæ¥è¯´ï¼Œ<code>@Component</code> æ˜¯æ ‡æ³¨åœ¨ç±»ä¸Šçš„ï¼Œè€Œ <code>@Bean</code> æ˜¯æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šçš„ã€‚<code>@Component</code> å‘Šè¯‰ Spring è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè¯·æŠŠå®ƒæ³¨å†Œä¸º Beanï¼Œè€Œ <code>@Bean</code> åˆ™å‘Šè¯‰ Spring è¯·å°†è¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡æ³¨å†Œä¸º Beanã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // Springè‡ªåŠ¨åˆ›å»ºUserServiceå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºDataSourceå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> dataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        HikariDataSource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ds</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> HikariDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setJdbcUrl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;root&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setPassword</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;123456&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ds;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// è¿”å›ç»™Springç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»æ§åˆ¶æƒçš„è§’åº¦æ¥è¯´ï¼Œ<code>@Component</code> æ˜¯ç”± Spring è‡ªåŠ¨åˆ›å»ºå’Œç®¡ç†çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250628114006.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Component" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Component</figcaption></figure><p>è€Œ <code>@Bean</code> åˆ™æ˜¯ç”±æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºçš„ï¼Œç„¶åå†äº¤ç»™ Spring ç®¡ç†ï¼Œæˆ‘ä»¬å¯¹å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹æœ‰å®Œå…¨çš„æ§åˆ¶æƒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250628114149.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Bean" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Bean</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šæ€ä¹ˆç†è§£springçš„beanï¼Œ@Component å’Œ @Bean çš„åŒºåˆ«</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 28 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®çƒå‹<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œåˆç¢°åˆ°ä¸€ä¸ªæ­ç”µæœ¬ç¡•çš„çƒå‹ã€‚æˆ‘è¿™é‡Œæƒ³è¯´çš„ä¸€ç‚¹æ˜¯ï¼Œæ­ç”µçš„è®¡ç®—æœºä¸“ä¸šéå¸¸å¼ºï¼Œè™½ç„¶ä»–åªæ˜¯ä¸€æ‰€åŒéï¼Œå¦‚æœèƒ½æŠŠé¡¹ç›®ç»å†ã€ä¸“ä¸šæŠ€èƒ½å¥½å¥½å†™çš„è¯ï¼Œæ‹¿ä¸ªå¤§å‚çš„é¡¶çº§ offer æ˜¯å®Œå…¨æ²¡é—®é¢˜çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯.png" alt="æ­å·ç”µå­ç§‘æŠ€å¤§å­¦æœ¬ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>æ­å·ç”µå­ç§‘æŠ€å¤§å­¦æœ¬ç¡•çš„çƒå‹</figcaption></figure><h3 id="_11-ğŸŒŸèƒ½è¯´ä¸€ä¸‹beançš„ç”Ÿå‘½å‘¨æœŸå—" tabindex="-1"><a class="header-anchor" href="#_11-ğŸŒŸèƒ½è¯´ä¸€ä¸‹beançš„ç”Ÿå‘½å‘¨æœŸå—"><span>11.ğŸŒŸèƒ½è¯´ä¸€ä¸‹Beançš„ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ</span></a></h3><p>æ¨èé˜…è¯»ï¼š<a href="https://mp.weixin.qq.com/s/zb6eA3Se0gQoqL8PylCPLw" target="_blank" rel="noopener noreferrer">ä¸‰åˆ†æ¶ï¼šSpring Bean ç”Ÿå‘½å‘¨æœŸï¼Œå¥½åƒäººçš„ä¸€ç”Ÿ</a></p><p>å¥½çš„ã€‚</p><p>Bean çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸º 5 ä¸ªä¸»è¦é˜¶æ®µï¼Œæˆ‘æŒ‰ç…§å®é™…çš„æ‰§è¡Œé¡ºåºæ¥è¯´ä¸€ä¸‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-595fce5b-36cb-4dcb-b08c-8205a1e98d8a.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanç”Ÿå‘½å‘¨æœŸäº”ä¸ªé˜¶æ®µ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanç”Ÿå‘½å‘¨æœŸäº”ä¸ªé˜¶æ®µ</figcaption></figure><p>ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯å®ä¾‹åŒ–ã€‚Spring å®¹å™¨ä¼šæ ¹æ® BeanDefinitionï¼Œé€šè¿‡åå°„è°ƒç”¨ Bean çš„æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚å¦‚æœæœ‰å¤šä¸ªæ„é€ æ–¹æ³•ï¼ŒSpring ä¼šæ ¹æ®ä¾èµ–æ³¨å…¥çš„è§„åˆ™é€‰æ‹©åˆé€‚çš„æ„é€ æ–¹æ³•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-942a927a-86e4-4a01-8f52-9addd89642ff.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Beanç”Ÿå‘½å‘¨æœŸ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Beanç”Ÿå‘½å‘¨æœŸ</figcaption></figure><p>ç¬¬äºŒé˜¶æ®µæ˜¯å±æ€§èµ‹å€¼ã€‚è¿™ä¸ªé˜¶æ®µ Spring ä¼šç»™ Bean çš„å±æ€§èµ‹å€¼ï¼ŒåŒ…æ‹¬é€šè¿‡ <code>@Autowired</code>ã€<code>@Resource</code> è¿™äº›æ³¨è§£æ³¨å…¥çš„ä¾èµ–å¯¹è±¡ï¼Œä»¥åŠé€šè¿‡ <code>@Value</code> æ³¨å…¥çš„é…ç½®å€¼ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240311101430.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šdoCreateBean æ–¹æ³•æºç " tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šdoCreateBean æ–¹æ³•æºç </figcaption></figure><p>ç¬¬ä¸‰é˜¶æ®µæ˜¯åˆå§‹åŒ–ã€‚è¿™ä¸ªé˜¶æ®µä¼šä¾æ¬¡æ‰§è¡Œï¼š</p><ul><li><code>@PostConstruct</code> æ ‡æ³¨çš„æ–¹æ³•</li><li>InitializingBean æ¥å£çš„ afterPropertiesSet æ–¹æ³•</li><li>é€šè¿‡ <code>@Bean</code> çš„ initMethod æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-d2da20a3-08d0-4648-b9a3-2fff8512b159.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanç”Ÿå‘½å‘¨æœŸæºç è¿½è¸ª" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanç”Ÿå‘½å‘¨æœŸæºç è¿½è¸ª</figcaption></figure><p>æˆ‘åœ¨é¡¹ç›®ä¸­ç»å¸¸ç”¨ <code>@PostConstruct</code> æ¥åšä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œæ¯”å¦‚ç¼“å­˜é¢„åŠ è½½ã€DB é…ç½®ç­‰ç­‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// CategoryServiceImplä¸­çš„ç¼“å­˜åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> init</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    categoryCaches </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> CacheBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">maximumSize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CacheLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CategoryDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CategoryDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">NotNull</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> categoryId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            CategoryDO</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> category</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> categoryDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(categoryId);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// DynamicConfigContainerä¸­çš„é…ç½®åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> init</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    cache </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Maps</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    bindBeansFromLocalCache</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;dbConfig&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> cache)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆå§‹åŒ–åï¼ŒSpring è¿˜ä¼šè°ƒç”¨æ‰€æœ‰æ³¨å†Œçš„ BeanPostProcessor åç½®å¤„ç†æ–¹æ³•ã€‚è¿™ä¸ªé˜¶æ®µç»å¸¸ç”¨æ¥åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œæ¯”å¦‚ AOP ä»£ç†ã€‚</p><p>ç¬¬äº”é˜¶æ®µæ˜¯ä½¿ç”¨ Beanã€‚æ¯”å¦‚æˆ‘ä»¬çš„ Controller è°ƒç”¨ Serviceï¼ŒService è°ƒç”¨ DAOã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserControllerä¸­çš„ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/users/{id}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getUser</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getUserById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserServiceä¸­çš„ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getUserById</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// UserDaoä¸­çš„ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JdbcTemplate</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> jdbcTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getById</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sql </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;SELECT * FROM users WHERE id = ?&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> jdbcTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">queryForObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[]{id}, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserRowMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åæ˜¯é”€æ¯é˜¶æ®µã€‚å½“å®¹å™¨å…³é—­æˆ–è€… Bean è¢«ç§»é™¤çš„æ—¶å€™ï¼Œä¼šä¾æ¬¡æ‰§è¡Œï¼š</p><ul><li><code>@PreDestroy</code> æ ‡æ³¨çš„æ–¹æ³•</li><li>DisposableBean æ¥å£çš„ destroy æ–¹æ³•</li><li>é€šè¿‡ <code>@Bean</code> çš„ destroyMethod æŒ‡å®šçš„é”€æ¯æ–¹æ³•</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240311101658.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šclose æºç " tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šclose æºç </figcaption></figure><h4 id="aware-ç±»å‹çš„æ¥å£æœ‰ä»€ä¹ˆä½œç”¨" tabindex="-1"><a class="header-anchor" href="#aware-ç±»å‹çš„æ¥å£æœ‰ä»€ä¹ˆä½œç”¨"><span>Aware ç±»å‹çš„æ¥å£æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</span></a></h4><p>Aware æ¥å£åœ¨ Spring ä¸­æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„è®¾è®¡ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯è®© Bean èƒ½å¤Ÿæ„ŸçŸ¥åˆ° Spring å®¹å™¨çš„ä¸€äº›å†…éƒ¨ç»„ä»¶ã€‚</p><p>ä»è®¾è®¡ç†å¿µæ¥è¯´ï¼ŒAware æ¥å£å®ç°äº†ä¸€ç§â€œå›è°ƒâ€æœºåˆ¶ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒBean ä¸åº”è¯¥ç›´æ¥ä¾èµ– Spring å®¹å™¨ï¼Œè¿™æ ·å¯ä»¥ä¿æŒä»£ç çš„ç‹¬ç«‹æ€§ã€‚ä½†æœ‰äº›æ—¶å€™ï¼ŒBean ç¡®å®éœ€è¦è·å–å®¹å™¨çš„ä¸€äº›ä¿¡æ¯æˆ–è€…ç»„ä»¶ï¼ŒAware æ¥å£å°±æä¾›äº†è¿™æ ·ä¸€ä¸ªèƒ½åŠ›ã€‚</p><p>æˆ‘æœ€å¸¸ç”¨çš„ Aware æ¥å£æ˜¯ ApplicationContextAwareï¼Œå®ƒå¯ä»¥è®© Bean è·å–åˆ° ApplicationContext å®¹å™¨æœ¬èº«ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250630100429.png" alt="æŠ€æœ¯æ´¾æºç ï¼šApplicationContextAware" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šApplicationContextAware</figcaption></figure><p>åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾é¡¹ç›®</a>ä¸­ï¼Œæˆ‘å°±é€šè¿‡å®ç° ApplicationContextAware å’Œ EnvironmentAware æ¥å£å°è£…äº†ä¸€ä¸ª SpringUtil å·¥å…·ç±»ï¼Œé€šè¿‡ getBean å’Œ getProperty æ–¹æ³•æ¥è·å– Bean å’Œé…ç½®å±æ€§ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// é™æ€æ–¹æ³•è·å–Beanï¼Œæ–¹ä¾¿åœ¨éSpringç®¡ç†çš„ç±»ä¸­ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> clazz) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// è·å–é…ç½®å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> key) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(key);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¦‚æœé…ç½®äº†-init-method-å’Œ-destroy-method-spring-ä¼šåœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å…¶é…ç½®çš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å¦‚æœé…ç½®äº†-init-method-å’Œ-destroy-method-spring-ä¼šåœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å…¶é…ç½®çš„æ–¹æ³•"><span>å¦‚æœé…ç½®äº† init-method å’Œ destroy-methodï¼ŒSpring ä¼šåœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å…¶é…ç½®çš„æ–¹æ³•ï¼Ÿ</span></a></h4><p>init-method æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•ä¼šåœ¨ Bean çš„åˆå§‹åŒ–é˜¶æ®µè¢«è°ƒç”¨ï¼Œå…·ä½“çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼š</p><ul><li>å…ˆæ‰§è¡Œ <code>@PostConstruct</code> æ ‡æ³¨çš„æ–¹æ³•</li><li>ç„¶åæ‰§è¡Œ InitializingBean æ¥å£çš„ <code>afterPropertiesSet()</code> æ–¹æ³•</li><li>æœ€åå†æ‰§è¡Œ init-method æŒ‡å®šçš„æ–¹æ³•</li></ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œinit-method æ˜¯åœ¨æ‰€æœ‰å…¶ä»–åˆå§‹åŒ–æ–¹æ³•ä¹‹åæ‰§è¡Œçš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> postConstruct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1. @PostConstructæ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> customInit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// é€šè¿‡@Beançš„initMethodæŒ‡å®š</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;3. init-methodæ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">initMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;customInit&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> myService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>destroy-method ä¼šåœ¨ Bean é”€æ¯é˜¶æ®µè¢«è°ƒç”¨ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PreDestroy</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> preDestroy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1. @PreDestroyæ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> customDestroy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// é€šè¿‡@Beançš„destroyMethodæŒ‡å®š</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;3. destroy-methodæ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸è¿‡åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸ç”¨ <code>@PostConstruct</code> å’Œ <code>@PreDestroy</code> å°±å¤Ÿäº†ï¼Œå®ƒä»¬æ›´ç®€æ´ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³ 25 å±Šæ—¥å¸¸å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´ Bean çš„ç”Ÿå‘½å‘¨æœŸ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šSpringä¸­beanç”Ÿå‘½å‘¨æœŸ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„8 åç«¯å¼€å‘ç§‹æ‹›ä¸€é¢é¢è¯•åŸé¢˜ï¼šè®²ä¸€ä¸‹Spring Beançš„ç”Ÿå‘½å‘¨æœŸ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šbeanç”Ÿå‘½å‘¨æœŸ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šä»‹ç»ä¸‹Beançš„ç”Ÿå‘½å‘¨æœŸï¼ŸAwareç±»å‹æ¥å£çš„ä½œç”¨ï¼Ÿå¦‚æœé…ç½®äº†init-methodå’Œdestroy-methodï¼ŒSpringä¼šåœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å…¶é…ç½®çš„æ–¹æ³•ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 30 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚æ˜¨å¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">è¯»è€…å‘æ¶ˆæ¯è¯´æœ‰ä¸‰ä¸ª offer è¦é€‰æ‹©</a>ï¼Œä¸­ç§‘å¤§è¯»åšã€ä¸­æµ·æ²¹ã€å•†é£åŒ—ç ”ï¼Œé—®æˆ‘è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿè¯´å®è¯ï¼Œè¿™ä¸‰ä¸ªéƒ½æ˜¯éå¸¸ä¼˜è´¨çš„é€‰æ‹©ï¼Œæˆ‘ä¸ªäººçš„å»ºè®®æ˜¯ä¼˜å…ˆè€ƒè™‘ä¸­ç§‘å¤§è¯»åšï¼Œæ¯•ç«Ÿæ˜¯å›½å†…é¡¶å°–å­¦åºœï¼Œåšå£«æ¯•ä¸šåå¯ä»¥é€‰æ‹©åœ¨é«˜æ ¡ä»»æ•™ï¼Œä¼šæ›´ç¬¦åˆä»–çš„å®¶åº­æ¡ä»¶ï¼Œå½“ç„¶äº†ï¼Œæˆ‘æ·±çŸ¥ï¼Œè¯»åšçš„äº§å‡ºå‹åŠ›éå¸¸å¤§ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250630101647.png" alt="è¯»è€…æ‹¿åˆ°ä¸­ç§‘å¤§è¯»åšã€ä¸­æµ·æ²¹ã€å•†é£åŒ—ç ”" tabindex="0" loading="lazy"><figcaption>è¯»è€…æ‹¿åˆ°ä¸­ç§‘å¤§è¯»åšã€ä¸­æµ·æ²¹ã€å•†é£åŒ—ç ”</figcaption></figure><h3 id="_12-ä¸ºä»€ä¹ˆideaä¸æ¨èä½¿ç”¨-autowiredæ³¨è§£æ³¨å…¥bean" tabindex="-1"><a class="header-anchor" href="#_12-ä¸ºä»€ä¹ˆideaä¸æ¨èä½¿ç”¨-autowiredæ³¨è§£æ³¨å…¥bean"><span>12.ä¸ºä»€ä¹ˆIDEAä¸æ¨èä½¿ç”¨@Autowiredæ³¨è§£æ³¨å…¥Beanï¼Ÿ</span></a></h3><p>å‰æƒ…æè¦ï¼šå½“ä½¿ç”¨ <code>@Autowired</code> æ³¨è§£æ³¨å…¥ Bean æ—¶ï¼ŒIDEA ä¼šæç¤ºâ€œField injection is not recommendedâ€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20241224164722.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@Autowired" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@Autowired</figcaption></figure><p>é¢è¯•å›ç­”ï¼š</p><p>ä¸»è¦æœ‰å‡ ä¸ªåŸå› ã€‚</p><p>ç¬¬ä¸€ä¸ªæ˜¯å­—æ®µæ³¨å…¥ä¸åˆ©äºå•å…ƒæµ‹è¯•ã€‚å­—æ®µæ³¨å…¥éœ€è¦ä½¿ç”¨åå°„æˆ– Spring å®¹å™¨æ‰èƒ½æ³¨å…¥ä¾èµ–ï¼Œæµ‹è¯•æ›´å¤æ‚ï¼›è€Œæ„é€ æ–¹æ³•æ³¨å…¥å¯ä»¥ç›´æ¥é€šè¿‡æ„é€ æ–¹æ³•ä¼ å…¥ Mock å¯¹è±¡ï¼Œæµ‹è¯•èµ·æ¥æ›´ç®€å•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// å­—æ®µæ³¨å…¥çš„æµ‹è¯•å›°éš¾</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> testUserService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ— æ³•ç›´æ¥è®¾ç½®userRepositoryï¼Œéœ€è¦åå°„æˆ–Springå®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // userService.userRepository = Mockito.mock(UserRepository.class);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¾èµ–ï¼Œæµ‹è¯•ä¸æ–¹ä¾¿</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    ReflectionTestUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setField</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(userService, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userRepository&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Mockito</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">doSomething</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ„é€ æ–¹æ³•æ³¨å…¥çš„æµ‹è¯•ç®€å•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> testUserService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    UserRepository</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> mockRepository </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Mockito</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(mockRepository)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // ç›´æ¥æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒä¸ªæ˜¯å­—æ®µæ³¨å…¥ä¼šéšè—å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œè€Œæ„é€ æ–¹æ³•æ³¨å…¥ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶å°±å»æ£€æŸ¥ä¾èµ–å…³ç³»ï¼Œèƒ½æ›´æ—©å‘ç°é—®é¢˜ã€‚</p><p>ç¬¬ä¸‰ä¸ªæ˜¯æ„é€ æ–¹æ³•æ³¨å…¥å¯ä»¥ä½¿ç”¨ final å­—æ®µç¡®ä¿ä¾èµ–åœ¨å¯¹è±¡åˆ›å»ºæ—¶å°±è¢«åˆå§‹åŒ–ï¼Œé¿å…äº†åç»­ä¿®æ”¹çš„é£é™©ã€‚</p><p>åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾é¡¹ç›®</a>ä¸­ï¼Œæˆ‘ä»¬å·²ç»åœ¨ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥çš„æ–¹å¼æ¥ç®¡ç†ä¾èµ–å…³ç³»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20241224165628.png" alt="æŠ€æœ¯æ´¾ï¼šæ„é€ æ–¹æ³•æ³¨å…¥" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼šæ„é€ æ–¹æ³•æ³¨å…¥</figcaption></figure><p>ä¸è¿‡è¯è¯´å›æ¥ï¼Œ<code>@Autowired</code> çš„å­—æ®µæ³¨å…¥æ–¹å¼åœ¨ä¸€äº›ç®€å•çš„åœºæ™¯ä¸‹è¿˜æ˜¯å¯ä»¥ç”¨çš„ï¼Œä¸»è¦çœ‹å›¢é˜Ÿçš„ç¼–ç è§„èŒƒå§ã€‚</p><h4 id="autowired-å’Œ-resource-æ³¨è§£çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#autowired-å’Œ-resource-æ³¨è§£çš„åŒºåˆ«"><span>@Autowired å’Œ @Resource æ³¨è§£çš„åŒºåˆ«ï¼Ÿ</span></a></h4><p>é¦–å…ˆä»æ¥æºä¸Šè¯´ï¼Œ<code>@Autowired</code> æ˜¯ Spring æ¡†æ¶æä¾›çš„æ³¨è§£ï¼Œè€Œ <code>@Resource</code> æ˜¯ Java EE æ ‡å‡†æä¾›çš„æ³¨è§£ã€‚æ¢å¥è¯è¯´ï¼Œ<code>@Resource</code> æ˜¯ JDK è‡ªå¸¦çš„ï¼Œè€Œ <code>@Autowired</code> æ˜¯ Spring ç‰¹æœ‰çš„ã€‚</p><p>è™½ç„¶ IDEA ä¸æ¨èä½¿ç”¨ <code>@Autowired</code>ï¼Œä½†å¯¹ <code>@Resource</code> æ³¨è§£å´æ²¡æœ‰ä»»ä½•æç¤ºã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20241224170055.png" alt="æŠ€æœ¯æ´¾ï¼š@Resource" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼š@Resource</figcaption></figure><p>ä»æ³¨å…¥æ–¹å¼ä¸Šè¯´ï¼Œ<code>@Autowired</code> é»˜è®¤æŒ‰ç…§ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ byType è¿›è¡Œæ³¨å…¥ï¼Œè€Œ <code>@Resource</code> é»˜è®¤æŒ‰ç…§åç§°ï¼Œä¹Ÿå°±æ˜¯ byName è¿›è¡Œæ³¨å…¥ã€‚</p><p>å½“å®¹å™¨ä¸­å­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„ Beanï¼Œ æ¯”å¦‚è¯´æœ‰ä¸¤ä¸ª UserRepository çš„å®ç°ç±»ï¼Œç›´æ¥ç”¨ <code>@Autowired</code> æ³¨å…¥ UserRepository æ—¶å°±ä¼šæŠ¥é”™ï¼Œå› ä¸º Spring å®¹å™¨ä¸çŸ¥é“è¯¥æ³¨å…¥å“ªä¸ªå®ç°ç±»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository21</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository22</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // å†²çª</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ—¶å€™ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ <code>@Autowired</code> + <code>@Qualifier</code> æŒ‡å®šå…·ä½“çš„ Bean åç§°æ¥è§£å†³å†²çªã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userRepository21&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository21</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userRepository22&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository22</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Qualifier</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userRepository22&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userRepository22</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§æ˜¯ä½¿ç”¨ <code>@Resource</code> æ³¨è§£æŒ‰åç§°è¿›è¡Œæ³¨å…¥ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Resource</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;userRepository21&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userRepository21</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šä¾èµ–æ³¨å…¥çš„æ—¶å€™ï¼Œç›´æ¥Autowiredæ¯”è¾ƒç›´æ¥ï¼Œä¸ºä»€ä¹ˆæ¨èæ„é€ æ–¹æ³•æ³¨å…¥å‘¢</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 1 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªéƒ‘å·å¤§å­¦æœ¬ç¡•çš„çƒå‹ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ²³å—çœæœ€å¥½çš„å¤§å­¦äº†ï¼Œä½†ä¹Ÿä»…ä»…æ˜¯ä¸€æ‰€ 211ï¼Œæ‰€ä»¥å¸Œæœ›æ‰€æœ‰æ²³å—çš„åŒå­¦éƒ½èƒ½åŠ æŠŠåŠ²ï¼Œè¯æ˜è‡ªå·±çš„å®åŠ›ï¼Œå»æ‹¿åˆ°æ›´å¥½çš„ offerï¼Œä¸ºæ ¡äº‰å…‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250701154344.png" alt="éƒ‘å·å¤§å­¦æœ¬ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>éƒ‘å·å¤§å­¦æœ¬ç¡•çš„çƒå‹</figcaption></figure><h3 id="_13-autowiredçš„å®ç°åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_13-autowiredçš„å®ç°åŸç†äº†è§£å—"><span>13.@Autowiredçš„å®ç°åŸç†äº†è§£å—ï¼Ÿ</span></a></h3><p><code>@Autowired</code> æ˜¯ Spring å®ç°ä¾èµ–æ³¨å…¥çš„æ ¸å¿ƒæ³¨è§£ï¼Œå…¶å®ç°åŸç†åŸºäºåå°„æœºåˆ¶å’Œ BeanPostProcessor æ¥å£ã€‚</p><p>æ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªä¸»è¦é˜¶æ®µã€‚ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯ä¾èµ–æ”¶é›†é˜¶æ®µï¼Œå‘ç”Ÿåœ¨ Bean å®ä¾‹åŒ–ä¹‹åã€å±æ€§èµ‹å€¼ä¹‹å‰ã€‚<code>Autowired</code> çš„ Processor ä¼šæ‰«æ Bean çš„æ‰€æœ‰å­—æ®µã€æ–¹æ³•å’Œæ„é€ æ–¹æ³•ï¼Œæ‰¾å‡ºæ ‡æ³¨äº† <code>@Autowired</code> æ³¨è§£çš„åœ°æ–¹ï¼Œç„¶åæŠŠè¿™äº›ä¿¡æ¯å°è£…æˆ <code>Injection</code> å…ƒæ•°æ®å¯¹è±¡ç¼“å­˜èµ·æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ç”¨åˆ°äº†å¤§é‡çš„åå°„æ“ä½œï¼Œéœ€è¦åˆ†æç±»çš„ç»“æ„ã€æ³¨è§£ä¿¡æ¯ç­‰ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250711165339.png" alt="MarkusZhangï¼š@Autowired" tabindex="0" loading="lazy"><figcaption>MarkusZhangï¼š@Autowired</figcaption></figure><p>ç¬¬äºŒä¸ªé˜¶æ®µæ˜¯ä¾èµ–æ³¨å…¥é˜¶æ®µï¼ŒSpring ä¼šå–å‡ºä¹‹å‰ç¼“å­˜çš„ <code>Injection</code> å…ƒæ•°æ®å¯¹è±¡ï¼Œç„¶åé€ä¸ªå¤„ç†æ¯ä¸ªæ³¨å…¥ç‚¹ã€‚å¯¹äºæ¯ä¸ª <code>@Autowired</code> æ ‡æ³¨çš„å­—æ®µæˆ–æ–¹æ³•ï¼ŒSpring ä¼šæ ¹æ®ç±»å‹å»å®¹å™¨ä¸­æŸ¥æ‰¾åŒ¹é…çš„ Beanã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 1. æŒ‰ç±»å‹æŸ¥æ‰¾ï¼ˆbyTypeï¼‰</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> matchingBeans </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> BeanFactoryUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">beansOfTypeIncludingAncestors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">beanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, type);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 2. å¦‚æœæ‰¾åˆ°å¤šä¸ªå€™é€‰è€…ï¼ŒæŒ‰åç§°ç­›é€‰ï¼ˆbyNameï¼‰</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> autowiredBeanName </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> determineAutowireCandidate</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(matchingBeans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> descriptor)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 3. è€ƒè™‘@Primaryå’Œ@Priorityæ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 4. æœ€åæŒ‰ç…§å­—æ®µåæˆ–å‚æ•°ååŒ¹é…</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å…·ä½“çš„æ³¨å…¥è¿‡ç¨‹ä¸­ï¼ŒSpring ä¼šä½¿ç”¨åå°„æ¥è®¾ç½®å­—æ®µçš„å€¼æˆ–è€…è°ƒç”¨ setter æ–¹æ³•ã€‚æ¯”å¦‚å¯¹äºå­—æ®µæ³¨å…¥ï¼Œä¼šè°ƒç”¨ <code>Field.set()</code> æ–¹æ³•ï¼›å¯¹äº setter æ³¨å…¥ï¼Œä¼šè°ƒç”¨ <code>Method.invoke()</code> æ–¹æ³•ã€‚</p><h3 id="_14-ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…" tabindex="-1"><a class="header-anchor" href="#_14-ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"><span>14.ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…ï¼Ÿ</span></a></h3><p>è‡ªåŠ¨è£…é…çš„æœ¬è´¨å°±æ˜¯è®© Spring å®¹å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆ Bean ä¹‹é—´çš„ä¾èµ–å…³ç³»æ³¨å…¥ï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»æŒ‡å®šæ¯ä¸ªä¾èµ–ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯â€œæˆ‘ä»¬ä¸ç”¨å‘Šè¯‰ Spring å…·ä½“æ€ä¹ˆæ³¨å…¥ï¼ŒSpring è‡ªå·±ä¼šæƒ³åŠæ³•æ‰¾åˆ°åˆé€‚çš„ Bean æ³¨å…¥è¿›æ¥â€ã€‚</p><p>è‡ªåŠ¨è£…é…çš„å·¥ä½œåŸç†ç®€å•æ¥è¯´å°±æ˜¯ï¼ŒSpring å®¹å™¨åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨æ‰«æ <code>@ComponentScan</code> æŒ‡å®šåŒ…è·¯å¾„ä¸‹çš„æ‰€æœ‰ç±»ï¼Œç„¶åæ ¹æ®ç±»ä¸Šçš„æ³¨è§£ï¼Œæ¯”å¦‚ <code>@Autowired</code>ã€<code>@Resource</code> ç­‰ï¼Œæ¥åˆ¤æ–­å“ªäº› Bean éœ€è¦è¢«è‡ªåŠ¨è£…é…ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ComponentScan</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;com.github.paicoding.forum.service&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">MapperScan</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">basePackages</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;com.github.paicoding.forum.service.article.repository.mapper&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;com.github.paicoding.forum.service.user.repository.mapper&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ... æ›´å¤šåŒ…è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">})</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceAutoConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // Springè‡ªåŠ¨æ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶å¹¶æ³¨å†Œä¸ºBean</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹‹ååˆ†ææ¯ä¸ª Bean çš„ä¾èµ–å…³ç³»ï¼Œåœ¨åˆ›å»º Bean çš„æ—¶å€™ï¼Œæ ¹æ®è£…é…è§„åˆ™è‡ªåŠ¨æ‰¾åˆ°åˆé€‚çš„ä¾èµ– Beanï¼Œæœ€åæ ¹æ®åå°„å°†è¿™äº›ä¾èµ–æ³¨å…¥åˆ°ç›®æ ‡ Bean ä¸­ã€‚</p><h4 id="springæä¾›äº†å“ªå‡ ç§è‡ªåŠ¨è£…é…ç±»å‹" tabindex="-1"><a class="header-anchor" href="#springæä¾›äº†å“ªå‡ ç§è‡ªåŠ¨è£…é…ç±»å‹"><span>Springæä¾›äº†å“ªå‡ ç§è‡ªåŠ¨è£…é…ç±»å‹ï¼Ÿ</span></a></h4><p>Spring çš„è‡ªåŠ¨è£…é…æ–¹å¼æœ‰å¥½å‡ ç§ï¼Œåœ¨ XML é…ç½®æ—¶ä»£ï¼Œä¸»è¦æœ‰ byNameã€byTypeã€constructor å’Œ autodetect å››ç§æ–¹å¼ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-034120d9-88c7-490b-af07-7d48f3b6b7bc.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå››ç§è‡ªåŠ¨è£…é…ç±»å‹" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå››ç§è‡ªåŠ¨è£…é…ç±»å‹</figcaption></figure><p>åˆ°äº†æ³¨è§£é©±åŠ¨æ—¶ä»£ï¼Œç”¨å¾—æœ€å¤šçš„æ˜¯ <code>@Autowired</code> æ³¨è§£ï¼Œé»˜è®¤æŒ‰ç…§ç±»å‹è£…é…ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // æŒ‰ç±»å‹è‡ªåŠ¨è£…é…</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶æ¬¡è¿˜æœ‰ <code>@Resource</code> æ³¨è§£ï¼Œå®ƒé»˜è®¤æŒ‰ç…§åç§°è£…é…ï¼Œå¦‚æœæ‰¾ä¸åˆ°å¯¹åº”åç§°çš„ Beanï¼Œå°±ä¼šæŒ‰ç±»å‹è£…é…ã€‚</p><p>Spring Boot çš„è‡ªåŠ¨è£…é…è¿˜æœ‰ä¸€å¥—æ›´é«˜çº§çš„æœºåˆ¶ï¼Œé€šè¿‡ <code>@EnableAutoConfiguration</code> å’Œå„ç§ <code>@Conditional</code> æ³¨è§£æ¥å®ç°ï¼Œè¿™ä¸ªæ˜¯æ¡†æ¶çº§åˆ«çš„è‡ªåŠ¨è£…é…ï¼Œä¼šæ ¹æ® classpath ä¸­çš„ç±»å’Œé…ç½®æ¥è‡ªåŠ¨é…ç½® Beanã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250702101032.png" alt="ShawnBlogï¼šSpring Boot çš„è‡ªåŠ¨è£…é…" tabindex="0" loading="lazy"><figcaption>ShawnBlogï¼šSpring Boot çš„è‡ªåŠ¨è£…é…</figcaption></figure><p>memoï¼š2025 å¹´ 7 æœˆ 2 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªåŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦çš„çƒå‹ï¼Œä»–åœ¨é‚®ä»¶ä¸­è¯´åˆ°ï¼šåœ¨æ˜Ÿçƒé‡Œå­¦åˆ°äº†å¥½å¤šä¸œè¥¿ï¼Œç›®å‰æ­£åœ¨å‡†å¤‡<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>å’Œ MYDBï¼Œæ‰“ç®—å¥½å¥½å†²ç§‹æ‹›ï¼Œèƒ½å¸®åŠ©åˆ°å¤§å®¶æˆ‘çœŸçš„å¾ˆæ¬£æ…°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250702101812.png" alt="åŒ—èˆªçƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>åŒ—èˆªçƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯</figcaption></figure><h3 id="_15-beançš„ä½œç”¨åŸŸæœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_15-beançš„ä½œç”¨åŸŸæœ‰å“ªäº›"><span>15.Beançš„ä½œç”¨åŸŸæœ‰å“ªäº›?</span></a></h3><p>Bean çš„ä½œç”¨åŸŸå†³å®šäº† Bean å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå’Œåˆ›å»ºç­–ç•¥ï¼Œsingleton æ˜¯é»˜è®¤çš„ä½œç”¨åŸŸã€‚æ•´ä¸ª Spring å®¹å™¨ä¸­åªä¼šæœ‰ä¸€ä¸ª Bean å®ä¾‹ã€‚ä¸ç®¡åœ¨å¤šå°‘ä¸ªåœ°æ–¹æ³¨å…¥è¿™ä¸ª Beanï¼Œæ‹¿åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // é»˜è®¤å°±æ˜¯singleton</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªUserServiceå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”Ÿå‘½å‘¨æœŸå’Œ Spring å®¹å™¨ç›¸åŒï¼Œå®¹å™¨å¯åŠ¨æ—¶åˆ›å»ºï¼Œå®¹å™¨é”€æ¯æ—¶é”€æ¯ã€‚</p><p>å®é™…å¼€å‘ä¸­ï¼Œåƒ Serviceã€Dao è¿™äº›ä¸šåŠ¡ç»„ä»¶åŸºæœ¬éƒ½æ˜¯å•ä¾‹çš„ï¼Œå› ä¸ºå•ä¾‹æ—¢èƒ½èŠ‚çœå†…å­˜ï¼Œåˆèƒ½æé«˜æ€§èƒ½ã€‚</p><p>å½“æŠŠ scope è®¾ç½®ä¸º prototype æ—¶ï¼Œæ¯æ¬¡ä»å®¹å™¨ä¸­è·å– Bean çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prototype&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderProcessor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ¯æ¬¡æ³¨å…¥æˆ–è·å–éƒ½æ˜¯æ–°çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“éœ€è¦å¤„ç†ä¸€äº›æœ‰çŠ¶æ€çš„ Bean æ—¶ä¼šç”¨åˆ° prototypeï¼Œæ¯”å¦‚æ¯ä¸ªè®¢å•å¤„ç†å™¨éœ€è¦ç»´æŠ¤ä¸åŒçš„çŠ¶æ€ä¿¡æ¯ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ singleton Bean ä¸­æ³¨å…¥ prototype Bean æ—¶è¦å°å¿ƒï¼Œå› ä¸º singleton Bean åªåˆ›å»ºä¸€æ¬¡ï¼Œæ‰€ä»¥ prototype Bean ä¹Ÿåªä¼šæ³¨å…¥ä¸€æ¬¡ã€‚è¿™æ—¶å€™å¯ä»¥ç”¨ <code>@Lookup</code> æ³¨è§£æˆ–è€… ApplicationContext æ¥åŠ¨æ€è·å–ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SingletonService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // é”™è¯¯çš„åšæ³•ï¼ŒprototypeBeanåªä¼šæ³¨å…¥ä¸€æ¬¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBean</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> prototypeBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ­£ç¡®çš„åšæ³•ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½è·å–æ–°å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Lookup</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getPrototypeBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Springä¼šé‡å†™è¿™ä¸ªæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤äº† singleton å’Œ prototypeï¼ŒSpring è¿˜æ”¯æŒå…¶ä»–ä½œç”¨åŸŸï¼Œæ¯”å¦‚ requestã€sessionã€application å’Œ websocketã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-08a9cb31-5a4f-4224-94cd-0c0f643a57ea.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Beanæ”¯æŒä½œç”¨åŸŸ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Beanæ”¯æŒä½œç”¨åŸŸ</figcaption></figure><p>å¦‚æœä½œç”¨äºæ˜¯ requestï¼Œè¡¨ç¤ºåœ¨ Web åº”ç”¨ä¸­ï¼Œæ¯ä¸ª HTTP è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ï¼Œè¯·æ±‚ç»“æŸå Bean å°±è¢«é”€æ¯ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;request&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RequestContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ¯ä¸ªHTTPè¯·æ±‚éƒ½æœ‰è‡ªå·±çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½œç”¨äºæ˜¯ sessionï¼Œè¡¨ç¤ºåœ¨ Web åº”ç”¨ä¸­ï¼Œæ¯ä¸ª HTTP ä¼šè¯éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ï¼Œä¼šè¯ç»“æŸå Bean è¢«é”€æ¯ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;session&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserSession</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ¯ä¸ªç”¨æˆ·ä¼šè¯éƒ½æœ‰è‡ªå·±çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¸å‹çš„ä½¿ç”¨åœºæ™¯æ˜¯è´­ç‰©è½¦ã€ç”¨æˆ·ç™»å½•çŠ¶æ€è¿™äº›éœ€è¦åœ¨æ•´ä¸ªä¼šè¯æœŸé—´ä¿æŒçš„ä¿¡æ¯ã€‚</p><p>application ä½œç”¨åŸŸè¡¨ç¤ºåœ¨æ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ª Bean å®ä¾‹ï¼Œç±»ä¼¼äº singletonï¼Œä½†å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸ ServletContext ç»‘å®šã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;application&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>websocket ä½œç”¨åŸŸè¡¨ç¤ºåœ¨ WebSocket ä¼šè¯ä¸­æ¯ä¸ªè¿æ¥éƒ½æœ‰è‡ªå·±çš„ Bean å®ä¾‹ã€‚WebSocket è¿æ¥å»ºç«‹æ—¶åˆ›å»ºï¼Œè¿æ¥å…³é—­æ—¶é”€æ¯ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;websocket&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WebSocketHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ¯ä¸ªWebSocketè¿æ¥éƒ½æœ‰è‡ªå·±çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šbeanæ˜¯å•ä¾‹è¿˜æ˜¯å¤šä¾‹çš„ï¼Œå…·ä½“æ€ä¹ˆä¿®æ”¹</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 3 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªéƒ‘å·å¤§å­¦ç¡•ï¼Œæ²³åŒ—å¸ˆèŒƒå¤§å­¦æœ¬çš„çƒå‹ï¼Œæ•´ä½“åœ¨æ ¡çš„ç»å†éå¸¸å‡ºè‰²ï¼Œå¥–å­¦é‡‘ã€è®ºæ–‡æœŸåˆŠåŸºæœ¬ä¸Šéƒ½æ‹‰æ»¡äº†ã€‚é‚£è¿™ä¹ˆå¤šä¼˜ç§€çš„çƒå‹é€‰æ‹©æ¥åˆ°è¿™é‡Œï¼Œä¹Ÿæ˜¯å¯¹æ˜Ÿçƒçš„åˆä¸€æ¬¡è®¤å¯å’Œè‚¯å®šï¼Œæˆ‘ä¹Ÿä¸€å®šä¼šç»§ç»­åŠªåŠ›ï¼Œæä¾›æ›´å¤šä¼˜è´¨çš„å†…å®¹å’ŒæœåŠ¡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250704144758.png" alt="éƒ‘å·å¤§å­¦ç¡•ï¼Œæ²³åŒ—å¸ˆèŒƒå¤§å­¦æœ¬çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>éƒ‘å·å¤§å­¦ç¡•ï¼Œæ²³åŒ—å¸ˆèŒƒå¤§å­¦æœ¬çš„çƒå‹</figcaption></figure><h3 id="_16-springä¸­çš„å•ä¾‹beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—" tabindex="-1"><a class="header-anchor" href="#_16-springä¸­çš„å•ä¾‹beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—"><span>16.Springä¸­çš„å•ä¾‹Beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ</span></a></h3><p>é¦–å…ˆè¦æ˜ç¡®ä¸€ç‚¹ã€‚Spring å®¹å™¨æœ¬èº«ä¿è¯äº† Bean åˆ›å»ºè¿‡ç¨‹çš„çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šå‡ºç°å¤šä¸ªçº¿ç¨‹åŒæ—¶åˆ›å»ºåŒä¸€ä¸ªå•ä¾‹ Bean çš„æƒ…å†µã€‚ä½†æ˜¯ Bean åˆ›å»ºå®Œæˆåçš„ä½¿ç”¨è¿‡ç¨‹ï¼ŒSpring å°±ä¸ç®¡äº†ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œå•ä¾‹ Bean åœ¨è¢«åˆ›å»ºåï¼Œå¦‚æœå®ƒçš„å†…éƒ¨çŠ¶æ€æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å°±å¯èƒ½ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-35dacef4-1a9e-45e1-b3f2-5a91227eb244.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå•ä¾‹Beançº¿ç¨‹å®‰å…¨é—®é¢˜" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå•ä¾‹Beançº¿ç¨‹å®‰å…¨é—®é¢˜</figcaption></figure><p>æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾é¡¹ç›®</a>ä¸­ï¼Œæœ‰ä¸€ä¸ªæ•æ„Ÿè¯è¿‡æ»¤çš„ Beanï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ volatile å…³é”®å­—æ¥ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¯è§æ€§ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SensitiveService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> volatile</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SensitiveWordBs</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sensitiveWordBs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // ä½¿ç”¨volatileä¿è¯å¯è§æ€§</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> refresh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // é‡æ–°åˆå§‹åŒ–sensitiveWordBs</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ Bean ä¸­æ²¡æœ‰æˆå‘˜å˜é‡ï¼Œæˆ–è€…æˆå‘˜å˜é‡éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œfinal ä¿®é¥°çš„ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Resource</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CountService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> countService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // åªæœ‰ä¾èµ–æ³¨å…¥çš„æ— çŠ¶æ€å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConfigService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> appName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // finalä¿®é¥°ï¼Œä¸å¯å˜</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ConfigService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;${app.name}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> appName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">appName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> appName;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å•ä¾‹beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜æ€ä¹ˆè§£å†³å‘¢" tabindex="-1"><a class="header-anchor" href="#å•ä¾‹beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜æ€ä¹ˆè§£å†³å‘¢"><span>å•ä¾‹Beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</span></a></h4><p>ç¬¬ä¸€ç§ï¼Œä½¿ç”¨å±€éƒ¨å˜é‡ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æ— çŠ¶æ€çš„å•ä¾‹ Beanï¼ŒæŠŠæ‰€æœ‰çŠ¶æ€éƒ½é€šè¿‡æ–¹æ³•å‚æ•°ä¼ é€’ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ— çŠ¶æ€æ–¹æ³•ï¼Œæ‰€æœ‰æ•°æ®é€šè¿‡å‚æ•°ä¼ é€’</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> processUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> userId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> operation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        User</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å¤„ç†é€»è¾‘...</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§ï¼Œå½“ç¡®å®éœ€è¦ç»´æŠ¤çº¿ç¨‹ç›¸å…³çš„çŠ¶æ€æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://javabetter.cn/thread/ThreadLocal.html" target="_blank" rel="noopener noreferrer">ThreadLocal</a> æ¥ä¿å­˜çŠ¶æ€ã€‚ThreadLocal å¯ä»¥ä¿è¯æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œäº’ä¸å¹²æ‰°ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserContextService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ThreadLocal</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userThreadLocal </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ThreadLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setCurrentUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userThreadLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getCurrentUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userThreadLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> clear</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userThreadLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// é˜²æ­¢å†…å­˜æ³„æ¼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰ç§ï¼Œå¦‚æœéœ€è¦ç¼“å­˜æ•°æ®æˆ–è€…è®¡æ•°ï¼Œä½¿ç”¨ JUC åŒ…ä¸‹çš„çº¿ç¨‹å®‰å…¨ç±»ï¼Œæ¯”å¦‚è¯´ <a href="https://javabetter.cn/thread/atomic.html" target="_blank" rel="noopener noreferrer">AtomicInteger</a>ã€<a href="https://javabetter.cn/thread/ConcurrentHashMap.html" target="_blank" rel="noopener noreferrer">ConcurrentHashMap</a>ã€<a href="https://javabetter.cn/thread/CopyOnWriteArrayList.html" target="_blank" rel="noopener noreferrer">CopyOnWriteArrayList</a> ç­‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CacheService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentHashMap</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> cache </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AtomicLong</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> counter </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> AtomicLong</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(key, value);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        counter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">incrementAndGet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››ç§ï¼Œå¯¹äºå¤æ‚çš„çŠ¶æ€æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ synchronized æˆ– Lockï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CacheService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> cache </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ReentrantLock</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> lock </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ReentrantLock</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(key, value);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">finally</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">unlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äº”ç§ï¼Œå¦‚æœ Bean ç¡®å®éœ€è¦ç»´æŠ¤çŠ¶æ€ï¼Œå¯ä»¥è€ƒè™‘å°†å…¶æ”¹ä¸º prototype ä½œç”¨åŸŸï¼Œè¿™æ ·æ¯æ¬¡æ³¨å…¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œé¿å…äº†å¤šçº¿ç¨‹å…±äº«åŒä¸€ä¸ªå®ä¾‹çš„é—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prototype&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ¯æ¬¡æ³¨å…¥éƒ½åˆ›å»ºæ–°å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StatefulService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // ç°åœ¨æ¯ä¸ªå®ä¾‹éƒ½æœ‰ç‹¬ç«‹çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> state;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ä½¿ç”¨ request ä½œç”¨åŸŸï¼Œè¿™æ ·æ¯ä¸ª HTTP è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;request&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RequestScopedService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> requestData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ¯ä¸ªè¯·æ±‚éƒ½æœ‰ç‹¬ç«‹çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œé¢ç»åŒå­¦ 1 é—²é±¼åç«¯ä¸€é¢çš„åŸé¢˜ï¼šspringçš„beançš„å¹¶å‘å®‰å…¨é—®é¢˜</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 4 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªæ­¦æ±‰ç†å·¥å¤§å­¦æœ¬ç¡•çš„çƒå‹ã€‚è¯´çœŸçš„ï¼Œå’Œæ­¦æ±‰ç†å·¥å¤§å­¦æŒºæœ‰ç¼˜çš„ï¼Œ2023 å¹´å»æ­¦æ±‰ï¼Œå°±çº¿ä¸‹è§äº†ä¸€åæ­¦ç†çš„çƒå‹ï¼Œ<a href="https://t.zsxq.com/LfG3B" target="_blank" rel="noopener noreferrer">ä»–å½“æ—¶ç­¾çº¦çš„æ˜¯å°ç±³</a>ï¼Œéå¸¸ä¼˜ç§€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-2023.09-2026.06.png" alt="æ­¦æ±‰ç†å·¥å¤§å­¦æœ¬ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>æ­¦æ±‰ç†å·¥å¤§å­¦æœ¬ç¡•çš„çƒå‹</figcaption></figure><h3 id="_17-ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_17-ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–"><span>17.ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–?</span></a></h3><p>ç®€å•æ¥è¯´å°±æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ª Bean ç›¸äº’ä¾èµ–ï¼Œæ¯”å¦‚è¯´ A ä¾èµ– Bï¼ŒB ä¾èµ– Aï¼Œæˆ–è€… C ä¾èµ– Cï¼Œå°±æˆäº†å¾ªç¯ä¾èµ–ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-f8fea53f-56fa-4cca-9199-ec7f648da625.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå¾ªç¯ä¾èµ–" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå¾ªç¯ä¾èµ–</figcaption></figure><h3 id="_18-ğŸŒŸspringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢" tabindex="-1"><a class="header-anchor" href="#_18-ğŸŒŸspringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢"><span>18.ğŸŒŸSpringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢ï¼Ÿ</span></a></h3><p>Spring é€šè¿‡ä¸‰çº§ç¼“å­˜æœºåˆ¶æ¥è§£å†³å¾ªç¯ä¾èµ–ï¼š</p><ol><li>ä¸€çº§ç¼“å­˜ï¼šå­˜æ”¾å®Œå…¨åˆå§‹åŒ–å¥½çš„å•ä¾‹ Beanã€‚</li><li>äºŒçº§ç¼“å­˜ï¼šå­˜æ”¾æå‰æš´éœ²çš„ Beanï¼Œå®ä¾‹åŒ–å®Œæˆï¼Œä½†æœªåˆå§‹åŒ–å®Œæˆã€‚</li><li>ä¸‰çº§ç¼“å­˜ï¼šå­˜æ”¾ Bean å·¥å‚ï¼Œç”¨äºç”Ÿæˆæå‰æš´éœ²çš„ Beanã€‚</li></ol><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-01d92863-a2cb-4f61-8d8d-30ecf0279b28.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸‰çº§ç¼“å­˜" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸‰çº§ç¼“å­˜</figcaption></figure><p>ä»¥ Aã€B ä¸¤ä¸ªç±»å‘ç”Ÿå¾ªç¯ä¾èµ–ä¸ºä¾‹ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-cfc09f84-f8e1-4702-80b6-d115843e81fe.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¾ªç¯ä¾èµ–" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¾ªç¯ä¾èµ–</figcaption></figure><p>ç¬¬ 1 æ­¥ï¼šå¼€å§‹åˆ›å»º Bean Aã€‚</p><ul><li>Spring è°ƒç”¨ A çš„æ„é€ æ–¹æ³•ï¼Œåˆ›å»º A çš„å®ä¾‹ã€‚æ­¤æ—¶ A å¯¹è±¡å·²å­˜åœ¨ï¼Œä½† bå±æ€§è¿˜æ˜¯ nullã€‚</li><li>å°† A çš„å¯¹è±¡å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜ã€‚</li><li>å¼€å§‹è¿›è¡Œ A çš„å±æ€§æ³¨å…¥ã€‚</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-1a8bdc29-ff43-4ff4-9b61-3eedd9da59b3.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šA å¯¹è±¡å·¥å‚" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šA å¯¹è±¡å·¥å‚</figcaption></figure><p>ç¬¬ 2 æ­¥ï¼šA éœ€è¦æ³¨å…¥ Bï¼Œå¼€å§‹åˆ›å»º Bean Bã€‚</p><ul><li>å‘ç°éœ€è¦ Bï¼Œä½† B è¿˜ä¸å­˜åœ¨ï¼Œæ‰€ä»¥å¼€å§‹åˆ›å»º Bã€‚</li><li>è°ƒç”¨ B çš„æ„é€ æ–¹æ³•ï¼Œåˆ›å»º B çš„å®ä¾‹ã€‚æ­¤æ—¶ B å¯¹è±¡å·²å­˜åœ¨ï¼Œä½† a å±æ€§è¿˜æ˜¯ nullã€‚</li><li>å°† B çš„å¯¹è±¡å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜ã€‚</li><li>å¼€å§‹è¿›è¡Œ B çš„å±æ€§æ³¨å…¥ã€‚</li></ul><p>ç¬¬ 3 æ­¥ï¼šB éœ€è¦æ³¨å…¥ Aï¼Œä»ç¼“å­˜ä¸­è·å– Aã€‚</p><ul><li>B éœ€è¦æ³¨å…¥ Aï¼Œå…ˆä»ä¸€çº§ç¼“å­˜æ‰¾ Aï¼Œæ²¡æ‰¾åˆ°ã€‚</li><li>å†ä»äºŒçº§ç¼“å­˜æ‰¾ Aï¼Œä¹Ÿæ²¡æ‰¾åˆ°ã€‚</li><li>æœ€åä»ä¸‰çº§ç¼“å­˜æ‰¾ Aï¼Œæ‰¾åˆ°äº† A çš„å¯¹è±¡å·¥å‚ã€‚</li><li>è°ƒç”¨ A çš„å¯¹è±¡å·¥å‚å¾—åˆ° A çš„å®ä¾‹ã€‚è¿™æ—¶ A å·²ç»å®ä¾‹åŒ–äº†ï¼Œè™½ç„¶è¿˜æ²¡å®Œå…¨åˆå§‹åŒ–ã€‚</li><li>å°† A ä»ä¸‰çº§ç¼“å­˜ç§»åˆ°äºŒçº§ç¼“å­˜ã€‚</li><li>B æ‹¿åˆ° A çš„å¼•ç”¨ï¼Œå®Œæˆå±æ€§æ³¨å…¥ã€‚</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-bf2507bf-96aa-4b88-a58b-7ec41d11bc70.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šA æ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒB æ”¾å…¥ä¸€çº§ç¼“å­˜" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šA æ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒB æ”¾å…¥ä¸€çº§ç¼“å­˜</figcaption></figure><p>ç¬¬ 4 æ­¥ï¼šB å®Œæˆåˆå§‹åŒ–ã€‚</p><ul><li>B çš„å±æ€§æ³¨å…¥å®Œæˆï¼Œæ‰§è¡Œ <code>@PostConstruct</code> ç­‰åˆå§‹åŒ–é€»è¾‘ã€‚</li><li>B å®Œå…¨åˆ›å»ºå®Œæˆï¼Œä»ä¸‰çº§ç¼“å­˜ç§»é™¤ï¼Œæ”¾å…¥ä¸€çº§ç¼“å­˜ã€‚</li></ul><p>ç¬¬ 5 æ­¥ï¼šA å®Œæˆåˆå§‹åŒ–ã€‚</p><ul><li>å›åˆ° A çš„åˆ›å»ºè¿‡ç¨‹ï¼ŒA æ‹¿åˆ°å®Œæ•´çš„ B å®ä¾‹ï¼Œå®Œæˆå±æ€§æ³¨å…¥ã€‚</li><li>A æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘ï¼Œåˆ›å»ºå®Œæˆã€‚</li><li>A ä»äºŒçº§ç¼“å­˜ç§»é™¤ï¼Œæ”¾å…¥ä¸€çº§ç¼“å­˜ã€‚</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-022f7cb9-2c83-4fe9-b252-b02bd0fb2435.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šAB éƒ½å¥½äº†" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šAB éƒ½å¥½äº†</figcaption></figure><p>ç”¨ä»£ç æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œæ˜¯è¿™æ ·çš„ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ¨¡æ‹ŸSpringçš„è§£å†³è¿‡ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CircularDependencyDemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ä¸‰çº§ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> earlySingletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonFactories </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å…ˆä»ä¸€çº§ç¼“å­˜è·å–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å†ä»äºŒçº§ç¼“å­˜è·å–</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æœ€åä»ä¸‰çº§ç¼“å­˜è·å–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (factory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bean);  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ç§»åˆ°äºŒçº§ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);        </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ä»ä¸‰çº§ç¼“å­˜ç§»é™¤</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“ªäº›æƒ…å†µä¸‹springæ— æ³•è§£å†³å¾ªç¯ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#å“ªäº›æƒ…å†µä¸‹springæ— æ³•è§£å†³å¾ªç¯ä¾èµ–"><span>å“ªäº›æƒ…å†µä¸‹Springæ— æ³•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</span></a></h4><p>Spring è™½ç„¶èƒ½è§£å†³å¤§éƒ¨åˆ†å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œä½†ç¡®å®æœ‰å‡ ç§æƒ…å†µæ˜¯æ— æ³•å¤„ç†çš„ï¼Œæˆ‘æ¥è¯¦ç»†è¯´è¯´ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-37bb576d-b4af-42ed-91f4-d846ceb012b6.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¾ªç¯ä¾èµ–çš„å‡ ç§æƒ…å½¢" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¾ªç¯ä¾èµ–çš„å‡ ç§æƒ…å½¢</figcaption></figure><p>ç¬¬ä¸€ç§ï¼Œæ„é€ æ–¹æ³•çš„å¾ªç¯ä¾èµ–ï¼Œè¿™ç§æƒ…å†µ Spring ä¼šç›´æ¥æŠ›å‡º BeanCurrentlyInCreationException å¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> B</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">B</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ„é€ æ–¹æ³•æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> A</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">A</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ„é€ æ–¹æ³•æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºæ„é€ æ–¹æ³•æ³¨å…¥å‘ç”Ÿåœ¨å®ä¾‹åŒ–é˜¶æ®µï¼Œåˆ›å»º A çš„æ—¶å€™å¿…é¡»å…ˆæœ‰ Bï¼Œä½†åˆ›å»º Båˆå¿…é¡»å…ˆæœ‰ Aï¼Œè¿™æ—¶å€™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿˜æ²¡åˆ›å»ºå‡ºæ¥ï¼Œæ— æ³•æå‰æš´éœ²åˆ°ç¼“å­˜ä¸­ã€‚</p><p>ç¬¬äºŒç§ï¼Œprototype ä½œç”¨åŸŸçš„å¾ªç¯ä¾èµ–ã€‚prototype ä½œç”¨åŸŸçš„ Bean æ¯æ¬¡è·å–éƒ½ä¼šåˆ›å»ºæ–°å®ä¾‹ï¼ŒSpring æ— æ³•ç¼“å­˜è¿™äº›å®ä¾‹ï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•è§£å†³å¾ªç¯ä¾èµ–ã€‚</p><p>----é¢è¯•ä¸­å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®ä¾‹ï¼Œå…ˆæ˜¯ PrototypeBeanAï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prototype&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBeanB</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> prototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> PrototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PrototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> prototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">prototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> prototypeBeanB;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæ˜¯ PrototypeBeanBï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prototype&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBeanA</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> prototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> PrototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PrototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> prototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">prototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> prototypeBeanA;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†ç„¶åæ˜¯æµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DemoApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">DemoApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    CommandLineRunner</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> commandLineRunner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ApplicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ctx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> args </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // å°è¯•è·å–PrototypeBeanAçš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            PrototypeBeanA</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beanA</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ctx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">PrototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œç»“æœï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240310202703.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¾ªç¯ä¾èµ–" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¾ªç¯ä¾èµ–</figcaption></figure><p>----é¢è¯•ä¸­å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³ 25 å±Šæ—¥å¸¸å®ä¹ ä¸€é¢åŸé¢˜ï¼šå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šSpringå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾—ç‰©é¢ç»åŒå­¦ 9 é¢è¯•é¢˜ç›®åŸé¢˜ï¼šSpringæºç çœ‹è¿‡å—ï¼ŸSpringçš„ä¸‰çº§ç¼“å­˜çŸ¥é“å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šspringä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 5 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ä»Šå¤© <a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">VIP ç¾¤</a>æ¥äº†éå¸¸å¤šçš„çƒå‹ï¼Œä¸çŸ¥ä¸è§‰æˆ‘ä»¬å·²ç» 12 ç¾¤äº†ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¤§å®¶åº­äº†ï¼Œå¸Œæœ›å¤§å®¶éƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°è‡ªå·±çš„å½’å±æ„Ÿï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250705072809.png" alt="äºŒå“¥çš„ç¼–ç¨‹æ˜Ÿçƒå·²ç» 12 ç¾¤äº†" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ç¼–ç¨‹æ˜Ÿçƒå·²ç» 12 ç¾¤äº†</figcaption></figure><h3 id="_19-ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§" tabindex="-1"><a class="header-anchor" href="#_19-ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§"><span>19.ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§ï¼Ÿ</span></a></h3><p>Spring è®¾è®¡ä¸‰çº§ç¼“å­˜ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ AOP ä»£ç†çš„é—®é¢˜ã€‚</p><p>æˆ‘ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ A å’Œ B ä¸¤ä¸ªç±»ç›¸äº’ä¾èµ–ï¼ŒA çš„æŸä¸ªæ–¹æ³•ä¸Šé¢è¿˜æ ‡æ³¨äº† <code>@Transactional</code> æ³¨è§£ï¼Œè¿™æ„å‘³ç€ A æœ€ç»ˆéœ€è¦è¢« Spring åˆ›å»ºæˆä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> B</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // Aéœ€è¦è¢«AOPä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doSomething</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> A</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœåªæœ‰äºŒçº§ç¼“å­˜çš„è¯ï¼Œå½“åˆ›å»º A çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ A çš„åŸå§‹å¯¹è±¡æå‰æ”¾åˆ°ç¼“å­˜é‡Œé¢ï¼Œç„¶å B åœ¨åˆ›å»ºçš„æ—¶å€™ä»ç¼“å­˜ä¸­æ‹¿åˆ° A çš„åŸå§‹å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// å‡è®¾åªæœ‰ä¸¤çº§ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     // å®Œæ•´Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> earlySingletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // åŠæˆå“Bean</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯é—®é¢˜æ¥äº†ï¼ŒA å®Œæˆåˆå§‹åŒ–åï¼Œç”±äºæœ‰ <code>@Transactional</code> æ³¨è§£ï¼ŒSpring ä¼šæŠŠ A åŒ…è£…æˆä¸€ä¸ªä»£ç†å¯¹è±¡æ”¾åˆ°å®¹å™¨ä¸­ã€‚è¿™æ ·å°±å‡ºç°äº†ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼šB é‡Œé¢æŒæœ‰çš„æ˜¯ A çš„åŸå§‹å¯¹è±¡ï¼Œè€Œå®¹å™¨ä¸­å­˜çš„æ˜¯ A çš„ä»£ç†å¯¹è±¡ï¼ŒåŒä¸€ä¸ª Bean å±…ç„¶æœ‰ä¸¤ä¸ªä¸åŒçš„å®ä¾‹ï¼Œè¿™è‚¯å®šæ˜¯ä¸å¯¹çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-6ece8a46-25b1-459b-8cfa-19fc696dd7d6.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šäºŒçº§ç¼“å­˜ä¸è¡Œçš„åŸå› " tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šäºŒçº§ç¼“å­˜ä¸è¡Œçš„åŸå› </figcaption></figure><p>ä¸‰çº§ç¼“å­˜å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œè®¾è®¡çš„ã€‚ä¸‰çº§ç¼“å­˜é‡Œé¢å­˜æ”¾çš„ä¸æ˜¯ Bean çš„å®ä¾‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p><p>å½“ B éœ€è¦ A çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªå¯¹è±¡å·¥å‚çš„ getObject æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢ä¼šåˆ¤æ–­ A æ˜¯å¦éœ€è¦è¢«ä»£ç†ã€‚å¦‚æœéœ€è¦ä»£ç†ï¼Œå°±åˆ›å»º A çš„ä»£ç†å¯¹è±¡è¿”å›ç»™ Bï¼›å¦‚æœä¸éœ€è¦ä»£ç†ï¼Œå°±è¿”å› A çš„åŸå§‹å¯¹è±¡ã€‚è¿™æ ·å°±ä¿è¯äº† B æ‹¿åˆ°çš„ A å’Œæœ€ç»ˆæ”¾å…¥å®¹å™¨çš„ A æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonFactories </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Springæºç ä¸­çš„é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addSingletonFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> () </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getEarlyBeanReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> mbd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> bean))</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getEarlyBeanReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RootBeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> mbd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> bean) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> exposedObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">mbd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isSynthetic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> hasInstantiationAwareBeanPostProcessors</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BeanPostProcessor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBeanPostProcessors</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (bp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">instanceof</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> SmartInstantiationAwareBeanPostProcessor) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                SmartInstantiationAwareBeanPostProcessor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ibp </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (SmartInstantiationAwareBeanPostProcessor) bp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                // å…³é”®ï¼šå¦‚æœéœ€è¦ä»£ç†ï¼Œè¿™é‡Œä¼šåˆ›å»ºä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">                exposedObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ibp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getEarlyBeanReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(exposedObject, beanName);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> exposedObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç®€å•æ¥è¯´ï¼Œä¸‰çº§ç¼“å­˜çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯å»¶è¿Ÿå†³ç­–ã€‚å®ƒè®© Spring åœ¨çœŸæ­£éœ€è¦ Bean çš„æ—¶å€™æ‰å†³å®šè¿”å›åŸå§‹å¯¹è±¡è¿˜æ˜¯ä»£ç†å¯¹è±¡ï¼Œè¿™æ ·å°±é¿å…äº†å¯¹è±¡ä¸ä¸€è‡´çš„é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰ä¸‰çº§ç¼“å­˜ï¼ŒSpring è¦ä¹ˆæ— æ³•åœ¨å¾ªç¯ä¾èµ–çš„æƒ…å†µä¸‹æ”¯æŒ AOPï¼Œè¦ä¹ˆå°±ä¼šå‡ºç°åŒä¸€ä¸ª Bean æœ‰å¤šä¸ªå®ä¾‹çš„é—®é¢˜ï¼Œè¿™äº›éƒ½æ˜¯ä¸å¯æ¥å—çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250706065436.png" alt="å¹¸äº‘æ•™è‚²ï¼šä¸‰çº§ç¼“å­˜å’Œå¾ªç¯ä¾èµ–" tabindex="0" loading="lazy"><figcaption>å¹¸äº‘æ•™è‚²ï¼šä¸‰çº§ç¼“å­˜å’Œå¾ªç¯ä¾èµ–</figcaption></figure><h4 id="å¦‚æœç¼ºå°‘äºŒçº§ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¦‚æœç¼ºå°‘äºŒçº§ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆé—®é¢˜"><span>å¦‚æœç¼ºå°‘äºŒçº§ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</span></a></h4><p>äºŒçº§ç¼“å­˜ earlySingletonObjects ä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾é‚£äº›å·²ç»é€šè¿‡ä¸‰çº§ç¼“å­˜çš„å¯¹è±¡å·¥å‚åˆ›å»ºå‡ºæ¥çš„æ—©æœŸ Bean å¼•ç”¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250706065722.png" alt="Minorç‹æ™ºï¼šä¸‰çº§ç¼“å­˜" tabindex="0" loading="lazy"><figcaption>Minorç‹æ™ºï¼šä¸‰çº§ç¼“å­˜</figcaption></figure><p>å‡è®¾æˆ‘ä»¬æœ‰ Aã€Bã€C ä¸‰ä¸ª Beanï¼ŒA ä¾èµ– B å’Œ Cï¼ŒB å’Œ C éƒ½ä¾èµ– Aï¼Œå½¢æˆäº†ä¸€ä¸ªå¤æ‚çš„å¾ªç¯ä¾èµ–ã€‚åœ¨æ²¡æœ‰äºŒçº§ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡ B æˆ–è€… C éœ€è¦è·å– A çš„æ—¶å€™ï¼Œéƒ½éœ€è¦è°ƒç”¨ä¸‰çº§ç¼“å­˜ä¸­ A çš„ <code>ObjectFactory.getObject()</code> æ–¹æ³•ã€‚è¿™æ„å‘³ç€å¦‚æœ A éœ€è¦è¢«ä»£ç†çš„è¯ï¼Œä»£ç†å¯¹è±¡å¯èƒ½ä¼šè¢«é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ²¡æœ‰äºŒçº§ç¼“å­˜çš„ä¼ªä»£ç </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getSingleton</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> beanName) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isSingletonCurrentlyInCreation</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(beanName)) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ç›´æ¥ä»ä¸‰çº§ç¼“å­˜è·å–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonFactory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (singletonFactory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // æ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡ï¼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> singletonObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ã€‚æ¯”å¦‚ A æœ‰ <code>@Transactional</code> æ³¨è§£éœ€è¦è¢« AOP ä»£ç†ï¼ŒB åœ¨åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦ Aï¼Œä¼šè°ƒç”¨ä¸€æ¬¡å¯¹è±¡å·¥å‚åˆ›å»º A çš„ä»£ç†å¯¹è±¡ã€‚æ¥ç€ C åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¹Ÿéœ€è¦ Aï¼Œåˆä¼šè°ƒç”¨ä¸€æ¬¡å¯¹è±¡å·¥å‚ï¼Œå¯èƒ½åˆåˆ›å»ºäº†ä¸€ä¸ª A çš„ä»£ç†å¯¹è±¡ã€‚è¿™æ · B å’Œ C æ‹¿åˆ°çš„å¯èƒ½å°±æ˜¯ä¸¤ä¸ªä¸åŒçš„ A ä»£ç†å¯¹è±¡ï¼Œè¿™å°±è¿åäº†å•ä¾‹ Bean çš„è¯­ä¹‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceB</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> serviceB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // éœ€è¦ AOP ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> methodA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceA</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> serviceA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // è·å¾—ä»£ç†å¯¹è±¡ A1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceC</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> serviceC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceA</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> serviceA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // å¯èƒ½è·å¾—ä»£ç†å¯¹è±¡ A2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>äºŒçº§ç¼“å­˜å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å½“ç¬¬ä¸€æ¬¡é€šè¿‡å¯¹è±¡å·¥å‚åˆ›å»ºäº† A çš„æ—©æœŸå¼•ç”¨ä¹‹åï¼Œå°±æŠŠè¿™ä¸ªå¼•ç”¨æ”¾åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼ŒåŒæ—¶ä»ä¸‰çº§ç¼“å­˜ä¸­ç§»é™¤å¯¹è±¡å·¥å‚ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ç¬¬ä¸€æ¬¡è·å– A</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">A</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> factory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;serviceA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> proxyA </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // åˆ›å»ºä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;serviceA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, proxyA);</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // ç¼“å­˜ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;serviceA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ç¬¬äºŒæ¬¡è·å– A</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> cachedA </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;serviceA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // ç›´æ¥è¿”å›ç¼“å­˜çš„ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// proxyA == cachedA  âœ“</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åç»­å¦‚æœå†æœ‰å…¶ä»– Bean éœ€è¦ Aï¼Œå°±ç›´æ¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–ï¼Œä¸éœ€è¦å†è°ƒç”¨å¯¹è±¡å·¥å‚äº†ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šå¾ªç¯ä¾èµ–æœ‰äº†è§£è¿‡å—ï¼Ÿå‡ºç°å¾ªç¯ä¾èµ–çš„åŸå› ï¼Ÿä¸‰å¤§ç¼“å­˜å­˜å‚¨å†…å®¹çš„åŒºåˆ«ï¼Ÿå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿå¦‚æœç¼ºå°‘ç¬¬äºŒçº§ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li></ol></blockquote><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div><p>memoï¼š2025 å¹´ 7 æœˆ 6 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨æ˜Ÿçƒé‡Œçœ‹åˆ°ä¸€ä¸ªçƒå‹çš„<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">ç§‹æ‹›æ‰“å¡</a>ï¼Œå·²ç»æŒç»­ 30 å¤©äº†ï¼ŒæŒ‰ç…§ä»–è¿™ä¸ªèŠ‚å¥ä¸‹å»ï¼Œäº’è”ç½‘å¤§å‚çš„ offer åŸºæœ¬ä¸Šå°±ç®—æ˜¯é”å®šäº†ã€‚å¹¶ä¸”è¿˜æœ‰å‡†å¤‡ RAG MCP çš„å…«è‚¡ï¼Œå¾ˆæ£’ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250706070700.png" alt="çƒå‹åœ¨æ˜Ÿçƒé‡Œçš„ç§‹æ‹›æ‰“å¡è®°å½•" tabindex="0" loading="lazy"><figcaption>çƒå‹åœ¨æ˜Ÿçƒé‡Œçš„ç§‹æ‹›æ‰“å¡è®°å½•</figcaption></figure><h2 id="aop" tabindex="-1"><a class="header-anchor" href="#aop"><span>AOP</span></a></h2><h3 id="_20-ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯-aop" tabindex="-1"><a class="header-anchor" href="#_20-ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯-aop"><span>20.ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯ AOPï¼Ÿ</span></a></h3><p>AOPï¼Œä¹Ÿå°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œç®€å•ç‚¹è¯´ï¼ŒAOP å°±æ˜¯æŠŠä¸€äº›ä¸šåŠ¡é€»è¾‘ä¸­çš„ç›¸åŒä»£ç æŠ½å–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ä¸­ï¼Œè®©ä¸šåŠ¡é€»è¾‘æ›´åŠ æ¸…çˆ½ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-09dbcda4-7c1b-42d6-8520-1a5fc84abbde.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ¨ªå‘æŠ½å–" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ¨ªå‘æŠ½å–</figcaption></figure><p>----è¿™éƒ¨åˆ†é¢è¯•ä¸­å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å¾ˆå¤šä¸ª Service æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½éœ€è¦è®°å½•æ‰§è¡Œæ—¥å¿—ã€æ£€æŸ¥æƒé™ã€ç®¡ç†äº‹åŠ¡ç­‰ç­‰ã€‚å¦‚æœæ²¡æœ‰ AOP çš„è¯ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨æ¯ä¸ªæ–¹æ³•é‡Œéƒ½å†™è¿™æ ·çš„ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> user) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹æ‰§è¡ŒcreateUseræ–¹æ³•&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æƒé™æ£€æŸ¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hasPermission</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SecurityException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ— æƒé™&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // å¼€å¯äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">begin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">commit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;createUseræ–¹æ³•æ‰§è¡ŒæˆåŠŸ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rollback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;createUseræ–¹æ³•æ‰§è¡Œå¤±è´¥&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, e);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ¯ä¸ªæ–¹æ³•éƒ½è¿™æ ·å†™ï¼Œä»£ç å°±ä¼šå˜å¾—éå¸¸è‡ƒè‚¿ï¼ŒAOP å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬æŠŠè¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€æƒé™ã€äº‹åŠ¡ç­‰ï¼‰ä»ä¸šåŠ¡ä»£ç ä¸­æŠ½å–å‡ºæ¥ã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªåˆ‡é¢ï¼Œåœ¨åˆ‡é¢ä¸­ç»Ÿä¸€å¤„ç†è¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Before</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logBefore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹æ‰§è¡Œæ–¹æ³•: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">AfterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡ŒæˆåŠŸ: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">AfterThrowing</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                   throwing</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ex&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfterThrowing</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå¤±è´¥: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), ex);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œä¸šåŠ¡ä»£ç å°±å˜å¾—éå¸¸å¹²å‡€äº†ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> user) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸éœ€è¦å…³å¿ƒæ—¥å¿—ã€æƒé™ã€äº‹åŠ¡ç­‰</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>----é¢è¯•ä¸­å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><p>ä»æŠ€æœ¯å®ç°ä¸Šæ¥è¯´ï¼ŒAOP ä¸»è¦æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°çš„ã€‚å¦‚æœç›®æ ‡ç±»å®ç°äº†æ¥å£ï¼Œå°±ç”¨ JDK åŠ¨æ€ä»£ç†ï¼›å¦‚æœæ²¡æœ‰å®ç°æ¥å£ï¼Œå°±ç”¨ CGLIB æ¥åˆ›å»ºå­ç±»ä»£ç†ã€‚ä»£ç†å¯¹è±¡ä¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰åæ’å…¥æˆ‘ä»¬å®šä¹‰çš„åˆ‡é¢é€»è¾‘ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250707112900.png" alt="stack overflowï¼šJDK Proxy vs CGLIB Proxy" tabindex="0" loading="lazy"><figcaption>stack overflowï¼šJDK Proxy vs CGLIB Proxy</figcaption></figure><h4 id="spring-aop-æœ‰å“ªäº›æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#spring-aop-æœ‰å“ªäº›æ ¸å¿ƒæ¦‚å¿µ"><span>Spring AOP æœ‰å“ªäº›æ ¸å¿ƒæ¦‚å¿µï¼Ÿ</span></a></h4><p>Spring AOP æ˜¯ AOP çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œæˆ‘æŒ‰ç…§åœ¨å·¥ä½œ/å­¦ä¹ ä¸­ç†è§£çš„é‡è¦ç¨‹åº¦æ¥è¯´ä¸€ä¸‹ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250707114823.png" alt="DataFlair Teamï¼šAOP æ ¸å¿ƒæ¦‚å¿µ" tabindex="0" loading="lazy"><figcaption>DataFlair Teamï¼šAOP æ ¸å¿ƒæ¦‚å¿µ</figcaption></figure><p>â‘ ã€<strong>åˆ‡é¢</strong>ï¼šæˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ªç±»ï¼ŒåŒ…å«äº†è¦åœ¨ä»€ä¹ˆæ—¶å€™ã€ä»€ä¹ˆåœ°æ–¹æ‰§è¡Œä»€ä¹ˆé€»è¾‘ã€‚æ¯”å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ—¥å¿—åˆ‡é¢ï¼Œä¸“é—¨è´Ÿè´£è®°å½•æ–¹æ³•çš„æ‰§è¡Œæƒ…å†µã€‚åœ¨ Spring ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨ <code>@Aspect</code> æ³¨è§£æ¥æ ‡è¯†ä¸€ä¸ªåˆ‡é¢ç±»ã€‚</p><p>â‘¡ã€<strong>åˆ‡ç‚¹</strong>ï¼šå®šä¹‰äº†åœ¨å“ªäº›åœ°æ–¹åº”ç”¨åˆ‡é¢é€»è¾‘ã€‚è¯´ç™½äº†å°±æ˜¯å‘Šè¯‰ Springï¼Œæˆ‘è¿™ä¸ªåˆ‡é¢è¦åœ¨å“ªäº›æ–¹æ³•ä¸Šç”Ÿæ•ˆã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œè®©å®ƒåŒ¹é…æ‰€æœ‰ Service å±‚çš„æ–¹æ³•ï¼Œæˆ–è€…åŒ¹é…æŸä¸ªç‰¹å®šåŒ…ä¸‹çš„æ‰€æœ‰æ–¹æ³•ã€‚åœ¨ Spring ä¸­ç”¨ <code>@Pointcut</code> æ³¨è§£æ¥å®šä¹‰ï¼Œé€šå¸¸ä¼šå†™ä¸€äº›è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ <code>execution( com.example.service..*(..))</code> è¿™æ ·çš„ã€‚</p><p>â‘¢ã€<strong>é€šçŸ¥</strong>ï¼šæ˜¯åˆ‡é¢ä¸­å…·ä½“è¦æ‰§è¡Œçš„ä»£ç é€»è¾‘ã€‚å®ƒæœ‰å‡ ç§ç±»å‹ï¼š<code>@Before</code> æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œï¼Œ<code>@After</code> æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œåæ‰§è¡Œï¼Œ<code>@Around</code> æ˜¯ç¯ç»•é€šçŸ¥ï¼Œå¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œå‰åéƒ½æ‰§è¡Œï¼Œ<code>@AfterReturning</code> æ˜¯åœ¨æ–¹æ³•æ­£å¸¸è¿”å›åæ‰§è¡Œï¼Œ<code>@AfterThrowing</code> æ˜¯åœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œã€‚æˆ‘ä¸€èˆ¬ç”¨å¾—æœ€å¤šçš„æ˜¯ <code>@Around</code>ï¼Œå› ä¸ºå®ƒæœ€çµæ´»ï¼Œå¯ä»¥æ§åˆ¶æ–¹æ³•æ˜¯å¦æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹å‚æ•°å’Œè¿”å›å€¼ã€‚</p><p>â‘£ã€<strong>è¿æ¥ç‚¹</strong>ï¼šè¢«æ‹¦æˆªåˆ°çš„ç‚¹ï¼Œå› ä¸º Spring åªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼Œæ‰€ä»¥åœ¨ Spring ä¸­ï¼Œè¿æ¥ç‚¹æŒ‡çš„æ˜¯è¢«æ‹¦æˆªåˆ°çš„æ–¹æ³•ï¼Œå®é™…ä¸Šè¿æ¥ç‚¹è¿˜å¯ä»¥æ˜¯å­—æ®µæˆ–è€…æ„é€ æ–¹æ³•ã€‚</p><p>â‘¤ã€<strong>ç»‡å…¥</strong>ï¼šæ˜¯æŠŠåˆ‡é¢é€»è¾‘åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡çš„è¿‡ç¨‹ã€‚Spring AOP æ˜¯åœ¨è¿è¡Œæ—¶é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°ç»‡å…¥çš„ï¼Œå½“æˆ‘ä»¬ä» Spring å®¹å™¨ä¸­è·å– Bean çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ª Bean éœ€è¦è¢«åˆ‡é¢å¤„ç†ï¼ŒSpring å°±ä¼šè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ç»™æˆ‘ä»¬ã€‚</p><p>â‘¥ã€<strong>ç›®æ ‡å¯¹è±¡</strong>ï¼šè¢«åˆ‡é¢å¤„ç†çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶å†™çš„ Serviceã€Controller ç­‰ç±»ã€‚Spring AOP ä¼šåœ¨ç›®æ ‡å¯¹è±¡ä¸Šç»‡å…¥åˆ‡é¢é€»è¾‘ã€‚</p><p>å®ƒä»¬ä¹‹é—´çš„é€»è¾‘å…³ç³»å›¾æ˜¯è¿™æ ·çš„ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>åˆ‡é¢ï¼ˆAspectï¼‰</span></span>
<span class="line"><span>    â”œâ”€â”€ åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰â”€â”€â”€ å®šä¹‰åœ¨å“ªé‡Œæ‰§è¡Œ</span></span>
<span class="line"><span>    â””â”€â”€ é€šçŸ¥ï¼ˆAdviceï¼‰   â”€â”€â”€ å®šä¹‰ä½•æ—¶æ‰§è¡Œä»€ä¹ˆ</span></span>
<span class="line"><span>            â”œâ”€â”€ @Before</span></span>
<span class="line"><span>            â”œâ”€â”€ @After</span></span>
<span class="line"><span>            â”œâ”€â”€ @AfterReturning</span></span>
<span class="line"><span>            â”œâ”€â”€ @AfterThrowing</span></span>
<span class="line"><span>            â””â”€â”€ @Around</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰â”€â”€â†’ ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰â”€â”€â†’ ç»‡å…¥ï¼ˆWeavingï¼‰</span></span>
<span class="line"><span>     â†‘                                    â†“</span></span>
<span class="line"><span>è¿æ¥ç‚¹ï¼ˆJoin Pointï¼‰                    å®¢æˆ·ç«¯è°ƒç”¨</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spring-aop-ç»‡å…¥æœ‰å“ªå‡ ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#spring-aop-ç»‡å…¥æœ‰å“ªå‡ ç§æ–¹å¼"><span>Spring AOP ç»‡å…¥æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</span></a></h4><p>ç»‡å…¥æœ‰ä¸‰ç§ä¸»è¦æ–¹å¼ï¼Œæˆ‘æŒ‰ç…§å®ƒä»¬çš„æ‰§è¡Œæ—¶æœºæ¥è¯´ä¸€ä¸‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250707120111.png" alt="AOP ç»‡å…¥æ–¹å¼" tabindex="0" loading="lazy"><figcaption>AOP ç»‡å…¥æ–¹å¼</figcaption></figure><p>ç¼–è¯‘æœŸç»‡å…¥æ˜¯åœ¨ç¼–è¯‘ Java æºç çš„æ—¶å€™å°±æŠŠåˆ‡é¢é€»è¾‘ç»‡å…¥åˆ°ç›®æ ‡ç±»ä¸­ã€‚è¿™ç§æ–¹å¼æœ€å…¸å‹çš„å®ç°å°±æ˜¯ AspectJ ç¼–è¯‘å™¨ã€‚å®ƒä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™ç›´æ¥ä¿®æ”¹å­—èŠ‚ç ï¼ŒæŠŠåˆ‡é¢çš„é€»è¾‘æ’å…¥åˆ°ç›®æ ‡æ–¹æ³•ä¸­ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æºä»£ç </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Before</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logBefore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå‰: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ä¿å­˜ç”¨æˆ·: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> username);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ç”Ÿæˆçš„ class æ–‡ä»¶å°±å·²ç»åŒ…å«äº†åˆ‡é¢é€»è¾‘ï¼Œè¿è¡Œæ—¶ä¸éœ€è¦é¢å¤–çš„ä»£ç†æœºåˆ¶ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ç»‡å…¥çš„åˆ‡é¢ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå‰: saveUser&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // åŸå§‹ä¸šåŠ¡ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ä¿å­˜ç”¨æˆ·: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> username);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–è¯‘æœŸç»‡å…¥çš„ä¼˜ç‚¹æ˜¯æ€§èƒ½æœ€å¥½ï¼Œå› ä¸ºæ²¡æœ‰ä»£ç†çš„å¼€é”€ï¼Œä½†ç¼ºç‚¹æ˜¯éœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„ç¼–è¯‘å™¨ï¼Œè€Œä¸”æ¯”è¾ƒå¤æ‚ï¼Œåœ¨ Spring é¡¹ç›®ä¸­ç”¨å¾—ä¸å¤šã€‚</p><p>ç±»åŠ è½½æœŸç»‡å…¥æ˜¯åœ¨ JVM åŠ è½½ class æ–‡ä»¶çš„æ—¶å€™è¿›è¡Œç»‡å…¥ã€‚è¿™ç§æ–¹å¼é€šè¿‡ Java çš„ Instrumentation API æˆ–è€…è‡ªå®šä¹‰çš„ ClassLoader æ¥å®ç°ï¼Œåœ¨ç±»è¢«åŠ è½½åˆ° JVM ä¹‹å‰ä¿®æ”¹å­—èŠ‚ç ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WeavingClassLoader</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ClassLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> findClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ClassNotFoundException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">        byte</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">classBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> loadClassBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(name);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // åœ¨è¿™é‡Œè¿›è¡Œå­—èŠ‚ç ç»‡å…¥</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">        byte</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wovenBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> weaveAspects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(classBytes);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> defineClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(name, wovenBytes, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">wovenBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;"> byte</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">[] </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">weaveAspects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">byte</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">classBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä½¿ç”¨ ASM æˆ–å…¶ä»–å­—èŠ‚ç æ“ä½œåº“è¿›è¡Œç»‡å…¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> classBytes;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>AspectJ çš„ Load-Time Weaving å°±æ˜¯è¿™ç§æ–¹å¼çš„å…¸å‹å®ç°ã€‚å®ƒæ¯”ç¼–è¯‘æœŸç»‡å…¥æ›´çµæ´»ä¸€äº›ï¼Œä½†æ˜¯é…ç½®ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦åœ¨ JVM å¯åŠ¨å‚æ•°ä¸­æŒ‡å®š Java agentï¼Œåœ¨ Spring ä¸­ä¹Ÿæœ‰æ”¯æŒï¼Œä½†ç”¨å¾—ä¸æ˜¯ç‰¹åˆ«å¤šã€‚</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># JVM å¯åŠ¨å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -javaagent:aspectjweaver.jar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myapp.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ—¶ç»‡å…¥æ˜¯æˆ‘ä»¬åœ¨ Spring ä¸­æœ€å¸¸è§çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°ã€‚Spring AOP é‡‡ç”¨çš„å°±æ˜¯è¿™ç§æ–¹å¼ã€‚å½“ Spring å®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°æŸä¸ª Bean éœ€è¦è¢«åˆ‡é¢å¤„ç†ï¼Œå°±ä¼šä¸ºè¿™ä¸ª Bean åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚å¦‚æœç›®æ ‡ç±»å®ç°äº†æ¥å£ï¼ŒSpring ä¼šä½¿ç”¨ JDK çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// å®ç°ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ä¿å­˜ç”¨æˆ·: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> username);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Spring è‡ªåŠ¨åˆ›å»ºçš„ä»£ç†ï¼ˆä¼ªä»£ç ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceProxy</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Advisor</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> advisors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰§è¡Œå‰ç½®é€šçŸ¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Advisor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> advisor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> advisors) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">advisor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">matches</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;saveUser&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                advisor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getAdvice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">before</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(username);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰§è¡Œåç½®é€šçŸ¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Advisor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> advisor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> advisors) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            advisor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getAdvice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">after</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°æ¥å£ï¼Œå°±ä¼šä½¿ç”¨ CGLIB æ¥åˆ›å»ºä¸€ä¸ªå­ç±»ä½œä¸ºä»£ç†ã€‚è¿è¡Œæ—¶ç»‡å…¥çš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œä¸éœ€è¦ç‰¹æ®Šçš„ç¼–è¯‘å™¨æˆ– JVM é…ç½®ï¼Œç¼ºç‚¹æ˜¯æœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œå› ä¸ºæ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½è¦ç»è¿‡ä»£ç†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ²¡æœ‰æ¥å£çš„ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> orderId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ›å»ºè®¢å•: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orderId);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// CGLIB ç”Ÿæˆçš„ä»£ç†å­ç±»ï¼ˆä¼ªä»£ç ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderService$$EnhancerByCGLIB$$12345</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MethodInterceptor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> interceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> orderId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // é€šè¿‡ MethodInterceptor æ‰§è¡Œåˆ‡é¢é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        interceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intercept</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;createOrder&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[]{orderId}, </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                            new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MethodProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                                public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> invokeSuper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> obj</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                                    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> OrderService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">super</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((String) args[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                            });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Spring AOP é»˜è®¤çš„ç»‡å…¥æ–¹å¼å°±æ˜¯è¿è¡Œæ—¶ç»‡å…¥ï¼Œä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œåªéœ€è¦åŠ ä¸ª <code>@Aspect</code> æ³¨è§£å’Œç›¸åº”çš„é€šçŸ¥æ³¨è§£å°±å¯ä»¥äº†ã€‚è™½ç„¶æ€§èƒ½ä¸Šä¸å¦‚ç¼–è¯‘æœŸç»‡å…¥ï¼Œä½†æ˜¯å¯¹äºå¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯æ¥è¯´ï¼Œè¿™ç‚¹æ€§èƒ½å¼€é”€æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Spring AOP çš„ä»£ç†åˆ›å»ºè¿‡ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">EnableAspectJAutoProxy</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // å¯ç”¨ AOP è‡ªåŠ¨ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AopConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Spring å†…éƒ¨çš„ä»£ç†åˆ›å»ºé€»è¾‘ï¼ˆç®€åŒ–ç‰ˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DefaultAopProxyFactory</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AopProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AopProxy</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createAopProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AdvisedSupport</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isOptimize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isProxyTargetClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> hasNoUserSuppliedProxyInterfaces</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(config)) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // ä½¿ç”¨ CGLIB ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CglibAopProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(config);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> JdkDynamicAopProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(config);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="aspectj-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#aspectj-æ˜¯ä»€ä¹ˆ"><span>AspectJ æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h4><p>AspectJ æ˜¯ä¸€ä¸ª AOP æ¡†æ¶ï¼Œå®ƒå¯ä»¥åšå¾ˆå¤š Spring AOP å¹²ä¸äº†çš„äº‹æƒ…ï¼Œæ¯”å¦‚è¯´ç¼–è¯‘æ—¶ã€ç¼–è¯‘åå’Œç±»åŠ è½½æ—¶ç»‡å…¥åˆ‡é¢ã€‚å¹¶ä¸”æä¾›äº†å¾ˆå¤šå¤æ‚çš„åˆ‡ç‚¹è¡¨è¾¾å¼å’Œé€šçŸ¥ç±»å‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240806100537.png" alt="AspectJ å®˜ç½‘" tabindex="0" loading="lazy"><figcaption>AspectJ å®˜ç½‘</figcaption></figure><p>Spring AOP åªæ”¯æŒæ–¹æ³•çº§åˆ«çš„æ‹¦æˆªï¼Œè€Œä¸”åªèƒ½æ‹¦æˆª Spring å®¹å™¨ç®¡ç†çš„ Beanã€‚ä½†æ˜¯ AspectJ å¯ä»¥æ‹¦æˆªä»»ä½• Java å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ã€å­—æ®µè®¿é—®ã€æ„é€ æ–¹æ³•æ‰§è¡Œã€å¼‚å¸¸å¤„ç†ç­‰ç­‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Spring AOP åªèƒ½åšåˆ°è¿™äº›</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SpringAopAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // âœ… å¯ä»¥æ‹¦æˆªï¼špublic æ–¹æ³•è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Around</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(public * com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> aroundPublicMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ProceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> pjp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> pjp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">proceed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // âŒ æ— æ³•æ‹¦æˆªï¼šå­—æ®µè®¿é—®</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // âŒ æ— æ³•æ‹¦æˆªï¼šæ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // âŒ æ— æ³•æ‹¦æˆªï¼šç§æœ‰æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // âŒ æ— æ³•æ‹¦æˆªï¼šé™æ€æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spring-aop-æœ‰å“ªäº›é€šçŸ¥æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#spring-aop-æœ‰å“ªäº›é€šçŸ¥æ–¹å¼"><span>Spring AOP æœ‰å“ªäº›é€šçŸ¥æ–¹å¼ï¼Ÿ</span></a></h4><p>Spring AOP æä¾›äº†å¤šç§é€šçŸ¥æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬åœ¨æ–¹æ³•æ‰§è¡Œçš„ä¸åŒé˜¶æ®µæ’å…¥é€»è¾‘ã€‚å¸¸ç”¨çš„é€šçŸ¥æ–¹å¼æœ‰ï¼š</p><ul><li>å‰ç½®é€šçŸ¥ (@Before)</li><li>è¿”å›é€šçŸ¥ (@AfterReturning)</li><li>å¼‚å¸¸é€šçŸ¥ (@AfterThrowing)</li><li>åç½®é€šçŸ¥ (@After)</li><li>ç¯ç»•é€šçŸ¥ (@Around)</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-320fa34f-6620-419c-b17a-4f516a83caeb.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring AOP é€šçŸ¥æ–¹å¼" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring AOP é€šçŸ¥æ–¹å¼</figcaption></figure><p>å‰ç½®é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œçš„é€šçŸ¥ã€‚è¿™ç§é€šçŸ¥æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ç”¨æ¥åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæ¯”å¦‚å‚æ•°æ ¡éªŒã€æƒé™æ£€æŸ¥ã€è®°å½•æ–¹æ³•å¼€å§‹æ‰§è¡Œçš„æ—¥å¿—ç­‰ç­‰ã€‚å‰ç½®é€šçŸ¥æ— æ³•é˜»æ­¢ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œï¼Œä¹Ÿæ— æ³•ä¿®æ”¹æ–¹æ³•çš„å‚æ•°ï¼Œå®ƒåªèƒ½åœ¨æ–¹æ³•æ‰§è¡Œå‰åšä¸€äº›é¢å¤–çš„æ“ä½œã€‚æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ç»å¸¸ç”¨å®ƒæ¥è®°å½•æ“ä½œæ—¥å¿—ï¼Œæ¯”å¦‚è®°å½•è°åœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨äº†ä»€ä¹ˆæ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Before</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logBefore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•åå’Œå‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è°ƒç”¨æ–¹æ³•: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å‚æ•°: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Arrays</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åç½®é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆåæ‰§è¡Œçš„ï¼Œä¸ç®¡æ–¹æ³•æ˜¯æ­£å¸¸è¿”å›è¿˜æ˜¯æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œã€‚è¿™ç§é€šçŸ¥ä¸»è¦ç”¨æ¥åšä¸€äº›æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚é‡Šæ”¾èµ„æºã€è®°å½•æ–¹æ³•æ‰§è¡Œå®Œæˆçš„æ—¥å¿—ç­‰ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåç½®é€šçŸ¥æ‹¿ä¸åˆ°æ–¹æ³•çš„è¿”å›å€¼ï¼Œä¹Ÿæ•è·ä¸åˆ°å¼‚å¸¸ä¿¡æ¯ï¼Œå®ƒå°±æ˜¯çº¯ç²¹çš„åœ¨æ–¹æ³•æ‰§è¡Œååšä¸€äº›æ”¶å°¾å·¥ä½œã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">After</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•æ‰§è¡Œå®Œæˆçš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå®Œæˆ: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ­£å¸¸è¿”å›åæ‰§è¡Œçš„ã€‚è¿™ç§é€šçŸ¥å¯ä»¥è·å–åˆ°æ–¹æ³•çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ³¨è§£ä¸­æŒ‡å®š returning å‚æ•°æ¥æ¥æ”¶è¿”å›å€¼ã€‚è¿”å›é€šçŸ¥ç»å¸¸ç”¨æ¥åšä¸€äº›åŸºäºè¿”å›ç»“æœçš„åç»­å¤„ç†ï¼Œæ¯”å¦‚ç¼“å­˜æ–¹æ³•çš„è¿”å›ç»“æœã€æ ¹æ®è¿”å›å€¼å‘é€é€šçŸ¥ç­‰ç­‰ã€‚å¦‚æœæ–¹æ³•æŠ›å‡ºå¼‚å¸¸çš„è¯ï¼Œè¿”å›é€šçŸ¥æ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">AfterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> returning</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;result&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•æ‰§è¡Œå®Œæˆçš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå®Œæˆ: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•è¿”å›å€¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è¿”å›å€¼: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¼‚å¸¸é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œçš„ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ³¨è§£ä¸­æŒ‡å®š throwing å‚æ•°æ¥æ¥æ”¶å¼‚å¸¸å¯¹è±¡ã€‚å¼‚å¸¸é€šçŸ¥ä¸»è¦ç”¨æ¥åšå¼‚å¸¸å¤„ç†å’Œè®°å½•ï¼Œæ¯”å¦‚è®°å½•é”™è¯¯æ—¥å¿—ã€å‘é€å‘Šè­¦ã€å¼‚å¸¸ç»Ÿè®¡ç­‰ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼‚å¸¸é€šçŸ¥ä¸èƒ½å¤„ç†å¼‚å¸¸ï¼Œå¼‚å¸¸è¿˜æ˜¯ä¼šç»§ç»­å‘ä¸ŠæŠ›å‡ºã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">AfterThrowing</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                     throwing</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ex&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfterThrowing</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•åå’Œå¼‚å¸¸ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå¼‚å¸¸: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼‚å¸¸ä¿¡æ¯: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¯ç»•é€šçŸ¥æ˜¯æœ€å¼ºå¤§ä¹Ÿæ˜¯æˆ‘ä»¬ç”¨å¾—æœ€å¤šçš„ä¸€ç§é€šçŸ¥ã€‚å®ƒå¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œå‰åéƒ½æ‰§è¡Œé€»è¾‘ï¼Œè€Œä¸”å¯ä»¥æ§åˆ¶ç›®æ ‡æ–¹æ³•æ˜¯å¦æ‰§è¡Œï¼Œè¿˜å¯ä»¥ä¿®æ”¹æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ã€‚ç¯ç»•é€šçŸ¥çš„æ–¹æ³•å¿…é¡»æ¥æ”¶ä¸€ä¸ª ProceedingJoinPoint å‚æ•°ï¼Œé€šè¿‡è°ƒç”¨å…¶ <code>proceed()</code> æ–¹æ³•æ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•ã€‚</p><p><a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a> é¡¹ç›®ä¸­å°±ä¸»è¦æ˜¯é€šè¿‡ç¯ç»•é€šçŸ¥æ¥å®ç°åˆ‡é¢ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250707151431.png" alt="æŠ€æœ¯æ´¾æºç ï¼šç¯ç»•é€šçŸ¥" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šç¯ç»•é€šçŸ¥</figcaption></figure><p>å¦‚æœæœ‰å¤šä¸ªåˆ‡é¢ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>@Order</code> æ³¨è§£æŒ‡å®šå…ˆåé¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WebLogAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">WebLogAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;@annotation(cn.fighter3.spring.aop_demo.WebLog)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> webLog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Before</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;webLog()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doBefore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å¼€å§‹æ‰“å°è¯·æ±‚æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ServletRequestAttributes</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> attributes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (ServletRequestAttributes) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RequestContextHolder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRequestAttributes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        HttpServletRequest</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> attributes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°è¯·æ±‚ç›¸å…³å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;========================================== Start ==========================================&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°è¯·æ±‚ url</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;URL            : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRequestURL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å° Http method</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;HTTP Method    : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°è°ƒç”¨ controller çš„å…¨è·¯å¾„ä»¥åŠæ‰§è¡Œæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Class Method   : {}.{}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaringTypeName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°è¯·æ±‚çš„ IP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;IP             : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRemoteAddr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°è¯·æ±‚å…¥å‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Request Args   : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ObjectMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">writeValueAsString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">After</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;webLog()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doAfter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ç»“æŸåæ‰“ä¸ªåˆ†éš”çº¿ï¼Œæ–¹ä¾¿æŸ¥çœ‹</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;=========================================== End ===========================================&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Around</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;webLog()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doAround</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ProceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> proceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //å¼€å§‹æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> startTime</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentTimeMillis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> proceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">proceed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰“å°å‡ºå‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Response Args  : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ObjectMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">writeValueAsString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(result));</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰§è¡Œè€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Time-Consuming : {} ms&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentTimeMillis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> startTime);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spring-aop-å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™" tabindex="-1"><a class="header-anchor" href="#spring-aop-å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™"><span>Spring AOP å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™ï¼Ÿ</span></a></h4><p>Spring AOP æ˜¯åœ¨ Bean çš„åˆå§‹åŒ–é˜¶æ®µå‘ç”Ÿçš„ï¼Œå…·ä½“æ¥è¯´æ˜¯åœ¨ Bean ç”Ÿå‘½å‘¨æœŸçš„åç½®å¤„ç†é˜¶æ®µã€‚</p><p>åœ¨ Bean å®ä¾‹åŒ–å®Œæˆã€å±æ€§æ³¨å…¥å®Œæˆä¹‹åï¼ŒSpring ä¼šè°ƒç”¨æ‰€æœ‰ BeanPostProcessor çš„ postProcessAfterInitialization æ–¹æ³•ï¼ŒAOP ä»£ç†çš„åˆ›å»ºå°±æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µå®Œæˆçš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240806102547.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šBeanPostProcessor" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šBeanPostProcessor</figcaption></figure><h4 id="ç®€å•æ€»ç»“ä¸€ä¸‹-aop" tabindex="-1"><a class="header-anchor" href="#ç®€å•æ€»ç»“ä¸€ä¸‹-aop"><span>ç®€å•æ€»ç»“ä¸€ä¸‹ AOP</span></a></h4><p>AOPï¼Œä¹Ÿå°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œæ—¨åœ¨æé«˜ä»£ç çš„æ¨¡å—åŒ–ã€‚æ¯”å¦‚è¯´å¯ä»¥å°†æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ç­‰åˆ†ç¦»å‡ºæ¥ï¼Œæ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€‚</p><p>AOP çš„æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬åˆ‡é¢ã€è¿æ¥ç‚¹ã€é€šçŸ¥ã€åˆ‡ç‚¹å’Œç»‡å…¥ç­‰ã€‚</p><p>â‘  åƒæ—¥å¿—æ‰“å°ã€äº‹åŠ¡ç®¡ç†ç­‰éƒ½å¯ä»¥æŠ½ç¦»ä¸ºåˆ‡é¢ï¼Œå¯ä»¥å£°æ˜åœ¨ç±»çš„æ–¹æ³•ä¸Šã€‚åƒ <code>@Transactional</code> æ³¨è§£ï¼Œå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ AOP åº”ç”¨ï¼Œå®ƒå°±æ˜¯é€šè¿‡ AOP æ¥å®ç°äº‹åŠ¡ç®¡ç†çš„ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨æ–¹æ³•ä¸Šæ·»åŠ  <code>@Transactional</code> æ³¨è§£ï¼ŒSpring å°±ä¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰åæ·»åŠ äº‹åŠ¡ç®¡ç†çš„é€»è¾‘ã€‚</p><p>â‘¡ Spring AOP æ˜¯åŸºäºä»£ç†çš„ï¼Œå®ƒé»˜è®¤ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç†æ¥å®ç° AOPã€‚</p><p>â‘¢ Spring AOP çš„ç»‡å…¥æ–¹å¼æ˜¯è¿è¡Œæ—¶ç»‡å…¥ï¼Œè€Œ AspectJ æ”¯æŒç¼–è¯‘æ—¶ç»‡å…¥ã€ç±»åŠ è½½æ—¶ç»‡å…¥ã€‚</p><h4 id="aopå’Œ-oop-çš„å…³ç³»" tabindex="-1"><a class="header-anchor" href="#aopå’Œ-oop-çš„å…³ç³»"><span>AOPå’Œ OOP çš„å…³ç³»ï¼Ÿ</span></a></h4><p>AOP å’Œ OOP æ˜¯äº’è¡¥çš„ç¼–ç¨‹æ€æƒ³ï¼š</p><ol><li>OOP é€šè¿‡ç±»å’Œå¯¹è±¡å°è£…æ•°æ®å’Œè¡Œä¸ºï¼Œä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚</li><li>AOP æä¾›äº†è§£å†³æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€æƒé™ã€äº‹åŠ¡ç­‰ï¼‰çš„æœºåˆ¶ï¼Œå°†è¿™äº›é€»è¾‘é›†ä¸­ç®¡ç†ã€‚</li></ol><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯ Java åç«¯å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´ AOP çš„åŸç†ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³ 25 å±Šæ—¥å¸¸å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´ä½ å¯¹ AOP å’Œ IoC çš„ç†è§£ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 7 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´ä¸€ä¸‹ Spring AOP çš„å®ç°åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šä»‹ç» Spring IoC å’Œ AOP?</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ‹›å•†é“¶è¡Œé¢ç»åŒå­¦ 6 æ‹›é“¶ç½‘ç»œç§‘æŠ€é¢è¯•åŸé¢˜ï¼šSpringBootæ¡†æ¶çš„AOPã€IOC/DIï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 4 ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring AOPå‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç†æƒ³æ±½è½¦é¢ç»åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring AOPçš„æ¦‚å¿µäº†è§£å—ï¼ŸAOPå’Œ OOP çš„å…³ç³»ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 7 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œæœ‰çƒå‹æé—®è¦ä¸€ä¸ªè¯¦ç»†ç‰ˆçš„å­¦ä¹ è®¡åˆ’è¡¨ï¼Œæˆ‘ç”¨äº†ä¸€ä¸ªæ—©ä¸Šçš„æ—¶é—´æ•´ç†äº†ä¸€ä¸ªä¸‰ä¸ªæœˆçš„å†²åˆºè®¡åˆ’ï¼ŒåŒ…æ‹¬å…«è‚¡ã€ç®—æ³•ã€é¡¹ç›®çš„å®‰æ’ï¼Œå·²ç»æ”¾åœ¨äº†<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer"> Java é¢è¯•æŒ‡å—</a>ä¸­ï¼Œéœ€è¦çš„å°ä¼™ä¼´å¯ä»¥è‡ªå–åšä¸ªå‚è€ƒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250707153345.png" alt="å­¦ä¹ è®¡åˆ’è¡¨-ä¸‰ä¸ªæœˆç§‹æ‹›å†²åˆºè®¡åˆ’" tabindex="0" loading="lazy"><figcaption>å­¦ä¹ è®¡åˆ’è¡¨-ä¸‰ä¸ªæœˆç§‹æ‹›å†²åˆºè®¡åˆ’</figcaption></figure><h3 id="_21-ğŸŒŸaopçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_21-ğŸŒŸaopçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›"><span>21.ğŸŒŸAOPçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</span></a></h3><p>ç­”ï¼šAOP åœ¨å®é™…å·¥ä½œ/ç¼–ç å­¦ä¹ ä¸­æœ‰å¾ˆå¤šåº”ç”¨åœºæ™¯ï¼Œæˆ‘æŒ‰ç…§ä½¿ç”¨é¢‘ç‡æ¥è¯´è¯´å‡ ä¸ªä¸»è¦çš„ã€‚</p><p>äº‹åŠ¡ç®¡ç†æ˜¯ç”¨å¾—æœ€å¤šçš„åœºæ™¯ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªé¡¹ç›®éƒ½ä¼šç”¨åˆ°ã€‚åªéœ€è¦åœ¨ Service æ–¹æ³•ä¸ŠåŠ ä¸ª <code>@Transactional</code> æ³¨è§£ï¼ŒSpring å°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç®¡ç†äº‹åŠ¡çš„å¼€å¯ã€æäº¤å’Œå›æ»šã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250708161139.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Transactionaläº‹åŠ¡" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Transactionaläº‹åŠ¡</figcaption></figure><p>æ—¥å¿—è®°å½•ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„åº”ç”¨ã€‚åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸­ï¼Œå°±åˆ©ç”¨äº† AOP æ¥æ‰“å°æ¥å£çš„å…¥å‚å’Œå‡ºå‚æ—¥å¿—ã€æ‰§è¡Œæ—¶é—´ï¼Œæ–¹ä¾¿åæœŸ bug æº¯æºå’Œæ€§èƒ½è°ƒä¼˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240310180334.png" alt="æ²‰é»˜ç‹äºŒï¼šæŠ€æœ¯æ´¾æ•™ç¨‹" tabindex="0" loading="lazy"><figcaption>æ²‰é»˜ç‹äºŒï¼šæŠ€æœ¯æ´¾æ•™ç¨‹</figcaption></figure><p>----è¿™éƒ¨åˆ†é¢è¯•å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>ç¬¬ä¸€æ­¥ï¼Œå®šä¹‰ <code>@MdcDot</code> æ³¨è§£ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Target</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">({</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">ElementType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">METHOD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ElementType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">TYPE</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">})</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Retention</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RetentionPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RUNTIME</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Documented</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">interface</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;"> MdcDot</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> bizCode</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œé…ç½® MdcAspect åˆ‡é¢ï¼Œæ‹¦æˆªå¸¦æœ‰ <code>@MdcDot</code> æ³¨è§£çš„æ–¹æ³•æˆ–ç±»ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰åè¿›è¡Œ MDC æ“ä½œï¼Œè®°å½•æ–¹æ³•æ‰§è¡Œè€—æ—¶ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240310180741.png" alt="æŠ€æœ¯æ´¾é¡¹ç›®ï¼šé…ç½® AOP åˆ‡é¢" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾é¡¹ç›®ï¼šé…ç½® AOP åˆ‡é¢</figcaption></figure><p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨éœ€è¦çš„åœ°æ–¹åŠ ä¸Š <code>@MdcDot</code> æ³¨è§£ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240310181233.png" alt="æŠ€æœ¯æ´¾é¡¹ç›®ï¼šä½¿ç”¨æ³¨è§£" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾é¡¹ç›®ï¼šä½¿ç”¨æ³¨è§£</figcaption></figure><p>ç¬¬å››æ­¥ï¼Œå½“æ¥å£è¢«è°ƒç”¨æ—¶ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æ‰§è¡Œæ—¥å¿—ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>2023-06-16 11:06:13,008 [http-nio-8080-exec-3] INFO |00000000.1686884772947.468581113|101|c.g.p.forum.core.mdc.MdcAspect.handle(MdcAspect.java:47) - æ–¹æ³•æ‰§è¡Œè€—æ—¶: com.github.paicoding.forum.web.front.article.rest.ArticleRestController#recommend = 47</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>----é¢è¯•å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰æƒé™æ§åˆ¶ã€æ€§èƒ½ç›‘æ§ã€ç¼“å­˜å¤„ç†ç­‰åœºæ™¯ã€‚æ€»çš„æ¥è¯´ï¼Œä»»ä½•éœ€è¦åœ¨å¤šä¸ªåœ°æ–¹é‡å¤æ‰§è¡Œçš„é€šç”¨é€»è¾‘ï¼Œéƒ½å¯ä»¥è€ƒè™‘ç”¨ AOP æ¥å®ç°ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šAOPåº”ç”¨åœºæ™¯</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç†æƒ³æ±½è½¦é¢ç»åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šAOPçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šé¡¹ç›®ä¸­çš„AOPæ˜¯æ€ä¹ˆç”¨åˆ°çš„</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 8 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨æ˜Ÿçƒçš„ VIP ç¾¤é‡Œåˆçœ‹åˆ°åœ¨å¹<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­</a>çš„ï¼Œçƒå‹è¯´ç¾å›¢ã€å°çº¢ä¹¦å…«è‚¡éƒ½æ²¡é—®é¢˜ï¼Œçœ‹äºŒå“¥çš„è¶³å¤Ÿã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250708165006.png" alt="å¹äºŒå“¥çš„é¢æ¸£é€†è¢­" tabindex="0" loading="lazy"><figcaption>å¹äºŒå“¥çš„é¢æ¸£é€†è¢­</figcaption></figure><h3 id="_22-è¯´è¯´-spring-aop-å’Œ-aspectj-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_22-è¯´è¯´-spring-aop-å’Œ-aspectj-åŒºåˆ«"><span>22.è¯´è¯´ Spring AOP å’Œ AspectJ åŒºåˆ«?</span></a></h3><p>Spring AOP åªæ”¯æŒæ–¹æ³•çº§åˆ«çš„ç»‡å…¥ï¼Œè€Œä¸”åªèƒ½æ‹¦æˆª Spring å®¹å™¨ç®¡ç†çš„ Beanã€‚ä½†æ˜¯ AspectJ å‡ ä¹å¯ä»¥ç»‡å…¥ä»»ä½•åœ°æ–¹ï¼ŒåŒ…æ‹¬æ–¹æ³•ã€å­—æ®µã€æ„é€ æ–¹æ³•ã€å¼‚å¸¸å¤„ç†ç­‰ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-d1dbe9d9-c55f-4293-8622-d9759064d613.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring AOPå’ŒAspectJå¯¹æ¯”" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring AOPå’ŒAspectJå¯¹æ¯”</figcaption></figure><p>ä»å®ç°æœºåˆ¶ä¸Šæ¥è¯´ï¼ŒSpring AOP æ˜¯åŸºäºåŠ¨æ€ä»£ç†å®ç°çš„ï¼Œåœ¨è¿è¡Œæ—¶ä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä»£ç†ï¼Œé€šè¿‡ä»£ç†æ¥æ‰§è¡Œåˆ‡é¢é€»è¾‘ã€‚è€Œ AspectJ æ˜¯é€šè¿‡å­—èŠ‚ç ç»‡å…¥æ¥å®ç°çš„ï¼Œå®ƒç›´æ¥ä¿®æ”¹ç›®æ ‡ç±»çš„å­—èŠ‚ç ï¼ŒæŠŠåˆ‡é¢é€»è¾‘ç¼–ç»‡åˆ°ç›®æ ‡æ–¹æ³•ä¸­ã€‚</p><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†æ—¶å€™ç”¨çš„éƒ½æ˜¯ Spring AOPï¼Œå› ä¸ºå®ƒèƒ½æ»¡è¶³ç»å¤§å¤šæ•°éœ€æ±‚ï¼Œè€Œä¸”ä½¿ç”¨ç®€å•ã€‚åªæœ‰åœ¨é‡åˆ° Spring AOP æ— æ³•è§£å†³çš„é—®é¢˜æ—¶ï¼Œæ¯”å¦‚éœ€è¦ç»‡å…¥ç¬¬ä¸‰æ–¹ jar åŒ…ä¸­çš„æ–¹æ³•ï¼Œæˆ–è€…ç›‘æ§å­—æ®µæ‰ä¼šè€ƒè™‘å¼•å…¥ AspectJã€‚</p><p>Spring AOP å€Ÿé‰´äº†å¾ˆå¤š AspectJ çš„æ¦‚å¿µå’Œæ³¨è§£ï¼Œæˆ‘ä»¬åœ¨ Spring ä¸­ä½¿ç”¨çš„ <code>@Aspect</code>ã€<code>@Pointcut</code> è¿™äº›æ³¨è§£ï¼Œå…¶å®éƒ½æ˜¯ AspectJ å®šä¹‰çš„ã€‚</p><h3 id="_23-è¯´è¯´-aop-å’Œåå°„çš„åŒºåˆ«-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_23-è¯´è¯´-aop-å’Œåå°„çš„åŒºåˆ«-è¡¥å……"><span>23.è¯´è¯´ AOP å’Œåå°„çš„åŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 7 æœˆ 27 æ—¥å¢è¡¥ã€‚</p></blockquote><p>åå°„ä¸»è¦æ˜¯ä¸ºäº†è®©ç¨‹åºèƒ½å¤Ÿæ£€æŸ¥å’Œæ“ä½œè‡ªèº«çš„ç»“æ„ï¼Œæ¯”å¦‚è·å–ç±»çš„ä¿¡æ¯ã€è°ƒç”¨æ–¹æ³•ã€è®¿é—®å­—æ®µç­‰ç­‰ã€‚è€Œ AOP åˆ™æ˜¯ä¸ºäº†åœ¨ä¸ä¿®æ”¹ä¸šåŠ¡ä»£ç çš„å‰æä¸‹ï¼ŒåŠ¨æ€åœ°ä¸ºæ–¹æ³•æ·»åŠ é¢å¤–çš„è¡Œä¸ºï¼Œæ¯”å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ç­‰ã€‚</p><p>ä»æŠ€æœ¯å®ç°æ¥è¯´ï¼Œåå°„æ˜¯ Java è¯­è¨€æœ¬èº«æä¾›çš„åŠŸèƒ½ï¼Œé€šè¿‡ <code>java.lang.reflect</code> åŒ…ä¸‹çš„ API æ¥å®ç°ã€‚è€Œ AOP é€šå¸¸éœ€è¦æ¡†æ¶æ”¯æŒï¼Œæ¯”å¦‚ Spring AOP æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†å®ç°çš„ï¼Œè€ŒåŠ¨æ€ä»£ç†åˆæ˜¯åŸºäºåå°„å®ç°çš„ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾—ç‰©é¢ç»åŒå­¦ 9 é¢è¯•é¢˜ç›®åŸé¢˜ï¼šæŠ›å¼€Springï¼Œè®²è®²åå°„å’ŒåŠ¨æ€ä»£ç†ï¼Ÿé‚£ä¸‰ç§ä»£ç†æ¨¡å¼æ€ä¹ˆå®ç°çš„ï¼Ÿ</li></ol></blockquote><h3 id="_24-ğŸŒŸè¯´è¯´jdkåŠ¨æ€ä»£ç†å’Œcglibä»£ç†çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_24-ğŸŒŸè¯´è¯´jdkåŠ¨æ€ä»£ç†å’Œcglibä»£ç†çš„åŒºåˆ«"><span>24.ğŸŒŸè¯´è¯´JDKåŠ¨æ€ä»£ç†å’ŒCGLIBä»£ç†çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p>JDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç†æ˜¯ Spring AOP ç”¨æ¥åˆ›å»ºä»£ç†å¯¹è±¡çš„ä¸¤ç§æ–¹å¼ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250709150533.png" alt="logbasexï¼šJDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç†" tabindex="0" loading="lazy"><figcaption>logbasexï¼šJDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç†</figcaption></figure><p>ä»ä½¿ç”¨æ¡ä»¶æ¥è¯´ï¼ŒJDK åŠ¨æ€ä»£ç†è¦æ±‚ç›®æ ‡ç±»å¿…é¡»å®ç°è‡³å°‘ä¸€ä¸ªæ¥å£ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäºæ¥å£æ¥åˆ›å»ºä»£ç†çš„ã€‚è€Œ CGLIB ä»£ç†ä¸éœ€è¦ç›®æ ‡ç±»å®ç°æ¥å£ï¼Œå®ƒæ˜¯é€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»æ¥åˆ›å»ºä»£ç†çš„ã€‚</p><p>è¿™æ˜¯ä¸¤è€…æœ€æ ¹æœ¬çš„åŒºåˆ«ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ª TransferService æ¥å£å’Œ TransferServiceImpl å®ç°ç±»ï¼Œå¦‚æœç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œåˆ›å»ºçš„ä»£ç†å¯¹è±¡ä¼šå®ç° TransferService æ¥å£ï¼›</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250709152040.png" alt="logbasexï¼šJDK åŠ¨æ€ä»£ç†" tabindex="0" loading="lazy"><figcaption>logbasexï¼šJDK åŠ¨æ€ä»£ç†</figcaption></figure><p>å¦‚æœç”¨ CGLIBï¼Œä»£ç†å¯¹è±¡ä¼šç»§æ‰¿ TransferServiceImpl ç±»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250709152111.png" alt="logbasexï¼šCGLIB ä»£ç†" tabindex="0" loading="lazy"><figcaption>logbasexï¼šCGLIB ä»£ç†</figcaption></figure><p>ä»å®ç°åŸç†æ¥è¯´ï¼ŒJDK åŠ¨æ€ä»£ç†æ˜¯ Java åŸç”Ÿæ”¯æŒçš„ï¼Œå®ƒé€šè¿‡åå°„æœºåˆ¶åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºä¸€ä¸ªå®ç°äº†æŒ‡å®šæ¥å£çš„ä»£ç†ç±»ã€‚å½“æˆ‘ä»¬è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œä¼šè¢«è½¬å‘åˆ° InvocationHandler çš„ invoke æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•é‡Œæ’å…¥åˆ‡é¢é€»è¾‘ï¼Œç„¶åå†é€šè¿‡åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„çœŸå®æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JdkProxyExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserServiceImpl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (UserService) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClassLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getInterfaces</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            (proxy1, method, args1) </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Before method: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(target, args1);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;After method: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        );</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>CGLIB åˆ™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å­—èŠ‚ç ç”Ÿæˆåº“ï¼Œå®ƒé€šè¿‡ ASM å­—èŠ‚ç æ¡†æ¶åŠ¨æ€ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼Œç„¶åé‡å†™çˆ¶ç±»çš„æ–¹æ³•æ¥æ’å…¥åˆ‡é¢é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CglibProxyExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Enhancer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setSuperclass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MethodInterceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> intercept</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> obj</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Method</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MethodProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Before method: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invokeSuper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(obj, args);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;After method: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserController</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (UserController) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é€‰æ‹©-cglib-è¿˜æ˜¯-jdk-åŠ¨æ€ä»£ç†" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©-cglib-è¿˜æ˜¯-jdk-åŠ¨æ€ä»£ç†"><span>é€‰æ‹© CGLIB è¿˜æ˜¯ JDK åŠ¨æ€ä»£ç†ï¼Ÿ</span></a></h4><p>å¦‚æœç›®æ ‡å¯¹è±¡æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œå°±åªèƒ½ä½¿ç”¨ CGLIB ä»£ç†ï¼Œå°±æ¯”å¦‚è¯´ Controller å±‚çš„ç±»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ²¡æœ‰å®ç°æ¥å£çš„Controller</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">MdcDot</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">bizCode</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;article.create&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResponseVo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestBody</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleReq</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> req</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼Œé€šå¸¸é¦–é€‰ JDK åŠ¨æ€ä»£ç†ï¼Œæ¯”å¦‚è¯´ Service å±‚çš„ç±»ï¼Œä¸€èˆ¬éƒ½ä¼šå…ˆå®šä¹‰æ¥å£ï¼Œå†å®ç°æ¥å£ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ¥å£å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveArticle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Article</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> article</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// å®ç°ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">rollbackFor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveArticle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Article</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> article</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ Spring Boot 2.0 ä¹‹åï¼ŒSpring AOP é»˜è®¤ä½¿ç”¨ CGLIB ä»£ç†ã€‚è¿™æ˜¯å› ä¸º Spring Boot ä½œä¸ºä¸€ä¸ªè¿½æ±‚â€œçº¦å®šä¼˜äºé…ç½®â€çš„æ¡†æ¶ï¼Œé€‰æ‹© CGLIBï¼Œå¯ä»¥ç®€åŒ–å¼€å‘è€…çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œé¿å…å› ä¸ºå¿˜è®°å®ç°æ¥å£è€Œå¯¼è‡´ AOP ä¸ç”Ÿæ•ˆçš„é—®é¢˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250714162356.png" alt="æŠ€æœ¯æ´¾æºç ï¼šAopAutoConfiguration" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šAopAutoConfiguration</figcaption></figure><h4 id="ä½ ä¼šç”¨-jdk-åŠ¨æ€ä»£ç†å—" tabindex="-1"><a class="header-anchor" href="#ä½ ä¼šç”¨-jdk-åŠ¨æ€ä»£ç†å—"><span>ä½ ä¼šç”¨ JDK åŠ¨æ€ä»£ç†å—ï¼Ÿ</span></a></h4><p>ä¼šçš„ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªå°åœºæ™¯ï¼Œå®¢æœä¸­è½¬ï¼Œè§£å†³ç”¨æˆ·é—®é¢˜ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-c5c4b247-62dd-43a2-a043-da51c58f77c8.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šç”¨æˆ·å‘å®¢æœæé—®é¢˜" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šç”¨æˆ·å‘å®¢æœæé—®é¢˜</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥ç”¨ JDK åŠ¨æ€ä»£ç†æ¥å®ç°è¿™ä¸ªåœºæ™¯ã€‚JDK åŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯é€šè¿‡åå°„æœºåˆ¶åœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªå®ç°äº†æŒ‡å®šæ¥å£çš„ä»£ç†ç±»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-65b14a3f-2653-463e-af77-a8875d3d635c.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šJDKåŠ¨æ€ä»£ç†ç±»å›¾" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šJDKåŠ¨æ€ä»£ç†ç±»å›¾</figcaption></figure><p>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºæ¥å£ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ISolver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œå®ç°æ¥å£ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Solver</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ISolver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç–¯ç‹‚æ‰å¤´å‘è§£å†³é—®é¢˜â€¦â€¦&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼Œä½¿ç”¨ç”¨åå°„ç”Ÿæˆç›®æ ‡å¯¹è±¡çš„ä»£ç†ï¼Œè¿™é‡Œç”¨äº†ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»æ–¹å¼é‡å†™ InvocationHandler æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> target;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClassLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getInterfaces</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> InvocationHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Method</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åˆ°æ‚¨ï¼Ÿ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                        // è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> returnValue</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(target, args);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;é—®é¢˜å·²ç»è§£å†³å•¦ï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››æ­¥ï¼Œç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡å®ä¾‹ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //ç›®æ ‡å¯¹è±¡:ç¨‹åºå‘˜</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ISolver</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> developer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Solver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //ä»£ç†ï¼šå®¢æœå°å§å§</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ISolver</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> csProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (ISolver) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(developer).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //ç›®æ ‡æ–¹æ³•ï¼šè§£å†³é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        csProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä½ ä¼šç”¨-cglib-åŠ¨æ€ä»£ç†å—" tabindex="-1"><a class="header-anchor" href="#ä½ ä¼šç”¨-cglib-åŠ¨æ€ä»£ç†å—"><span>ä½ ä¼šç”¨ CGLIB åŠ¨æ€ä»£ç†å—ï¼Ÿ</span></a></h4><p>ä¼šçš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-74da87af-20d1-4a5b-a212-3837a15f0bab.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šCGLIBåŠ¨æ€ä»£ç†ç±»å›¾" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šCGLIBåŠ¨æ€ä»£ç†ç±»å›¾</figcaption></figure><p>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ç›®æ ‡ç±» Solverï¼Œå®šä¹‰ solve æ–¹æ³•ï¼Œæ¨¡æ‹Ÿè§£å†³é—®é¢˜çš„è¡Œä¸ºã€‚ç›®æ ‡ç±»ä¸éœ€è¦å®ç°ä»»ä½•æ¥å£ï¼Œè¿™ä¸ JDK åŠ¨æ€ä»£ç†çš„è¦æ±‚ä¸åŒã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Solver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç–¯ç‹‚æ‰å¤´å‘è§£å†³é—®é¢˜â€¦â€¦&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä»£ç†å·¥å‚ ProxyFactoryï¼Œä½¿ç”¨ CGLIB çš„ Enhancer ç±»æ¥ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼ˆä»£ç†å¯¹è±¡ï¼‰ã€‚CGLIB å…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ªç›®æ ‡ç±»çš„ä»£ç†ç±»ï¼Œå¹¶é‡å†™ç›®æ ‡æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ProxyFactory</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MethodInterceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> target;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //å·¥å…·ç±»</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Enhancer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> en</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //è®¾ç½®çˆ¶ç±»</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        en</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setSuperclass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //è®¾ç½®å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        en</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //åˆ›å»ºå­ç±»å¯¹è±¡ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> en</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> intercept</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> obj</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Method</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MethodProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åˆ°æ‚¨ï¼Ÿ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰§è¡Œç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> returnValue</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(target, args);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;é—®é¢˜å·²ç»è§£å†³å•¦ï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå®¢æˆ·ç«¯ Clientï¼Œè·å–ä»£ç†å¯¹è±¡å¹¶è°ƒç”¨ç›®æ ‡æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //ç›®æ ‡å¯¹è±¡:ç¨‹åºå‘˜</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Solver</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> developer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Solver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //ä»£ç†ï¼šå®¢æœå°å§å§</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Solver</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> csProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (Solver) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(developer).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //ç›®æ ‡æ–¹æ³•ï¼šè§£å†³é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        csProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¸†è½¯åŒå­¦ 3 Java åç«¯ä¸€é¢çš„åŸé¢˜ï¼šcglib çš„åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 22 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring AOP å®ç°åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³é¢ç»åŒå­¦ F é¢è¯•åŸé¢˜ï¼šä¸¤ç§åŠ¨æ€ä»£ç†çš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 8 Java åç«¯å®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šspringçš„aopæ˜¯å¦‚ä½•å®ç°çš„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 20 äºŒé¢é¢è¯•åŸé¢˜ï¼šspring aopçš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 3 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šjavaçš„åå°„æœºåˆ¶ï¼Œåå°„çš„åº”ç”¨åœºæ™¯AOPçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Œä¸åŠ¨æ€ä»£ç†å’Œåå°„æœ‰ä»€ä¹ˆåŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 12 Java æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šä»£ç†ä»‹ç»ä¸€ä¸‹ï¼Œjdkå’Œcglibçš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šSpring AOPçš„å®ç°åŸç†ï¼ŸJDKåŠ¨æ€ä»£ç†å’ŒCGLibåŠ¨æ€ä»£ç†çš„å„è‡ªå®ç°åŠå…¶åŒºåˆ«ï¼Ÿç°åœ¨éœ€è¦ç»Ÿè®¡æ–¹æ³•çš„å…·ä½“æ‰§è¡Œæ—¶é—´ï¼Œè¯´ä¸‹å¦‚ä½•ä½¿ç”¨AOPæ¥å®ç°ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç†æƒ³æ±½è½¦é¢ç»åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº†è§£AOPåº•å±‚æ˜¯æ€ä¹ˆåšçš„å—ï¼Ÿ</li></ol></blockquote><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div><p>memoï¼š2025 å¹´ 7 æœˆ 10 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨ç»™çƒå‹ä¿®æ”¹ç®€å†çš„æ—¶å€™ç¢°åˆ°ä¸€ä¸ª<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¯¹æ˜Ÿçƒéå¸¸è®¤å¯çš„çƒå‹</a>ï¼Œä»–åœ¨æˆ‘çš„å¸®åŠ©ä¸‹ä¹Ÿé¡ºåˆ©æ‰¾åˆ°äº†å®ä¹ ï¼Œå¹¶ä¸”å¤§å®¶ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œä»–æåˆ°çš„è¿™äº›è·¯çº¿è§„åˆ’é—®é¢˜ã€ç®€å†ä¹¦å†™é—®é¢˜ã€ç§‹æ‹›å‡†å¤‡é—®é¢˜ã€é¡¹ç›®é—®é¢˜ï¼Œéƒ½å¯ä»¥åœ¨æ˜Ÿçƒé‡Œæ‰¾åˆ°ç­”æ¡ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250711172049.png" alt="çƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯</figcaption></figure><h2 id="äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡"><span>äº‹åŠ¡</span></a></h2><h3 id="_25-ğŸŒŸè¯´è¯´ä½ å¯¹springäº‹åŠ¡çš„ç†è§£" tabindex="-1"><a class="header-anchor" href="#_25-ğŸŒŸè¯´è¯´ä½ å¯¹springäº‹åŠ¡çš„ç†è§£"><span>25.ğŸŒŸè¯´è¯´ä½ å¯¹Springäº‹åŠ¡çš„ç†è§£ï¼Ÿ</span></a></h3><p>Spring æä¾›äº†ä¸¤ç§äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œç¼–ç¨‹å¼äº‹åŠ¡å’Œå£°æ˜å¼äº‹åŠ¡ã€‚ç¼–ç¨‹å¼äº‹åŠ¡å°±æ˜¯æˆ‘ä»¬è¦æ‰‹åŠ¨è°ƒç”¨äº‹åŠ¡çš„å¼€å§‹ã€æäº¤ã€å›æ»šè¿™äº›æ“ä½œï¼Œè™½ç„¶çµæ´»ä½†æ˜¯ä»£ç æ¯”è¾ƒç¹çã€‚å£°æ˜å¼äº‹åŠ¡åªéœ€è¦åœ¨éœ€è¦äº‹åŠ¡çš„æ–¹æ³•ä¸ŠåŠ ä¸Š <code>@Transactional</code> æ³¨è§£å°±å¥½äº†ï¼ŒSpring ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å¤„ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250711173334.png" alt="Spring TransactionInterceptor" tabindex="0" loading="lazy"><figcaption>Spring TransactionInterceptor</figcaption></figure><p>----è¿™éƒ¨åˆ†å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>ç¼–ç¨‹å¼äº‹åŠ¡å¯ä»¥ä½¿ç”¨ TransactionTemplate å’Œ PlatformTransactionManager æ¥å®ç°ï¼Œå…è®¸æˆ‘ä»¬åœ¨ä»£ç ä¸­ç›´æ¥æ§åˆ¶äº‹åŠ¡çš„è¾¹ç•Œã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AccountService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TransactionTemplate</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> transactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setTransactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TransactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> transactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">transactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> transactionTemplate;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> transfer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Double</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> money</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        transactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TransactionCallbackWithoutResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doInTransactionWithoutResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TransactionStatus</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                // è½¬å‡º</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">outMoney</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(out, money);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                // è½¬å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">inMoney</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(in, money);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>----è¿™éƒ¨åˆ†å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><p>Spring äº‹åŠ¡çš„åº•å±‚å®ç°æ˜¯é€šè¿‡ AOP æ¥å®Œæˆçš„ã€‚å½“æˆ‘ä»¬åœ¨æ–¹æ³•ä¸ŠåŠ  <code>@Transactional</code> æ³¨è§£åï¼ŒSpring ä¼šä¸ºè¿™ä¸ª Bean åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰å¼€å¯äº‹åŠ¡ï¼Œæ–¹æ³•æ­£å¸¸è¿”å›æ—¶æäº¤äº‹åŠ¡ï¼Œå¦‚æœæ–¹æ³•æŠ›å‡ºå¼‚å¸¸å°±å›æ»šäº‹åŠ¡ã€‚</p><p>å£°æ˜å¼äº‹åŠ¡çš„ä¼˜ç‚¹æ˜¯ä¸éœ€è¦åœ¨ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­æºæ‚äº‹åŠ¡ç®¡ç†çš„ä»£ç ï¼Œç¼ºç‚¹æ˜¯ï¼Œæœ€ç»†ç²’åº¦åªèƒ½åˆ°æ–¹æ³•çº§åˆ«ï¼Œæ— æ³•åˆ°ä»£ç å—çº§åˆ«ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AccountService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AccountDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> transfer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Double</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> money</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // è½¬å‡º</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">outMoney</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(out, money);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // è½¬å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">inMoney</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(in, money);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šSpring äº‹åŠ¡æ€ä¹ˆå®ç°çš„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å†œä¸šé“¶è¡Œé¢ç»åŒå­¦ 7 Java åç«¯é¢è¯•åŸé¢˜ï¼šSpring å¦‚ä½•ä¿è¯äº‹åŠ¡</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 12 Java æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šSpringçš„äº‹åŠ¡ç”¨è¿‡å—ï¼Œåœ¨é¡¹ç›®é‡Œé¢æ€ä¹ˆä½¿ç”¨çš„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è™¾çš®é¢ç»åŒå­¦ 13 ä¸€é¢é¢è¯•åŸé¢˜ï¼šspringäº‹åŠ¡</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šå¦‚ä½•ä½¿ç”¨springå®ç°äº‹åŠ¡</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 11 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹åœ¨ VIP ç¾¤é‡Œè®²</a>ï¼Œé¢æ¸£é€†è¢­çš„ Redisã€MySQLã€JVM ç¯‡éå¸¸å¼ºï¼›å¦å¤–ä¸€ä¸ªçƒå‹ä¹Ÿæ˜¯ç»§ç»­å£ç¢‘è¯´ï¼Œé¢è¿‡å‡ æ¬¡å…¨åŒ…è¿‡ã€‚ğŸ˜„</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250711174214.png" alt="çƒå‹å¯¹é¢æ¸£é€†è¢­çš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹é¢æ¸£é€†è¢­çš„è®¤å¯</figcaption></figure><h3 id="_26-å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_26-å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—"><span>26.å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—ï¼Ÿ</span></a></h3><p>Spring çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†æ˜¯é€šè¿‡ AOP å’Œä»£ç†æœºåˆ¶å®ç°çš„ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µã€‚</p><p>ç¬¬ä¸€ä¸ªé˜¶æ®µå‘ç”Ÿåœ¨ Spring å®¹å™¨å¯åŠ¨æ—¶ï¼Œå®ƒä¼šæ‰«ææ‰€æœ‰çš„ Beanã€‚å¦‚æœå‘ç°æŸä¸ª Bean çš„æ–¹æ³•ä¸Šæ ‡æ³¨äº† <code>@Transactional</code> æ³¨è§£ï¼ŒSpring ä¸ä¼šç›´æ¥è¿”å›è¿™ä¸ªåŸå§‹çš„ Bean å®ä¾‹ã€‚è€Œæ˜¯ä¸ºè¿™ä¸ª Bean åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚è¿™ä¸ªä»£ç†å¯¹è±¡æ‹¥æœ‰å’ŒåŸå§‹å¯¹è±¡å®Œå…¨ç›¸åŒçš„æ–¹æ³•ï¼Œä½†åœ¨å†…éƒ¨æ‚„æ‚„åœ°åŒ…è£¹äº†äº‹åŠ¡å¤„ç†çš„é€»è¾‘ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250715175632.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Transactionalæ³¨è§£" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Transactionalæ³¨è§£</figcaption></figure><p>ç¬¬äºŒä¸ªé˜¶æ®µå‘ç”Ÿåœ¨æ–¹æ³•è°ƒç”¨çš„è¿è¡Œé˜¶æ®µï¼Œå½“æˆ‘ä»¬çš„ä»£ç è°ƒç”¨é‚£ä¸ªè¢« <code>@Transactional</code> æ³¨è§£ä¿®é¥°çš„æ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šè°ƒç”¨çš„æ˜¯ Spring åˆ›å»ºçš„é‚£ä¸ªä»£ç†å¯¹è±¡çš„æ–¹æ³•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-97493c7f-c596-4e98-a6a8-dab254d6d1ab.png" alt="å›¾ç‰‡æ¥æºç½‘æ˜“æŠ€æœ¯ä¸“æ " tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡æ¥æºç½‘æ˜“æŠ€æœ¯ä¸“æ </figcaption></figure><p>äº‹åŠ¡æ‹¦æˆªå™¨ä¼šåœ¨ä»£ç†å¯¹è±¡æ‰§è¡ŒçœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ä¹‹å‰ï¼Œæ ¹æ® <code>@Transactional</code> æ³¨è§£çš„é…ç½®è·å–äº‹åŠ¡å±æ€§ï¼Œæ¯”å¦‚ä¼ æ’­è¡Œä¸ºã€éš”ç¦»çº§åˆ«ç­‰ï¼Œç„¶åé€šè¿‡äº‹åŠ¡ç®¡ç†å™¨æ¥å¼€å¯ä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚å¹¶ä»æ•°æ®åº“è¿æ¥æ± è·å–ä¸€ä¸ªè¿æ¥ï¼Œå…³é—­å…¶è‡ªåŠ¨æäº¤ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TransactionInterceptor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MethodInterceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MethodInvocation</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> invocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // è·å–äº‹åŠ¡å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        TransactionAttribute</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> txAttr</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getTransactionAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">invocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">invocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getThis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å¼€å§‹äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        TransactionStatus</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getTransaction</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(txAttr);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> retVal</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> invocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">proceed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // æäº¤äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">commit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(status);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> retVal;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // å›æ»šäº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rollback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(status);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ex;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€ï¼Œä»£ç†å¯¹è±¡ä¼šè°ƒç”¨åŸå§‹ Bean å®ä¾‹ä¸­çœŸæ­£çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå¦‚æœä¸šåŠ¡æ–¹æ³•é¡ºåˆ©æ‰§è¡Œå®Œæ¯•ï¼Œæ²¡æœ‰æŠ›å‡ºä»»ä½•å¼‚å¸¸ï¼Œé‚£ä¹ˆæ‹¦æˆªå™¨å°±ä¼šé€šè¿‡äº‹åŠ¡ç®¡ç†å™¨æäº¤äº‹åŠ¡ï¼Œå°†ä¹‹å‰çš„æ‰€æœ‰æ•°æ®åº“æ“ä½œæ°¸ä¹…ä¿å­˜ã€‚</p><p>å¦‚æœä¸šåŠ¡æ–¹æ³•æŠ›å‡ºäº†å¼‚å¸¸ï¼Œæ‹¦æˆªå™¨ä¼šæ•è·åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶é€šè¿‡äº‹åŠ¡ç®¡ç†å™¨å›æ»šäº‹åŠ¡ï¼Œå°†ä¹‹å‰çš„æ‰€æœ‰æ•°æ®åº“æ“ä½œæ’¤é”€ã€‚</p><p>æœ€åï¼Œæ— è®ºäº‹åŠ¡æ˜¯æäº¤è¿˜æ˜¯å›æ»šï¼Œæ‹¦æˆªå™¨éƒ½ä¼šé‡Šæ”¾æ•°æ®åº“è¿æ¥ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šSpring äº‹åŠ¡æ€ä¹ˆå®ç°çš„</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 15 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">ç»™çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œçœ‹åˆ°çƒå‹è¯´ç®€å†ä¿®æ”¹åæ‹¿åˆ°äº†æ˜Ÿç¯ç§‘æŠ€å†…æ¨çš„å®ä¹ æœºä¼šï¼Œä¹Ÿå­¦åˆ°äº†å¾ˆå¤šï¼Œå¹¶ä¸”çœŸè¯šçš„æ„Ÿè°¢äº† Java æ–¹é¢çš„å…«è‚¡é¢è¯•é¢˜å¯¹ä»–çš„å¸®åŠ©ã€‚è®²çœŸï¼Œèƒ½çœ‹åˆ°å¤§å®¶æœ€çœŸå®çš„åé¦ˆï¼Œæˆ‘æŒºå¼€å¿ƒçš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250715180830.png" alt="æ˜Ÿç¯å®ä¹ çš„çƒå‹å¯¹æ˜ŸçƒæœåŠ¡çš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>æ˜Ÿç¯å®ä¹ çš„çƒå‹å¯¹æ˜ŸçƒæœåŠ¡çš„è®¤å¯</figcaption></figure><h3 id="_27-transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆ" tabindex="-1"><a class="header-anchor" href="#_27-transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆ"><span>27.@Transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ</span></a></h3><p><code>@Transactional</code> è™½ç„¶ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†ç¡®å®æœ‰ä¸€äº›â€œå‘â€ï¼Œå¦‚æœä½¿ç”¨ä¸å½“æ˜¯ä¼šå¯¼è‡´äº‹åŠ¡å¤±æ•ˆçš„ã€‚æ ¹æ®æˆ‘çš„ç†è§£å’Œå®è·µï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å¸¸è§æƒ…å†µï¼š</p><p>ç¬¬ä¸€ç§ï¼Œ<code>@Transactional</code> æ³¨è§£ç”¨åœ¨é public ä¿®é¥°çš„æ–¹æ³•ä¸Šã€‚</p><p>Spring çš„ AOP ä»£ç†æœºåˆ¶å†³å®šäº†å®ƒæ— æ³•ä»£ç† private æ–¹æ³•ã€‚å› ä¸º private æ–¹æ³•åœ¨å­ç±»ä¸­æ˜¯ä¸å¯è§çš„ï¼Œä»£ç†ç±»æ— æ³•è¦†ç›–å®ƒã€‚å› æ­¤ï¼Œåœ¨ private æ–¹æ³•ä¸ŠåŠ  <code>@Transactional</code> æ³¨è§£æ˜¯å®Œå…¨æ— æ•ˆçš„ã€‚åŒç†ï¼Œprotected å’Œ default æƒé™çš„æ–¹æ³•ä¹Ÿåº”é¿å…ä½¿ç”¨ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TransactionAttribute</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> computeTransactionAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Method</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Class</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> targetClass) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // Don&#39;t allow no-public methods as required.</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">allowPublicMethodsOnly</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Modifier</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isPublic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getModifiers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§ï¼Œæ–¹æ³•å†…éƒ¨è°ƒç”¨ï¼Œè¿™ä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«å¿½ç•¥çš„ä¸€ç§å¤±æ•ˆåœºæ™¯ã€‚å¦‚æœåœ¨ä¸€ä¸ªç±»çš„æ–¹æ³• A ä¸­ï¼Œç›´æ¥è°ƒç”¨æœ¬ç±»çš„å¦å¤–ä¸€ä¸ªåŠ äº† <code>@Transactional</code> çš„æ–¹æ³• Bï¼Œé‚£ä¹ˆæ–¹æ³• B çš„äº‹åŠ¡æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚</p><p>è¿™æ˜¯å› ä¸ºæ–¹æ³• A è°ƒç”¨æ–¹æ³• B æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ this å¼•ç”¨ï¼Œç›´æ¥è®¿é—®åŸå§‹å¯¹è±¡çš„æ–¹æ³•ï¼Œç»•è¿‡äº† Spring çš„ä»£ç†å¯¹è±¡ï¼Œä¹Ÿå°±å¯¼è‡´ä»£ç†å¯¹è±¡ä¸­çš„äº‹åŠ¡é€»è¾‘æ²¡æœ‰æœºä¼šæ‰§è¡Œã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ç›´æ¥è°ƒç”¨æœ¬ç±»çš„å¦ä¸€ä¸ªæ–¹æ³•ï¼Œäº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä¿å­˜ç”¨æˆ·é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£å†³æ–¹æ³•æ˜¯æŠŠå½“å‰ç±»ä½œä¸ºä¸€ä¸ª Bean æ³¨å…¥åˆ°è‡ªå·±ä¸­ï¼Œç„¶åé€šè¿‡è¿™ä¸ªæ³¨å…¥çš„ Bean æ¥è°ƒç”¨æ–¹æ³• Bã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250716144039.png" alt="æ´¾èªæ˜æºç ï¼š@Transactional ä¸é€‚ç”¨ this è°ƒç”¨" tabindex="0" loading="lazy"><figcaption>æ´¾èªæ˜æºç ï¼š@Transactional ä¸é€‚ç”¨ this è°ƒç”¨</figcaption></figure><p>ç¬¬ä¸‰ç§ï¼Œå¦‚æœåœ¨äº‹åŠ¡æ–¹æ³•å†…éƒ¨ç”¨ try-catch æ•è·äº†å¼‚å¸¸ï¼Œä½†æ²¡æœ‰åœ¨ catch å—ä¸­å°†å¼‚å¸¸é‡æ–°æŠ›å‡ºï¼Œæˆ–è€…æŠ›å‡ºä¸€ä¸ªæ–°çš„èƒ½è§¦å‘å›æ»šçš„å¼‚å¸¸ï¼Œé‚£ä¹ˆ Spring çš„äº‹åŠ¡æ‹¦æˆªå™¨å°±æ— æ³•æ„ŸçŸ¥åˆ°å¼‚å¸¸çš„å‘ç”Ÿï¼Œä¹Ÿå°±æ²¡åŠæ³•å›æ»šã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ•è·å¼‚å¸¸ä½†æ²¡æœ‰é‡æ–°æŠ›å‡º</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // äº‹åŠ¡ä¸ä¼šå›æ»š</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››ç§ï¼ŒSpring äº‹åŠ¡é»˜è®¤åªå¯¹ RuntimeException å’Œ Error ç±»å‹çš„å¼‚å¸¸è¿›è¡Œå›æ»šã€‚å¦‚æœåœ¨ä»£ç ä¸­æŠ›å‡ºçš„æ˜¯ä¸€ä¸ªChecked Exceptionï¼Œæ˜¯ Exception çš„å­ç±»ä½†ä¸æ˜¯ RuntimeException çš„å­ç±»ï¼Œåˆæ²¡æœ‰é€šè¿‡ <code>@Transactional(rollbackFor = Exception.class)</code> æŒ‡å®šäº‹åŠ¡å›å½’çš„å¼‚å¸¸ç±»å‹ï¼Œé‚£ä¹ˆäº‹åŠ¡åŒæ ·ä¸ä¼šå›æ»šã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() throws Exception {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æŠ›å‡ºä¸€ä¸ª Checked Exception       </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SQLException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;This is a checked exception&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-04053b02-3264-4d7f-b868-560a0333f08d.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringé»˜è®¤æ”¯æŒçš„å¼‚å¸¸å›æ»š" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringé»˜è®¤æ”¯æŒçš„å¼‚å¸¸å›æ»š</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡ä¼ æ’­ï¼Œprotected å’Œ private åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—,è¿˜æœ‰é‚£äº›ä¸ç”Ÿæ•ˆçš„æƒ…å†µ</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 16 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">ç»™çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œçœ‹åˆ°ä¸€ä¸ªä¸­å›½æµ·æ´‹å¤§å­¦æœ¬ï¼Œå››å·å¤§å­¦ç¡•çš„çƒå‹ï¼Œéå¸¸ä¼˜ç§€ï¼ŒåŸºæœ¬ä¸Šæ ¡å›­ç»å†å’Œè£èª‰å¥–é¡¹ç®—æ˜¯æ‹‰æ»¡äº†ã€‚èƒ½å¸®åŠ©åˆ°è¿™ä¹ˆå¤šä¼˜ç§€çš„çƒå‹ï¼Œæˆ‘ä¹Ÿå¾ˆå¼€å¿ƒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250716145121.png" alt="ä¸­å›½æµ·æ´‹å¤§å­¦æœ¬ï¼Œå››å·å¤§å­¦ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>ä¸­å›½æµ·æ´‹å¤§å­¦æœ¬ï¼Œå››å·å¤§å­¦ç¡•çš„çƒå‹</figcaption></figure><h3 id="_28-è¯´è¯´springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«" tabindex="-1"><a class="header-anchor" href="#_28-è¯´è¯´springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><span>28.è¯´è¯´Springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ</span></a></h3><p>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡å¯ä»¥å—å…¶ä»–å¹¶å‘äº‹åŠ¡å½±å“çš„ç¨‹åº¦ã€‚SQL æ ‡å‡†å®šä¹‰çš„å››ä¸ªéš”ç¦»çº§åˆ«ï¼ŒSpring éƒ½æ”¯æŒï¼Œå®šä¹‰åœ¨ TransactionDefinition æ¥å£ä¸­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240326082116.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šTransactionDefinition" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šTransactionDefinition</figcaption></figure><p>Spring åœ¨æ ‡å‡†çš„éš”ç¦»çº§åˆ«ä¸Šå®šä¹‰äº†äº”ä¸ªéš”ç¦»çº§åˆ«ï¼š</p><p>å…¶ä¸­ DEFAULT è¡¨ç¤ºä½¿ç”¨åº•å±‚æ•°æ®åº“çš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚æ¯”å¦‚è¯´å¯¹äº MySQL æ¥è¯´ï¼Œé»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼Œé‚£å°±ç”¨å¯é‡å¤è¯»ï¼›å¯¹äº Oracle æ¥è¯´ï¼Œé»˜è®¤æ˜¯è¯»å·²æäº¤ï¼Œé‚£å°±ç”¨è¯»å·²æäº¤ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿé€šå¸¸éƒ½ç”¨ DEFAULTï¼Œè®©æ•°æ®åº“è‡ªå·±å†³å®šåˆé€‚çš„éš”ç¦»çº§åˆ«ã€‚</p><p>è¯»æœªæäº¤æ˜¯æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–æœªæäº¤çš„æ•°æ®ã€‚è¿™ç§çº§åˆ«ä¼šå‡ºç°è„è¯»é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªäº‹åŠ¡å¯èƒ½ä¼šè¯»åˆ°å¦ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤çš„æ•°æ®ã€‚æ¯”å¦‚ A äº‹åŠ¡ä¿®æ”¹äº†ä¸€æ¡æ•°æ®ä½†è¿˜æ²¡æäº¤ï¼ŒB äº‹åŠ¡å°±èƒ½è¯»åˆ°è¿™ä¸ªä¿®æ”¹åçš„å€¼ï¼Œå¦‚æœ A äº‹åŠ¡åæ¥å›æ»šäº†ï¼ŒB äº‹åŠ¡è¯»åˆ°çš„å°±æ˜¯è„æ•°æ®ã€‚è¿™ä¸ªçº§åˆ«åœ¨å®é™…é¡¹ç›®ä¸­åŸºæœ¬ä¸ä¼šä½¿ç”¨ï¼Œå› ä¸ºæ•°æ®ä¸€è‡´æ€§æ— æ³•ä¿è¯ã€‚</p><p>è¯»å·²æäº¤è§£å†³äº†è„è¯»é—®é¢˜ï¼Œä½†ä¼šå‡ºç°ä¸å¯é‡å¤è¯»é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ¡æ•°æ®ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„ç»“æœã€‚æ¯”å¦‚ A äº‹åŠ¡å…ˆè¯»äº†ä¸€æ¡æ•°æ®ï¼Œç„¶å B äº‹åŠ¡ä¿®æ”¹å¹¶æäº¤äº†è¿™æ¡æ•°æ®ï¼ŒA äº‹åŠ¡å†æ¬¡è¯»å–æ—¶å°±ä¼šå‘ç°æ•°æ®å˜äº†ã€‚</p><p>å¯é‡å¤è¯»ä¿è¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ¡æ•°æ®çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œè§£å†³äº†ä¸å¯é‡å¤è¯»é—®é¢˜ã€‚ä½†æ˜¯ä¼šå‡ºç°å¹»è¯»é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªæŸ¥è¯¢ï¼Œå¯èƒ½ä¼šçœ‹åˆ°ä¸åŒæ•°é‡çš„è®°å½•ã€‚æ¯”å¦‚ A äº‹åŠ¡æŸ¥è¯¢æŸä¸ªæ¡ä»¶çš„è®°å½•æ•°æ˜¯ 10 æ¡ï¼Œç„¶å B äº‹åŠ¡æ’å…¥äº†ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„è®°å½•å¹¶æäº¤ï¼ŒA äº‹åŠ¡å†æ¬¡æŸ¥è¯¢æ—¶å¯èƒ½ä¼šçœ‹åˆ° 11 æ¡è®°å½•ã€‚MySQL çš„ InnoDB å­˜å‚¨å¼•æ“é€šè¿‡ä¸´é”®é”åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè§£å†³äº†å¹»è¯»é—®é¢˜ã€‚</p><p>ä¸²è¡ŒåŒ–æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨ä¸²è¡ŒåŒ–æ‰§è¡Œäº‹åŠ¡ï¼Œå¯ä»¥è§£å†³æ‰€æœ‰å¹¶å‘é—®é¢˜ï¼ŒåŒ…æ‹¬è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚ä½†æ˜¯æ€§èƒ½æ˜¯æœ€å·®çš„ï¼Œå› ä¸ºäº‹åŠ¡åŸºæœ¬ä¸Šæ˜¯æ’é˜Ÿæ‰§è¡Œçš„ã€‚åœ¨å®é™…é¡¹ç›®ä¸­å¾ˆå°‘ä½¿ç”¨ï¼Œé™¤éå¯¹æ•°æ®ä¸€è‡´æ€§æœ‰æé«˜çš„è¦æ±‚ã€‚</p><p>åœ¨ Spring ä¸­è®¾ç½®éš”ç¦»çº§åˆ«ä¹Ÿå¾ˆç®€å•ï¼Œå¯ä»¥åœ¨ <code>@Transactional</code> æ³¨è§£ä¸­é€šè¿‡ isolation å±æ€§æ¥æŒ‡å®šã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">isolation</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Isolation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">READ_UNCOMMITTED</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> someMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸è¿‡åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘æ‰‹åŠ¨è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œé€šå¸¸éƒ½æ˜¯ä½¿ç”¨æ•°æ®åº“çš„é»˜è®¤çº§åˆ«ï¼Œåªæœ‰åœ¨é‡åˆ°ç‰¹å®šçš„å¹¶å‘é—®é¢˜æ—¶æ‰ä¼šè€ƒè™‘è°ƒæ•´ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šSpring ä¸­çš„äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³é¢ç»åŒå­¦ E ç¬¬äºŒä¸ªéƒ¨é—¨ Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šspring çš„éš”ç¦»æœºåˆ¶ï¼Œé»˜è®¤æ˜¯å“ªä¸€ç§</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 13 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œç¢°åˆ°ä¸€ä¸ªç”µå­ç§‘æŠ€å¤§å­¦ç¡•å£«ã€åä¸­ç§‘æŠ€å¤§å­¦æœ¬çš„çƒå‹ï¼Œä»–è¯´åˆ°ï¼Œè‡ªå·±ä¹Ÿåœ¨æ¨èæ˜Ÿçƒç»™å¸ˆå¼Ÿä»¬ï¼ŒçœŸçš„éå¸¸æ¬£æ…°ï¼Œèƒ½æœ‰è¿™æ ·çš„å£ç¢‘ï¼Œå¾ˆæ„ŸåŠ¨ï¼Œå¿…é¡»è¦æ„Ÿè°¢çƒå‹ä»¬çš„æ”¯æŒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250713101016.png" alt="çƒå‹å¯¹æ˜Ÿçƒçš„å£ç¢‘" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹æ˜Ÿçƒçš„å£ç¢‘</figcaption></figure><h3 id="_29-ğŸŒŸè¯´è¯´springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_29-ğŸŒŸè¯´è¯´springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶"><span>29.ğŸŒŸè¯´è¯´Springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Ÿ</span></a></h3><p>ç®€å•æ¥è¯´ï¼Œå½“ä¸€ä¸ªäº‹åŠ¡æ–¹æ³• A è°ƒç”¨å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³• B æ—¶ï¼Œæ–¹æ³• B çš„äº‹åŠ¡åº”è¯¥å¦‚ä½•è¿è¡Œï¼Ÿæ˜¯åŠ å…¥æ–¹æ³• A çš„ç°æœ‰äº‹åŠ¡ï¼Œè¿˜æ˜¯å¼€å¯ä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œæˆ–è€…ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Ÿè¿™å°±æ˜¯äº‹åŠ¡ä¼ æ’­æœºåˆ¶è¦è§£å†³çš„é—®é¢˜ã€‚</p><p>Spring å®šä¹‰äº†ä¸ƒç§äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œå…¶ä¸­ REQUIRED æ˜¯é»˜è®¤çš„ä¼ æ’­è¡Œä¸ºï¼Œè¡¨ç¤ºå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-a6e2a8dc-9771-4d8b-9d91-76ddee98af1a.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šäº‹åŠ¡ä¼ æ’­æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šäº‹åŠ¡ä¼ æ’­æœºåˆ¶</figcaption></figure><p>æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸­ï¼Œä¸€ä¸ªç”¨æˆ·è§£é”ä»˜è´¹æ–‡ç« çš„æ“ä½œï¼Œä¼šæ¶‰åŠåˆ°åˆ›å»ºæ”¯ä»˜è®¢å•ã€æ›´æ–°è®¢å•çŠ¶æ€ç­‰å¥½å‡ ä¸ªæ•°æ®åº“æ“ä½œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250714160050.png" alt="æŠ€æœ¯æ´¾æºç ï¼šSpringäº‹åŠ¡ä¼ æ’­æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šSpringäº‹åŠ¡ä¼ æ’­æœºåˆ¶</figcaption></figure><p>è¿™äº›ä¸åŒæ“ä½œçš„æ–¹æ³•å°±å¯ä»¥æ”¾åœ¨ä¸€ä¸ª <code>@Transactional</code> æ³¨è§£çš„æ–¹æ³•é‡Œï¼Œå®ƒä»¬å°±è‡ªåŠ¨åœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œäº†ï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥ã€‚</p><p>å½“ç„¶ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›è®°å½•ä¸€äº›æ“ä½œæ—¥å¿—ï¼Œä½†ä¸æƒ³å› ä¸ºä¸»ä¸šåŠ¡å¤±è´¥å¯¼è‡´æ—¥å¿—å›æ»šã€‚è¿™æ—¶å€™ REQUIRES_NEW å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å®ƒä¸ç®¡å½“å‰æœ‰æ²¡æœ‰äº‹åŠ¡ï¼Œéƒ½é‡æ–°å¼€å¯ä¸€ä¸ªå…¨æ–°çš„ã€ç‹¬ç«‹çš„äº‹åŠ¡æ¥æ‰§è¡Œã€‚è¿™æ ·ï¼Œæ—¥å¿—ä¿å­˜çš„äº‹åŠ¡å’Œä¸»ä¸šåŠ¡çš„äº‹åŠ¡å°±äº’ä¸å¹²æ‰°ï¼Œå³ä½¿ä¸»ä¸šåŠ¡å¤±è´¥å›æ»šï¼Œæ—¥å¿—ä¹Ÿèƒ½å¦¥å¦¥åœ°ä¿å­˜ä¸‹æ¥ã€‚</p><p>å¦å¤–ï¼Œè¿˜æœ‰åƒ SUPPORTSã€ NOT_SUPPORTED è¿™äº›ã€‚SUPPORTS æ¯”è¾ƒä½›ç³»ï¼Œæœ‰äº‹åŠ¡å°±ç”¨ï¼Œæ²¡äº‹åŠ¡å°±ä¸ç”¨ï¼Œé€‚åˆä¸€äº›ä¸é‡è¦çš„æ›´æ–°æ“ä½œã€‚è€Œ NOT_SUPPORTED åˆ™æ›´å¹²è„†ï¼Œå®ƒä¼šæŠŠå½“å‰çš„äº‹åŠ¡æŒ‚èµ·ï¼Œä»¥éäº‹åŠ¡çš„æ–¹å¼å»æ‰§è¡Œã€‚æ¯”å¦‚è¯´æˆ‘ä»¬çš„äº‹åŠ¡é‡Œéœ€è¦è°ƒç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„ã€å“åº”å¾ˆæ…¢çš„æ¥å£ï¼Œå¦‚æœè¿™ä¸ªè°ƒç”¨ä¹ŸåŒ…å«åœ¨äº‹åŠ¡é‡Œï¼Œå°±ä¼šé•¿æ—¶é—´å ç”¨æ•°æ®åº“è¿æ¥ã€‚æŠŠå®ƒç”¨ NOT_SUPPORTED åŒ…èµ·æ¥ï¼Œå°±å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">propagation</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Propagation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">NOT_SUPPORTED</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> callExternalApi</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ NESTEDï¼ŒåµŒå¥—äº‹åŠ¡ã€‚å®ƒæœ‰ç‚¹åƒ REQUIRES_NEWï¼Œä½†åˆä¸å®Œå…¨ä¸€æ ·ã€‚NESTED æ˜¯çˆ¶äº‹åŠ¡çš„ä¸€ä¸ªå­äº‹åŠ¡ï¼Œçˆ¶äº‹åŠ¡å›æ»šï¼Œå®ƒè‚¯å®šä¹Ÿå¾—å›æ»šã€‚ä½†å®ƒè‡ªå·±å›æ»šï¼Œå´ä¸ä¼šå½±å“åˆ°çˆ¶äº‹åŠ¡ã€‚è¿™ä¸ªç‰¹æ€§åœ¨å¤„ç†ä¸€äº›æ‰¹é‡æ“ä½œï¼Œå¸Œæœ›èƒ½éƒ¨åˆ†å›æ»šçš„åœºæ™¯ä¸‹ç‰¹åˆ«æœ‰ç”¨ã€‚ä¸è¿‡å®ƒéœ€è¦æ•°æ®åº“æ”¯æŒ Savepoint åŠŸèƒ½ï¼ŒMySQL å°±æ”¯æŒã€‚</p><h4 id="äº‹åŠ¡èƒ½åœ¨æ–°çº¿ç¨‹ä¸­ä¼ æ’­å—" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡èƒ½åœ¨æ–°çº¿ç¨‹ä¸­ä¼ æ’­å—"><span>äº‹åŠ¡èƒ½åœ¨æ–°çº¿ç¨‹ä¸­ä¼ æ’­å—ï¼Ÿ</span></a></h4><p>äº‹åŠ¡ä¼ æ’­æœºåˆ¶æ˜¯é€šè¿‡ <a href="https://javabetter.cn/thread/ThreadLocal.html" target="_blank" rel="noopener noreferrer">ThreadLocal</a> å®ç°çš„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœè°ƒç”¨çš„æ–¹æ³•æ˜¯åœ¨æ–°çº¿ç¨‹ä¸­ï¼Œäº‹åŠ¡ä¼ æ’­å°±ä¼šå¤±æ•ˆã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> parentMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> childMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">())</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> childMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // è¿™é‡Œçš„æ“ä½œå°†ä¸ä¼šåœ¨ parentMethod çš„äº‹åŠ¡èŒƒå›´å†…æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="protected-å’Œ-private-æ–¹æ³•åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—" tabindex="-1"><a class="header-anchor" href="#protected-å’Œ-private-æ–¹æ³•åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—"><span>protected å’Œ private æ–¹æ³•åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—ï¼Ÿ</span></a></h4><p>æˆ‘çš„ç†è§£æ˜¯ï¼šåœ¨ private æ–¹æ³•ä¸ŠåŠ äº‹åŠ¡æ˜¯è‚¯å®šä¸ä¼šç”Ÿæ•ˆçš„ï¼Œè€Œ protected æ–¹æ³•åœ¨ç‰¹å®šçš„ä»£ç†æ¨¡å¼ä¸‹æ˜¯å¯èƒ½ç”Ÿæ•ˆçš„ï¼Œä½†è¿™ä¸¤ç§ç”¨æ³•éƒ½åº”è¯¥é¿å…ï¼Œä¸æ˜¯æ¨èçš„ä½¿ç”¨æ–¹å¼ã€‚</p><p>è¿™èƒŒåæ¶‰åŠåˆ° Spring AOP çš„ä»£ç†æœºåˆ¶ã€‚</p><p>æˆ‘å…ˆè¯´ä¸€ä¸‹ JDK åŠ¨æ€ä»£ç†ï¼Œå®ƒè¦æ±‚ç›®æ ‡ç±»å¿…é¡»å®ç°ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ¥å£ã€‚ä¹Ÿå°±æ„å‘³ç€ä»£ç†åªèƒ½æ‹¦æˆªæ¥å£ä¸­å£°æ˜çš„æ–¹æ³•ï¼Œè€Œ protected å’Œ private æ–¹æ³•å¹¶ä¸èƒ½åœ¨æ¥å£ä¸­å£°æ˜ï¼Œå› æ­¤åœ¨ JDK åŠ¨æ€ä»£ç†ä¸‹ï¼Œè¿™äº›æ–¹æ³•çš„äº‹åŠ¡æ³¨è§£æ˜¯ä¼šè¢«ç›´æ¥å¿½ç•¥çš„ã€‚</p><p>é‚£ Spring Boot 2.0 ä¹‹åï¼ŒSpring AOP é»˜è®¤ä½¿ç”¨çš„æ˜¯ CGLIB ä»£ç†ã€‚CGLIB ä»£ç†æ˜¯é€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»æ¥åˆ›å»ºä»£ç†å¯¹è±¡çš„ã€‚</p><p>é‚£å¯¹äº private æ–¹æ³•æ¥è¯´ï¼Œç”±äºæ— æ³•è¢«å­ç±»é‡å†™ï¼Œæ‰€ä»¥ CGLIB ä»£ç†ä¹Ÿæ— æ³•æ‹¦æˆªï¼Œäº‹åŠ¡ä¹Ÿå°±æ— æ³•ç”Ÿæ•ˆã€‚å¯¹äº protected æ–¹æ³•æ¥è¯´ï¼Œå› ä¸ºå®ƒå¯ä»¥è¢«å­ç±»é‡å†™ï¼Œæ‰€ä»¥ç†è®ºä¸Šäº‹åŠ¡æ˜¯ç”Ÿæ•ˆçš„ã€‚</p><p>----è¿™éƒ¨åˆ†å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª protected æ–¹æ³•ï¼Œåä¸º <code>protectedTransactionalMethod</code> ï¼Œå®ƒè¢« <code>@Transactional</code> æ³¨è§£æ ‡è®°ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå…ˆå‘æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡è®°å½•ï¼ˆä¸€ä¸ª TestEntity å®ä¾‹ï¼‰ã€‚ç´§æ¥ç€ï¼Œå®ƒä¼šç«‹å³æŠ›å‡ºä¸€ä¸ª RuntimeException ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250714171236.png" alt="æ´¾èªæ˜æºç ï¼šæµ‹è¯• protected æ–¹æ³•çš„äº‹åŠ¡æ˜¯å¦ç”Ÿæ•ˆ" tabindex="0" loading="lazy"><figcaption>æ´¾èªæ˜æºç ï¼šæµ‹è¯• protected æ–¹æ³•çš„äº‹åŠ¡æ˜¯å¦ç”Ÿæ•ˆ</figcaption></figure><ul><li>å¦‚æœäº‹åŠ¡ç”Ÿæ•ˆï¼šå½“ RuntimeException æŠ›å‡ºæ—¶ï¼ŒSpring çš„äº‹åŠ¡ç®¡ç†å™¨ä¼šæ•è·å®ƒï¼Œå¹¶è§¦å‘äº‹åŠ¡å›æ»šã€‚è¿™æ„å‘³ç€ï¼Œä¹‹å‰æ’å…¥æ•°æ®åº“çš„é‚£æ¡è®°å½•ä¼šè¢«æ’¤é”€ã€‚æœ€ç»ˆï¼Œæ•°æ®åº“é‡Œä¸ä¼šç•™ä¸‹è¿™æ¡è®°å½•ã€‚</li><li>å¦‚æœäº‹åŠ¡å¤±æ•ˆï¼šå³ä½¿ RuntimeException è¢«æŠ›å‡ºï¼Œç”±äºæ²¡æœ‰äº‹åŠ¡ç®¡ç†ï¼Œå·²ç»æ‰§è¡Œçš„æ•°æ®åº“æ’å…¥æ“ä½œä¸ä¼šè¢«æ’¤é”€ã€‚æœ€ç»ˆï¼Œæ•°æ®åº“é‡Œä¼šç•™ä¸‹è¿™æ¡è®°å½•ã€‚</li></ul><p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª public æ–¹æ³• <code>testProtectedTransaction</code> ï¼Œå®ƒé€šè¿‡ <code>this.protectedTransactionalMethod()</code> çš„æ–¹å¼ç›´æ¥è°ƒç”¨äº†é‚£ä¸ª protected æ–¹æ³•ã€‚æ¥ç€æˆ‘ä»¬è®¿é—® <code>/api/v1/test/transaction/protected</code> æ¥è§¦å‘è¿™ä¸ªè°ƒç”¨ã€‚</p><p>ç»“æœï¼šæ•°æ®åº“ä¸­ä¼šç•™ä¸‹ä¸€æ¡åä¸º &#39;test-protected&#39; çš„è®°å½•ã€‚è¿™è¯æ˜äº†ç”±äºæ˜¯å†…éƒ¨è°ƒç”¨ï¼Œç»•è¿‡äº† Spring AOP ä»£ç†ï¼Œ<code>@Transactional</code> æ³¨è§£æ²¡æœ‰ç”Ÿæ•ˆã€‚</p><p>æˆ‘ä»¬åˆ›å»ºäº†å¦ä¸€ä¸ª public æ–¹æ³• <code>testProtectedTransactionWithSelfProxy</code>ã€‚åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªâ€œè‡ªæ³¨å…¥â€çš„ä»£ç†å¯¹è±¡ self æ¥è°ƒç”¨ <code>self.protectedTransactionalMethod()</code>ã€‚æ¥ç€æˆ‘ä»¬é€šè¿‡è®¿é—® <code>/api/v1/test/transaction/protected/proxy</code> æ¥è§¦å‘è¿™ä¸ªè°ƒç”¨ã€‚</p><p>ç»“æœï¼šæ•°æ®åº“ä¸­ä¸ä¼šç•™ä¸‹åä¸º &#39;test-protected-proxy&#39; çš„è®°å½•ã€‚è¿™è¯æ˜é€šè¿‡ä»£ç†å¯¹è±¡çš„è°ƒç”¨ï¼ŒSpring AOP æˆåŠŸæ‹¦æˆªå¹¶å¼€å¯äº†äº‹åŠ¡ï¼Œæœ€ç»ˆåœ¨å¼‚å¸¸å‘ç”Ÿæ—¶æ­£ç¡®åœ°å›æ»šäº†äº‹åŠ¡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250714171739.png" alt="æ´¾èªæ˜æºç ï¼šprotected æ–¹æ³•çš„äº‹åŠ¡ç”Ÿæ•ˆç»“æœ" tabindex="0" loading="lazy"><figcaption>æ´¾èªæ˜æºç ï¼šprotected æ–¹æ³•çš„äº‹åŠ¡ç”Ÿæ•ˆç»“æœ</figcaption></figure><p>----è¿™éƒ¨åˆ†å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šäº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡ä¼ æ’­ï¼Œprotected å’Œ private åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—,è¿˜æœ‰é‚£äº›ä¸ç”Ÿæ•ˆçš„æƒ…å†µ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šSpring ä¸­çš„äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„oppo é¢ç»åŒå­¦ 8 åç«¯å¼€å‘ç§‹æ‹›ä¸€é¢é¢è¯•åŸé¢˜ï¼šè®²ä¸€ä¸‹Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šä»‹ç»äº‹åŠ¡ä¼ æ’­æ¨¡å‹</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 14 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œä¸€ä¸ªæµ™æ±Ÿå¤§å­¦ç¡•å£«çš„çƒå‹ä¸ä»…æ‹¿åˆ°äº†è…¾è®¯ WXG çš„å®ä¹  offerï¼Œç§‹æ‹›ä¹Ÿå¼€å§‹åŒæ­¥è¿›è¡Œäº†ï¼Œæˆ‘åªèƒ½è¯´ä¼˜ç§€çš„çƒå‹çœŸçš„èµ¶æ—©ä¸èµ¶æ™šå•Šï¼</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250714172641.png" alt="æµ™å¤§ç¡•ã€WXG å®ä¹ å¼€å§‹ç§‹æ‹›" tabindex="0" loading="lazy"><figcaption>æµ™å¤§ç¡•ã€WXG å®ä¹ å¼€å§‹ç§‹æ‹›</figcaption></figure><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div><h2 id="mvc" tabindex="-1"><a class="header-anchor" href="#mvc"><span>MVC</span></a></h2><h3 id="_30-spring-mvc-çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_30-spring-mvc-çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›"><span>30.Spring MVC çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</span></a></h3><p>Spring MVC ä½œä¸º Spring æ¡†æ¶ä¸­å¤„ç† Web è¯·æ±‚çš„æ ¸å¿ƒæ¨¡å—ï¼Œå®ƒçš„è®¾è®¡éµå¾ªäº†ç»å…¸çš„ MVC æ¨¡å¼ï¼Œæ ¹æ®æˆ‘çš„ç†è§£ï¼Œå®ƒçš„æ ¸å¿ƒç»„ä»¶ä¸»è¦åŒ…æ‹¬ï¼š</p><p>å‰ç«¯æ§åˆ¶å™¨ DispatcherServletï¼Œè¿™æ˜¯ Spring MVC çš„å…¥å£å’Œæ ¸å¿ƒè°ƒåº¦å™¨ã€‚å½“ä¸€ä¸ª HTTP è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨æ—¶ï¼Œé¦–å…ˆç”± DispatcherServlet æ¥æ”¶ã€‚å®ƒè´Ÿè´£å°†è¯·æ±‚åˆ†å‘åˆ°åˆé€‚çš„å¤„ç†å™¨ï¼Œä¹Ÿå°±æ˜¯ Controller ä¸­çš„æ–¹æ³•ï¼Œå¹¶åè°ƒå…¶ä»–ç»„ä»¶çš„å·¥ä½œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250717090650.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šSpring MVC ç»„ä»¶" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šSpring MVC ç»„ä»¶</figcaption></figure><p>åœ¨ Spring Boot é¡¹ç›®ä¸­ï¼ŒDispatcherServlet çš„å¯åŠ¨æ˜¯é€šè¿‡è‡ªåŠ¨é…ç½®å®Œæˆçš„ã€‚Spring Boot ä¼šè‡ªåŠ¨æ³¨å†Œä¸€ä¸ªé»˜è®¤çš„ DispatcherServletï¼Œå¹¶å°†å…¶æ˜ å°„åˆ° <code>/</code>ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServletRegistrationBean</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">DispatcherServlet</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> dispatcherServletRegistration</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DispatcherServlet</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> dispatcherServlet) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ServletRegistrationBean</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DispatcherServlet</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> registration </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServletRegistrationBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(dispatcherServlet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // é»˜è®¤æ˜ å°„è·¯å¾„ä¸º &quot;/&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    registration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;dispatcherServlet&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> registration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤„ç†å™¨æ˜ å°„ HandlerMappingï¼Œå½“ä¸€ä¸ªè¯·æ±‚è¿›æ¥æ—¶ï¼Œå‰ç«¯æ§åˆ¶å™¨ä¼šè¯¢é—®å¤„ç†å™¨æ˜ å°„ï¼šâ€œè¿™ä¸ª URL åº”è¯¥ç”±å“ªä¸ª Controller çš„å“ªä¸ªæ–¹æ³•æ¥å¤„ç†ï¼Ÿâ€ç„¶åå®ƒå°±ä¼šæ ¹æ® <code>@RequestMapping</code>ã€<code>@GetMapping</code> è¿™äº›æ³¨è§£æ¥åŒ¹é…è¯·æ±‚ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250717091424.png" alt="æŠ€æœ¯æ´¾æºç ï¼šHandlerMapping" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šHandlerMapping</figcaption></figure><p>å¤„ç†å™¨ Handlerï¼Œå®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬å†™çš„ Controller æ–¹æ³•ï¼Œè¿™æ˜¯çœŸæ­£å¤„ç†ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ã€‚</p><p>å¤„ç†å™¨é€‚é…å™¨ HandlerAdapterï¼Œè´Ÿè´£è°ƒç”¨è¯¥å¤„ç†å™¨çš„æ–¹æ³•ï¼Œå¹¶å¤„ç†å‚æ•°ç»‘å®šã€ç±»å‹è½¬æ¢ç­‰ã€‚å› ä¸ºå¤„ç†å™¨å¯èƒ½æœ‰ä¸åŒçš„ç±»å‹ï¼Œæ¯”å¦‚æ³¨è§£æ–¹å¼ã€å®ç°æ¥å£æ–¹å¼ç­‰ï¼Œå¤„ç†å™¨é€‚é…å™¨å°±æ˜¯ä¸ºäº†ç»Ÿä¸€è°ƒç”¨æ–¹å¼ã€‚</p><p>è§†å›¾è§£æå™¨ ViewResolverï¼Œå¤„ç†å®Œä¸šåŠ¡é€»è¾‘åï¼Œå¦‚æœéœ€è¦æ¸²æŸ“è§†å›¾ï¼ŒViewResolver ä¼šæ ¹æ®è¿”å›çš„è§†å›¾åç§°è§£æå®é™…çš„è§†å›¾å¯¹è±¡ï¼Œæ¯”å¦‚ Thymeleafã€‚åœ¨å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸­ï¼Œè¿™ä¸ªç»„ä»¶æ›´å¤šç”¨äºè¿”å› JSON æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250717092624.png" alt="æŠ€æœ¯æ´¾æºç ï¼šViewResolver" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šViewResolver</figcaption></figure><p>å¼‚å¸¸å¤„ç†å™¨ HandlerExceptionResolverï¼Œæ•è·å¹¶å¤„ç†è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­æŠ›å‡ºçš„å¼‚å¸¸ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>@ControllerAdvice</code> å’Œ <code>@ExceptionHandler</code> æ¥è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œç¡®ä¿è¿”å›å‹å¥½çš„é”™è¯¯å“åº”ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250717092904.png" alt="æŠ€æœ¯æ´¾æºç ï¼šHandlerExceptionResolver" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šHandlerExceptionResolver</figcaption></figure><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰æ–‡ä»¶ä¸Šä¼ è§£æå™¨ MultipartResolverï¼Œç”¨äºå¤„ç†æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ï¼›æ‹¦æˆªå™¨ HandlerInterceptorï¼Œç”¨äºåœ¨è¯·æ±‚å¤„ç†å‰åæ‰§è¡Œä¸€äº›é¢å¤–çš„é€»è¾‘ï¼Œæ¯”å¦‚æƒé™æ ¡éªŒã€æ—¥å¿—è®°å½•ç­‰ã€‚</p><p>memoï¼š2025 å¹´ 7 æœˆ 17 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œæ˜¨å¤©<a href="https://t.zsxq.com/LXlx7" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´æ‰‹å†™äº†ä¸€ä¸ª Redis çš„è½®å­é¡¹ç›®</a>ï¼Œç”¨çš„ Go è¯­è¨€ï¼Œæˆ‘ä»Šå¤©å»çœ‹äº†ä¸€ä¸‹ doc å’Œä»£ç ï¼Œå†™å¾—éå¸¸å¥½ï¼Œä»£ç æ³¨é‡Šå¾ˆæ¸…æ™°ï¼Œdoc å†™å¾—å¾ˆè¯¦ç»†ï¼Œèƒ½çœ‹å¾—å‡ºçƒå‹çš„ç”¨å¿ƒã€‚æ‰‹å†™è½®å­æ˜¯éå¸¸è€ƒéªŒä¸€ä¸ªäººçš„èƒ½åŠ›çš„ï¼Œæˆ‘çœ‹ä»–å®ç°çš„åŠŸèƒ½æœ‰ï¼šå­—ç¬¦ä¸²å’Œæ•£åˆ—çš„æ•°æ®ç±»å‹ã€RESP åè®®è§£æå™¨ã€ä½¿ç”¨goroutine æ¥åŒæ—¶å¤„ç†å¤šä¸ªè¿æ¥ã€æŒä¹…åŒ– AOF åè®®ç­‰ï¼Œéå¸¸å¼ºã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250717095915.png" alt="æ‰‹å†™ Redis çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>æ‰‹å†™ Redis çš„çƒå‹</figcaption></figure><h3 id="_31-ğŸŒŸspring-mvc-çš„å·¥ä½œæµç¨‹äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_31-ğŸŒŸspring-mvc-çš„å·¥ä½œæµç¨‹äº†è§£å—"><span>31.ğŸŒŸSpring MVC çš„å·¥ä½œæµç¨‹äº†è§£å—ï¼Ÿ</span></a></h3><p>ç®€å•æ¥è¯´ï¼ŒSpring MVC æ˜¯ä¸€ä¸ªåŸºäº Servlet çš„è¯·æ±‚å¤„ç†æ¡†æ¶ï¼Œæ ¸å¿ƒæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šè¯·æ±‚æ¥æ”¶ â†’ è·¯ç”±åˆ†å‘ â†’ æ§åˆ¶å™¨å¤„ç† â†’ è§†å›¾è§£æã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-e29a122b-db07-48b8-8289-7251032e87a1.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring MVCçš„å·¥ä½œæµç¨‹" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring MVCçš„å·¥ä½œæµç¨‹</figcaption></figure><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240506102456.png" alt="å›¾ç‰‡æ¥æºäºç½‘ç»œï¼šSpringMVCå·¥ä½œæµç¨‹å›¾" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡æ¥æºäºç½‘ç»œï¼šSpringMVCå·¥ä½œæµç¨‹å›¾</figcaption></figure><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240506103022.png" alt="_æœªæ¥å¯æœŸï¼šSpringMVCå·¥ä½œæµç¨‹å›¾" tabindex="0" loading="lazy"><figcaption>_æœªæ¥å¯æœŸï¼šSpringMVCå·¥ä½œæµç¨‹å›¾</figcaption></figure><p>ç”¨æˆ·å‘èµ·çš„ HTTP è¯·æ±‚ï¼Œé¦–å…ˆä¼šè¢« DispatcherServlet æ•è·ï¼Œè¿™æ˜¯ Spring MVC çš„â€œå‰ç«¯æ§åˆ¶å™¨â€ï¼Œè´Ÿè´£æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œèµ·åˆ°ç»Ÿä¸€å…¥å£çš„ä½œç”¨ã€‚</p><p>DispatcherServlet æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ ¹æ® URLã€è¯·æ±‚æ–¹æ³•ç­‰ä¿¡æ¯ï¼Œäº¤ç»™ HandlerMapping è¿›è¡Œè·¯ç”±åŒ¹é…ï¼ŒæŸ¥æ‰¾å¯¹åº”çš„å¤„ç†å™¨ï¼Œä¹Ÿå°±æ˜¯ Controller ä¸­çš„å…·ä½“æ–¹æ³•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250718105710.png" alt="æŠ€æœ¯æ´¾æºç ï¼šController" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šController</figcaption></figure><p>æ‰¾åˆ°å¯¹åº” Controller æ–¹æ³•åï¼ŒDispatcherServlet ä¼šå§”æ‰˜ç»™å¤„ç†å™¨é€‚é…å™¨ HandlerAdapter è¿›è¡Œè°ƒç”¨ã€‚å¤„ç†å™¨é€‚é…å™¨è´Ÿè´£æ‰§è¡Œæ–¹æ³•æœ¬èº«ï¼Œå¹¶å¤„ç†å‚æ•°ç»‘å®šã€æ•°æ®ç±»å‹è½¬æ¢ç­‰ã€‚åœ¨æ³¨è§£é©±åŠ¨å¼€å‘ä¸­ï¼Œå¸¸ç”¨çš„æ˜¯ RequestMappingHandlerAdapterã€‚è¿™ä¸€å±‚ä¼šæŠŠè¯·æ±‚å‚æ•°è‡ªåŠ¨æ³¨å…¥åˆ°æ–¹æ³•å½¢å‚ä¸­ï¼Œå¹¶è°ƒç”¨ Controller æ‰§è¡Œå®é™…çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250718105928.png" alt="æŠ€æœ¯æ´¾æºç ï¼šRequestMappingHandlerAdapter" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šRequestMappingHandlerAdapter</figcaption></figure><p>Controller æ–¹æ³•æœ€ç»ˆä¼šè¿”å›ç»“æœï¼Œæ¯”å¦‚è§†å›¾åç§°ã€ModelAndView æˆ–ç›´æ¥è¿”å› JSON æ•°æ®ã€‚</p><p>å½“ Controller æ–¹æ³•è¿”å›è§†å›¾åæ—¶ï¼ŒDispatcherServlet ä¼šè°ƒç”¨ ViewResolver å°†å…¶è§£æä¸ºå®é™…çš„ View å¯¹è±¡ï¼Œæ¯”å¦‚ Thymeleaf é¡µé¢ã€‚åœ¨å‰åç«¯åˆ†ç¦»çš„æ¥å£é¡¹ç›®ä¸­ï¼Œè¿™ä¸€æ­¥åˆ™é€šå¸¸æ˜¯è¿”å› JSON æ•°æ®ã€‚</p><p>æœ€åï¼Œç”± View å¯¹è±¡å®Œæˆæ¸²æŸ“ï¼Œæˆ–è€…å°† JSON ç»“æœç›´æ¥é€šè¿‡ DispatcherServlet è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><h4 id="ä¸ºä»€ä¹ˆè¿˜éœ€è¦-handleradapter" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¿˜éœ€è¦-handleradapter"><span>ä¸ºä»€ä¹ˆè¿˜éœ€è¦ HandlerAdapterï¼Ÿ</span></a></h4><p>Spring MVC æ”¯æŒå¤šç§é£æ ¼çš„å¤„ç†å™¨ï¼Œæ¯”å¦‚åŸºäº <code>@Controller</code> æ³¨è§£çš„å¤„ç†å™¨ã€å®ç°äº† Controller æ¥å£çš„å¤„ç†å™¨ç­‰ã€‚å¦‚æœæ²¡æœ‰å¤„ç†å™¨é€‚é…å™¨ï¼ŒDispatcherServlet å°±éœ€è¦ç¡¬ç¼–ç æ¯ç§å¤„ç†å™¨çš„è°ƒç”¨æ–¹å¼ï¼Œæ¡†æ¶å°±ä¼šå˜å¾—éå¸¸åƒµç¡¬â€”â€”æ–°å¢ä¸€ç§ Controller ç±»å‹ï¼Œå°±å¿…é¡»æ”¹ DispatcherServlet çš„ä»£ç ã€‚</p><p>å› æ­¤ï¼ŒSpring å¼•å…¥äº† HandlerAdapter ä½œä¸ºé€‚é…å™¨ï¼Œå±è”½ä¸åŒæ§åˆ¶å™¨çš„å·®å¼‚ï¼Œç»™ DispatcherServlet æä¾›ä¸€ä¸ªç»Ÿä¸€çš„è°ƒç”¨å…¥å£ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå¦‚æœæ˜¯å®ç°äº† Controller æ¥å£çš„å¤„ç†å™¨ï¼ŒDispatcherServlet ä¼šä½¿ç”¨ SimpleControllerHandlerAdapter æ¥é€‚é…å®ƒã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SimpleControllerHandlerAdapter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HandlerAdapter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> supports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (handler </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">instanceof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Controller);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Nullable</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ModelAndView</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">			throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ((Controller) handler).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">handleRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(request, response);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ... çœç•¥ä¸€ä¸ªæ— å…³æ–¹æ³• ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯ä½¿ç”¨ <code>@RequestMapping</code> æ³¨è§£çš„å¤„ç†å™¨ï¼ŒDispatcherServlet åˆ™ä¼šä½¿ç”¨ RequestMappingHandlerAdapter æ¥é€‚é…ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RequestMappingHandlerAdapter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HandlerAdapter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">   </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> supports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (handler </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">instanceof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> HandlerMethod);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Nullable</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ModelAndView</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        HandlerMethod</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> handlerMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (HandlerMethod) handler;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ‰§è¡Œæ–¹æ³•å¹¶è¿”å› ModelAndView      </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> invokeHandlerMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(handlerMethod, request, response);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯ Java åç«¯å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´å‰ç«¯å‘èµ·è¯·æ±‚åˆ° SpringMVC çš„æ•´ä¸ªå¤„ç†æµç¨‹ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å›½ä¼é¢è¯•åŸé¢˜ï¼šè¯´è¯´ SpringMVC çš„æµç¨‹å§</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åŒå­¦ 5 Java åç«¯é¢è¯•åŸé¢˜ï¼šspringMVC å·¥ä½œæµç¨‹ æˆ‘å¤§æ¦‚å°±æ˜¯æŒ‰é¢æ¸£é€†è¢­é‡Œç­”çš„ï¼Œç­”åˆ°ä¸€åŠæ‰“æ–­æˆ‘ï¼šç„¶åä¼šæœ‰ä¸ª Handlerï¼Œè¿™ä¸ª Handler æ˜¯ä»€ä¹ˆä¸œè¥¿å•Šã€‚å‰é¢ Handler ä¸æ˜¯å·²ç»çŸ¥é“ controller äº†å—ï¼Œæˆ‘ç›´æ¥æ‰§è¡Œä¸å°±è¡Œäº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ Adapter å‘¢ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 8 é¢è¯•åŸé¢˜ï¼šSpringMVCæ¡†æ¶</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨åŒå­¦ 17 åç«¯æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šspringmvcæ‰§è¡Œæµç¨‹</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 18 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œç¢°åˆ°ä¸€ä¸ªè£èª‰å¥–é¡¹åŸºæœ¬æ‹‰æ»¡çš„çƒå‹ï¼Œå›½å®¶åŠ±å¿—å¥–å­¦é‡‘ã€çœçº§æ¯”èµ›ã€æ ¡çº§ä¸‰å¥½å­¦ç”Ÿç­‰ï¼Œé‚£è¿™é‡Œä¹Ÿæ˜¯æ¸©é¦¨æé†’ä¸€ä¸‹å¤§å®¶ï¼Œå­¦æ ¡çš„è£èª‰å¥–é¡¹å¦‚æœä½ æœ‰èƒ½åŠ›äº‰å–ï¼Œæœ‰æ—¶é—´äº‰å–ï¼Œè¿˜æ˜¯å°½é‡äº‰å–ä¸€ä¸‹çš„ï¼Œå°¤å…¶æ˜¯æ±‚èŒå¤®å›½ä¼çš„æ—¶å€™ï¼Œä¼šéå¸¸æœ‰ç”¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250718111849.png" alt="è£èª‰å¥–é¡¹åŸºæœ¬æ‹‰æ»¡çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>è£èª‰å¥–é¡¹åŸºæœ¬æ‹‰æ»¡çš„çƒå‹</figcaption></figure><h3 id="_32-springmvc-restful-é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢" tabindex="-1"><a class="header-anchor" href="#_32-springmvc-restful-é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢"><span>32.SpringMVC Restful é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</span></a></h3><p>åœ¨ä¼ ç»Ÿçš„ MVC ä¸­ï¼ŒController æ–¹æ³•é€šå¸¸è¿”å›ä¸€ä¸ªè§†å›¾åç§°æˆ–è€… ModelAndView å¯¹è±¡ï¼Œç„¶åç”±è§†å›¾è§£æå™¨ ViewResolver è§£æå¹¶æ¸²æŸ“æˆ HTML é¡µé¢ã€‚ä½†åœ¨ RESTful æ¶æ„ä¸­ï¼Œé€šå¸¸è¿”å›çš„æ˜¯ JSON æˆ– XMLï¼Œä¸å†æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¡µé¢ã€‚</p><p>å…¶ä¸­å¾ˆé‡è¦çš„ä¸¤ä¸ªæ³¨è§£ï¼š<code>@RestController</code> ç›¸å½“äº <code>@Controller</code> å’Œ <code>@ResponseBody</code> çš„ç»“åˆã€‚å½“åœ¨ä¸€ä¸ªç±»ä¸Šä½¿ç”¨ <code>@RestController</code> æ—¶ï¼Œå®ƒä¼šå‘Šè¯‰ Spring è¿™ä¸ªç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„è¿”å›å€¼éƒ½åº”è¯¥è¢«ç›´æ¥å†™å…¥ HTTP å“åº”ä½“ä¸­ï¼Œè€Œä¸å†è¢«è§£æä¸ºè§†å›¾ã€‚</p><p><code>@ResponseBody</code> å¯ä»¥ç”¨åœ¨æ–¹æ³•çº§åˆ«ï¼Œä½œç”¨ç›¸åŒã€‚å®ƒæ ‡å¿—ç€è¯¥æ–¹æ³•çš„è¿”å›å€¼å°†ä½œä¸ºå“åº”ä½“å†…å®¹ï¼ŒSpring ä¼šè·³è¿‡è§†å›¾è§£æçš„æ­¥éª¤ã€‚</p><p>HttpMessageConverter æ˜¯å®ç° RESTful é£æ ¼çš„å…³é”®ã€‚å½“ Spring æ£€æµ‹åˆ° <code>@ResponseBody</code> æ³¨è§£æ—¶ï¼Œå®ƒä¼šä½¿ç”¨ HttpMessageConverter æ¥å°† Controller æ–¹æ³•è¿”å›çš„ Java å¯¹è±¡åºåˆ—åŒ–æˆæŒ‡å®šçš„æ ¼å¼ï¼Œå¦‚ JSONã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœç±»è·¯å¾„ä¸‹æœ‰ Jackson åº“ï¼ŒSpring Boot ä¼šè‡ªåŠ¨é…ç½® MappingJackson2HttpMessageConverter æ¥å¤„ç† JSON çš„è½¬æ¢ã€‚ç›¸åº”çš„ï¼Œå¯¹äºå¸¦æœ‰ <code>@RequestBody</code> æ³¨è§£çš„æ–¹æ³•å‚æ•°ï¼Œå®ƒä¹Ÿä¼šç”¨è¿™ä¸ªè½¬æ¢å™¨å°†è¯·æ±‚ä½“ä¸­çš„ JSON æ•°æ®ååºåˆ—åŒ–æˆ Java å¯¹è±¡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250719102056.png" alt="æŠ€æœ¯æ´¾æºç ï¼šMappingJackson2HttpMessageConverter" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šMappingJackson2HttpMessageConverter</figcaption></figure><p>æ‰€ä»¥ï¼ŒRESTful æ¥å£çš„æµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šè¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet â†’ é€šè¿‡ HandlerMapping æ‰¾åˆ°å¯¹åº”çš„ Controller æ–¹æ³• â†’ æ‰§è¡Œæ–¹æ³•å¹¶è¿”å›æ•°æ® â†’ ä½¿ç”¨ HttpMessageConverter å°†æ•°æ®è½¬æ¢ä¸º JSON æˆ– XML æ ¼å¼ â†’ ç›´æ¥å†™å…¥ HTTP å“åº”ä½“ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-2da963a0-5da9-4b3a-aafd-fd8dbc7e1807.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring MVC Restfulè¯·æ±‚å“åº”ç¤ºæ„å›¾" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring MVC Restfulè¯·æ±‚å“åº”ç¤ºæ„å›¾</figcaption></figure><p>æ€»ç»“æ¥è¯´ï¼ŒRESTful æ¥å£çš„æµç¨‹é€šè¿‡ <code>@RestController</code> å’Œ HttpMessageConverter â€œæŠ„äº†è¿‘é“â€ï¼Œçœç•¥äº† ViewResolver å’Œ View çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œç›´æ¥å°†æ•°æ®è½¬æ¢ä¸ºæŒ‡å®šçš„æ ¼å¼è¿”å›ï¼Œéå¸¸é€‚åˆå‰åç«¯åˆ†ç¦»çš„åº”ç”¨åœºæ™¯ã€‚</p><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div><p>memoï¼š2025 å¹´ 7 æœˆ 19 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹</a>ç§ä¿¡æˆ‘è¯´ï¼Œæ‹¿åˆ°äº†äº¬ä¸œçš„å®ä¹  offerï¼Œé—®æ¥ä¸‹æ¥çš„ç§‹æ‹›è¯¥æ€ä¹ˆå‡†å¤‡ï¼Ÿé‚£ 7 æœˆä»½å®ä¹  Offer ç¡®å®ä¼šæ¯”è¾ƒå°‘ï¼Œä½†ä»ç„¶æœ‰ä¸€éƒ¨åˆ†ï¼Œå¦‚æœè¿™ä¸ªé˜¶æ®µè¿˜æƒ³è¦å†²å®ä¹ çš„è¯ï¼Œç¡®å®å¯ä»¥æ¡æ¼ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250719103018.png" alt="çƒå‹æ‹¿åˆ°äº¬ä¸œå®ä¹  offer äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº¬ä¸œå®ä¹  offer äº†</figcaption></figure><h2 id="spring-boot" tabindex="-1"><a class="header-anchor" href="#spring-boot"><span>Spring Boot</span></a></h2><h3 id="_33-ğŸŒŸä»‹ç»ä¸€ä¸‹-springboot" tabindex="-1"><a class="header-anchor" href="#_33-ğŸŒŸä»‹ç»ä¸€ä¸‹-springboot"><span>33.ğŸŒŸä»‹ç»ä¸€ä¸‹ SpringBootï¼Ÿ</span></a></h3><p>Spring Boot å¯ä»¥è¯´æ˜¯ Spring ç”Ÿæ€çš„ä¸€ä¸ªé‡å¤§çªç ´ï¼Œå®ƒæå¤§åœ°ç®€åŒ–äº† Spring åº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²è¿‡ç¨‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-d9164ee6-5c86-4313-8fd9-efb9acfa5f0b.png" alt="SpringBootå›¾æ ‡" tabindex="0" loading="lazy"><figcaption>SpringBootå›¾æ ‡</figcaption></figure><p>ä»¥å‰æˆ‘ä»¬ç”¨ Spring å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦é…ç½®ä¸€å¤§å † XML æ–‡ä»¶ï¼ŒåŒ…æ‹¬ Bean çš„å®šä¹‰ã€æ•°æ®æºé…ç½®ã€äº‹åŠ¡é…ç½®ç­‰ç­‰ï¼Œéå¸¸ç¹çã€‚è€Œä¸”è¿˜è¦æ‰‹åŠ¨ç®¡ç†å„ç§ jar åŒ…çš„ä¾èµ–å…³ç³»ï¼Œå¾ˆå®¹æ˜“å‡ºç°ç‰ˆæœ¬å†²çªçš„é—®é¢˜ã€‚éƒ¨ç½²çš„æ—¶å€™è¿˜è¦å•ç‹¬æ­å»º Tomcat æœåŠ¡å™¨ï¼Œæ•´ä¸ªè¿‡ç¨‹å¾ˆå¤æ‚ã€‚Spring Boot å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹è€Œç”Ÿçš„ã€‚</p><p>â€œçº¦å®šå¤§äºé…ç½®â€æ˜¯ Spring Boot æœ€æ ¸å¿ƒçš„ç†å¿µã€‚å®ƒé¢„è®¾äº†å¾ˆå¤šé»˜è®¤é…ç½®ï¼Œæ¯”å¦‚é»˜è®¤ä½¿ç”¨å†…åµŒçš„ Tomcat æœåŠ¡å™¨ï¼Œé»˜è®¤çš„æ—¥å¿—æ¡†æ¶æ˜¯ Logback ç­‰ç­‰ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¼€å‘è€…å°±åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å†çº ç»“äºå„ç§é…ç½®ç»†èŠ‚ã€‚</p><p>è‡ªåŠ¨è£…é…ä¹Ÿæ˜¯ Spring Boot çš„ä¸€å¤§ç‰¹è‰²ï¼Œå®ƒä¼šæ ¹æ®é¡¹ç›®ä¸­å¼•å…¥çš„ä¾èµ–è‡ªåŠ¨é…ç½®åˆé€‚çš„ Beanã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¼•å…¥äº† Spring Data JPAï¼ŒSpring Boot å°±ä¼šè‡ªåŠ¨é…ç½®æ•°æ®æºï¼›æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¼•å…¥äº† Spring Securityï¼ŒSpring Boot å°±ä¼šè‡ªåŠ¨é…ç½®å®‰å…¨ç›¸å…³çš„ Beanã€‚</p><p>Spring Boot è¿˜æä¾›äº†å¾ˆå¤šå¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ Actuator ç›‘æ§ã€DevTools å¼€å‘å·¥å…·ã€Spring Boot Starter ç­‰ç­‰ã€‚Actuator å¯ä»¥è®©æˆ‘ä»¬è½»æ¾ç›‘æ§åº”ç”¨çš„å¥åº·çŠ¶æ€ã€æ€§èƒ½æŒ‡æ ‡ç­‰ï¼›DevTools å¯ä»¥åŠ å¿«å¼€å‘æ•ˆç‡ï¼Œæ¯”å¦‚è‡ªåŠ¨é‡å¯ã€çƒ­éƒ¨ç½²ç­‰ï¼›Spring Boot Starter åˆ™æ˜¯ä¸€äº›é¢„é…ç½®å¥½çš„ä¾èµ–é›†åˆï¼Œè®©æˆ‘ä»¬å¯ä»¥å¿«é€Ÿå¼•å…¥æŸäº›å¸¸ç”¨çš„åŠŸèƒ½ã€‚</p><h4 id="spring-bootå¸¸ç”¨æ³¨è§£æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#spring-bootå¸¸ç”¨æ³¨è§£æœ‰å“ªäº›"><span>Spring Bootå¸¸ç”¨æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</span></a></h4><p>Spring Boot çš„æ³¨è§£å¾ˆå¤šï¼Œæˆ‘å°±æŒ‘ä¸¤ä¸ªè¯´ä¸€ä¸‹å§ã€‚</p><ul><li><code>@SpringBootApplication</code>ï¼šè¿™æ˜¯ Spring Boot çš„æ ¸å¿ƒæ³¨è§£ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼ŒåŒ…å«äº† <code>@Configuration</code>ã€<code>@EnableAutoConfiguration</code> å’Œ <code>@ComponentScan</code>ã€‚å®ƒæ ‡å¿—ç€ä¸€ä¸ª Spring Boot åº”ç”¨çš„å…¥å£ã€‚</li><li><code>@SpringBootTest</code>ï¼šç”¨äºæµ‹è¯• Spring Boot åº”ç”¨çš„æ³¨è§£ï¼Œå®ƒä¼šåŠ è½½æ•´ä¸ª Spring ä¸Šä¸‹æ–‡ï¼Œé€‚åˆé›†æˆæµ‹è¯•ã€‚</li></ul><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸º OD é¢ç»ä¸­å‡ºç°è¿‡è¯¥é¢˜ï¼šè®²è®² Spring Boot çš„ç‰¹æ€§ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šSpringBootåŸºæœ¬åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å›½ä¼é›¶ç¢é¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šSpringbootåŸºäºSpringçš„é…ç½®æœ‰å“ªå‡ ç§</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šspringbootå¸¸ç”¨æ³¨è§£</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 20 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åˆæœ‰<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹</a>å‘ç§ä¿¡è¯´ï¼Œåæ‚”æ²¡æœ‰æ—©ä¸€ç‚¹åŠ å…¥æ˜Ÿçƒï¼ŒåŠ å…¥æ˜Ÿçƒåï¼Œæ‰å‘ç°å¤§å®¶æ—©æ—©å°±ä¸ºè‡ªå·±çš„æœªæ¥å»æ‹¼æäº†ã€‚å¾ˆçœŸå®ï¼Œå¥½å§ï¼Œè¿™å°±æ˜¯æ˜Ÿçƒçš„ä»·å€¼æ‰€åœ¨ï¼Œ100 å¤šå—é’±çš„é—¨ç¥¨å°±èƒ½æä¾›å­¦æ ¡å‡ ä¸‡å­¦è´¹ç»™ä½ ä¸äº†çš„ä¸œè¥¿ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-ä»å­¦æ ¡åˆ°èŒåœºï¼Œä¸€èˆ¬éƒ½è¿™æ ·ï¼Œæ­£å¸¸çš„ï¼Œæƒ³å¹²äº†ï¼Œ.png" alt="çƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯</figcaption></figure><h3 id="_34-ğŸŒŸspring-bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_34-ğŸŒŸspring-bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—"><span>34.ğŸŒŸSpring Bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—ï¼Ÿ</span></a></h3><p>åœ¨ Spring Boot ä¸­ï¼Œå¼€å¯è‡ªåŠ¨è£…é…çš„æ³¨è§£æ˜¯<code>@EnableAutoConfiguration</code>ã€‚è¿™ä¸ªæ³¨è§£ä¼šå‘Šè¯‰ Spring å»æ‰«ææ‰€æœ‰å¯ç”¨çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240316121711.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@EnableAutoConfiguration æºç " tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@EnableAutoConfiguration æºç </figcaption></figure><p>Spring Boot ä¸ºäº†è¿›ä¸€æ­¥ç®€åŒ–ï¼ŒæŠŠè¿™ä¸ªæ³¨è§£åŒ…å«åˆ°äº† <code>@SpringBootApplication</code> æ³¨è§£ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬åœ¨ä¸»ç±»ä¸Šä½¿ç”¨ <code>@SpringBootApplication</code> æ³¨è§£æ—¶ï¼Œå®é™…ä¸Šå°±å·²ç»å¼€å¯äº†è‡ªåŠ¨è£…é…ã€‚</p><p>å½“ main æ–¹æ³•è¿è¡Œçš„æ—¶å€™ï¼ŒSpring ä¼šå»ç±»è·¯å¾„ä¸‹æ‰¾ <code>spring.factories</code> è¿™ä¸ªæ–‡ä»¶ï¼Œè¯»å–é‡Œé¢é…ç½®çš„è‡ªåŠ¨é…ç½®ç±»åˆ—è¡¨ã€‚æ¯”å¦‚åœ¨æˆ‘ä»¬çš„<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾é¡¹ç›®</a>ä¸­ï¼Œpaicoding-core å’Œ paicoding-service æ¨¡å—é‡Œéƒ½æœ‰ spring.factoriesï¼Œåˆ†åˆ«æ³¨å†Œäº† ForumCoreAutoConfig å’Œ ServiceAutoConfigï¼Œè¿™ä¸¤ä¸ªé…ç½®ç±»å°±ä¼šåœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™è¢«è‡ªåŠ¨åŠ è½½ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250726163615.png" alt="æŠ€æœ¯æ´¾æºç ï¼šspring.factories" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šspring.factories</figcaption></figure><p>ç„¶åæ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»å†…éƒ¨ï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ª <code>@Configuration</code> æ³¨è§£ï¼ŒåŒæ—¶ç»“åˆå„ç§ <code>@Conditional</code> æ³¨è§£æ¥åšæ¡ä»¶æ§åˆ¶ã€‚åƒ<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>çš„ RabbitMqAutoConfig ç±»ï¼Œå°±ç”¨äº† <code>@ConditionalOnProperty</code> æ³¨è§£æ¥åˆ¤æ–­é…ç½®æ–‡ä»¶é‡Œæœ‰æ²¡æœ‰å¼€å¯ rabbitmq.switchFlagï¼Œæ¥å†³å®šæ˜¯å¦åˆå§‹åŒ– RabbitMQ æ¶ˆè´¹çº¿ç¨‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250726163759.png" alt="æŠ€æœ¯æ´¾æºç ï¼šRabbitMqAutoConfig" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šRabbitMqAutoConfig</figcaption></figure><p>å¦å¤–ä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯è‡ªåŠ¨æ³¨å…¥ Beanï¼Œæ¯”å¦‚<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>çš„ ServiceAutoConfig ä¸­å°±ç”¨äº† <code>@ComponentScan</code> æ¥æ‰«æ service åŒ…ï¼Œ<code>@MapperScan</code> æ‰«æ MyBatis çš„ mapper æ¥å£ï¼Œå®ç°ä¸šåŠ¡å±‚å’Œ DAO å±‚çš„è‡ªåŠ¨è£…é…ã€‚</p><p>å…·ä½“çš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥æ€»ç»“ä¸ºï¼šSpring Boot é¡¹ç›®åœ¨å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œç„¶åé€ä¸ªæ£€æŸ¥å®ƒä»¬çš„ç”Ÿæ•ˆæ¡ä»¶ï¼Œå½“æ¡ä»¶æ»¡è¶³æ—¶å°±å®ä¾‹åŒ–å¹¶åˆ›å»ºç›¸åº”çš„ Beanã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-df77ee15-2ff0-4ec7-8e65-e4ebb8ba88f1.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Bootçš„è‡ªåŠ¨è£…é…åŸç†" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Bootçš„è‡ªåŠ¨è£…é…åŸç†</figcaption></figure><p>è‡ªåŠ¨è£…é…çš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ Spring å®¹å™¨å¯åŠ¨çš„æ—¶å€™ã€‚å…·ä½“æ¥è¯´æ˜¯åœ¨ ConfigurationClassPostProcessor è¿™ä¸ª BeanPostProcessor ä¸­å¤„ç†çš„ï¼Œå®ƒä¼šè§£æ <code>@Configuration</code> ç±»ï¼ŒåŒ…æ‹¬é€šè¿‡ <code>@Import</code> å¯¼å…¥çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AutoConfigurationEntry</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getAutoConfigurationEntry</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AnnotationMetadata</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> annotationMetadata) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ£€æŸ¥è‡ªåŠ¨é…ç½®æ˜¯å¦å¯ç”¨ã€‚å¦‚æœ@ConditionalOnClassç­‰æ¡ä»¶æ³¨è§£ä½¿å¾—è‡ªåŠ¨é…ç½®ä¸é€‚ç”¨äºå½“å‰ç¯å¢ƒï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„é…ç½®æ¡ç›®ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(annotationMetadata)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> EMPTY_ENTRY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // è·å–å¯åŠ¨ç±»ä¸Šçš„@EnableAutoConfigurationæ³¨è§£çš„å±æ€§ï¼Œè¿™å¯èƒ½åŒ…æ‹¬å¯¹ç‰¹å®šè‡ªåŠ¨é…ç½®ç±»çš„æ’é™¤ã€‚</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    AnnotationAttributes</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> attributes </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getAttributes</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(annotationMetadata)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ä»spring.factoriesä¸­è·å–æ‰€æœ‰å€™é€‰çš„è‡ªåŠ¨é…ç½®ç±»ã€‚è¿™æ˜¯é€šè¿‡åŠ è½½META-INF/spring.factoriesæ–‡ä»¶ä¸­å¯¹åº”çš„æ¡ç›®æ¥å®ç°çš„ã€‚</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> configurations </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getCandidateConfigurations</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(annotationMetadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> attributes)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ç§»é™¤é…ç½®åˆ—è¡¨ä¸­çš„é‡å¤é¡¹ï¼Œç¡®ä¿æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»åªè¢«è€ƒè™‘ä¸€æ¬¡ã€‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    configurations </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> removeDuplicates</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(configurations)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ ¹æ®æ³¨è§£å±æ€§è§£æå‡ºéœ€è¦æ’é™¤çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Set</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> exclusions </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getExclusions</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(annotationMetadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> attributes)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ£€æŸ¥æ’é™¤çš„ç±»æ˜¯å¦å­˜åœ¨äºå€™é€‰é…ç½®ä¸­ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    checkExcludedClasses</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(configurations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> exclusions)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // ä»å€™é€‰é…ç½®ä¸­ç§»é™¤æ’é™¤çš„ç±»ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    configurations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">removeAll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(exclusions);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // åº”ç”¨è¿‡æ»¤å™¨è¿›ä¸€æ­¥ç­›é€‰è‡ªåŠ¨é…ç½®ç±»ã€‚è¿‡æ»¤å™¨å¯èƒ½åŸºäºæ¡ä»¶æ³¨è§£å¦‚@ConditionalOnBeanç­‰æ¥æ’é™¤ç‰¹å®šçš„é…ç½®ç±»ã€‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    configurations </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getConfigurationClassFilter</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(configurations);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // è§¦å‘è‡ªåŠ¨é…ç½®å¯¼å…¥äº‹ä»¶ï¼Œå…è®¸ç›‘å¬å™¨å¯¹è‡ªåŠ¨é…ç½®è¿‡ç¨‹è¿›è¡Œå¹²é¢„ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    fireAutoConfigurationImportEvents</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(configurations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> exclusions)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æœ€ç»ˆç¡®å®šçš„è‡ªåŠ¨é…ç½®ç±»å’Œæ’é™¤çš„é…ç½®ç±»çš„AutoConfigurationEntryå¯¹è±¡ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> AutoConfigurationEntry</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(configurations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> exclusions)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´åŒå­¦ 2 æŠ€æœ¯äºŒé¢çš„åŸé¢˜ï¼šSpringBoot å¯åŠ¨æ—¶ä¸ºä»€ä¹ˆèƒ½å¤Ÿè‡ªåŠ¨è£…é…</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 22 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring Boot å¦‚ä½•åšåˆ°å¯åŠ¨çš„æ—¶å€™æ³¨å…¥ä¸€äº› bean</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 3 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´ä¸€ä¸‹ Spring Boot çš„è‡ªåŠ¨è£…é…åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å†œä¸šé“¶è¡ŒåŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šspring boot çš„è‡ªåŠ¨è£…é…</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šSpringBootå¦‚ä½•å®ç°è‡ªåŠ¨è£…é…</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ OPPO é¢ç»åŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šè‡ªåŠ¨é…ç½®æ€ä¹ˆå®ç°çš„ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 21 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹</a>å‘ç§ä¿¡è¯´ï¼Œæ‹¿åˆ°äº†äºšä¿¡ç§‘æŠ€+æ–°çŸ³å™¨æ— äººè½¦çš„ offerï¼Œé—®æˆ‘è¯¥å¦‚ä½•é€‰æ‹©ï¼Œå¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šå¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250726164552.png" alt="äºšä¿¡ç§‘æŠ€+æ–°çŸ³å™¨æ— äººè½¦çš„ offer" tabindex="0" loading="lazy"><figcaption>äºšä¿¡ç§‘æŠ€+æ–°çŸ³å™¨æ— äººè½¦çš„ offer</figcaption></figure><h3 id="_35-ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª-springboot-starter" tabindex="-1"><a class="header-anchor" href="#_35-ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª-springboot-starter"><span>35.ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª SpringBoot Starter?</span></a></h3><p>ç¬¬ä¸€æ­¥ï¼ŒSpringBoot å®˜æ–¹å»ºè®®ç¬¬ä¸‰æ–¹ starter çš„å‘½åæ ¼å¼æ˜¯ xxx-spring-boot-starterï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º <code>my-spring-boot-starter</code> çš„é¡¹ç›®ï¼Œä¸€å…±åŒ…æ‹¬ä¸¤ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªæ˜¯ autoconfigure æ¨¡å—ï¼ŒåŒ…å«è‡ªåŠ¨é…ç½®é€»è¾‘ï¼›ä¸€ä¸ªæ˜¯ starter æ¨¡å—ï¼ŒåªåŒ…å«ä¾èµ–å£°æ˜ã€‚</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring.boot.version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;2.3.1.RELEASE&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring.boot.version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-boot-autoconfigure&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;${spring.boot.version}&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;${spring.boot.version}&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œé€šå¸¸åœ¨ autoconfigure åŒ…ä¸‹ï¼Œè¯¥ç±»çš„ä½œç”¨æ˜¯æ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§æ¥åˆ›å»ºå’Œé…ç½® Beanã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">EnableConfigurationProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MyStarterProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyServiceAutoConfiguration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ConditionalOnMissingBean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> myService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyStarterProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªé…ç½®å±æ€§ç±»ï¼Œç”¨äºè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ã€‚é€šå¸¸ä½¿ç”¨ <code>@ConfigurationProperties</code> æ³¨è§£æ¥æ ‡è®°è¿™ä¸ªç±»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ConfigurationProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">prefix</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;mystarter&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyStarterProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> message </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ä¸é”™å•Š!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> message;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> message;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡ç±»ï¼Œç”¨äºæä¾›ä¸šåŠ¡é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> message;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> message;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äº”æ­¥ï¼Œåœ¨ <code>src/main/resources/META-INF</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º spring.factories æ–‡ä»¶ï¼Œå‘Šè¯‰ SpringBoot åœ¨å¯åŠ¨æ—¶è¦åŠ è½½æˆ‘ä»¬çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span></span>
<span class="line"><span>com.itwanger.mystarter.autoconfigure.MyServiceAutoConfiguration</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å…­æ­¥ï¼Œä½¿ç”¨ Maven æ‰“åŒ…è¿™ä¸ªé¡¹ç›®ã€‚</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mvn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clean</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç¬¬ä¸ƒæ­¥ï¼Œåœ¨å…¶ä»–çš„ Spring Boot é¡¹ç›®ä¸­ï¼Œé€šè¿‡ Maven æ¥æ·»åŠ è¿™ä¸ªè‡ªå®šä¹‰çš„ Starter ä¾èµ–ï¼Œå¹¶é€šè¿‡ application.properties é…ç½®ä¿¡æ¯ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mystarter.message=javabetter.cn</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åå°±å¯ä»¥åœ¨ Spring Boot é¡¹ç›®ä¸­æ³¨å…¥ MyStarterProperties æ¥ä½¿ç”¨å®ƒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240409114642.png" alt="MyStarterProperties æ³¨å…¥ç¤ºä¾‹" tabindex="0" loading="lazy"><figcaption>MyStarterProperties æ³¨å…¥ç¤ºä¾‹</figcaption></figure><p>å¯åŠ¨é¡¹ç›®ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8081/hello</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°è¿”å›çš„å†…å®¹æ˜¯ <code>javabetter.cn</code>ï¼Œè¯´æ˜æˆ‘ä»¬çš„è‡ªå®šä¹‰ Starter å·²ç»æˆåŠŸå·¥ä½œäº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240409114610.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè‡ªå®šä¹‰ Spring Boot Stater" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè‡ªå®šä¹‰ Spring Boot Stater</figcaption></figure><h4 id="spring-boot-starter-çš„åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#spring-boot-starter-çš„åŸç†äº†è§£å—"><span>Spring Boot Starter çš„åŸç†äº†è§£å—ï¼Ÿ</span></a></h4><p>Starter çš„æ ¸å¿ƒæ€æƒ³æ˜¯æŠŠç›¸å…³çš„ä¾èµ–æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œè®©å¼€å‘è€…åªéœ€è¦å¼•å…¥ä¸€ä¸ª starter ä¾èµ–ï¼Œå°±èƒ½è·å¾—å®Œæ•´çš„åŠŸèƒ½æ¨¡å—ã€‚</p><p>å½“æˆ‘ä»¬åœ¨ pom.xml ä¸­å¼•å…¥ä¸€ä¸ª starter æ—¶ï¼ŒMaven å°±ä¼šè‡ªåŠ¨è§£æè¿™ä¸ª starter çš„ä¾èµ–æ ‘ï¼ŒæŠŠæ‰€æœ‰éœ€è¦çš„ jar åŒ…éƒ½ä¸‹è½½ä¸‹æ¥ã€‚</p><p>æ¯ä¸ª starter éƒ½ä¼šåŒ…å«å¯¹åº”çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œè¿™äº›é…ç½®ç±»é€šè¿‡æ¡ä»¶æ³¨è§£æ¥åˆ¤æ–­æ˜¯å¦åº”è¯¥ç”Ÿæ•ˆã€‚æ¯”å¦‚å½“æˆ‘ä»¬å¼•å…¥äº† <code>spring-boot-starter-web</code>ï¼Œå®ƒä¼šè‡ªåŠ¨é…ç½® Spring MVCã€å†…åµŒçš„ Tomcat æœåŠ¡å™¨ç­‰ã€‚</p><p>spring.factories æ–‡ä»¶æ˜¯ Spring Boot è‡ªåŠ¨è£…é…çš„æ ¸å¿ƒï¼Œå®ƒä½äºæ¯ä¸ª starter çš„ <code>META-INF</code> ç›®å½•ä¸‹ã€‚è¿™ä¸ªæ–‡ä»¶åˆ—å‡ºäº†æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»ï¼ŒSpring Boot åœ¨å¯åŠ¨æ—¶ä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶ï¼ŒåŠ è½½å¯¹åº”çš„é…ç½®ç±»ã€‚</p><div class="language-properties line-numbers-mode" data-highlighter="shiki" data-ext="properties" data-title="properties" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">com.example.demo.autoconfigure.DemoAutoConfiguration,\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">com.example.demo.autoconfigure.AnotherAutoConfiguration</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä½ å°è£…è¿‡ springboot starter å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 20 äºŒé¢é¢è¯•åŸé¢˜ï¼šSpring Boot Starter çš„åŸç†äº†è§£å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šä¸ºä»€ä¹ˆä½¿ç”¨SpringBootï¼ŸSpringBootè‡ªåŠ¨è£…é…çš„åŸç†åŠæµç¨‹ï¼Ÿ@Importçš„ä½œç”¨ï¼Ÿå¦‚æœæƒ³è®©SpringBootå¯¹è‡ªå®šä¹‰çš„jaråŒ…è¿›è¡Œè‡ªåŠ¨é…ç½®çš„è¯ï¼Œéœ€è¦æ€ä¹ˆåšï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 22 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹</a>åœ¨ VIP ç¾¤é‡ŒèŠå¤©ï¼Œå‘ç°ä¸¤ä¸ªäººéƒ½åœ¨å°çº¢ä¹¦ï¼Œæœ‰ç¼˜åˆ†çš„å¾ˆï¼Œé‚£èƒ½å»å°çº¢ä¹¦å®ä¹ ï¼ŒåŸºæœ¬ä¸Šç§‹æ‹›å°±ç®—æ˜¯ç¨³å¦‚è€ç‹—äº†ğŸ˜„ï¼Œè¿™å®¶ç‹¬è§’å…½çš„å®ä¹ å«é‡‘é‡è¿˜æ˜¯éå¸¸é«˜çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250727165400.png" alt="åœ¨å°çº¢ä¹¦å®ä¹ çš„çƒå‹çœŸä¸å°‘" tabindex="0" loading="lazy"><figcaption>åœ¨å°çº¢ä¹¦å®ä¹ çš„çƒå‹çœŸä¸å°‘</figcaption></figure><h3 id="_36-ğŸŒŸspring-boot-å¯åŠ¨åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_36-ğŸŒŸspring-boot-å¯åŠ¨åŸç†äº†è§£å—"><span>36.ğŸŒŸSpring Boot å¯åŠ¨åŸç†äº†è§£å—ï¼Ÿ</span></a></h3><p>Spring Boot çš„å¯åŠ¨ç”± SpringApplication ç±»è´Ÿè´£ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»º SpringApplication å®ä¾‹ï¼Œè´Ÿè´£åº”ç”¨çš„å¯åŠ¨å’Œåˆå§‹åŒ–ï¼›</li><li>ç¬¬äºŒæ­¥ï¼Œä» application.yml ä¸­åŠ è½½é…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡ï¼›</li><li>ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºä¸Šä¸‹æ–‡ç¯å¢ƒ ApplicationContextï¼Œå¹¶åŠ è½½ Beanï¼Œå®Œæˆä¾èµ–æ³¨å…¥ï¼›</li><li>ç¬¬å››æ­¥ï¼Œå¯åŠ¨å†…åµŒçš„ Web å®¹å™¨ã€‚</li><li>ç¬¬äº”æ­¥ï¼Œå‘å¸ƒå¯åŠ¨å®Œæˆäº‹ä»¶ ApplicationReadyEventï¼Œå¹¶è°ƒç”¨ ApplicationRunner çš„ run æ–¹æ³•å®Œæˆå¯åŠ¨åçš„é€»è¾‘ã€‚</li></ul><p>å…³é”®çš„ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConfigurableApplicationContext</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> args</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 1. åˆ›å»ºå¯åŠ¨æ—¶çš„ç›‘å¬å™¨å¹¶è§¦å‘å¯åŠ¨äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    SpringApplicationRunListeners</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> listeners </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getRunListeners</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(args)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    listeners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">starting</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 2. å‡†å¤‡è¿è¡Œç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ConfigurableEnvironment</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> environment </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> prepareEnvironment</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(listeners)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    configureIgnoreBeanInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(environment)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 3. åˆ›å»ºä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ConfigurableApplicationContext</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> context </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createApplicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 4. å‡†å¤‡ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        prepareContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> listeners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> args)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 5. åˆ·æ–°ä¸Šä¸‹æ–‡ï¼Œå®Œæˆ Bean åˆå§‹åŒ–å’Œè£…é…</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        refreshContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(context)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 6. è°ƒç”¨è¿è¡Œå™¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        afterRefresh</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> args)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 7. è§¦å‘å¯åŠ¨å®Œæˆäº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        listeners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">started</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(context);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        handleRunFailure</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> listeners)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-68744556-a1ba-4e1f-a092-1582875f0da6.png" alt="SpringBoot å¯åŠ¨å¤§è‡´æµç¨‹-å›¾ç‰‡æ¥æºç½‘ç»œ" tabindex="0" loading="lazy"><figcaption>SpringBoot å¯åŠ¨å¤§è‡´æµç¨‹-å›¾ç‰‡æ¥æºç½‘ç»œ</figcaption></figure><p>ä»¥<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸ºä¾‹ã€‚åœ¨å¯åŠ¨ç±» QuickForumApplication ä¸­ï¼Œmain æ–¹æ³•ä¼šè°ƒç”¨ <code>SpringApplication.run()</code> å¯åŠ¨é¡¹ç›®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240422090338.png" alt="æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®æºç ï¼šå¯åŠ¨ç±»" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®æºç ï¼šå¯åŠ¨ç±»</figcaption></figure><p>è¯¥æ–¹æ³•è´Ÿè´£ Spring åº”ç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆApplicationContextï¼‰å‡†å¤‡ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>æ‰«æé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä¾èµ–é¡¹</li><li>åˆå§‹åŒ–å’ŒåŠ è½½ Bean å®šä¹‰</li><li>å¯åŠ¨å†…åµŒçš„ Web å®¹å™¨ç­‰</li><li>å‘å¸ƒå¯åŠ¨å®Œæˆäº‹ä»¶</li></ul><h4 id="äº†è§£-springbootapplication-æ³¨è§£å—" tabindex="-1"><a class="header-anchor" href="#äº†è§£-springbootapplication-æ³¨è§£å—"><span>äº†è§£@SpringBootApplication æ³¨è§£å—ï¼Ÿ</span></a></h4><p><code>@SpringBootApplication</code>æ˜¯ Spring Boot çš„æ ¸å¿ƒæ³¨è§£ï¼Œç»å¸¸ç”¨äºä¸»ç±»ä¸Šï¼Œä½œä¸ºé¡¹ç›®å¯åŠ¨å…¥å£çš„æ ‡è¯†ã€‚å®ƒæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼š</p><ul><li><code>@SpringBootConfiguration</code>ï¼šç»§æ‰¿è‡ª <code>@Configuration</code>ï¼Œæ ‡æ³¨è¯¥ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç›¸å½“äºä¸€ä¸ª Spring é…ç½®æ–‡ä»¶ã€‚</li><li><code>@EnableAutoConfiguration</code>ï¼šå‘Šè¯‰ Spring Boot æ ¹æ® pom.xml ä¸­æ·»åŠ çš„ä¾èµ–è‡ªåŠ¨é…ç½®é¡¹ç›®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ spring-boot-starter-web ä¾èµ–è¢«æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼ŒSpring Boot ä¼šè‡ªåŠ¨é…ç½® Tomcat å’Œ Spring MVCã€‚</li><li><code>@ComponentScan</code>ï¼šæ‰«æå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹è¢«<code>@Component</code>ã€<code>@Service</code>ã€<code>@Controller</code>ã€<code>@Repository</code> æ³¨è§£æ ‡è®°çš„ç±»ï¼Œå¹¶æ³¨å†Œä¸º Spring Beanã€‚</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸ºä»€ä¹ˆ-spring-boot-åœ¨å¯åŠ¨çš„æ—¶å€™èƒ½å¤Ÿæ‰¾åˆ°-main-æ–¹æ³•ä¸Šçš„-springbootapplication-æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-spring-boot-åœ¨å¯åŠ¨çš„æ—¶å€™èƒ½å¤Ÿæ‰¾åˆ°-main-æ–¹æ³•ä¸Šçš„-springbootapplication-æ³¨è§£"><span>ä¸ºä»€ä¹ˆ Spring Boot åœ¨å¯åŠ¨çš„æ—¶å€™èƒ½å¤Ÿæ‰¾åˆ° main æ–¹æ³•ä¸Šçš„@SpringBootApplication æ³¨è§£ï¼Ÿ</span></a></h4><p>Spring Boot åœ¨å¯åŠ¨æ—¶èƒ½å¤Ÿæ‰¾åˆ°ä¸»ç±»ä¸Šçš„<code>@SpringBootApplication</code>æ³¨è§£ï¼Œæ˜¯å› ä¸ºå®ƒåˆ©ç”¨äº† Java çš„åå°„æœºåˆ¶å’Œç±»åŠ è½½æœºåˆ¶ï¼Œç»“åˆ Spring æ¡†æ¶å†…éƒ¨çš„ä¸€ç³»åˆ—å¤„ç†æµç¨‹ã€‚</p><p>å½“è¿è¡Œä¸€ä¸ª Spring Boot ç¨‹åºæ—¶ï¼Œé€šå¸¸ä¼šè°ƒç”¨ä¸»ç±»ä¸­çš„<code>main</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ‰§è¡Œ<code>SpringApplication.run()</code>ï¼Œæ¯”å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MyApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>SpringApplication.run(Class&lt;?&gt; primarySource, String... args)</code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªæ˜¯ä¸»åº”ç”¨ç±»ï¼ˆå³åŒ…å«<code>main</code>æ–¹æ³•çš„ç±»ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯å‘½ä»¤è¡Œå‚æ•°ã€‚<code>primarySource</code>å‚æ•°æä¾›äº†ä¸€ä¸ªèµ·ç‚¹ï¼ŒSpring Boot é€šè¿‡å®ƒæ¥åŠ è½½åº”ç”¨ä¸Šä¸‹æ–‡ã€‚</p><p>Spring Boot åˆ©ç”¨ Java åå°„æœºåˆ¶æ¥è¯»å–ä¼ é€’ç»™<code>run</code>æ–¹æ³•çš„ç±»ï¼ˆ<code>MyApplication.class</code>ï¼‰ã€‚å®ƒä¼šæ£€æŸ¥è¿™ä¸ªç±»ä¸Šçš„æ³¨è§£ï¼ŒåŒ…æ‹¬<code>@SpringBootApplication</code>ã€‚</p><h4 id="spring-boot-é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#spring-boot-é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„æ˜¯ä»€ä¹ˆ"><span>Spring Boot é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h4><p>Spring Boot çš„é»˜è®¤åŒ…æ‰«æè·¯å¾„æ˜¯ä»¥å¯åŠ¨ç±» <code>@SpringBootApplication</code> æ³¨è§£æ‰€åœ¨çš„åŒ…ä¸ºæ ¹ç›®å½•çš„ï¼Œå³é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Boot ä¼šæ‰«æå¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶ã€‚</p><p>æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸­ï¼Œå¯åŠ¨ç±»<code>QuickForumApplication</code>æ‰€åœ¨çš„åŒ…æ˜¯<code>com.github.paicoding.forum.web</code>ï¼Œé‚£ä¹ˆ Spring Boot é»˜è®¤ä¼šæ‰«æ<code>com.github.paicoding.forum.web</code>åŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240327105552.png" alt="æ²‰é»˜ç‹äºŒï¼šæŠ€æœ¯æ´¾é¡¹ç›®æˆªå›¾" tabindex="0" loading="lazy"><figcaption>æ²‰é»˜ç‹äºŒï¼šæŠ€æœ¯æ´¾é¡¹ç›®æˆªå›¾</figcaption></figure><p><code>@SpringBootApplication</code> æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå®ƒé‡Œé¢çš„<code>@ComponentScan</code>æ³¨è§£å¯ä»¥æŒ‡å®šè¦æ‰«æçš„åŒ…è·¯å¾„ï¼Œé»˜è®¤æ‰«æå¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ComponentScan</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">excludeFilters</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Filter</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> FilterType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">CUSTOM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> classes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> TypeExcludeFilter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Filter</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> FilterType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">CUSTOM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> classes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> AutoConfigurationExcludeFilter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) })</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">interface</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;"> SpringBootApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯”å¦‚è¯´å¸¦æœ‰ <code>@Component</code>ã€<code>@Service</code>ã€<code>@Controller</code>ã€<code>@Repository</code> ç­‰æ³¨è§£çš„ç±»éƒ½ä¼šè¢« Spring Boot æ‰«æåˆ°ï¼Œå¹¶æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­ã€‚</p><p>å¦‚æœéœ€è¦è‡ªå®šä¹‰åŒ…æ‰«æè·¯å¾„ï¼Œå¯ä»¥åœ¨<code>@SpringBootApplication</code>æ³¨è§£ä¸Šæ·»åŠ <code>@ComponentScan</code>æ³¨è§£ï¼ŒæŒ‡å®šè¦æ‰«æçš„åŒ…è·¯å¾„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ComponentScan</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">basePackages</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;com.github.paicoding.forum&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">})</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QuickForumApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">QuickForumApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹å¼ä¼šè¦†ç›–é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„ï¼Œåªæ‰«æ<code>com.github.paicoding.forum</code>åŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´åŒå­¦ 2 æŠ€æœ¯äºŒé¢çš„åŸé¢˜ï¼šä¸ºä»€ä¹ˆ Spring Boot å¯åŠ¨æ—¶èƒ½æ‰¾åˆ° Main ç±»ä¸Šé¢çš„æ³¨è§£</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 22 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring Boot é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾®ä¼—é“¶è¡ŒåŒå­¦ 1 Java åç«¯ä¸€é¢çš„åŸé¢˜ï¼š@SpringBootApplication æ³¨è§£äº†è§£å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å›½ä¼é›¶ç¢é¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šSpringbootçš„å·¥ä½œåŸç†ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpringBootå¯åŠ¨æµç¨‹ï¼ˆå¿˜äº†ï¼‰</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å“”å“©å“”å“©åŒå­¦ 1 äºŒé¢é¢è¯•åŸé¢˜ï¼šspringBootå¯åŠ¨æœºåˆ¶ï¼Œå¯åŠ¨ä¹‹ååšäº†å“ªäº›æ­¥éª¤</li></ol></blockquote><h3 id="_37-springboot-å’Œ-springmvc-çš„åŒºåˆ«-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_37-springboot-å’Œ-springmvc-çš„åŒºåˆ«-è¡¥å……"><span>37.SpringBoot å’Œ SpringMVC çš„åŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 04 æœˆ 04 æ—¥å¢è¡¥</p></blockquote><p>Spring MVC æ˜¯åŸºäº Spring æ¡†æ¶çš„ä¸€ä¸ªæ¨¡å—ï¼Œæä¾›äº†ä¸€ç§ Model-View-Controllerï¼ˆæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ï¼‰çš„å¼€å‘æ¨¡å¼ã€‚</p><p>Spring Boot æ—¨åœ¨ç®€åŒ– Spring åº”ç”¨çš„é…ç½®å’Œéƒ¨ç½²è¿‡ç¨‹ï¼Œæä¾›äº†å¤§é‡çš„è‡ªåŠ¨é…ç½®é€‰é¡¹ï¼Œä»¥åŠè¿è¡Œæ—¶ç¯å¢ƒçš„å†…åµŒ Web æœåŠ¡å™¨ï¼Œè¿™æ ·å°±å¯ä»¥æ›´å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ª SpringMVC çš„ Web é¡¹ç›®ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´åŒå­¦ 2 æŠ€æœ¯äºŒé¢çš„åŸé¢˜ï¼šSpringBoot å’Œ SpringMVC çš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpringBootä¸SpringMVCåŒºåˆ«ï¼ˆä¸ä¼šï¼‰</li></ol></blockquote><h3 id="_38-spring-boot-å’Œ-spring-æœ‰ä»€ä¹ˆåŒºåˆ«-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_38-spring-boot-å’Œ-spring-æœ‰ä»€ä¹ˆåŒºåˆ«-è¡¥å……"><span>38.Spring Boot å’Œ Spring æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 07 æœˆ 09 æ—¥æ–°å¢</p></blockquote><p>Spring Boot æ˜¯ Spring Framework çš„ä¸€ä¸ªæ‰©å±•ï¼Œæä¾›äº†ä¸€å¥—å¿«é€Ÿé…ç½®å’Œå¼€å‘çš„æœºåˆ¶ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ­å»º Spring é¡¹ç›®çš„éª¨æ¶ï¼Œæé«˜ç”Ÿäº§æ•ˆç‡ã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>Spring Framework</th><th>Spring Boot</th></tr></thead><tbody><tr><td><strong>ç›®çš„</strong></td><td>æä¾›ä¼ä¸šçº§çš„å¼€å‘å·¥å…·å’Œåº“</td><td>ç®€åŒ– Spring åº”ç”¨çš„å¼€å‘ã€é…ç½®å’Œéƒ¨ç½²</td></tr><tr><td><strong>é…ç½®æ–¹å¼</strong></td><td>ä¸»è¦é€šè¿‡ XML å’Œæ³¨è§£ç­‰æ‰‹åŠ¨é…ç½®</td><td>æä¾›å¼€ç®±å³ç”¨çš„è‡ªåŠ¨é…ç½®</td></tr><tr><td><strong>å¯åŠ¨å’Œè¿è¡Œ</strong></td><td>éœ€è¦æ‰“æˆ war åŒ…åˆ° Tomcat ç­‰å®¹å™¨ä¸‹è¿è¡Œ</td><td>å·²åµŒå…¥ Tomcat ç­‰å®¹å™¨ï¼Œæ‰“åŒ…æˆ JAR æ–‡ä»¶ç›´æ¥è¿è¡Œ</td></tr><tr><td><strong>ä¾èµ–ç®¡ç†</strong></td><td>æ‰‹åŠ¨æ·»åŠ å’Œç®¡ç†ä¾èµ–</td><td>ä½¿ç”¨ <code>spring-boot-starter</code> ç®€åŒ–ä¾èµ–ç®¡ç†</td></tr></tbody></table><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³åŒå­¦ F é¢è¯•åŸé¢˜ï¼šSpring Boot å’Œ Spring çš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ OPPO é¢ç»åŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šè¯´ä¸€ä¸‹Springå’ŒSpringbootä¹‹é—´æœ‰ä»€ä¹ˆå·®å¼‚ï¼Ÿ</li></ol></blockquote><h2 id="spring-cloud" tabindex="-1"><a class="header-anchor" href="#spring-cloud"><span>Spring Cloud</span></a></h2><h3 id="_39-å¯¹-springcloud-äº†è§£å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#_39-å¯¹-springcloud-äº†è§£å¤šå°‘"><span>39.å¯¹ SpringCloud äº†è§£å¤šå°‘ï¼Ÿ</span></a></h3><p>Spring Cloud æ˜¯ä¸€ä¸ªåŸºäº Spring Bootï¼Œæä¾›æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„çš„å·¥å…·é›†ã€‚ç”¨äºè§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸€äº›å¸¸è§é—®é¢˜ï¼Œå¦‚é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ç­‰ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-92ab53d5-f303-4fc5-bd26-e62cefe374b3.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Cloud Netfilxæ ¸å¿ƒç»„ä»¶" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Cloud Netfilxæ ¸å¿ƒç»„ä»¶</figcaption></figure><h4 id="ä»€ä¹ˆæ˜¯å¾®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¾®æœåŠ¡"><span>ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</span></a></h4><ol><li>2014 å¹´ <strong>Martin Fowler</strong> æå‡ºçš„ä¸€ç§æ–°çš„æ¶æ„å½¢å¼ã€‚å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§<strong>æ¶æ„æ¨¡å¼</strong>ï¼Œæå€¡å°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ç›¸äº’åè°ƒï¼Œäº’ç›¸é…åˆï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ã€‚æ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶(å¦‚ HTTP æˆ– Dubbo)äº’ç›¸åä½œï¼Œæ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“çš„ä¸šåŠ¡è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç‹¬ç«‹çš„éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦å¤–ï¼Œåº”å°½é‡é¿å…ç»Ÿä¸€çš„ï¼Œé›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€ï¼Œåº”æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ã€å·¥å…·(å¦‚ Maven)å¯¹å…¶è¿›è¡Œæ„å»ºã€‚</li><li>å¾®æœåŠ¡åŒ–çš„æ ¸å¿ƒå°±æ˜¯å°†ä¼ ç»Ÿçš„ä¸€ç«™å¼åº”ç”¨ï¼Œæ ¹æ®ä¸šåŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„æœåŠ¡ï¼Œå½»åº•åœ°å»è€¦åˆï¼Œæ¯ä¸€ä¸ªå¾®æœåŠ¡æä¾›å•ä¸ªä¸šåŠ¡åŠŸèƒ½çš„æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡åšä¸€ä»¶äº‹æƒ…ï¼Œä»æŠ€æœ¯è§’åº¦çœ‹å°±æ˜¯ä¸€ç§å°è€Œç‹¬ç«‹çš„å¤„ç†è¿‡ç¨‹ï¼Œç±»ä¼¼è¿›ç¨‹çš„æ¦‚å¿µï¼Œèƒ½å¤Ÿè‡ªè¡Œå•ç‹¬å¯åŠ¨æˆ–é”€æ¯ï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ã€‚</li></ol><h4 id="å¾®æœåŠ¡æ¶æ„ä¸»è¦è¦è§£å†³å“ªäº›é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¾®æœåŠ¡æ¶æ„ä¸»è¦è¦è§£å†³å“ªäº›é—®é¢˜"><span>å¾®æœåŠ¡æ¶æ„ä¸»è¦è¦è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ</span></a></h4><ol><li>æœåŠ¡å¾ˆå¤šï¼Œå®¢æˆ·ç«¯æ€ä¹ˆè®¿é—®ï¼Œå¦‚ä½•æä¾›å¯¹å¤–ç½‘å…³?</li><li>è¿™ä¹ˆå¤šæœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡? HTTP è¿˜æ˜¯ RPC?</li><li>è¿™ä¹ˆå¤šæœåŠ¡ï¼Œå¦‚ä½•æ²»ç†? æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°ã€‚</li><li>æœåŠ¡æŒ‚äº†æ€ä¹ˆåŠï¼Ÿç†”æ–­æœºåˆ¶ã€‚</li></ol><h4 id="æœ‰å“ªäº›ä¸»æµå¾®æœåŠ¡æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#æœ‰å“ªäº›ä¸»æµå¾®æœåŠ¡æ¡†æ¶"><span>æœ‰å“ªäº›ä¸»æµå¾®æœåŠ¡æ¡†æ¶ï¼Ÿ</span></a></h4><ol><li>Spring Cloud Netflix</li><li>Spring Cloud Alibaba</li><li>SpringBoot + Dubbo + ZooKeeper</li></ol><h4 id="springcloud-æœ‰å“ªäº›æ ¸å¿ƒç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#springcloud-æœ‰å“ªäº›æ ¸å¿ƒç»„ä»¶"><span>SpringCloud æœ‰å“ªäº›æ ¸å¿ƒç»„ä»¶ï¼Ÿ</span></a></h4><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/spring-2b988a72-0739-4fed-b271-eaf12589444f.png" alt="SpringCloud" tabindex="0" loading="lazy"><figcaption>SpringCloud</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªåŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šSpringCloud äº†è§£å¤šå°‘ï¼Ÿ</li></ol></blockquote><h2 id="è¡¥å……" tabindex="-1"><a class="header-anchor" href="#è¡¥å……"><span>è¡¥å……</span></a></h2><h3 id="_40-springtask-äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_40-springtask-äº†è§£å—"><span>40.SpringTask äº†è§£å—ï¼Ÿ</span></a></h3><p>SpringTask æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªè½»é‡çº§çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¼€å‘è€…é€šè¿‡ç®€å•çš„æ³¨è§£æ¥é…ç½®å’Œç®¡ç†å®šæ—¶ä»»åŠ¡ã€‚</p><p>â‘ ã€<code>@Scheduled</code>ï¼šæœ€å¸¸ç”¨çš„æ³¨è§£ï¼Œç”¨äºæ ‡è®°æ–¹æ³•ä¸ºè®¡åˆ’ä»»åŠ¡çš„æ‰§è¡Œç‚¹ã€‚<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸­ï¼Œå°±ä½¿ç”¨è¯¥æ³¨è§£æ¥å®šæ—¶åˆ·æ–° sitemap.xmlï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scheduled</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">cron</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;0 15 5 * * ?&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> autoRefreshCache</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹åˆ·æ–°sitemap.xmlçš„urlåœ°å€ï¼Œé¿å…å‡ºç°æ•°æ®ä¸ä¸€è‡´é—®é¢˜!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    refreshSitemap</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ·æ–°å®Œæˆï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>@Scheduled</code> æ³¨è§£æ”¯æŒå¤šç§è°ƒåº¦é€‰é¡¹ï¼Œå¦‚ fixedRateã€fixedDelay å’Œ cron è¡¨è¾¾å¼ã€‚</p><p>â‘¡ã€<code>@EnableScheduling</code>ï¼šç”¨äºå¼€å¯å®šæ—¶ä»»åŠ¡çš„æ”¯æŒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20240422094511.png" alt="æŠ€æœ¯æ´¾çš„å¯åŠ¨ç±»å°±æœ‰è¯¥æ³¨è§£çš„å½±å­" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾çš„å¯åŠ¨ç±»å°±æœ‰è¯¥æ³¨è§£çš„å½±å­</figcaption></figure><h4 id="ç”¨springtaskèµ„æºå ç”¨å¤ªé«˜-æœ‰ä»€ä¹ˆå…¶ä»–çš„æ–¹å¼è§£å†³-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#ç”¨springtaskèµ„æºå ç”¨å¤ªé«˜-æœ‰ä»€ä¹ˆå…¶ä»–çš„æ–¹å¼è§£å†³-è¡¥å……"><span>ç”¨SpringTaskèµ„æºå ç”¨å¤ªé«˜ï¼Œæœ‰ä»€ä¹ˆå…¶ä»–çš„æ–¹å¼è§£å†³ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h4><blockquote><p>2024å¹´05æœˆ27æ—¥æ–°å¢</p></blockquote><p><strong>ç¬¬ä¸€ï¼Œä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼Œå¦‚ RabbitMQã€Kafkaã€RocketMQ ç­‰ï¼Œå°†ä»»åŠ¡æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç„¶åç”±æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†è¿™äº›ä»»åŠ¡ã€‚</p><p>â‘ ã€åœ¨è®¢å•åˆ›å»ºæ—¶ï¼Œå°†è®¢å•è¶…æ—¶æ£€æŸ¥ä»»åŠ¡æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¹¶è®¾ç½®å»¶è¿Ÿæ—¶é—´ï¼ˆå³è®¢å•è¶…æ—¶æ—¶é—´ï¼‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RabbitTemplate</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> rabbitTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Order</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> order</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // åˆ›å»ºè®¢å•é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å‘é€å»¶è¿Ÿæ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        rabbitTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">convertAndSend</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;orderExchange&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;orderTimeoutQueue&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, order, message </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessageProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setExpiration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;600000&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// è®¾ç½®å»¶è¿Ÿæ—¶é—´ï¼ˆ10åˆ†é’Ÿï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> message;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â‘¡ã€ä½¿ç”¨æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­æ¶ˆè´¹æ¶ˆæ¯ï¼Œå½“æ¶ˆè´¹åˆ°è¶…æ—¶ä»»åŠ¡æ—¶ï¼Œæ‰§è¡Œè®¢å•è¶…æ—¶å¤„ç†é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderTimeoutConsumer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RabbitListener</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">queues</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;orderTimeoutQueue&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleOrderTimeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Order</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> order</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å¤„ç†è®¢å•è¶…æ—¶é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¬¬äºŒï¼Œä½¿ç”¨æ•°æ®åº“è°ƒåº¦å™¨ï¼ˆå¦‚ Quartzï¼‰</strong>ã€‚</p><p>â‘ ã€åˆ›å»ºä¸€ä¸ª Quartz ä»»åŠ¡ç±»ï¼Œå¤„ç†è®¢å•è¶…æ—¶é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderTimeoutJob</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Job</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JobExecutionContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JobExecutionException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // è·å–è®¢å•ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Order</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> order</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (Order) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getJobDetail</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getJobDataMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;order&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å¤„ç†è®¢å•è¶…æ—¶é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â‘¡ã€åœ¨è®¢å•åˆ›å»ºæ—¶ï¼Œè°ƒåº¦ä¸€ä¸ª Quartz ä»»åŠ¡ï¼Œè®¾ç½®ä»»åŠ¡çš„è§¦å‘æ—¶é—´ä¸ºè®¢å•è¶…æ—¶æ—¶é—´ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Scheduler</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> scheduler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Order</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> order</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // åˆ›å»ºè®¢å•é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // è°ƒåº¦ Quartz ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        JobDetail</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> jobDetail</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> JobBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newJob</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">OrderTimeoutJob</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">usingJobData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;order&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, order)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Trigger</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> trigger</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> TriggerBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newTrigger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">startAt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Date</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentTimeMillis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 600000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// è®¾ç½®è§¦å‘æ—¶é—´ï¼ˆ10åˆ†é’Ÿåï¼‰</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            scheduler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scheduleJob</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(jobDetail, trigger);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SchedulerException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾®ä¼—é“¶è¡ŒåŒå­¦ 1 Java åç«¯ä¸€é¢çš„åŸé¢˜ï¼šSpringTask äº†è§£å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œé¢ç»åŒå­¦ 1 é—²é±¼åç«¯ä¸€é¢çš„åŸé¢˜ï¼šè®¢å•è¶…æ—¶ï¼Œç”¨springtaskèµ„æºå ç”¨å¤ªé«˜ï¼Œæœ‰ä»€ä¹ˆå…¶ä»–çš„æ–¹å¼è§£å†³?</li></ol></blockquote><h3 id="_41-spring-cache-äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_41-spring-cache-äº†è§£å—"><span>41.Spring Cache äº†è§£å—ï¼Ÿ</span></a></h3><p>Spring Cache æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªç¼“å­˜æŠ½è±¡ï¼Œå®ƒé€šè¿‡ç»Ÿä¸€çš„æ¥å£æ¥æ”¯æŒå¤šç§ç¼“å­˜å®ç°ï¼ˆå¦‚ Redisã€Caffeine ç­‰ï¼‰ã€‚</p><p>å®ƒé€šè¿‡æ³¨è§£ï¼ˆå¦‚ <code>@Cacheable</code>ã€<code>@CachePut</code>ã€<code>@CacheEvict</code>ï¼‰æ¥å®ç°ç¼“å­˜ç®¡ç†ï¼Œæå¤§ç®€åŒ–äº†ä»£ç å®ç°ã€‚</p><ul><li>@Cacheableï¼šç¼“å­˜æ–¹æ³•çš„è¿”å›å€¼ã€‚</li><li>@CachePutï¼šç”¨äºæ›´æ–°ç¼“å­˜ï¼Œæ¯æ¬¡è°ƒç”¨æ–¹æ³•éƒ½ä¼šå°†ç»“æœé‡æ–°å†™å…¥ç¼“å­˜ã€‚</li><li>@CacheEvictï¼šç”¨äºåˆ é™¤ç¼“å­˜ã€‚</li></ul><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20241031111306.png" alt="äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šSpring Cache" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šSpring Cache</figcaption></figure><h4 id="spring-cache-å’Œ-redis-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#spring-cache-å’Œ-redis-æœ‰ä»€ä¹ˆåŒºåˆ«"><span>Spring Cache å’Œ Redis æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h4><ol><li><strong>Spring Cache</strong> æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªç¼“å­˜æŠ½è±¡ï¼Œå®ƒé€šè¿‡æ³¨è§£æ¥å®ç°ç¼“å­˜ç®¡ç†ï¼Œæ”¯æŒå¤šç§ç¼“å­˜å®ç°ï¼ˆå¦‚ Redisã€Caffeine ç­‰ï¼‰ã€‚</li><li><strong>Redis</strong> æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ç¼“å­˜ä¸­é—´ä»¶ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ˆå¦‚ Stringã€Hashã€Listã€Setã€ZSetï¼‰ï¼Œè¿˜æ”¯æŒæŒä¹…åŒ–ã€é›†ç¾¤ã€ä¸»ä»å¤åˆ¶ç­‰ã€‚</li></ol><p>Spring Cache é€‚åˆç”¨äºå•æœºã€è½»é‡çº§å’ŒçŸ­æ—¶ç¼“å­˜åœºæ™¯ï¼Œèƒ½å¤Ÿé€šè¿‡æ³¨è§£è½»æ¾æ§åˆ¶ç¼“å­˜ç®¡ç†ã€‚</p><p>Redis æ˜¯ä¸€ç§åˆ†å¸ƒå¼ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§æ•°æ®ç»“æ„å’Œé«˜å¹¶å‘è®¿é—®ï¼Œé€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿå’Œé«˜å¹¶å‘åœºæ™¯ï¼Œå¯ä»¥æä¾›æ•°æ®æŒä¹…åŒ–å’Œå¤šç§æ·˜æ±°ç­–ç•¥ã€‚</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼ŒSpring Cache å’Œ Redis å¯ä»¥ç»“åˆä½¿ç”¨ï¼ŒSpring Cache æä¾›ç®¡ç†ç¼“å­˜çš„æ³¨è§£ï¼Œè€Œ Redis åˆ™ä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜çš„å®ç°ï¼Œæä¾›å…±äº«ç¼“å­˜æ”¯æŒã€‚</p><h4 id="æœ‰äº†-redis-ä¸ºä»€ä¹ˆè¿˜éœ€è¦-spring-cache" tabindex="-1"><a class="header-anchor" href="#æœ‰äº†-redis-ä¸ºä»€ä¹ˆè¿˜éœ€è¦-spring-cache"><span>æœ‰äº† Redis ä¸ºä»€ä¹ˆè¿˜éœ€è¦ Spring Cacheï¼Ÿ</span></a></h4><p>è™½ç„¶ Redis éå¸¸å¼ºå¤§ï¼Œä½† Spring Cache æä¾›äº†ä¸€å±‚ç¼“å­˜æŠ½è±¡ï¼Œç®€åŒ–äº†ç¼“å­˜çš„ç®¡ç†ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ–¹æ³•ä¸Šé€šè¿‡æ³¨è§£æ¥å®ç°ç¼“å­˜é€»è¾‘ï¼Œå‡å°‘äº†æ‰‹åŠ¨æ“ä½œ Redis çš„ä»£ç é‡ã€‚</p><p>Spring Cache è¿˜èƒ½çµæ´»åˆ‡æ¢åº•å±‚ç¼“å­˜å®ç°ã€‚æ­¤å¤–ï¼ŒSpring Cache æ”¯æŒäº‹åŠ¡æ€§ç¼“å­˜å’Œæ¡ä»¶ç¼“å­˜ï¼Œä¾¿äºåœ¨å¤æ‚åœºæ™¯ä¸­ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</p><h4 id="è¯´è¯´spring-cache-çš„åº•å±‚åŸç†" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´spring-cache-çš„åº•å±‚åŸç†"><span>è¯´è¯´Spring Cache çš„åº•å±‚åŸç†ï¼Ÿ</span></a></h4><p>Spring Cache æ˜¯åŸºäº AOP å’Œç¼“å­˜æŠ½è±¡å±‚å®ç°çš„ã€‚å®ƒé€šè¿‡ AOP æ‹¦æˆªè¢« @Cacheableã€@CachePut å’Œ @CacheEvict æ³¨è§£çš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•è°ƒç”¨å‰åè‡ªåŠ¨æ‰§è¡Œç¼“å­˜é€»è¾‘ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20241031113743.png" alt="é“¿ç„¶æ¶æ„ï¼šSpring Cache æ¶æ„" tabindex="0" loading="lazy"><figcaption>é“¿ç„¶æ¶æ„ï¼šSpring Cache æ¶æ„</figcaption></figure><p>å…¶æä¾›çš„ CacheManager å’Œ Cache ç­‰æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“çš„ç¼“å­˜å®ç°ï¼Œå› æ­¤å¯ä»¥çµæ´»åœ°é›†æˆ Redisã€Caffeine ç­‰å¤šç§ç¼“å­˜ã€‚</p><ul><li>ConcurrentMapCacheManagerï¼šåŸºäº Java ConcurrentMap çš„æœ¬åœ°ç¼“å­˜å®ç°ã€‚</li><li>RedisCacheManagerï¼šåŸºäº Redis çš„åˆ†å¸ƒå¼ç¼“å­˜å®ç°ã€‚</li><li>CaffeineCacheManagerï¼šåŸºäº Caffeine çš„ç¼“å­˜å®ç°ã€‚</li></ul><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 9 ä¸€é¢é¢è¯•åŸé¢˜ï¼šä»‹ç»ä¸€ä¸‹springcache å’Œredisï¼ŸSpring cacheå’Œredisä¹‹é—´çš„å„åº”ç”¨åœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿæœ‰äº†redisä¸ºä»€ä¹ˆè¿˜è¦ç”¨springcaheï¼Ÿspringcache åº•å±‚åŸç†ï¼ŒåŸºäºä»€ä¹ˆå®ç°çš„ï¼Ÿ</li></ol></blockquote><hr><p>å›¾æ–‡è¯¦è§£ 41 é“ Spring é¢è¯•é«˜é¢‘é¢˜ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/EQge6DmgIqYITM3mAxkatg" target="_blank" rel="noopener noreferrer">è½¬è½½é“¾æ¥</a>ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/Y17S85ntHm_MLTZMJdtjQQ" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>ã€‚</p><p><em>æ²¡æœ‰ä»€ä¹ˆä½¿æˆ‘åœç•™â€”â€”é™¤äº†ç›®çš„ï¼Œçºµç„¶å²¸æ—æœ‰ç«ç‘°ã€æœ‰ç»¿è«ã€æœ‰å®é™çš„æ¸¯æ¹¾ï¼Œæˆ‘æ˜¯ä¸ç³»ä¹‹èˆŸ</em>ã€‚</p><p><strong>ç³»åˆ—å†…å®¹</strong>ï¼š</p><ul><li><a href="https://javabetter.cn/sidebar/sanfene/javase.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Java SE ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/javathread.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Java é›†åˆæ¡†æ¶ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/collection.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Java å¹¶å‘ç¼–ç¨‹ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/jvm.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ JVM ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/spring.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Spring ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/redis.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Redis ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/mybatis.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ MyBatis ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/mysql.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ MySQL ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/os.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­æ“ä½œç³»ç»Ÿç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/network.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­è®¡ç®—æœºç½‘ç»œç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/rocketmq.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ RocketMQ ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/fenbushi.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­åˆ†å¸ƒå¼ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/weifuwu.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­å¾®æœåŠ¡ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/shejimoshi.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­è®¾è®¡æ¨¡å¼ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/linux.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Linux ç¯‡ ğŸ‘</a></li></ul><hr><p>GitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„å¼€æºçŸ¥è¯†åº“ã€Š<a href="https://github.com/itwanger/toBeBetterJavaer" target="_blank" rel="noopener noreferrer">äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯</a>ã€‹ç¬¬ä¸€ç‰ˆ PDF ç»ˆäºæ¥äº†ï¼åŒ…æ‹¬ Java åŸºç¡€è¯­æ³•ã€æ•°ç»„&amp;å­—ç¬¦ä¸²ã€OOPã€é›†åˆæ¡†æ¶ã€Java IOã€å¼‚å¸¸å¤„ç†ã€Java æ–°ç‰¹æ€§ã€ç½‘ç»œç¼–ç¨‹ã€NIOã€å¹¶å‘ç¼–ç¨‹ã€JVM ç­‰ç­‰ï¼Œå…±è®¡ 32 ä¸‡ä½™å­—ï¼Œ500+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯é€šä¿—æ˜“æ‡‚ã€é£è¶£å¹½é»˜â€¦â€¦è¯¦æƒ…æˆ³ï¼š<a href="https://javabetter.cn/overview/" target="_blank" rel="noopener noreferrer">å¤ªèµäº†ï¼ŒGitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„ Java æ•™ç¨‹</a></p><p>å¾®ä¿¡æœ <strong>æ²‰é»˜ç‹äºŒ</strong> æˆ–æ‰«æä¸‹æ–¹äºŒç»´ç å…³æ³¨äºŒå“¥çš„åŸåˆ›å…¬ä¼—å·æ²‰é»˜ç‹äºŒï¼Œå›å¤ <strong>222</strong> å³å¯å…è´¹é¢†å–ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/itwanger/toBeBetterJavaer/edit/master/docs/src/sidebar/sanfene/spring.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: www.qing_gee@163.com">æ²‰é»˜ç‹äºŒ</span>,<!--]--><!--[--><span class="vp-meta-info" title="email: 48161253+xrz-baizer@users.noreply.github.com">Baizer</span>,<!--]--><!--[--><span class="vp-meta-info" title="email: 67463271+Kyanite7@users.noreply.github.com">Zhihao Gong</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/sidebar/sanfene/redis.html" aria-label="é¢æ¸£é€†è¢­-Redis"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->é¢æ¸£é€†è¢­-Redis</div></a><a class="route-link auto-link next" href="/sidebar/sanfene/javase.html" aria-label="é¢æ¸£é€†è¢­-Java SE"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">é¢æ¸£é€†è¢­-Java SE<!----></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer"><a href="https://beian.miit.gov.cn/" target="_blank">è±«ICPå¤‡2021038026å·-4</a><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/beian.png" height="15px" width="15px" /><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41030502000411"><span>è±«å…¬ç½‘å®‰å¤‡ 41030502000411å·</span></a></div><div class="vp-copyright">Copyright Â© 2025 ä¸‰åˆ†æ¶&æ²‰é»˜ç‹äºŒ </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DlNMEcLQ.js" defer></script>
  </body>
</html>
