<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta name="keywords" content="MySQLé¢è¯•é¢˜,MySQL,mysql,é¢è¯•é¢˜,å…«è‚¡æ–‡"><meta property="og:url" content="https://javabetter.cn/sidebar/sanfene/mysql.html"><meta property="og:site_name" content="äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯"><meta property="og:title" content="MySQLé¢è¯•é¢˜ï¼Œ83é“MySQLå…«è‚¡æ–‡ï¼ˆ5.5ä¸‡å­—331å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘"><meta property="og:description" content="ä¸‹è½½æ¬¡æ•°è¶… 1 ä¸‡æ¬¡ï¼Œ5.5 ä¸‡å­— 331 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 83 é“ MySQL é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› MySQL å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚"><meta property="og:type" content="article"><meta property="og:image" content="https://cdn.tobebetterjavaer.com/stutymore/mysql-mianzhanixi-mysql1.jpg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-06-15T02:06:33.000Z"><meta property="article:author" content="ä¸‰åˆ†æ¶"><meta property="article:tag" content="é¢æ¸£é€†è¢­"><meta property="article:published_time" content="2025-06-14T00:00:00.000Z"><meta property="article:modified_time" content="2025-06-15T02:06:33.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MySQLé¢è¯•é¢˜ï¼Œ83é“MySQLå…«è‚¡æ–‡ï¼ˆ5.5ä¸‡å­—331å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘","image":["https://cdn.tobebetterjavaer.com/stutymore/mysql-mianzhanixi-mysql1.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104843.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427100320.png","https://cdn.tobebetterjavaer.com/stutymore/collection-20250512160410.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427105032.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250227062838.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-fcdaad5f-c50e-4834-9f9a-0b676cc6be83.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240308184454.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240308184901.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240308185525.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250227084922.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-16e74a6b-a42a-464e-9b10-0252ee7ecc6e.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418093235.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418093351.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418093726.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418094332.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-40f42d59-a295-4543-8a03-43925da4d6d9.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250301165545.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-d94e5e1c-2614-4b8b-acdb-efb333032854.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250301170530.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418103116.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250304161556.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305181629.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305181907.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305182117.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305183220.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305183751.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250306153200.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240313093551.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240425111246.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250308085803.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-77626fdb-d2b0-4256-a483-d1c60e68d8ec.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240415102041.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-812fb038-39de-4204-ac9f-93d8b7448a18.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240515110034.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240515123301.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240408073338.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240408074630.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-b7aa040e-a3a7-4133-8c43-baccc3c8d012.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240403130104.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240403130508.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404111739.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404113446.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404115235.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404115048.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322135441.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312083102.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104202752.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312084307.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312085209.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312093325.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312172018.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-c0ef6e68-bb33-48fc-b3a2-b9cdadd8e403.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250313151551.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240417074049.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240326102701.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250313170334.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314155647.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314160523.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314160157.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314161732.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314161331.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314160340.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314155806.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314163343.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314163859.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250315151137.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250316104456.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250316105500.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250316113030.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e1f59341-0695-45db-b759-30db73314e39.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317160220.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317155312.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317160701.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317161008.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317163123.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318160752.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318152808.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318180850.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318163110.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318163310.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318154904.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318155855.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318181133.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250319161213.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250319163123.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-8d944e76-89ba-4fa6-9066-64ff4f55b532.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-31a14149-b261-45d9-bd3b-6afaec16e136.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250320163641.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240327083506.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240327083838.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115145204.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115145401.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250321155611.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240327104050.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250322095940.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250322103527.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250323213511.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250323213756.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250323214034.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324121435.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324121526.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324152505.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326213442.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324155729.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324155453.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324163735.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324163940.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326213740.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326220036.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326220632.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326220857.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-é˜¿é‡Œäº‘ç»™æ„å‘ä¹¦äº†.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327164223.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327172128.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327171803.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327173629.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327174147.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327174927.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250328155527.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e234658f-5672-4a8d-9a75-872b305a171d.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250329103010.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240417092646.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250329111600.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-6b9c9901-9bf3-46ed-a5c4-c1b781965c1e.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330123726.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330124012.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330124209.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330124250.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330124502.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330170053.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240311225809.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250331165636.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250331165053.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240312090221.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250331171518.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250331174044.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-å‰å®³çš„ï¼Œæ­å–œå•Š.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250401152220.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250401145923.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250401155231.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250402144634.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250402144804.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250402160141.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322142950.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104203402.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322132606.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322133650.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322140825.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322141957.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250403113413.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250403114455.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240516125249.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240516125326.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250403120541.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-16f3523d-20b0-4376-908d-ac40b329768f.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404125013.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404105416.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-è¯·é—®æœ‰è‹±æ–‡ç¿»è¯‘ç‰ˆçš„å—.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115151059.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115151729.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240325115614.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240325115641.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250405105517.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223114806.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223114907.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223115300.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-Sorting_quicksort_anim.gif","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240312092745.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240312094537.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240312095811.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240311231652.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240311231611.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250405114505.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406120133.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408110030.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406125740.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406121543.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406122130.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406124955.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406125155.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406141028.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406142139.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250407152038.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250407155043.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250407160853.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408105425.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408110120.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e348203c-f00a-42a4-a745-b219d98ea435.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241105120556.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115153445.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115153552.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115153636.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240315140807.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240408092425.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240408092646.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104212447.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104212743.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104213135.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408150326.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-c58f59e0-850b-4dfd-8129-2dfc51cf4768.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-a8525cf3-2d16-49a9-a7da-a19762ed16df.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408152401.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408152547.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408153010.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240417092646.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240319131120.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240319131245.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240319131306.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408155951.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-a07e4525-ccc1-4287-aec5-ebf3f277857c.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411093212.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250410121135.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250409144701.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250409150234.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250409152600.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250410114455.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250410114820.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-d60f3a42-4b0f-4612-b7ad-65191fecb852.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241215095640.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250410121613.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411094421.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-ç­‰ä¸€æ‰‹ç»éªŒè´´åˆ†äº«ï¼Œå‘ä¸ªçº¢åŒ…ï¼Œå“ˆå“ˆ.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-31f7f49c-1e5a-4d42-b8b3-e022b3ba82ae.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411093326.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-ä¸»è¦æˆ‘çœ‹çš„å‡ ä¸ªå…«è‚¡éƒ½æ˜¯ç»“åˆèµ·æ¥çš„.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411092155.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411092536.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411092610.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411094551.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411094932.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411101319.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413095712.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241201101426.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241201101704.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413102346.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413155703.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413160617.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413162654.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413162908.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413171035.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413171627.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413172141.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-äºŒå“¥æ‚¨å¥½ï¼Œéº»çƒ¦æ‚¨å¸®å¿™æ”¹ä¸€ä¸‹ç®€å†ï¼ŒäºŒå“¥çœŸæ˜¯é…äº«å¤ªåº™çš„ç”·äºº.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20230919103025.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414121841.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414154202.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414154539.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414155206.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414154331.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414162829.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414171111.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414171920.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414172446.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413100533.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415152542.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415152926.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415153434.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415153614.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415162326.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250416112357.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250416114215.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250416115217.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417215132.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417222847.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417222448.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417223640.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418102139.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417224334.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418103117.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418102600.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418105347.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418105609.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241215073837.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419152549.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419152750.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240415084347.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-80ebc2b3-ae63-417d-9307-f6a7811f7965.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-bf4ff00d-01bd-4170-a17b-6919f7873ea4.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-765b3d83-14eb-4b56-8940-9d60bfaf1737.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240415093703.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240415094939.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419162341.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419163740.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419164013.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-31df767c-db05-4de4-a05b-a45bcf76c1bf.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250420153404.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-771eb01f-3f1a-4437-8e1b-affe4de36ec3.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-f2313613-25bd-4065-8f63-969a4b5757a7.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250420160540.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-1bfbfcb5-2392-4f98-be1b-a66204da09e5.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250420164609.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250420170230.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-2a43af18-617b-4502-b66a-894c2ff4c6c3.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-debe0fb1-d7f7-4ef2-8c99-13c9377138b6.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-7cba6ce0-c8bb-4f51-9c3b-e5a44e724c79.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250422152008.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-b3882ca3-1d04-44e2-9015-7e6c867255a0.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e01e7757-c337-48c8-95db-2f7cfd2bc036.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-fcd34332-d38d-455a-875d-d4afd37cac72.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250422153403.png","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-2d4d94c9-e816-47fc-93dd-a835b1318099.jpg","https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-a122d6d5-fff2-4ccd-8ddb-a9282eb2e2da.jpg","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241207120214.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241207121845.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250423110330.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250423111247.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223150915.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223150351.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250423111757.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250424114631.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250424120022.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250424120308.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240410105325.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240410105512.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240410105951.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240412083019.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240412083312.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-è€å¸ˆæ‚¨å¥½ï¼Œä»Šå¤©å­©å­å’Œæˆ‘é€šè¯è¯­æ°”éƒ½ç²¾ç¥èµ·æ¥.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20240423113508.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250426150253.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427102433.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104640.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104555.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-æˆ‘æŠŠä½ æ¨èç»™æˆ‘ä»¬å®éªŒå®¤çš„åŸºæœ¬æ‰€æœ‰äººäº†.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104304.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104416.png","https://cdn.tobebetterjavaer.com/stutymore/collection-20250512160410.png","https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104017.png"],"datePublished":"2025-06-14T00:00:00.000Z","dateModified":"2025-06-15T02:06:33.000Z","author":[{"@type":"Person","name":"ä¸‰åˆ†æ¶"}]}</script><meta name="robots" content="all"><meta name="author" content="æ²‰é»˜ç‹äºŒ"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="apple-mobile-web-app-capable" content="yes"><script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?5230ac143650bf5eb3c14f3fb9b1d3ec";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script><script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?59aa453e7e706422c636c079fc1cb031";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script><link rel="stylesheet" href="//at.alicdn.com/t/font_3180624_7cy10l7jqqh.css"><link rel="icon" href="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/favicon.ico"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><title>MySQLé¢è¯•é¢˜ï¼Œ83é“MySQLå…«è‚¡æ–‡ï¼ˆ5.5ä¸‡å­—331å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘ | äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯</title><meta name="description" content="ä¸‹è½½æ¬¡æ•°è¶… 1 ä¸‡æ¬¡ï¼Œ5.5 ä¸‡å­— 331 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 83 é“ MySQL é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› MySQL å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚">
    <link rel="preload" href="/assets/style-Dlp_gcQZ.css" as="style"><link rel="stylesheet" href="/assets/style-Dlp_gcQZ.css">
    <link rel="modulepreload" href="/assets/app-vNkfWp6O.js"><link rel="modulepreload" href="/assets/mysql.html-DuHoDAPv.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/logo-02.png" alt><!----><span class="vp-site-name hide-in-pad">äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog.html" aria-label="åšå®¢"><!--[--><span class="font-icon icon iconfont icon-gaishu" style=""></span><!--]-->åšå®¢<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/home.html" aria-label="è¿›é˜¶ä¹‹è·¯"><!--[--><span class="font-icon icon iconfont icon-lujing" style=""></span><!--]-->è¿›é˜¶ä¹‹è·¯<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/zhishixingqiu/" aria-label="çŸ¥è¯†æ˜Ÿçƒ"><!--[--><span class="font-icon icon iconfont icon-Artboard" style=""></span><!--]-->çŸ¥è¯†æ˜Ÿçƒ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/xuexiluxian/" aria-label="å­¦ä¹ è·¯çº¿"><!--[--><span class="font-icon icon iconfont icon-luxian" style=""></span><!--]-->å­¦ä¹ è·¯çº¿<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/sidebar/sanfene/nixi.html" aria-label="é¢æ¸£é€†è¢­"><!--[--><span class="font-icon icon iconfont icon-zhunbei" style=""></span><!--]-->é¢æ¸£é€†è¢­<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="çè—èµ„æº"><!--[--><span class="font-icon icon iconfont icon-youzhi" style=""></span>çè—èµ„æº<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/pdf/" aria-label="PDFä¸‹è½½"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span><!--]-->PDFä¸‹è½½<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/nice-article/itmind/" aria-label="ç ´è§£åˆé›†"><!--[--><span class="font-icon icon iconfont icon-zhongyaotishi" style=""></span><!--]-->ç ´è§£åˆé›†<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/itwanger/toBeBetterJavaer" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/nixi.html" aria-label="é¢æ¸£é€†è¢­"><!---->é¢æ¸£é€†è¢­<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/javase.html" aria-label="é¢æ¸£é€†è¢­-Java SE"><!---->é¢æ¸£é€†è¢­-Java SE<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/collection.html" aria-label="é¢æ¸£é€†è¢­-Javaé›†åˆæ¡†æ¶"><!---->é¢æ¸£é€†è¢­-Javaé›†åˆæ¡†æ¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/javathread.html" aria-label="é¢æ¸£é€†è¢­-Javaå¹¶å‘ç¼–ç¨‹"><!---->é¢æ¸£é€†è¢­-Javaå¹¶å‘ç¼–ç¨‹<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/jvm.html" aria-label="é¢æ¸£é€†è¢­-JVM"><!---->é¢æ¸£é€†è¢­-JVM<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/spring.html" aria-label="é¢æ¸£é€†è¢­-Spring"><!---->é¢æ¸£é€†è¢­-Spring<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/redis.html" aria-label="é¢æ¸£é€†è¢­-Redis"><!---->é¢æ¸£é€†è¢­-Redis<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/mybatis.html" aria-label="é¢æ¸£é€†è¢­-MyBatis"><!---->é¢æ¸£é€†è¢­-MyBatis<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/sidebar/sanfene/mysql.html" aria-label="é¢æ¸£é€†è¢­-MySQL"><!---->é¢æ¸£é€†è¢­-MySQL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/os.html" aria-label="é¢æ¸£é€†è¢­-æ“ä½œç³»ç»Ÿ"><!---->é¢æ¸£é€†è¢­-æ“ä½œç³»ç»Ÿ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/network.html" aria-label="é¢æ¸£é€†è¢­-è®¡ç®—æœºç½‘ç»œ"><!---->é¢æ¸£é€†è¢­-è®¡ç®—æœºç½‘ç»œ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/rocketmq.html" aria-label="é¢æ¸£é€†è¢­-RocketMQ"><!---->é¢æ¸£é€†è¢­-RocketMQ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/fenbushi.html" aria-label="é¢æ¸£é€†è¢­-åˆ†å¸ƒå¼"><!---->é¢æ¸£é€†è¢­-åˆ†å¸ƒå¼<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/weifuwu.html" aria-label="é¢æ¸£é€†è¢­-å¾®æœåŠ¡"><!---->é¢æ¸£é€†è¢­-å¾®æœåŠ¡<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/shejimoshi.html" aria-label="é¢æ¸£é€†è¢­-è®¾è®¡æ¨¡å¼"><!---->é¢æ¸£é€†è¢­-è®¾è®¡æ¨¡å¼<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/sidebar/sanfene/linux.html" aria-label="é¢æ¸£é€†è¢­-Linux"><!---->é¢æ¸£é€†è¢­-Linux<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->MySQLé¢è¯•é¢˜ï¼Œ83é“MySQLå…«è‚¡æ–‡ï¼ˆ5.5ä¸‡å­—331å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">ä¸‰åˆ†æ¶</span></span><span property="author" content="ä¸‰åˆ†æ¶"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2025-06-14T00:00:00.000Z"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color3 clickable" role="navigation">é¢æ¸£é€†è¢­</span><!--]--><meta property="articleSection" content="é¢æ¸£é€†è¢­"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color3 clickable" role="navigation">é¢æ¸£é€†è¢­</span><!--]--><meta property="keywords" content="é¢æ¸£é€†è¢­"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 68823 å­—</span><meta property="wordCount" content="68823"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 229 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT229M"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å‰è¨€">å‰è¨€</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#mysql-åŸºç¡€">MySQL åŸºç¡€</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_0-ğŸŒŸä»€ä¹ˆæ˜¯-mysql">0.ğŸŒŸä»€ä¹ˆæ˜¯ MySQLï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-ä¸¤å¼ è¡¨æ€ä¹ˆè¿›è¡Œè¿æ¥">1.ä¸¤å¼ è¡¨æ€ä¹ˆè¿›è¡Œè¿æ¥ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«">2.å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-è¯´ä¸€ä¸‹æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼">3.è¯´ä¸€ä¸‹æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-varchar-ä¸-char-çš„åŒºåˆ«">4.varchar ä¸ char çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-blob-å’Œ-text-æœ‰ä»€ä¹ˆåŒºåˆ«">5.blob å’Œ text æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-datetime-å’Œ-timestamp-æœ‰ä»€ä¹ˆåŒºåˆ«">6.DATETIME å’Œ TIMESTAMP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-inå’Œexistsçš„åŒºåˆ«">7.inå’Œexistsçš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-è®°å½•è´§å¸ç”¨ä»€ä¹ˆç±»å‹æ¯”è¾ƒå¥½">8.è®°å½•è´§å¸ç”¨ä»€ä¹ˆç±»å‹æ¯”è¾ƒå¥½ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-ğŸŒŸæ€ä¹ˆå­˜å‚¨-emoji">9.ğŸŒŸæ€ä¹ˆå­˜å‚¨ emoji?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-dropã€delete-ä¸-truncate-çš„åŒºåˆ«">10.dropã€delete ä¸ truncate çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-union-ä¸-union-all-çš„åŒºåˆ«">11.UNION ä¸ UNION ALL çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-count-1-ã€count-ä¸-count-åˆ—å-çš„åŒºåˆ«">12.count(1)ã€count(*) ä¸ count(åˆ—å) çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_13-sql-æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºäº†è§£å—">13.SQL æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºäº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_14-ä»‹ç»ä¸€ä¸‹-mysql-çš„å¸¸ç”¨å‘½ä»¤-è¡¥å……">14.ä»‹ç»ä¸€ä¸‹ MySQL çš„å¸¸ç”¨å‘½ä»¤ï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_15-mysql-bin-ç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶äº†è§£å—-è¡¥å……">15.MySQL bin ç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶äº†è§£å—ï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_16-mysql-ç¬¬-3-10-æ¡è®°å½•æ€ä¹ˆæŸ¥-è¡¥å……">16.MySQL ç¬¬ 3-10 æ¡è®°å½•æ€ä¹ˆæŸ¥ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_17-ç”¨è¿‡å“ªäº›-mysql-å‡½æ•°-è¡¥å……">17.ç”¨è¿‡å“ªäº› MySQL å‡½æ•°ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_18-è¯´è¯´-sql-çš„éšå¼æ•°æ®ç±»å‹è½¬æ¢-è¡¥å……">18.è¯´è¯´ SQL çš„éšå¼æ•°æ®ç±»å‹è½¬æ¢ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_19-è¯´è¯´-sql-çš„è¯­æ³•æ ‘è§£æ-è¡¥å……">19. è¯´è¯´ SQL çš„è¯­æ³•æ ‘è§£æï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ•°æ®åº“æ¶æ„">æ•°æ®åº“æ¶æ„</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_20-è¯´è¯´-mysql-çš„åŸºç¡€æ¶æ„">20.è¯´è¯´ MySQL çš„åŸºç¡€æ¶æ„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_21-ğŸŒŸä¸€æ¡æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„">21.ğŸŒŸä¸€æ¡æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_22-ä¸€æ¡æ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„">22.ä¸€æ¡æ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_23-è¯´è¯´-mysql-çš„æ®µåŒºé¡µè¡Œ-è¡¥å……">23.è¯´è¯´ MySQL çš„æ®µåŒºé¡µè¡Œï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å­˜å‚¨å¼•æ“">å­˜å‚¨å¼•æ“</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_24-ğŸŒŸmysql-æœ‰å“ªäº›å¸¸è§å­˜å‚¨å¼•æ“">24.ğŸŒŸMySQL æœ‰å“ªäº›å¸¸è§å­˜å‚¨å¼•æ“ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_25-å­˜å‚¨å¼•æ“åº”è¯¥æ€ä¹ˆé€‰æ‹©">25.å­˜å‚¨å¼•æ“åº”è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_26-innodb-å’Œ-myisam-ä¸»è¦æœ‰ä»€ä¹ˆåŒºåˆ«">26.InnoDB å’Œ MyISAM ä¸»è¦æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_27-innodb-çš„-buffer-pooläº†è§£å—-è¡¥å……">27. InnoDB çš„ Buffer Pooläº†è§£å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ—¥å¿—">æ—¥å¿—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_28-ğŸŒŸmysql-æ—¥å¿—æ–‡ä»¶æœ‰å“ªäº›">28.ğŸŒŸMySQL æ—¥å¿—æ–‡ä»¶æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_29-binlog-å’Œ-redo-log-æœ‰ä»€ä¹ˆåŒºåˆ«">29.binlog å’Œ redo log æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_30-ğŸŒŸä¸ºä»€ä¹ˆè¦ä¸¤é˜¶æ®µæäº¤å‘¢">30.ğŸŒŸä¸ºä»€ä¹ˆè¦ä¸¤é˜¶æ®µæäº¤å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_31-ğŸŒŸredo-log-çš„å†™å…¥è¿‡ç¨‹äº†è§£å—">31.ğŸŒŸredo log çš„å†™å…¥è¿‡ç¨‹äº†è§£å—ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#sql-ä¼˜åŒ–">SQL ä¼˜åŒ–</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_32-ğŸŒŸä»€ä¹ˆæ˜¯æ…¢-sql">32.ğŸŒŸä»€ä¹ˆæ˜¯æ…¢ SQLï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_33-ğŸŒŸä½ çŸ¥é“å“ªäº›æ–¹æ³•æ¥ä¼˜åŒ–-sql">33.ğŸŒŸä½ çŸ¥é“å“ªäº›æ–¹æ³•æ¥ä¼˜åŒ– SQLï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_34-ğŸŒŸexplainå¹³å¸¸æœ‰ç”¨è¿‡å—">34.ğŸŒŸexplainå¹³å¸¸æœ‰ç”¨è¿‡å—ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç´¢å¼•">ç´¢å¼•</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_35-ğŸŒŸç´¢å¼•ä¸ºä»€ä¹ˆèƒ½æé«˜mysqlæŸ¥è¯¢æ•ˆç‡">35.ğŸŒŸç´¢å¼•ä¸ºä»€ä¹ˆèƒ½æé«˜MySQLæŸ¥è¯¢æ•ˆç‡ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_36-ğŸŒŸèƒ½ç®€å•è¯´ä¸€ä¸‹ç´¢å¼•çš„åˆ†ç±»å—">36.ğŸŒŸèƒ½ç®€å•è¯´ä¸€ä¸‹ç´¢å¼•çš„åˆ†ç±»å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_37-ğŸŒŸåˆ›å»ºç´¢å¼•æœ‰å“ªäº›æ³¨æ„ç‚¹">37.ğŸŒŸåˆ›å»ºç´¢å¼•æœ‰å“ªäº›æ³¨æ„ç‚¹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_38-ğŸŒŸç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆå‘¢">38.ğŸŒŸç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆå‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_39-ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯å‘¢">39.ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_40-ç´¢å¼•æ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½">40.ç´¢å¼•æ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_41-ğŸŒŸä¸ºä»€ä¹ˆ-innodb-è¦ä½¿ç”¨-b-æ ‘ä½œä¸ºç´¢å¼•">41.ğŸŒŸä¸ºä»€ä¹ˆ InnoDB è¦ä½¿ç”¨ B+æ ‘ä½œä¸ºç´¢å¼•ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_42-ğŸŒŸä¸€æ£µb-æ ‘èƒ½å­˜å‚¨å¤šå°‘æ¡æ•°æ®å‘¢">42.ğŸŒŸä¸€æ£µB+æ ‘èƒ½å­˜å‚¨å¤šå°‘æ¡æ•°æ®å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_43-ç´¢å¼•ä¸ºä»€ä¹ˆç”¨-b-æ ‘ä¸ç”¨æ™®é€šäºŒå‰æ ‘">43.ç´¢å¼•ä¸ºä»€ä¹ˆç”¨ B+æ ‘ä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_44-ğŸŒŸä¸ºä»€ä¹ˆç”¨-b-æ ‘è€Œä¸ç”¨-b-æ ‘å‘¢">44.ğŸŒŸä¸ºä»€ä¹ˆç”¨ B+ æ ‘è€Œä¸ç”¨ B æ ‘å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_45-b-æ ‘ç´¢å¼•å’Œ-hash-ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«">45.B+æ ‘ç´¢å¼•å’Œ Hash ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_46-ğŸŒŸèšæ—ç´¢å¼•å’Œéèšæ—ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«">46.ğŸŒŸèšæ—ç´¢å¼•å’Œéèšæ—ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_47-ğŸŒŸå›è¡¨äº†è§£å—">47.ğŸŒŸå›è¡¨äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_48-ğŸŒŸè”åˆç´¢å¼•äº†è§£å—-è¡¥å……">48.ğŸŒŸè”åˆç´¢å¼•äº†è§£å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_49-ğŸŒŸè¦†ç›–ç´¢å¼•äº†è§£å—">49.ğŸŒŸè¦†ç›–ç´¢å¼•äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_50-ğŸŒŸä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™">50.ğŸŒŸä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_51-ğŸŒŸä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨">51.ğŸŒŸä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_52-å¦‚ä½•æŸ¥çœ‹æ˜¯å¦ç”¨åˆ°äº†ç´¢å¼•-è¡¥å……">52.å¦‚ä½•æŸ¥çœ‹æ˜¯å¦ç”¨åˆ°äº†ç´¢å¼•ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é”">é”</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_53-ğŸŒŸmysql-ä¸­æœ‰å“ªå‡ ç§é”">53.ğŸŒŸMySQL ä¸­æœ‰å“ªå‡ ç§é”ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_54-å…¨å±€é”äº†è§£å—-è¡¥å……">54.å…¨å±€é”äº†è§£å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_55-ğŸŒŸè¯´è¯´-mysql-çš„è¡Œé”">55.ğŸŒŸè¯´è¯´ MySQL çš„è¡Œé”ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_56-ä¸´é”®é”äº†è§£å—">56.ä¸´é”®é”äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_57-æ„å‘é”æ˜¯ä»€ä¹ˆçŸ¥é“å—">57.æ„å‘é”æ˜¯ä»€ä¹ˆçŸ¥é“å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_58-ğŸŒŸmysqlçš„ä¹è§‚é”å’Œæ‚²è§‚é”äº†è§£å—">58.ğŸŒŸMySQLçš„ä¹è§‚é”å’Œæ‚²è§‚é”äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_59-é‡åˆ°è¿‡mysqlæ­»é”é—®é¢˜å—-ä½ æ˜¯å¦‚ä½•è§£å†³çš„">59.é‡åˆ°è¿‡MySQLæ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äº‹åŠ¡">äº‹åŠ¡</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_60-ğŸŒŸmysqläº‹åŠ¡çš„å››å¤§ç‰¹æ€§è¯´ä¸€ä¸‹">60.ğŸŒŸMySQLäº‹åŠ¡çš„å››å¤§ç‰¹æ€§è¯´ä¸€ä¸‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_61-acid-é ä»€ä¹ˆä¿è¯çš„å‘¢">61.ACID é ä»€ä¹ˆä¿è¯çš„å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_62-ğŸŒŸäº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›">62.ğŸŒŸäº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_63-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ˜¯å¦‚ä½•å®ç°çš„">63.äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_64-ğŸŒŸè¯·è¯¦ç»†è¯´è¯´å¹»è¯»å‘¢">64.ğŸŒŸè¯·è¯¦ç»†è¯´è¯´å¹»è¯»å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_65-ğŸŒŸmvcc-äº†è§£å—">65.ğŸŒŸMVCC äº†è§£å—ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é«˜å¯ç”¨">é«˜å¯ç”¨</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_66-mysqlæ•°æ®åº“è¯»å†™åˆ†ç¦»äº†è§£å—">66.MySQLæ•°æ®åº“è¯»å†™åˆ†ç¦»äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_67-è¯»å†™åˆ†ç¦»çš„å®ç°æ–¹å¼æœ‰å“ªäº›">67.è¯»å†™åˆ†ç¦»çš„å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_68-ä¸»ä»å¤åˆ¶åŸç†äº†è§£å—">68.ä¸»ä»å¤åˆ¶åŸç†äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_69-ä¸»ä»åŒæ­¥å»¶è¿Ÿæ€ä¹ˆå¤„ç†">69.ä¸»ä»åŒæ­¥å»¶è¿Ÿæ€ä¹ˆå¤„ç†ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_70-ğŸŒŸä½ ä»¬ä¸€èˆ¬æ˜¯æ€ä¹ˆåˆ†åº“çš„å‘¢">70.ğŸŒŸä½ ä»¬ä¸€èˆ¬æ˜¯æ€ä¹ˆåˆ†åº“çš„å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_71-ğŸŒŸé‚£ä½ ä»¬æ˜¯æ€ä¹ˆåˆ†è¡¨çš„">71.ğŸŒŸé‚£ä½ ä»¬æ˜¯æ€ä¹ˆåˆ†è¡¨çš„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_72-æ°´å¹³åˆ†åº“åˆ†è¡¨çš„åˆ†ç‰‡ç­–ç•¥æœ‰å“ªå‡ ç§">72.æ°´å¹³åˆ†åº“åˆ†è¡¨çš„åˆ†ç‰‡ç­–ç•¥æœ‰å“ªå‡ ç§ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_73-ä¸åœæœºæ‰©å®¹æ€ä¹ˆå®ç°">73.ä¸åœæœºæ‰©å®¹æ€ä¹ˆå®ç°ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_74-å¸¸ç”¨çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶æœ‰å“ªäº›">74.å¸¸ç”¨çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_75-ä½ è§‰å¾—åˆ†åº“åˆ†è¡¨ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å‘¢">75.ä½ è§‰å¾—åˆ†åº“åˆ†è¡¨ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è¿ç»´">è¿ç»´</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_76-ç™¾ä¸‡çº§åˆ«ä»¥ä¸Šçš„æ•°æ®å¦‚ä½•åˆ é™¤">76.ç™¾ä¸‡çº§åˆ«ä»¥ä¸Šçš„æ•°æ®å¦‚ä½•åˆ é™¤ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_77-åƒä¸‡çº§å¤§è¡¨å¦‚ä½•æ·»åŠ å­—æ®µ">77.åƒä¸‡çº§å¤§è¡¨å¦‚ä½•æ·»åŠ å­—æ®µï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_78-mysql-å¯¼è‡´-cpu-é£™å‡çš„è¯-è¦æ€ä¹ˆå¤„ç†å‘¢">78.MySQL å¯¼è‡´ cpu é£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#sql-é¢˜">SQL é¢˜</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_79-ä¸€å¼ è¡¨-id-name-age-sex-class-sql-è¯­å¥-æ‰€æœ‰å¹´é¾„ä¸º-18-çš„äººçš„åå­—-æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„å¤§äº-18-æœ‰å¤šå°‘äºº-æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„æ’å‰ä¸¤åçš„äºº-è¡¥å……">79.ä¸€å¼ è¡¨ï¼šidï¼Œnameï¼Œageï¼Œsexï¼Œclassï¼Œsql è¯­å¥ï¼šæ‰€æœ‰å¹´é¾„ä¸º 18 çš„äººçš„åå­—ï¼Ÿæ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„å¤§äº 18 æœ‰å¤šå°‘äººï¼Ÿæ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„æ’å‰ä¸¤åçš„äººï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_80-æœ‰ä¸€ä¸ªæŸ¥è¯¢éœ€æ±‚-mysql-ä¸­æœ‰ä¸¤ä¸ªè¡¨-ä¸€ä¸ªè¡¨-1000w-æ•°æ®-å¦ä¸€ä¸ªè¡¨åªæœ‰å‡ åƒæ•°æ®-è¦åšä¸€ä¸ªå…³è”æŸ¥è¯¢-å¦‚ä½•ä¼˜åŒ–">80.æœ‰ä¸€ä¸ªæŸ¥è¯¢éœ€æ±‚ï¼ŒMySQL ä¸­æœ‰ä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ªè¡¨ 1000W æ•°æ®ï¼Œå¦ä¸€ä¸ªè¡¨åªæœ‰å‡ åƒæ•°æ®ï¼Œè¦åšä¸€ä¸ªå…³è”æŸ¥è¯¢ï¼Œå¦‚ä½•ä¼˜åŒ–</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_81-æ–°å»ºä¸€ä¸ªè¡¨ç»“æ„-åˆ›å»ºç´¢å¼•-å°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨-insert-å¯¼å…¥è¯¥è¡¨-æ–°å»ºä¸€ä¸ªè¡¨ç»“æ„-å°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨-isnert-å¯¼å…¥è¯¥è¡¨-å†åˆ›å»ºç´¢å¼•-è¿™ä¸¤ç§æ•ˆç‡å“ªä¸ªé«˜å‘¢-æˆ–è€…è¯´ç”¨æ—¶çŸ­å‘¢">81.æ–°å»ºä¸€ä¸ªè¡¨ç»“æ„ï¼Œåˆ›å»ºç´¢å¼•ï¼Œå°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨ insert å¯¼å…¥è¯¥è¡¨ï¼Œæ–°å»ºä¸€ä¸ªè¡¨ç»“æ„ï¼Œå°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨ isnert å¯¼å…¥è¯¥è¡¨ï¼Œå†åˆ›å»ºç´¢å¼•ï¼Œè¿™ä¸¤ç§æ•ˆç‡å“ªä¸ªé«˜å‘¢ï¼Ÿæˆ–è€…è¯´ç”¨æ—¶çŸ­å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_82-ä»€ä¹ˆæ˜¯æ·±åˆ†é¡µ-select-from-tbn-limit-1000000000-è¿™ä¸ªæœ‰ä»€ä¹ˆé—®é¢˜-å¦‚æœè¡¨å¤§æˆ–è€…è¡¨å°åˆ†åˆ«ä»€ä¹ˆé—®é¢˜">82.ä»€ä¹ˆæ˜¯æ·±åˆ†é¡µï¼Œselect * from tbn limit 1000000000 è¿™ä¸ªæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¦‚æœè¡¨å¤§æˆ–è€…è¡¨å°åˆ†åˆ«ä»€ä¹ˆé—®é¢˜</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_83-sql-é¢˜-ä¸€ä¸ªå­¦ç”Ÿæˆç»©è¡¨-å­—æ®µæœ‰å­¦ç”Ÿå§“åã€ç­çº§ã€æˆç»©-æ±‚å„ç­å‰åå">83.SQL é¢˜ï¼šä¸€ä¸ªå­¦ç”Ÿæˆç»©è¡¨ï¼Œå­—æ®µæœ‰å­¦ç”Ÿå§“åã€ç­çº§ã€æˆç»©ï¼Œæ±‚å„ç­å‰åå</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-mianzhanixi-mysql1.jpg" alt="é¢æ¸£é€†è¢­MySQLç¯‡å°é¢å›¾" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­MySQLç¯‡å°é¢å›¾</figcaption></figure><h2 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€"><span>å‰è¨€</span></a></h2><p>5.5 ä¸‡å­— 331 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 83 é“ MySQL é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› MySQL å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/JFjFs_7xduCmHOegbJ-Gbg" target="_blank" rel="noopener noreferrer">è½¬è½½é“¾æ¥</a>ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/zSTyZ-8CFalwAYSB0PN6wA" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>ã€‚</p><p>äº®ç™½ç‰ˆæœ¬æ›´é€‚åˆæ‹¿å‡ºæ¥æ‰“å°ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šå­¦ç”Ÿå…šå–œæ¬¢çš„æ–¹å¼ï¼Œæ‰“å°å‡ºæ¥èƒŒè¯µçš„æ•ˆç‡ä¼šæ›´é«˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104843.png" alt="é¢æ¸£é€†è¢­MySQLç¯‡.pdfç¬¬äºŒç‰ˆ" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­MySQLç¯‡.pdfç¬¬äºŒç‰ˆ</figcaption></figure><p>2025 å¹´ 02 æœˆ 27 æ—¥å¼€å§‹ç€æ‰‹ç¬¬äºŒç‰ˆæ›´æ–°ã€‚</p><ul><li>å¯¹äºé«˜é¢‘é¢˜ï¼Œä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ã€‹ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”ä¼šåŠ ğŸŒŸï¼Œç›®å½•ä¸€ç›®äº†ç„¶ï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li>åŒºåˆ†å…«è‚¡ç²¾åå›ç­”ç‰ˆæœ¬å’ŒåŸç†åº•å±‚è§£é‡Šï¼Œè®©å¤§å®¶çŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼ŒåŒæ—¶åˆèƒ½åšåˆ°é¢è¯•æ—¶çš„é«˜æ•ˆå›ç­”ã€‚</li><li>ç»“åˆé¡¹ç›®ï¼ˆ<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" target="_blank" rel="noopener noreferrer">pmhub</a>ï¼‰æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li>ä¿®å¤ç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ <a href="https://github.com/itwanger/toBeBetterJavaer/issues" target="_blank" rel="noopener noreferrer">GitHub ä»“åº“</a>ä¸­çš„ issueï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li>å¢åŠ <a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">äºŒå“¥ç¼–ç¨‹æ˜Ÿçƒ</a>çš„çƒå‹ä»¬æ‹¿åˆ°çš„ä¸€äº› offerï¼Œå¯¹é¢æ¸£é€†è¢­çš„æ„Ÿè°¢ï¼Œä»¥åŠå¯¹ç®€å†ä¿®æ”¹çš„ä¸€äº›è®¤å¯ï¼Œä»¥æ­¤æ¥æ¿€åŠ±å¤§å®¶ï¼Œç»™å¤§å®¶æ›´å¤šä¿¡å¿ƒã€‚</li><li>ä¼˜åŒ–æ’ç‰ˆï¼Œå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427100320.png" alt="é¢æ¸£é€†è¢­å·²ç»æäº¤ 1457 æ¬¡ GitHub è®°å½•" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­å·²ç»æäº¤ 1457 æ¬¡ GitHub è®°å½•</figcaption></figure><p>ç”±äº PDF æ²¡åŠæ³•è‡ªæˆ‘æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦æœ€æ–°ç‰ˆçš„å°ä¼™ä¼´ï¼Œå¯ä»¥å¾®ä¿¡æœã€<strong>æ²‰é»˜ç‹äºŒ</strong>ã€‘ï¼Œæˆ–è€…æ‰«æ/é•¿æŒ‰è¯†åˆ«ä¸‹é¢çš„äºŒç»´ç ï¼Œå…³æ³¨äºŒå“¥çš„å…¬ä¼—å·ï¼Œå›å¤ã€<strong>222</strong>ã€‘å³å¯æ‹‰å–æœ€æ–°ç‰ˆæœ¬ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>å½“ç„¶äº†ï¼Œè¯·å…è®¸æˆ‘çš„ä¸€ç‚¹ç‚¹ç§å¿ƒï¼Œé‚£å°±æ˜¯æ˜Ÿçƒçš„ PDF ç‰ˆæœ¬ä¼šæ¯”å…¬ä¼—å·æ—©ä¸€ä¸ªæœˆæ—¶é—´ï¼Œæ¯•ç«Ÿæ˜Ÿçƒç”¨æˆ·éƒ½ä»˜è´¹è¿‡äº†ï¼Œæˆ‘æœ‰å¿…è¦è®©ä»–ä»¬å…ˆäº«å—åˆ°ä¸€ç‚¹ç‚¹ç¦åˆ©ã€‚ç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½èƒ½ç†è§£ï¼Œæ¯•ç«Ÿåœ¨çº¿ç‰ˆæ˜¯å…è´¹çš„ï¼ŒCDNã€æœåŠ¡å™¨ã€åŸŸåã€OSS ç­‰ç­‰éƒ½æ˜¯éœ€è¦æˆæœ¬çš„ã€‚</p><p>æ›´åˆ«è¯´æˆ‘ä»˜å‡ºçš„æ—¶é—´å’Œç²¾åŠ›äº†ï¼Œå¤§å®¶è§‰å¾—æœ‰å¸®åŠ©è¿˜è¯·ç»™ä¸ªå£ç¢‘ï¼Œè®©ä½ èº«è¾¹çš„åŒäº‹ã€åŒå­¦éƒ½èƒ½å—ç›Šåˆ°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/collection-20250512160410.png" alt="å›å¤ 222" tabindex="0" loading="lazy"><figcaption>å›å¤ 222</figcaption></figure><p>æˆ‘æŠŠäºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ã€JVM è¿›é˜¶ä¹‹è·¯ã€å¹¶å‘ç¼–ç¨‹è¿›é˜¶ä¹‹è·¯ï¼Œä»¥åŠæ‰€æœ‰é¢æ¸£é€†è¢­çš„ç‰ˆæœ¬éƒ½æ”¾è¿›æ¥äº†ï¼Œæ¶µç›– JavaåŸºç¡€ã€Javaé›†åˆã€Javaå¹¶å‘ã€JVMã€Springã€MyBatisã€è®¡ç®—æœºç½‘ç»œã€æ“ä½œç³»ç»Ÿã€MySQLã€Redisã€RocketMQã€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡ã€è®¾è®¡æ¨¡å¼ã€Linux ç­‰ 16 ä¸ªå¤§çš„ä¸»é¢˜ï¼Œå…±æœ‰ 40 å¤šä¸‡å­—ï¼Œ2000+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯è¯šæ„æ»¡æ»¡ã€‚</p><p>å±•ç¤ºä¸€ä¸‹æš—é»‘ç‰ˆæœ¬çš„ PDF å§ï¼Œæ’ç‰ˆæ¸…æ™°ï¼Œå­—ä½“ä¼˜é›…ï¼Œæ›´åŠ é€‚åˆå¤œæœï¼Œæ™šä¸Šçœ‹ä¼šæ›´èˆ’æœä¸€ç‚¹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427105032.png" alt="é¢æ¸£é€†è¢­MySQLç¯‡.pdfæš—é»‘ç‰ˆ" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­MySQLç¯‡.pdfæš—é»‘ç‰ˆ</figcaption></figure><h2 id="mysql-åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#mysql-åŸºç¡€"><span>MySQL åŸºç¡€</span></a></h2><h3 id="_0-ğŸŒŸä»€ä¹ˆæ˜¯-mysql" tabindex="-1"><a class="header-anchor" href="#_0-ğŸŒŸä»€ä¹ˆæ˜¯-mysql"><span>0.ğŸŒŸä»€ä¹ˆæ˜¯ MySQLï¼Ÿ</span></a></h3><p>MySQL æ˜¯ä¸€ä¸ªå¼€æºçš„å…³ç³»å‹æ•°æ®åº“ï¼Œç°åœ¨éš¶å±äº Oracle å…¬å¸ã€‚æ˜¯æˆ‘ä»¬å›½å†…ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ä¸€ç§æ•°æ®åº“ï¼Œæˆ‘åœ¨æœ¬åœ°å®‰è£…çš„æ˜¯æœ€æ–°çš„ 8.3 ç‰ˆæœ¬ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250227062838.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQL 8.3 æœ€æ–°ç‰ˆæœ¬" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQL 8.3 æœ€æ–°ç‰ˆæœ¬</figcaption></figure><h4 id="æ€ä¹ˆåˆ é™¤-åˆ›å»ºä¸€å¼ è¡¨" tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆåˆ é™¤-åˆ›å»ºä¸€å¼ è¡¨"><span>æ€ä¹ˆåˆ é™¤/åˆ›å»ºä¸€å¼ è¡¨ï¼Ÿ</span></a></h4><p>å¯ä»¥ä½¿ç”¨ <code>DROP TABLE</code> æ¥åˆ é™¤è¡¨ï¼Œä½¿ç”¨ <code>CREATE TABLE</code> æ¥åˆ›å»ºè¡¨ã€‚</p><p>åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ <code>PRIMARY KEY</code> è®¾å®šä¸»é”®ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    email </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (id)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è¯·å†™ä¸€ä¸ªå‡åº-é™åºçš„-sql-è¯­å¥" tabindex="-1"><a class="header-anchor" href="#è¯·å†™ä¸€ä¸ªå‡åº-é™åºçš„-sql-è¯­å¥"><span>è¯·å†™ä¸€ä¸ªå‡åº/é™åºçš„ SQL è¯­å¥ï¼Ÿ</span></a></h4><p>åœ¨ SQL ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>ORDER BY</code> å­å¥æ¥å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œå‡åºæˆ–è€…é™åºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢ç»“æœæ˜¯å‡åºçš„ï¼Œå¦‚æœéœ€è¦é™åºï¼Œå¯ä»¥é€šè¿‡ <code>DESC</code> å…³é”®å­—æ¥å®ç°ã€‚</p><p>æ¯”å¦‚è¯´åœ¨å‘˜å·¥è¡¨ä¸­ï¼Œæˆ‘ä»¬è¦æŒ‰å·¥èµ„é™åºï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>ORDER BY salary DESC</code> æ¥å®Œæˆï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, salary</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> salary </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DESC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœéœ€å¯¹å¤šä¸ªå­—æ®µè¿›è¡Œæ’åºï¼Œä¾‹å¦‚æŒ‰å·¥èµ„é™åºï¼ŒæŒ‰åå­—å‡åºï¼Œå°±å¯ä»¥ <code>ORDER BY salary DESC, name ASC</code> æ¥å®Œæˆï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, salary</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> salary </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DESC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ASC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="mysqlå‡ºç°æ€§èƒ½å·®çš„åŸå› æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#mysqlå‡ºç°æ€§èƒ½å·®çš„åŸå› æœ‰å“ªäº›"><span>MySQLå‡ºç°æ€§èƒ½å·®çš„åŸå› æœ‰å“ªäº›ï¼Ÿ</span></a></h4><p>å¯èƒ½æ˜¯ SQL æŸ¥è¯¢ä½¿ç”¨äº†å…¨è¡¨æ‰«æï¼Œä¹Ÿå¯èƒ½æ˜¯æŸ¥è¯¢è¯­å¥è¿‡äºå¤æ‚ï¼Œå¦‚å¤šè¡¨ JOIN æˆ–åµŒå¥—å­æŸ¥è¯¢ã€‚</p><p>ä¹Ÿæœ‰å¯èƒ½æ˜¯å•è¡¨æ•°æ®é‡è¿‡å¤§ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ·»åŠ ç´¢å¼•å°±èƒ½è§£å†³å¤§éƒ¨åˆ†æ€§èƒ½é—®é¢˜ã€‚å¯¹äºä¸€äº›çƒ­ç‚¹æ•°æ®ï¼Œè¿˜å¯ä»¥é€šè¿‡å¢åŠ  Redis ç¼“å­˜ï¼Œæ¥å‡è½»æ•°æ®åº“çš„è®¿é—®å‹åŠ›ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä½ å¹³æ—¶ç”¨åˆ°çš„æ•°æ®åº“</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šæ•°æ®åº“ç”¨è¿‡å“ªäº›ï¼Œå¯¹å“ªä¸ªæ¯”è¾ƒç†Ÿï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ 360 é¢ç»åŒå­¦ 3 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šç”¨è¿‡å“ªäº›æ•°æ®åº“</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ‹›å•†é“¶è¡Œé¢ç»åŒå­¦ 6 æ‹›é“¶ç½‘ç»œç§‘æŠ€é¢è¯•åŸé¢˜ï¼šäº†è§£ MySQLã€Redis å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å›½ä¼é›¶ç¢é¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šæ•°æ®åº“ç”¨ä»€ä¹ˆå¤šï¼ˆè¯´äº† Mysql å’Œ Redisï¼‰</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„vivo é¢ç»åŒå­¦ 10 æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šæ€ä¹ˆåˆ é™¤/åˆ›å»ºä¸€å¼ è¡¨å’Œè®¾å®šä¸»é”® ï¼Œä¸¾ä¾‹ç”¨sqlå®ç°å‡åºé™åº</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´é¢ç»åŒå­¦ 3 ç½‘çº¦è½¦åç«¯å¼€å‘ä¸€é¢åŸé¢˜ï¼šMySQLæ€§èƒ½æ…¢çš„åŸå› </li></ol></blockquote><h3 id="_1-ä¸¤å¼ è¡¨æ€ä¹ˆè¿›è¡Œè¿æ¥" tabindex="-1"><a class="header-anchor" href="#_1-ä¸¤å¼ è¡¨æ€ä¹ˆè¿›è¡Œè¿æ¥"><span>1.ä¸¤å¼ è¡¨æ€ä¹ˆè¿›è¡Œè¿æ¥ï¼Ÿ</span></a></h3><p>å¯ä»¥é€šè¿‡å†…è¿æ¥ <code>inner join</code>ã€å¤–è¿æ¥ <code>outer join</code>ã€äº¤å‰è¿æ¥ <code>cross join</code> æ¥åˆå¹¶å¤šä¸ªè¡¨çš„æŸ¥è¯¢ç»“æœã€‚</p><h4 id="ä»€ä¹ˆæ˜¯å†…è¿æ¥" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å†…è¿æ¥"><span>ä»€ä¹ˆæ˜¯å†…è¿æ¥ï¼Ÿ</span></a></h4><p>å†…è¿æ¥ç”¨äºè¿”å›ä¸¤ä¸ªè¡¨ä¸­æœ‰åŒ¹é…å…³ç³»çš„è¡Œã€‚å‡è®¾æœ‰ä¸¤å¼ è¡¨ï¼Œç”¨æˆ·è¡¨å’Œè®¢å•è¡¨ï¼Œæƒ³æŸ¥è¯¢æœ‰è®¢å•çš„ç”¨æˆ·ï¼Œå°±å¯ä»¥ä½¿ç”¨å†…è¿æ¥ <code>users INNER JOIN orders</code>ï¼ŒæŒ‰ç…§ç”¨æˆ· ID å…³è”å°±è¡Œäº†ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">order_id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INNER JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åªæœ‰é‚£äº›åœ¨ä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨ user_id çš„è®°å½•æ‰ä¼šå‡ºç°åœ¨æŸ¥è¯¢ç»“æœä¸­ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯å¤–è¿æ¥" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¤–è¿æ¥"><span>ä»€ä¹ˆæ˜¯å¤–è¿æ¥ï¼Ÿ</span></a></h4><p>å’Œå†…è¿æ¥ä¸åŒï¼Œå¤–è¿æ¥ä¸ä»…è¿”å›ä¸¤ä¸ªè¡¨ä¸­åŒ¹é…çš„è¡Œï¼Œè¿˜è¿”å›æ²¡æœ‰åŒ¹é…çš„è¡Œï¼Œç”¨ <code>null</code> æ¥å¡«å……ã€‚</p><p>å¤–è¿æ¥åˆåˆ†ä¸ºå·¦å¤–è¿æ¥ <code>left join</code> å’Œå³å¤–è¿æ¥ <code>right join</code>ã€‚</p><p>left join ä¼šä¿ç•™å·¦è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰è®°å½•ï¼Œå¦‚æœå³è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œå°±è¿”å›åŒ¹é…çš„è®°å½•ï¼Œå¦åˆ™å°±ç”¨ null å¡«å……ï¼Œå¸¸ç”¨äºæŸè¡¨ä¸­æœ‰ï¼Œä½†å¦å¤–ä¸€å¼ è¡¨ä¸­å¯èƒ½æ²¡æœ‰çš„æ•°æ®çš„æŸ¥è¯¢åœºæ™¯ã€‚</p><p>å‡è®¾è¦æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·åŠä»–ä»¬çš„è®¢å•ï¼Œå³ä½¿ç”¨æˆ·æ²¡æœ‰ä¸‹å•ï¼Œå°±å¯ä»¥ä½¿ç”¨å·¦è¿æ¥ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">order_id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LEFT JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥è¯¢å‰ï¼š</p><table><thead><tr><th>users</th><th>orders</th></tr></thead><tbody><tr><td>id</td><td>name</td></tr><tr><td>1</td><td>ç‹äºŒ</td></tr><tr><td>2</td><td>å¼ ä¸‰</td></tr><tr><td>3</td><td>æå››</td></tr></tbody></table><p>æŸ¥è¯¢åï¼š</p><table><thead><tr><th>id</th><th>name</th><th>order_id</th></tr></thead><tbody><tr><td>1</td><td>ç‹äºŒ</td><td>10</td></tr><tr><td>2</td><td>å¼ ä¸‰</td><td>20</td></tr><tr><td>3</td><td>æå››</td><td>null</td></tr></tbody></table><p>å³è¿æ¥å°±æ˜¯å·¦è¿æ¥çš„é•œåƒï¼Œright join ä¼šä¿ç•™å³è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰è®°å½•ï¼Œå¦‚æœå·¦è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œå°±è¿”å›åŒ¹é…çš„è®°å½•ï¼Œå¦åˆ™å°±ç”¨ null å¡«å……ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯äº¤å‰è¿æ¥" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯äº¤å‰è¿æ¥"><span>ä»€ä¹ˆæ˜¯äº¤å‰è¿æ¥ï¼Ÿ</span></a></h4><p>äº¤å‰è¿æ¥ä¼šè¿”å›ä¸¤å¼ è¡¨çš„ç¬›å¡å°”ç§¯ï¼Œä¹Ÿå°±æ˜¯å°†å·¦è¡¨çš„æ¯ä¸€è¡Œä¸å³è¡¨çš„æ¯ä¸€è¡Œè¿›è¡Œç»„åˆï¼Œè¿”å›çš„è¡Œæ•°æ˜¯ä¸¤å¼ è¡¨è¡Œæ•°çš„ä¹˜ç§¯ã€‚</p><p>å‡è®¾æœ‰ A è¡¨å’Œ B è¡¨ï¼ŒA è¡¨æœ‰ 2 è¡Œæ•°æ®ï¼ŒB è¡¨æœ‰ 3 è¡Œæ•°æ®ï¼Œé‚£ä¹ˆäº¤å‰è¿æ¥çš„ç»“æœå°±æ˜¯ 2 âœ–ï¸ 3 = 6 è¡Œã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">B</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> A</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CROSS JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> B;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬›å¡å°”ç§¯æ˜¯æ•°å­¦ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œä¾‹å¦‚é›†åˆ <code>A={a,b}</code>ï¼Œé›†åˆ <code>B={0,1,2}</code>ï¼Œé‚£ä¹ˆ Aâœ–ï¸B=<code>{&lt;a,0&gt;,&lt;a,1&gt;,&lt;a,2&gt;,&lt;b,0&gt;,&lt;b,1&gt;,&lt;b,2&gt;,}</code>ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç”¨å‹é¢è¯•åŸé¢˜ï¼šä¸¤å¼ è¡¨æ€ä¹ˆè¿›è¡Œè¿æ¥</li></ol></blockquote><h3 id="_2-å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_2-å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«"><span>2.å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h3><p>MySQL çš„è¿æ¥ä¸»è¦åˆ†ä¸ºå†…è¿æ¥å’Œå¤–è¿æ¥ï¼Œå¤–è¿æ¥åˆå¯ä»¥åˆ†ä¸ºå·¦è¿æ¥å’Œå³è¿æ¥ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-fcdaad5f-c50e-4834-9f9a-0b676cc6be83.jpg" alt="MySQL å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥-æ¥æºèœé¸Ÿæ•™ç¨‹" tabindex="0" loading="lazy"><figcaption>MySQL å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥-æ¥æºèœé¸Ÿæ•™ç¨‹</figcaption></figure><p>å†…è¿æ¥å¯ä»¥ç”¨æ¥æ‰¾å‡ºä¸¤ä¸ªè¡¨ä¸­å…±åŒçš„è®°å½•ï¼Œç›¸å½“äºä¸¤ä¸ªæ•°æ®é›†çš„äº¤é›†ã€‚</p><p>å·¦è¿æ¥å’Œå³è¿æ¥å¯ä»¥ç”¨æ¥æ‰¾å‡ºä¸¤ä¸ªè¡¨ä¸­ä¸åŒçš„è®°å½•ï¼Œç›¸å½“äºä¸¤ä¸ªæ•°æ®é›†çš„å¹¶é›†ã€‚ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼Œå·¦è¿æ¥ä¼šä¿ç•™å·¦è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰è®°å½•ï¼Œå³è¿æ¥åˆ™åˆšå¥½ç›¸åã€‚</p><p>æ‹¿<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>çš„è¡¨ä¸ºä¾‹æ¥è¯¦ç»†éªŒè¯ä¸‹ã€‚</p><p>æœ‰ä¸‰å¼ è¡¨ï¼Œä¸€å¼ æ–‡ç« è¡¨ articleï¼Œä¸»è¦å­˜æ–‡ç« æ ‡é¢˜ titleï¼Œ ä¸€å¼ æ–‡ç« è¯¦æƒ…è¡¨ article_detailï¼Œä¸»è¦å­˜æ–‡ç« çš„å†…å®¹ contentï¼Œä¸€å¼ æ–‡ç« è¯„è®ºè¡¨ commentï¼Œä¸»è¦å­˜è¯„è®º contentï¼Œä¸‰ä¸ªè¡¨é€šè¿‡æ–‡ç«  id å…³è”ã€‚</p><p>å…ˆæ¥çœ‹å†…è¿æ¥ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> LEFT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ArticleTitle, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">LEFT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CommentContent</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> article a</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INNER JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> comment c </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">article_id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240308184454.png" alt="æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®ï¼šå†…è¿æ¥çš„ç»“æœ" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®ï¼šå†…è¿æ¥çš„ç»“æœ</figcaption></figure><p>è¿”å›è‡³å°‘æœ‰ä¸€æ¡è¯„è®ºçš„æ–‡ç« æ ‡é¢˜å’Œè¯„è®ºå†…å®¹ï¼ˆå‰ 20 ä¸ªå­—ç¬¦ï¼‰ï¼Œåªè¿”å›ç¬¦åˆæ¡ä»¶çš„å‰ 2 æ¡è®°å½•ã€‚</p><p>å†æ¥çœ‹åšè¿æ¥ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> LEFT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ArticleTitle, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">LEFT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CommentContent</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> article a</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LEFT JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> comment c </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">article_id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240308184901.png" alt="æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®ï¼šåšè¿æ¥æŸ¥è¯¢ç»“æœ" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®ï¼šåšè¿æ¥æŸ¥è¯¢ç»“æœ</figcaption></figure><p>è¿”å›æ‰€æœ‰æ–‡ç« çš„æ ‡é¢˜å’Œæ–‡ç« è¯„è®ºï¼Œå³ä½¿æŸäº›æ–‡ç« æ²¡æœ‰è¯„è®ºï¼ˆå¡«å……ä¸º NULLï¼‰ã€‚</p><p>æœ€åæ¥çœ‹å³è¿ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> LEFT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ArticleTitle, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">LEFT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CommentContent</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> comment c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">RIGHT JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> article a </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">article_id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240308185525.png" alt="æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®ï¼šå³è¿æ¥æŸ¥è¯¢ç»“æœ" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®ï¼šå³è¿æ¥æŸ¥è¯¢ç»“æœ</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯ Java åç«¯å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯·è¯´è¯´ MySQL çš„å†…è”ã€å·¦è”ã€å³è”çš„åŒºåˆ«ã€‚</li></ol></blockquote><p>memoï¼š2025 å¹´ 2 æœˆ 27 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ç»™å¤§å®¶çœ‹<a href="https://t.zsxq.com/1g4gI" target="_blank" rel="noopener noreferrer">ä¸€æ¡çƒå‹çš„é¢ç»</a>ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯é¢æ¸£é€†è¢­ä¸­å¸¸è§çš„å…«è‚¡ï¼Œæ‰€ä»¥åªè¦èƒ½æŠŠé¢æ¸£ä¸­çš„é«˜é¢‘é¢˜æ‹¿ä¸‹ï¼Œé¢è¯• OC çš„æ¦‚ç‡çœŸçš„å¾ˆå¤§ï¼ŒçœŸå¿ƒè¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250227084922.png" alt="äºŒå“¥ç¼–ç¨‹æ˜Ÿçƒçš„çƒå‹ï¼šå°èµ¢ç§‘æŠ€ OCäº†" tabindex="0" loading="lazy"><figcaption>äºŒå“¥ç¼–ç¨‹æ˜Ÿçƒçš„çƒå‹ï¼šå°èµ¢ç§‘æŠ€ OCäº†</figcaption></figure><h3 id="_3-è¯´ä¸€ä¸‹æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼" tabindex="-1"><a class="header-anchor" href="#_3-è¯´ä¸€ä¸‹æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼"><span>3.è¯´ä¸€ä¸‹æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼ï¼Ÿ</span></a></h3><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-16e74a6b-a42a-464e-9b10-0252ee7ecc6e.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ•°æ®åº“ä¸‰èŒƒå¼" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ•°æ®åº“ä¸‰èŒƒå¼</figcaption></figure><p>ç¬¬ä¸€èŒƒå¼ï¼Œç¡®ä¿è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®å•å…ƒï¼Œæ¯”å¦‚è¯´ç”¨æˆ·åœ°å€ï¼Œåº”è¯¥æ‹†åˆ†æˆçœã€å¸‚ã€åŒºã€è¯¦ç»†åœ°å€ç­‰ 4 ä¸ªå­—æ®µã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418093235.png" alt="Ruthlessï¼šç¬¬ä¸€èŒƒå¼" tabindex="0" loading="lazy"><figcaption>Ruthlessï¼šç¬¬ä¸€èŒƒå¼</figcaption></figure><p>ç¬¬äºŒèŒƒå¼ï¼Œè¦æ±‚è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½å’Œä¸»é”®ç›´æ¥ç›¸å…³ã€‚æ¯”å¦‚åœ¨è®¢å•è¡¨ä¸­ï¼Œå•†å“åç§°ã€å•ä½ã€å•†å“ä»·æ ¼ç­‰å­—æ®µåº”è¯¥æ‹†åˆ†åˆ°å•†å“è¡¨ä¸­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418093351.png" alt="Ruthlessï¼šä¸ç¬¦åˆç¬¬äºŒèŒƒå¼" tabindex="0" loading="lazy"><figcaption>Ruthlessï¼šä¸ç¬¦åˆç¬¬äºŒèŒƒå¼</figcaption></figure><p>ç„¶åæ–°å»ºä¸€ä¸ªè®¢å•å•†å“å…³è”è¡¨ï¼Œç”¨è®¢å•ç¼–å·å’Œå•†å“ç¼–å·è¿›è¡Œå…³è”å°±å¥½äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418093726.png" alt="Ruthlessï¼šè®¢å•å•†å“å…³è”è¡¨" tabindex="0" loading="lazy"><figcaption>Ruthlessï¼šè®¢å•å•†å“å…³è”è¡¨</figcaption></figure><p>ç¬¬ä¸‰èŒƒå¼ï¼Œéä¸»é”®åˆ—åº”è¯¥åªä¾èµ–äºä¸»é”®åˆ—ã€‚æ¯”å¦‚è¯´åœ¨è®¾è®¡è®¢å•ä¿¡æ¯è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå®¢æˆ·åç§°ã€æ‰€å±å…¬å¸ã€è”ç³»æ–¹å¼ç­‰ä¿¡æ¯æ‹†åˆ†åˆ°å®¢æˆ·ä¿¡æ¯è¡¨ä¸­ï¼Œç„¶ååœ¨è®¢å•ä¿¡æ¯è¡¨ä¸­ç”¨å®¢æˆ·ç¼–å·è¿›è¡Œå…³è”ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418094332.png" alt="Ruthlessï¼šç¬¬ä¸‰èŒƒå¼" tabindex="0" loading="lazy"><figcaption>Ruthlessï¼šç¬¬ä¸‰èŒƒå¼</figcaption></figure><h4 id="å»ºè¡¨çš„æ—¶å€™éœ€è¦è€ƒè™‘å“ªäº›é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å»ºè¡¨çš„æ—¶å€™éœ€è¦è€ƒè™‘å“ªäº›é—®é¢˜"><span>å»ºè¡¨çš„æ—¶å€™éœ€è¦è€ƒè™‘å“ªäº›é—®é¢˜ï¼Ÿ</span></a></h4><p>é¦–å…ˆéœ€è¦è€ƒè™‘è¡¨æ˜¯å¦ç¬¦åˆæ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼ï¼Œç¡®ä¿å­—æ®µä¸å¯å†åˆ†ï¼Œæ¶ˆé™¤éä¸»é”®ä¾èµ–ï¼Œç¡®ä¿å­—æ®µä»…ä¾èµ–äºä¸»é”®ç­‰ã€‚</p><p>ç„¶ååœ¨é€‰æ‹©å­—æ®µç±»å‹æ—¶ï¼Œåº”è¯¥å°½é‡é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹ã€‚</p><p>åœ¨å­—ç¬¦é›†ä¸Šï¼Œå°½é‡é€‰æ‹© utf8mb4ï¼Œè¿™æ ·ä¸ä»…å¯ä»¥æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡ï¼Œè¿˜å¯ä»¥æ”¯æŒè¡¨æƒ…ç¬¦å·ç­‰ã€‚</p><p>å½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œæ¯”å¦‚ä¸Šåƒä¸‡è¡Œæ•°æ®ï¼Œéœ€è¦è€ƒè™‘åˆ†è¡¨ã€‚æ¯”å¦‚è®¢å•è¡¨ï¼Œå¯ä»¥é‡‡ç”¨æ°´å¹³åˆ†è¡¨çš„æ–¹å¼æ¥åˆ†æ•£å•è¡¨å­˜å‚¨å‹åŠ›ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 13 Java åç«¯äºŒé¢é¢è¯•åŸé¢˜ï¼šä»€ä¹ˆæ˜¯ä¸‰å¤§èŒƒå¼ï¼Œä¸ºä»€ä¹ˆè¦æœ‰ä¸‰å¤§èŒƒå¼ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹ä¸ç”¨éµå¾ªä¸‰å¤§èŒƒå¼ï¼Œä¸¾ä¸€ä¸ªåœºæ™¯</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šå»ºè¡¨è€ƒè™‘å“ªäº›é—®é¢˜</li></ol></blockquote><h3 id="_4-varchar-ä¸-char-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_4-varchar-ä¸-char-çš„åŒºåˆ«"><span>4.varchar ä¸ char çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p>varchar æ˜¯å¯å˜é•¿åº¦çš„å­—ç¬¦ç±»å‹ï¼ŒåŸåˆ™ä¸Šæœ€å¤šå¯ä»¥å®¹çº³ 65535 ä¸ªå­—ç¬¦ï¼Œä½†è€ƒè™‘å­—ç¬¦é›†ï¼Œä»¥åŠ MySQL éœ€è¦ 1 åˆ° 2 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œæ‰€ä»¥å®é™…ä¸Šæœ€å¤§å¯ä»¥è®¾ç½®åˆ° 65533ã€‚</p><blockquote><p>latin1 å­—ç¬¦é›†ï¼Œä¸”åˆ—å±æ€§å®šä¹‰ä¸º NOT NULLã€‚</p></blockquote><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-40f42d59-a295-4543-8a03-43925da4d6d9.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼švarcharå’Œ char" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼švarcharå’Œ char</figcaption></figure><p>char æ˜¯å›ºå®šé•¿åº¦çš„å­—ç¬¦ç±»å‹ï¼Œå½“å®šä¹‰ä¸€ä¸ª <code>CHAR(10)</code> å­—æ®µæ—¶ï¼Œä¸ç®¡å®é™…å­˜å‚¨çš„å­—ç¬¦é•¿åº¦æ˜¯å¤šå°‘ï¼Œéƒ½åªä¼šå ç”¨ 10 ä¸ªå­—ç¬¦çš„ç©ºé—´ã€‚å¦‚æœæ’å…¥çš„æ•°æ®å°äº 10 ä¸ªå­—ç¬¦ï¼Œå‰©ä½™çš„éƒ¨åˆ†ä¼šç”¨ç©ºæ ¼å¡«å……ã€‚</p><table><thead><tr><th>å€¼</th><th>CHAR(4)</th><th>å­˜å‚¨éœ€æ±‚ï¼ˆå­—èŠ‚ï¼‰</th><th>VARCHAR(4)</th><th>å­˜å‚¨éœ€æ±‚ï¼ˆå­—èŠ‚ï¼‰</th></tr></thead><tbody><tr><td>&#39;&#39;</td><td>&#39; &#39;</td><td>4</td><td>&#39;&#39;</td><td>1</td></tr><tr><td>&#39;ab&#39;</td><td>&#39;ab &#39;</td><td>4</td><td>&#39;ab&#39;</td><td>3</td></tr><tr><td>&#39;abcd&#39;</td><td>&#39;abcd&#39;</td><td>4</td><td>&#39;abcd&#39;</td><td>5</td></tr><tr><td>&#39;abcdefgh&#39;</td><td>&#39;abcd&#39;</td><td>4</td><td>&#39;abcd&#39;</td><td>5</td></tr></tbody></table><h3 id="_5-blob-å’Œ-text-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_5-blob-å’Œ-text-æœ‰ä»€ä¹ˆåŒºåˆ«"><span>5.blob å’Œ text æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h3><p>blob ç”¨äºå­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯”å¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€æ–‡ä»¶ç­‰ï¼›ä½†å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éƒ½ä¼šæŠŠè¿™äº›æ–‡ä»¶å­˜å‚¨åˆ° OSS æˆ–è€…æ–‡ä»¶æœåŠ¡å™¨ä¸Šï¼Œç„¶ååœ¨æ•°æ®åº“ä¸­å­˜å‚¨æ–‡ä»¶çš„ URLã€‚</p><p>text ç”¨äºå­˜å‚¨æ–‡æœ¬æ•°æ®ï¼Œæ¯”å¦‚æ–‡ç« ã€è¯„è®ºã€æ—¥å¿—ç­‰ã€‚</p><blockquote><p>memoï¼š2025 å¹´ 2 æœˆ 28 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ä»Šå¤©æœ‰çƒå‹åé¦ˆæ‹¿åˆ°äº†ç†æƒ³æ±½è½¦çš„è¡¥å½• offerï¼Œ çœŸçš„æ­å–œäº†ï¼</p></blockquote><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250301165545.png" alt="åˆ«é—®ï¼Œé—®å°±æ˜¯ç»™çš„è–ªèµ„å¾…é‡å¾ˆ ok" tabindex="0" loading="lazy"><figcaption>åˆ«é—®ï¼Œé—®å°±æ˜¯ç»™çš„è–ªèµ„å¾…é‡å¾ˆ ok</figcaption></figure><h3 id="_6-datetime-å’Œ-timestamp-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-datetime-å’Œ-timestamp-æœ‰ä»€ä¹ˆåŒºåˆ«"><span>6.DATETIME å’Œ TIMESTAMP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h3><p>DATETIME ç›´æ¥å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´çš„å®Œæ•´å€¼ï¼Œä¸æ—¶åŒºæ— å…³ã€‚</p><p>TIMESTAMP å­˜å‚¨çš„æ˜¯ Unix æ—¶é—´æˆ³ï¼Œ1970-01-01 00:00:01 UTC ä»¥æ¥çš„ç§’æ•°ï¼Œå—æ—¶åŒºå½±å“ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-d94e5e1c-2614-4b8b-acdb-efb333032854.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šDATETIME å’Œ TIMESTAMP" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šDATETIME å’Œ TIMESTAMP</figcaption></figure><p>å¦å¤–ï¼ŒDATETIME çš„é»˜è®¤å€¼ä¸º nullï¼Œå ç”¨ 8 ä¸ªå­—èŠ‚ï¼›TIMESTAMP çš„é»˜è®¤å€¼ä¸ºå½“å‰æ—¶é—´â€”â€”CURRENT_TIMESTAMPï¼Œå  4 ä¸ªå­—èŠ‚ï¼Œå®é™…å¼€å‘ä¸­æ›´å¸¸ç”¨ï¼Œå› ä¸ºå¯ä»¥è‡ªåŠ¨æ›´æ–°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250301170530.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ›´æ–°æ—¶ä¸ç”¨ set æ›´æ–°æ—¶é—´" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ›´æ–°æ—¶ä¸ç”¨ set æ›´æ–°æ—¶é—´</figcaption></figure><h3 id="_7-inå’Œexistsçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_7-inå’Œexistsçš„åŒºåˆ«"><span>7.inå’Œexistsçš„åŒºåˆ«ï¼Ÿ</span></a></h3><p>å½“ä½¿ç”¨ IN æ—¶ï¼ŒMySQL ä¼šé¦–å…ˆæ‰§è¡Œå­æŸ¥è¯¢ï¼Œç„¶åå°†å­æŸ¥è¯¢çš„ç»“æœé›†ç”¨äºå¤–éƒ¨æŸ¥è¯¢çš„æ¡ä»¶ã€‚è¿™æ„å‘³ç€å­æŸ¥è¯¢çš„ç»“æœé›†éœ€è¦å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p><p>è€Œ EXISTS ä¼šå¯¹å¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œï¼Œæ‰§è¡Œä¸€æ¬¡å­æŸ¥è¯¢ã€‚å¦‚æœå­æŸ¥è¯¢è¿”å›ä»»ä½•è¡Œï¼Œåˆ™ <code>EXISTS</code> æ¡ä»¶ä¸ºçœŸã€‚<code>EXISTS</code> å…³æ³¨çš„æ˜¯å­æŸ¥è¯¢æ˜¯å¦è¿”å›è¡Œï¼Œè€Œä¸æ˜¯è¿”å›çš„å…·ä½“å€¼ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- IN çš„ä¸´æ—¶è¡¨å¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">IN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> amount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- EXISTS å¯ä»¥åˆ©ç”¨å…³è”ç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users u</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> EXISTS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders o </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            WHERE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> u</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">amount</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>IN</code> é€‚ç”¨äºå­æŸ¥è¯¢ç»“æœé›†è¾ƒå°çš„æƒ…å†µã€‚å¦‚æœå­æŸ¥è¯¢è¿”å›å¤§é‡æ•°æ®ï¼Œ<code>IN</code> çš„æ€§èƒ½å¯èƒ½ä¼šä¸‹é™ï¼Œå› ä¸ºå®ƒéœ€è¦å°†æ•´ä¸ªç»“æœé›†åŠ è½½åˆ°å†…å­˜ã€‚</p><p>è€Œ EXISTS é€‚ç”¨äºå­æŸ¥è¯¢ç»“æœé›†å¯èƒ½å¾ˆå¤§çš„æƒ…å†µã€‚ç”±äº <code>EXISTS</code> åªéœ€è¦åˆ¤æ–­å­æŸ¥è¯¢æ˜¯å¦è¿”å›è¡Œï¼Œè€Œä¸éœ€è¦åŠ è½½æ•´ä¸ªç»“æœé›†ï¼Œå› æ­¤åœ¨æŸäº›æƒ…å†µä¸‹æ€§èƒ½æ›´å¥½ï¼Œç‰¹åˆ«æ˜¯å½“å­æŸ¥è¯¢å¯ä»¥ä½¿ç”¨ç´¢å¼•æ—¶ã€‚</p><h4 id="nullå€¼é™·äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#nullå€¼é™·äº†è§£å—"><span>NULLå€¼é™·äº†è§£å—ï¼Ÿ</span></a></h4><p><code>IN</code>: å¦‚æœå­æŸ¥è¯¢çš„ç»“æœé›†ä¸­åŒ…å« <code>NULL</code> å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ„å¤–çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œ<code>WHERE column IN (subquery)</code>ï¼Œå¦‚æœ <code>subquery</code> è¿”å› <code>NULL</code>ï¼Œåˆ™ <code>column IN (subquery)</code> æ°¸è¿œä¸ä¼šä¸ºçœŸï¼Œé™¤é <code>column</code> æœ¬èº«ä¹Ÿä¸º <code>NULL</code>ã€‚</p><p><code>EXISTS</code>: å¯¹ <code>NULL</code> å€¼çš„å¤„ç†æ›´åŠ ç›´æ¥ã€‚<code>EXISTS</code> åªæ˜¯æ£€æŸ¥å­æŸ¥è¯¢æ˜¯å¦è¿”å›è¡Œï¼Œä¸å…³å¿ƒè¡Œçš„å…·ä½“å€¼ï¼Œå› æ­¤ä¸å— <code>NULL</code> å€¼çš„å½±å“ã€‚</p><p>memoï¼š2025 å¹´ 3 æœˆ 1 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚</p><h3 id="_8-è®°å½•è´§å¸ç”¨ä»€ä¹ˆç±»å‹æ¯”è¾ƒå¥½" tabindex="-1"><a class="header-anchor" href="#_8-è®°å½•è´§å¸ç”¨ä»€ä¹ˆç±»å‹æ¯”è¾ƒå¥½"><span>8.è®°å½•è´§å¸ç”¨ä»€ä¹ˆç±»å‹æ¯”è¾ƒå¥½ï¼Ÿ</span></a></h3><p>å¦‚æœæ˜¯ç”µå•†ã€äº¤æ˜“ã€è´¦å•ç­‰æ¶‰åŠè´§å¸çš„åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨ DECIMAL ç±»å‹ï¼Œå› ä¸º DECIMAL ç±»å‹æ˜¯ç²¾ç¡®æ•°å€¼ç±»å‹ï¼Œä¸ä¼šå‡ºç°æµ®ç‚¹æ•°è®¡ç®—è¯¯å·®ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>DECIMAL(19,4)</code> å¯ä»¥å­˜å‚¨æœ€å¤š 19 ä½æ•°å­—ï¼Œå…¶ä¸­ 4 ä½æ˜¯å°æ•°ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    amount </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DECIMAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">19</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (id)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯é“¶è¡Œï¼Œæ¶‰åŠåˆ°æ”¯ä»˜çš„åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨ BIGINT ç±»å‹ã€‚å¯ä»¥å°†è´§å¸é‡‘é¢ä¹˜ä»¥ä¸€ä¸ªå›ºå®šå› å­ï¼Œæ¯”å¦‚ 100ï¼Œè¡¨ç¤ºä»¥â€œåˆ†â€ä¸ºå•ä½ï¼Œç„¶åå­˜å‚¨ä¸º <code>BIGINT</code>ã€‚è¿™ç§æ–¹å¼æ—¢é¿å…äº†æµ®ç‚¹æ•°é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†ä¸é”™çš„æ€§èƒ½ã€‚ä½†åœ¨å±•ç¤ºçš„æ—¶å€™éœ€è¦é™¤ä»¥ç›¸åº”çš„å› å­ã€‚</p><h4 id="ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨-float-æˆ–-double" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨-float-æˆ–-double"><span>ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨ FLOAT æˆ– DOUBLEï¼Ÿ</span></a></h4><p>å› ä¸º FLOAT å’Œ DOUBLE éƒ½æ˜¯æµ®ç‚¹æ•°ç±»å‹ï¼Œä¼šå­˜åœ¨ç²¾åº¦é—®é¢˜ã€‚</p><p>åœ¨è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œ<code>0.1 + 0.2</code> çš„ç»“æœä¼šæ˜¯ç±»ä¼¼ <code>0.30000000000000004</code> çš„å€¼ï¼Œè€Œä¸æ˜¯é¢„æœŸçš„ <code>0.3</code>ã€‚</p><h3 id="_9-ğŸŒŸæ€ä¹ˆå­˜å‚¨-emoji" tabindex="-1"><a class="header-anchor" href="#_9-ğŸŒŸæ€ä¹ˆå­˜å‚¨-emoji"><span>9.ğŸŒŸæ€ä¹ˆå­˜å‚¨ emoji?</span></a></h3><p>å› ä¸º emojiï¼ˆğŸ˜Šï¼‰æ˜¯ 4 ä¸ªå­—èŠ‚çš„ UTF-8 å­—ç¬¦ï¼Œè€Œ MySQL çš„ utf8 å­—ç¬¦é›†åªæ”¯æŒæœ€å¤š 3 ä¸ªå­—èŠ‚çš„ UTF-8 å­—ç¬¦ï¼Œæ‰€ä»¥åœ¨ MySQL ä¸­å­˜å‚¨ emoji æ—¶ï¼Œéœ€è¦ä½¿ç”¨ utf8mb4 å­—ç¬¦é›†ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mytable CONVERT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> CHARACTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> utf8mb4 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COLLATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> utf8mb4_unicode_ci;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>MySQL 8.0 å·²ç»é»˜è®¤æ”¯æŒ utf8mb4 å­—ç¬¦é›†ï¼Œå¯ä»¥é€šè¿‡ <code>SHOW VARIABLES WHERE Variable_name LIKE &#39;character\_set\_%&#39; OR Variable_name LIKE &#39;collation%&#39;;</code> æŸ¥çœ‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240418103116.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæŸ¥çœ‹ MySQL çš„é»˜è®¤å­—ç¬¦é›†" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæŸ¥çœ‹ MySQL çš„é»˜è®¤å­—ç¬¦é›†</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 13 Java åç«¯äºŒé¢é¢è¯•åŸé¢˜ï¼šmysql æ€ä¹ˆå­˜ emojiï¼Œæ€ä¹ˆç¼–ç </li></ol></blockquote><h3 id="_10-dropã€delete-ä¸-truncate-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_10-dropã€delete-ä¸-truncate-çš„åŒºåˆ«"><span>10.dropã€delete ä¸ truncate çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p>DROP æ˜¯ç‰©ç†åˆ é™¤ï¼Œç”¨æ¥åˆ é™¤æ•´å¼ è¡¨ï¼ŒåŒ…æ‹¬è¡¨ç»“æ„ï¼Œä¸”ä¸èƒ½å›æ»šã€‚</p><p>DELETE æ”¯æŒè¡Œçº§åˆ é™¤ï¼Œå¯ä»¥å¸¦ WHERE æ¡ä»¶ï¼Œå¯ä»¥å›æ»šã€‚</p><p>TRUNCATE ç”¨äºæ¸…ç©ºè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œä½†ä¼šä¿ç•™è¡¨ç»“æ„ï¼Œä¸èƒ½å›æ»šã€‚</p><p>memoï¼š2025 å¹´ 3 æœˆ 4 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ç»™å¤§å®¶ä¼ é€’ä¸€ä¸ªå–œæŠ¥ï¼Œä¸€ä½çƒå‹æ‹¿åˆ°äº†ç§‘å¤§è®¯é£çš„ offerï¼Œè¿™è–ªèµ„åœ¨åˆè‚¥çœŸçš„ä¼šå¾ˆé¦™ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250304161556.png" alt="ä¸€ä½çƒå‹æ‹¿åˆ°äº†ç§‘å¤§è®¯é£çš„ offerï¼Œæ˜¥æ‹›" tabindex="0" loading="lazy"><figcaption>ä¸€ä½çƒå‹æ‹¿åˆ°äº†ç§‘å¤§è®¯é£çš„ offerï¼Œæ˜¥æ‹›</figcaption></figure><h3 id="_11-union-ä¸-union-all-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_11-union-ä¸-union-all-çš„åŒºåˆ«"><span>11.UNION ä¸ UNION ALL çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p>UNION ä¼šè‡ªåŠ¨å»é™¤åˆå¹¶åç»“æœé›†ä¸­çš„é‡å¤è¡Œã€‚UNION ALL ä¸ä¼šå»é‡ï¼Œä¼šå°†æ‰€æœ‰ç»“æœé›†åˆå¹¶èµ·æ¥ã€‚</p><h3 id="_12-count-1-ã€count-ä¸-count-åˆ—å-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_12-count-1-ã€count-ä¸-count-åˆ—å-çš„åŒºåˆ«"><span>12.count(1)ã€count(*) ä¸ count(åˆ—å) çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p>åœ¨ InnoDB å¼•æ“ä¸­ï¼Œ<code>COUNT(1)</code> å’Œ <code>COUNT(*)</code> æ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ˜¯ç”¨æ¥ç»Ÿè®¡æ‰€æœ‰è¡Œï¼ŒåŒ…æ‹¬ NULLã€‚</p><p>å¦‚æœè¡¨æœ‰ç´¢å¼•ï¼Œ<code>COUNT(*)</code> ä¼šç›´æ¥ç”¨ç´¢å¼•ç»Ÿè®¡ï¼Œè€Œä¸æ˜¯å…¨è¡¨æ‰«æï¼Œè€Œ <code>COUNT(1)</code> ä¹Ÿä¼šè¢« MySQL ä¼˜åŒ–ä¸º <code>COUNT(*)</code>ã€‚</p><p><code>COUNT(åˆ—å)</code> åªç»Ÿè®¡åˆ—åä¸ä¸º NULL çš„è¡Œæ•°ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>-- å‡è®¾ users è¡¨ï¼š</span></span>
<span class="line"><span>+----+-------+------------+</span></span>
<span class="line"><span>| id | name  | email      |</span></span>
<span class="line"><span>+----+-------+------------+</span></span>
<span class="line"><span>| 1  | å¼ ä¸‰  | zhang@xx.com |</span></span>
<span class="line"><span>| 2  | æå››  | NULL       |</span></span>
<span class="line"><span>| 3  | ç‹äºŒ  | wang@xx.com |</span></span>
<span class="line"><span>+----+-------+------------+</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-- COUNT(*)</span></span>
<span class="line"><span>SELECT COUNT(*) FROM users;</span></span>
<span class="line"><span>-- ç»“æœï¼š3  ï¼ˆç»Ÿè®¡æ‰€æœ‰è¡Œï¼‰</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-- COUNT(1)</span></span>
<span class="line"><span>SELECT COUNT(1) FROM users;</span></span>
<span class="line"><span>-- ç»“æœï¼š3  ï¼ˆç»Ÿè®¡æ‰€æœ‰è¡Œï¼‰</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-- COUNT(email)</span></span>
<span class="line"><span>SELECT COUNT(email) FROM users;</span></span>
<span class="line"><span>-- ç»“æœï¼š2  ï¼ˆNULL ä¸è®¡å…¥ç»Ÿè®¡ï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œå‡è®¾æœ‰è¿™æ ·ä¸€å¼ è¡¨ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    value</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INT</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ’å…¥çš„æ•°æ®ä¸ºï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t1 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;A&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;B&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- NULL in value column</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;C&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">40</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),   </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- NULL in name column</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;E&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- NULL in value column</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸º id åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ <code>select count(*)</code> æ˜¯å…¨è¡¨æ‰«æã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305181629.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šcount()å…¨è¡¨æ‰«æ" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šcount(*)å…¨è¡¨æ‰«æ</figcaption></figure><p>ç„¶åæˆ‘ä»¬ç»™ id åˆ—åŠ ä¸Šç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">alter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t1 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">add</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> primary key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (id);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305181907.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¿®æ”¹t1ä¸»é”®" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¿®æ”¹t1ä¸»é”®</figcaption></figure><p>å†æ¥çœ‹ä¸€ä¸‹ <code>select count(*)</code>ï¼Œå‘ç°ç”¨äº†ç´¢å¼•ï¼ˆMySQL é»˜è®¤ä¸ºç»™ä¸»é”®æ·»åŠ ç´¢å¼•ï¼‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305182117.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šcount()èµ°äº†ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šcount(*)èµ°äº†ç´¢å¼•</figcaption></figure><p>å¦å¤–ï¼ŒMySQL 8.0 å®˜æ–¹æ‰‹å†Œæœ‰æ˜ç¡®è¯´æ˜ï¼ŒInnoDB å¼•æ“å¯¹ <code>SELECT COUNT(*)</code> å’Œ <code>SELECT COUNT(1)</code> çš„å¤„ç†æ–¹å¼å®Œå…¨ä¸€è‡´ï¼Œæ€§èƒ½å¹¶æ— å·®å¼‚ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305183220.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQL 8.0 å®˜æ–¹æ‰‹å†Œ" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQL 8.0 å®˜æ–¹æ‰‹å†Œ</figcaption></figure><p>memoï¼š2025 å¹´ 3 æœˆ 5 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚å†æ™’ä¸€ä¸ªå–œæŠ¥ç»™æ­£åœ¨åˆ·å…«è‚¡çš„ä½ ï¼Œ<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">ä¸€ä½çƒå‹</a>æ‹¿åˆ°äº†å’ªå’•çš„å¤§æ¨¡å‹åº”ç”¨å¼€å‘ï¼Œå¾ˆä¸é”™çš„æ–¹å‘ï¼Œæ­å–œäº†ï¼ç»™ä½ ä¹ŸåŠ åŠ å¥½è¿ğŸ€buffï¼Œä½ ä¹ŸåŠ æŠŠåŠ²ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250305183751.png" alt="çƒå‹æ‹¿åˆ°äº†å’ªå’•çš„å¤§æ¨¡å‹å¼€å‘å®ä¹ " tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†å’ªå’•çš„å¤§æ¨¡å‹å¼€å‘å®ä¹ </figcaption></figure><h3 id="_13-sql-æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºäº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_13-sql-æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºäº†è§£å—"><span>13.SQL æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºäº†è§£å—ï¼Ÿ</span></a></h3><p>äº†è§£ã€‚å…ˆæ‰§è¡Œ FROM ç¡®å®šä¸»è¡¨ï¼Œå†æ‰§è¡Œ JOIN è¿æ¥ï¼Œç„¶å WHERE è¿›è¡Œè¿‡æ»¤ï¼Œæ¥ç€ GROUP BY è¿›è¡Œåˆ†ç»„ï¼ŒHAVING è¿‡æ»¤èšåˆç»“æœï¼ŒSELECT é€‰æ‹©æœ€ç»ˆåˆ—ï¼ŒORDER BY æ’åºï¼Œæœ€å LIMIT é™åˆ¶è¿”å›è¡Œæ•°ã€‚</p><p>WHERE å…ˆæ‰§è¡Œæ˜¯ä¸ºäº†å‡å°‘æ•°æ®é‡ï¼ŒHAVING åªèƒ½è¿‡æ»¤èšåˆæ•°æ®ï¼ŒORDER BY å¿…é¡»åœ¨ SELECT ä¹‹åæ’åºæœ€ç»ˆç»“æœï¼ŒLIMIT æœ€åæ‰§è¡Œä»¥å‡å°‘æ•°æ®ä¼ è¾“ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250306153200.png" alt="åšå®¢å›­æ•°æ®æ´¾ï¼šæŸ¥è¯¢è¯­å¥æ‰§è¡Œé¡ºåº" tabindex="0" loading="lazy"><figcaption>åšå®¢å›­æ•°æ®æ´¾ï¼šæŸ¥è¯¢è¯­å¥æ‰§è¡Œé¡ºåº</figcaption></figure><table><thead><tr><th>æ‰§è¡Œé¡ºåº</th><th>SQL å…³é”®å­—</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>â‘ </td><td>FROM</td><td>ç¡®å®šä¸»è¡¨ï¼Œå‡†å¤‡æ•°æ®</td></tr><tr><td>â‘¡</td><td>ON</td><td>è¿æ¥å¤šä¸ªè¡¨çš„æ¡ä»¶</td></tr><tr><td>â‘¢</td><td>JOIN</td><td>æ‰§è¡Œ INNER JOIN / LEFT JOIN ç­‰</td></tr><tr><td>â‘£</td><td>WHERE</td><td>è¿‡æ»¤è¡Œæ•°æ®ï¼ˆæé«˜æ•ˆç‡ï¼‰</td></tr><tr><td>â‘¤</td><td>GROUP BY</td><td>è¿›è¡Œåˆ†ç»„</td></tr><tr><td>â‘¥</td><td>HAVING</td><td>è¿‡æ»¤èšåˆåçš„æ•°æ®</td></tr><tr><td>â‘¦</td><td>SELECT</td><td>é€‰æ‹©æœ€ç»ˆè¿”å›çš„åˆ—</td></tr><tr><td>â‘§</td><td>DISTINCT</td><td>è¿›è¡Œå»é‡</td></tr><tr><td>â‘¨</td><td>ORDER BY</td><td>å¯¹æœ€ç»ˆç»“æœæ’åº</td></tr><tr><td>â‘©</td><td>LIMIT</td><td>é™åˆ¶è¿”å›è¡Œæ•°</td></tr></tbody></table><p>è¿™ä¸ªæ‰§è¡Œé¡ºåºä¸ç¼–å†™ SQL è¯­å¥çš„é¡ºåºä¸åŒï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™åœ¨ SELECT å­å¥ä¸­å®šä¹‰çš„åˆ«åä¸èƒ½åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨å¾—åŸå› ï¼Œå› ä¸º WHERE æ˜¯åœ¨ SELECT ä¹‹å‰æ‰§è¡Œçš„ã€‚</p><h4 id="limit-ä¸ºä»€ä¹ˆåœ¨æœ€åæ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#limit-ä¸ºä»€ä¹ˆåœ¨æœ€åæ‰§è¡Œ"><span>LIMIT ä¸ºä»€ä¹ˆåœ¨æœ€åæ‰§è¡Œï¼Ÿ</span></a></h4><p>å› ä¸º LIMIT æ˜¯åœ¨æœ€ç»ˆç»“æœé›†ä¸Šæ‰§è¡Œçš„ï¼Œå¦‚æœåœ¨ WHERE ä¹‹å‰æ‰§è¡Œ LIMITï¼Œé‚£ä¹ˆå°±ä¼šå…ˆè¿”å›æ‰€æœ‰è¡Œï¼Œç„¶åå†è¿›è¡Œ LIMIT é™åˆ¶ï¼Œè¿™æ ·ä¼šå¢åŠ æ•°æ®ä¼ è¾“çš„å¼€é”€ã€‚</p><h4 id="order-by-ä¸ºä»€ä¹ˆåœ¨-select-ä¹‹åæ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#order-by-ä¸ºä»€ä¹ˆåœ¨-select-ä¹‹åæ‰§è¡Œ"><span>ORDER BY ä¸ºä»€ä¹ˆåœ¨ SELECT ä¹‹åæ‰§è¡Œï¼Ÿ</span></a></h4><p>å› ä¸ºæ’åºéœ€è¦åŸºäºæœ€ç»ˆè¿”å›çš„åˆ—ï¼Œå¦‚æœ ORDER BY æ—©äº SELECT æ‰§è¡Œï¼Œè®¡ç®— <code>COUNT(*)</code> ä¹‹ç±»çš„èšåˆå‡½æ•°å°±ä¼šå‡ºé—®é¢˜ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(*) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_count</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">GROUP BY</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_count </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DESC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-ä»‹ç»ä¸€ä¸‹-mysql-çš„å¸¸ç”¨å‘½ä»¤-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_14-ä»‹ç»ä¸€ä¸‹-mysql-çš„å¸¸ç”¨å‘½ä»¤-è¡¥å……"><span>14.ä»‹ç»ä¸€ä¸‹ MySQL çš„å¸¸ç”¨å‘½ä»¤ï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 03 æœˆ 13 æ—¥å¢è¡¥ã€‚</p></blockquote><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240313093551.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQLå¸¸ç”¨å‘½ä»¤" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQLå¸¸ç”¨å‘½ä»¤</figcaption></figure><p>MySQL çš„å¸¸ç”¨å‘½ä»¤ä¸»è¦åŒ…æ‹¬æ•°æ®åº“æ“ä½œå‘½ä»¤ã€è¡¨æ“ä½œå‘½ä»¤ã€è¡Œæ•°æ® CRUD å‘½ä»¤ã€ç´¢å¼•å’Œçº¦æŸçš„åˆ›å»ºä¿®æ”¹å‘½ä»¤ã€ç”¨æˆ·å’Œæƒé™ç®¡ç†çš„å‘½ä»¤ã€äº‹åŠ¡æ§åˆ¶çš„å‘½ä»¤ç­‰ã€‚</p><h4 id="è¯´è¯´æ•°æ®åº“æ“ä½œå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´æ•°æ®åº“æ“ä½œå‘½ä»¤"><span>è¯´è¯´æ•°æ®åº“æ“ä½œå‘½ä»¤ï¼Ÿ</span></a></h4><p><code>CREATE DATABASE database_name;</code> ç”¨äºåˆ›å»ºæ•°æ®åº“ï¼›<code>DROP DATABASE database_name;</code> ç”¨äºåˆ é™¤æ•°æ®åº“ï¼›<code>SHOW DATABASES;</code> ç”¨äºæ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ï¼›<code>USE database_name;</code> ç”¨äºåˆ‡æ¢æ•°æ®åº“ã€‚</p><h4 id="è¯´è¯´è¡¨æ“ä½œå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´è¡¨æ“ä½œå‘½ä»¤"><span>è¯´è¯´è¡¨æ“ä½œå‘½ä»¤ï¼Ÿ</span></a></h4><p><code>CREATE TABLE table_name (åˆ—å1 æ•°æ®ç±»å‹1, åˆ—å2 æ•°æ®ç±»å‹2,...);</code> ç”¨äºåˆ›å»ºè¡¨ï¼›<code>DROP TABLE table_name;</code> ç”¨äºåˆ é™¤è¡¨ï¼›<code>SHOW TABLES;</code> ç”¨äºæ˜¾ç¤ºæ‰€æœ‰è¡¨ï¼›<code>DESCRIBE table_name;</code> ç”¨äºæŸ¥çœ‹è¡¨ç»“æ„ï¼›<code>ALTER TABLE table_name ADD column_name datatype;</code> ç”¨äºä¿®æ”¹è¡¨ã€‚</p><h4 id="è¯´è¯´è¡Œæ•°æ®çš„-crud-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´è¡Œæ•°æ®çš„-crud-å‘½ä»¤"><span>è¯´è¯´è¡Œæ•°æ®çš„ CRUD å‘½ä»¤ï¼Ÿ</span></a></h4><p><code>INSERT INTO table_name (column1, column2, ...) VALUES (value1, value2, ...);</code> ç”¨äºæ’å…¥æ•°æ®ï¼›<code>SELECT column_names FROM table_name WHERE condition;</code> ç”¨äºæŸ¥è¯¢æ•°æ®ï¼›<code>UPDATE table_name SET column1 = value1, column2 = value2 WHERE condition;</code> ç”¨äºæ›´æ–°æ•°æ®ï¼›<code>DELETE FROM table_name WHERE condition;</code> ç”¨äºåˆ é™¤æ•°æ®ã€‚</p><h4 id="è¯´è¯´ç´¢å¼•å’Œçº¦æŸçš„åˆ›å»ºä¿®æ”¹å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´ç´¢å¼•å’Œçº¦æŸçš„åˆ›å»ºä¿®æ”¹å‘½ä»¤"><span>è¯´è¯´ç´¢å¼•å’Œçº¦æŸçš„åˆ›å»ºä¿®æ”¹å‘½ä»¤ï¼Ÿ</span></a></h4><p><code>CREATE INDEX index_name ON table_name (column_name);</code> ç”¨äºåˆ›å»ºç´¢å¼•ï¼›<code>ALTER TABLE table_name ADD PRIMARY KEY (column_name);</code> ç”¨äºæ·»åŠ ä¸»é”®ï¼›<code>ALTER TABLE table_name ADD CONSTRAINT fk_name FOREIGN KEY (column_name) REFERENCES parent_table (parent_column_name);</code> ç”¨äºæ·»åŠ å¤–é”®ã€‚</p><h4 id="è¯´è¯´ç”¨æˆ·å’Œæƒé™ç®¡ç†çš„å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´ç”¨æˆ·å’Œæƒé™ç®¡ç†çš„å‘½ä»¤"><span>è¯´è¯´ç”¨æˆ·å’Œæƒé™ç®¡ç†çš„å‘½ä»¤ï¼Ÿ</span></a></h4><p><code>CREATE USER &#39;username&#39;@&#39;host&#39; IDENTIFIED BY &#39;password&#39;;</code> ç”¨äºåˆ›å»ºç”¨æˆ·ï¼›<code>GRANT ALL PRIVILEGES ON database_name.table_name TO &#39;username&#39;@&#39;host&#39;;</code> ç”¨äºæˆäºˆæƒé™ï¼›<code>REVOKE ALL PRIVILEGES ON database_name.table_name FROM &#39;username&#39;@&#39;host&#39;;</code> ç”¨äºæ’¤é”€æƒé™ï¼›<code>DROP USER &#39;username&#39;@&#39;host&#39;;</code> ç”¨äºåˆ é™¤ç”¨æˆ·ã€‚</p><h4 id="è¯´è¯´äº‹åŠ¡æ§åˆ¶çš„å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´äº‹åŠ¡æ§åˆ¶çš„å‘½ä»¤"><span>è¯´è¯´äº‹åŠ¡æ§åˆ¶çš„å‘½ä»¤ï¼Ÿ</span></a></h4><p><code>START TRANSACTION;</code> ç”¨äºå¼€å§‹äº‹åŠ¡ï¼›<code>COMMIT;</code> ç”¨äºæäº¤äº‹åŠ¡ï¼›<code>ROLLBACK;</code> ç”¨äºå›æ»šäº‹åŠ¡ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç”¨å‹é‡‘èä¸€é¢åŸé¢˜ï¼šä»‹ç»ä¸€ä¸‹ MySQL çš„å¸¸ç”¨å‘½ä»¤</li></ol></blockquote><h3 id="_15-mysql-bin-ç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶äº†è§£å—-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_15-mysql-bin-ç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶äº†è§£å—-è¡¥å……"><span>15.MySQL bin ç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶äº†è§£å—ï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 03 æœˆ 13 æ—¥å¢è¡¥</p></blockquote><p>æ¨èé˜…è¯»ï¼š<a href="https://javabetter.cn/mysql/bin.html" target="_blank" rel="noopener noreferrer">MySQL bin ç›®å½•ä¸‹çš„ä¸€äº›å¯æ‰§è¡Œæ–‡ä»¶</a></p><p>äº†è§£çš„ã€‚MySQL çš„ bin ç›®å½•ä¸‹æœ‰å¾ˆå¤šå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸»è¦ç”¨äºç®¡ç† MySQL æœåŠ¡å™¨ã€æ•°æ®åº“ã€è¡¨ã€æ•°æ®ç­‰ã€‚æ¯”å¦‚è¯´ï¼š</p><ul><li>mysqlï¼šç”¨äºè¿æ¥ MySQL æœåŠ¡å™¨</li><li>mysqldumpï¼šç”¨äºæ•°æ®åº“å¤‡ä»½ï¼Œå¯¹æ•°æ®å¤‡ä»½ã€è¿ç§»æˆ–æ¢å¤æ—¶éå¸¸æœ‰ç”¨</li><li>mysqladminï¼šç”¨æ¥æ‰§è¡Œä¸€äº›ç®¡ç†æ“ä½œï¼Œæ¯”å¦‚è¯´åˆ›å»ºæ•°æ®åº“ã€åˆ é™¤æ•°æ®åº“ã€æŸ¥çœ‹ MySQL æœåŠ¡å™¨çš„çŠ¶æ€ç­‰ã€‚</li><li>mysqlcheckï¼šç”¨äºæ£€æŸ¥ã€ä¿®å¤ã€åˆ†æå’Œä¼˜åŒ–æ•°æ®åº“è¡¨ï¼Œå¯¹æ•°æ®åº“çš„ç»´æŠ¤å’Œæ€§èƒ½ä¼˜åŒ–éå¸¸æœ‰ç”¨ã€‚</li><li>mysqlimportï¼šç”¨äºä»æ–‡æœ¬æ–‡ä»¶ä¸­å¯¼å…¥æ•°æ®åˆ°æ•°æ®åº“è¡¨ä¸­ï¼Œé€‚åˆæ‰¹é‡æ•°æ®å¯¼å…¥ã€‚</li><li>mysqlshowï¼šç”¨äºæ˜¾ç¤º MySQL æ•°æ®åº“æœåŠ¡å™¨ä¸­çš„æ•°æ®åº“ã€è¡¨ã€åˆ—ç­‰ä¿¡æ¯ã€‚</li><li>mysqlbinlogï¼šç”¨äºæŸ¥çœ‹ MySQL äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶çš„å†…å®¹ï¼Œå¯ä»¥ç”¨äºæ¢å¤æ•°æ®ã€æŸ¥çœ‹æ•°æ®å˜æ›´ç­‰ã€‚</li></ul><h3 id="_16-mysql-ç¬¬-3-10-æ¡è®°å½•æ€ä¹ˆæŸ¥-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_16-mysql-ç¬¬-3-10-æ¡è®°å½•æ€ä¹ˆæŸ¥-è¡¥å……"><span>16.MySQL ç¬¬ 3-10 æ¡è®°å½•æ€ä¹ˆæŸ¥ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 03 æœˆ 30 æ—¥å¢è¡¥</p></blockquote><p>å¯ä»¥ä½¿ç”¨ limit è¯­å¥ï¼Œç»“åˆåç§»é‡å’Œè¡Œæ•°æ¥å®ç°ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>limit è¯­å¥ç”¨äºé™åˆ¶æŸ¥è¯¢ç»“æœçš„æ•°é‡ï¼Œåç§»é‡è¡¨ç¤ºä»å“ªæ¡è®°å½•å¼€å§‹ï¼Œè¡Œæ•°è¡¨ç¤ºè¿”å›çš„è®°å½•æ•°é‡ã€‚</p><ul><li>2ï¼šåç§»é‡ï¼Œè¡¨ç¤ºè·³è¿‡å‰ä¸¤æ¡è®°å½•ï¼Œä»ç¬¬ä¸‰æ¡è®°å½•å¼€å§‹ã€‚</li><li>8ï¼šè¡Œæ•°ï¼Œè¡¨ç¤ºä»åç§»é‡å¼€å§‹ï¼Œè¿”å› 8 æ¡è®°å½•ã€‚</li></ul><p>åç§»é‡æ˜¯ä» 0 å¼€å§‹çš„ï¼Œå³ç¬¬ä¸€æ¡è®°å½•çš„åç§»é‡æ˜¯ 0ï¼›å¦‚æœæƒ³ä»ç¬¬ 3 æ¡è®°å½•å¼€å§‹ï¼Œåç§»é‡å°±åº”è¯¥æ˜¯ 2ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 16 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL ç¬¬ 3-10 æ¡è®°å½•æ€ä¹ˆæŸ¥ï¼Ÿ</li></ol></blockquote><h3 id="_17-ç”¨è¿‡å“ªäº›-mysql-å‡½æ•°-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_17-ç”¨è¿‡å“ªäº›-mysql-å‡½æ•°-è¡¥å……"><span>17.ç”¨è¿‡å“ªäº› MySQL å‡½æ•°ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 04 æœˆ 12 æ—¥å¢è¡¥</p></blockquote><p>ç”¨è¿‡æŒºå¤šçš„ï¼Œæ¯”å¦‚è¯´å¤„ç†å­—ç¬¦ä¸²çš„å‡½æ•°ï¼š</p><ul><li><code>CONCAT()</code>: ç”¨äºè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²ã€‚</li><li><code>LENGTH()</code>: ç”¨äºè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</li><li><code>SUBSTRING()</code>: ä»å­—ç¬¦ä¸²ä¸­æå–å­å­—ç¬¦ä¸²ã€‚</li><li><code>REPLACE()</code>: æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æŸéƒ¨åˆ†ã€‚</li><li><code>TRIM()</code>: å»é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºæ ¼æˆ–å…¶ä»–æŒ‡å®šå­—ç¬¦ã€‚</li></ul><p>å®æµ‹æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è¿æ¥å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> CONCAT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39; &#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> concatenated_string;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è·å–å­—ç¬¦ä¸²é•¿åº¦</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LENGTH</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> string_length;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æå–å­å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> SUBSTRING</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> substring;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ›¿æ¢å­—ç¬¦ä¸²å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> REPLACE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;MySQL&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> replaced_string;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å»é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºæ ¼</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> TRIM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;  æ²‰é»˜ ç‹äºŒ  &#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> trimmed_string;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤„ç†æ•°å­—çš„å‡½æ•°ï¼š</p><ul><li><code>ABS()</code>: è¿”å›ä¸€ä¸ªæ•°çš„ç»å¯¹å€¼ã€‚</li><li><code>ROUND()</code>: å››èˆäº”å…¥åˆ°æŒ‡å®šçš„å°æ•°ä½æ•°ã€‚</li><li><code>MOD()</code>: è¿”å›é™¤æ³•æ“ä½œçš„ä½™æ•°ã€‚</li></ul><p>å®æµ‹æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è¿”å›ç»å¯¹å€¼</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ABS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">123</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> absolute_value;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å››èˆäº”å…¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ROUND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">123</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4567</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rounded_value;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä½™æ•°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> MOD(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> modulus;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•°ï¼š</p><ul><li><code>NOW()</code>: è¿”å›å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚</li><li><code>CURDATE()</code>: è¿”å›å½“å‰çš„æ—¥æœŸã€‚</li></ul><p>å®æµ‹æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOW</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> current_date_time;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è¿”å›å½“å‰æ—¥æœŸ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CURDATE() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> current_date;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ±‡æ€»å‡½æ•°ï¼š</p><ul><li><code>SUM()</code>: è®¡ç®—æ•°å€¼åˆ—çš„æ€»å’Œã€‚</li><li><code>AVG()</code>: è®¡ç®—æ•°å€¼åˆ—çš„å¹³å‡å€¼ã€‚</li><li><code>COUNT()</code>: è®¡ç®—æŸåˆ—çš„è¡Œæ•°ã€‚</li></ul><p>å®æµ‹æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åˆ›å»ºä¸€ä¸ªè¡¨å¹¶æ’å…¥æ•°æ®è¿›è¡ŒèšåˆæŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sales</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    product_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sales_amount </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DECIMAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sales (product_id, sales_amount) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sales (product_id, sales_amount) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">150</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sales (product_id, sales_amount) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è®¡ç®—æ€»å’Œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> SUM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sales_amount) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> total_sales </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sales;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è®¡ç®—å¹³å‡å€¼</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> AVG</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sales_amount) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> average_sales </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sales;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è®¡ç®—æ€»è¡Œæ•°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(*) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> total_entries </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sales;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€»è¾‘å‡½æ•°ï¼š</p><ul><li><code>IF()</code>: å¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œåˆ™è¿”å›ä¸€ä¸ªå€¼ï¼›å¦åˆ™è¿”å›å¦ä¸€ä¸ªå€¼ã€‚</li><li><code>CASE</code>: æ ¹æ®ä¸€ç³»åˆ—æ¡ä»¶è¿”å›å€¼ã€‚</li></ul><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- IFå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> IF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;True&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;False&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> simple_if;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- CASEè¡¨è¾¾å¼</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> CASE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHEN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> THEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;True&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ELSE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;False&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> END</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> case_expression;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸º OD é¢ç»åŒå­¦ 1 ä¸€é¢é¢è¯•åŸé¢˜ï¼šç”¨è¿‡å“ªäº› MySQL å‡½æ•°ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ å°å…¬å¸é¢ç»åˆé›†å¥½æœªæ¥æµ‹å¼€é¢ç»åŒå­¦ 3 æµ‹å¼€ä¸€é¢é¢è¯•åŸé¢˜ï¼šçŸ¥é“ MySQL çš„å“ªäº›å‡½æ•°ï¼Œå¦‚ order by count()</li></ol></blockquote><h3 id="_18-è¯´è¯´-sql-çš„éšå¼æ•°æ®ç±»å‹è½¬æ¢-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_18-è¯´è¯´-sql-çš„éšå¼æ•°æ®ç±»å‹è½¬æ¢-è¡¥å……"><span>18.è¯´è¯´ SQL çš„éšå¼æ•°æ®ç±»å‹è½¬æ¢ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 04 æœˆ 25 æ—¥å¢è¡¥</p></blockquote><p>å½“ä¸€ä¸ªæ•´æ•°å’Œä¸€ä¸ªæµ®ç‚¹æ•°ç›¸åŠ æ—¶ï¼Œæ•´æ•°ä¼šè¢«è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç»“æœä¸º 2.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å½“ä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªæ•´æ•°ç›¸åŠ æ—¶ï¼Œå­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢ä¸ºæ•´æ•°ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç»“æœä¸º 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>éšå¼è½¬æ¢ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œæœ€å¥½é€šè¿‡æ˜¾å¼è½¬æ¢æ¥è§„é¿ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> CAST</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;1&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SIGNED </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INTEGER</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç»“æœä¸º 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å®é™…éªŒè¯ç»“æœï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240425111246.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šéšå¼è½¬æ¢" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šéšå¼è½¬æ¢</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šè¯´è¯´ SQL çš„éšå¼æ•°æ®ç±»å‹è½¬æ¢ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 3 æœˆ 6 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚</p><h3 id="_19-è¯´è¯´-sql-çš„è¯­æ³•æ ‘è§£æ-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_19-è¯´è¯´-sql-çš„è¯­æ³•æ ‘è§£æ-è¡¥å……"><span>19. è¯´è¯´ SQL çš„è¯­æ³•æ ‘è§£æï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 09 æœˆ 19 æ—¥å¢è¡¥</p></blockquote><p>SQL è¯­æ³•æ ‘è§£ææ˜¯å°† SQL æŸ¥è¯¢è¯­å¥è½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘ â€”â€” AST çš„è¿‡ç¨‹ï¼Œæ˜¯æ•°æ®åº“å¼•æ“å¤„ç†æŸ¥è¯¢çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯é˜²æ­¢ SQL æ³¨å…¥çš„é‡è¦æ‰‹æ®µã€‚</p><p>é€šå¸¸åˆ†ä¸º 3 ä¸ªé˜¶æ®µã€‚</p><p>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œè¯æ³•åˆ†æï¼šæ‹†è§£ SQL è¯­å¥ï¼Œè¯†åˆ«å…³é”®å­—ã€è¡¨åã€åˆ—åç­‰ã€‚</p><p>---è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ---</p><p>æ¯”å¦‚è¯´ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 18</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å°†ä¼šè¢«æ‹†è§£ä¸ºï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>[SELECT] [id] [,] [name] [FROM] [users] [WHERE] [age] [&gt;] [18] [;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>---è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ---</p><p>ç¬¬äºŒä¸ªé˜¶æ®µï¼Œè¯­æ³•åˆ†æï¼šæ£€æŸ¥ SQL æ˜¯å¦ç¬¦åˆè¯­æ³•è§„åˆ™ï¼Œå¹¶æ„å»ºæŠ½è±¡è¯­æ³•æ ‘ã€‚</p><p>---è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ---</p><p>æ¯”å¦‚è¯´ä¸Šé¢çš„è¯­å¥ä¼šè¢«æ„å»ºæˆå¦‚ä¸‹çš„è¯­æ³•æ ‘ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>          SELECT</span></span>
<span class="line"><span>         /      \</span></span>
<span class="line"><span>     Columns     FROM</span></span>
<span class="line"><span>    /      \      |</span></span>
<span class="line"><span>  id      name  users</span></span>
<span class="line"><span>               |</span></span>
<span class="line"><span>             WHERE</span></span>
<span class="line"><span>               |</span></span>
<span class="line"><span>            age &gt; 18</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…è¿™æ ·è¡¨ç¤ºï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>SELECT</span></span>
<span class="line"><span> â”œâ”€â”€ COLUMNS: id, name</span></span>
<span class="line"><span> â”œâ”€â”€ FROM: users</span></span>
<span class="line"><span> â”œâ”€â”€ WHERE</span></span>
<span class="line"><span> â”‚    â”œâ”€â”€ CONDITION: age &gt; 18</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>---è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ---</p><p>ç¬¬ä¸‰ä¸ªé˜¶æ®µï¼Œè¯­ä¹‰åˆ†æï¼šæ£€æŸ¥è¡¨ã€åˆ—æ˜¯å¦å­˜åœ¨ï¼Œè¿›è¡Œæƒé™éªŒè¯ç­‰ã€‚</p><p>---è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ---</p><p>æ¯”å¦‚è¯´æ‰§è¡Œï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;eighteen&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¼šæŠ¥é”™ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>ERROR: Column &#39;age&#39; is INT, but &#39;eighteen&#39; is STRING.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>---è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ---</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 21 æŠ–éŸ³å•†åŸä¸€é¢é¢è¯•åŸé¢˜ï¼šsqlçš„è¯­æ³•æ ‘è§£æ</li></ol></blockquote><p>memoï¼š2025 å¹´ 3 æœˆ 7 æ—¥ ä¿®æ”¹è‡³æ­¤ã€‚å†æ™’ä¸€ä¸ª offerï¼Œä¸€ä½çƒå‹æ‹¿åˆ°äº†ç»çº¬æ’æ¶¦çš„å®ä¹  offerï¼Œå¹¶ä¸”ç›´è¨€é¢è¯•äº†å¾ˆå¤šåœºï¼Œæˆ‘è¯´è¶…è¿‡ 5 æ¬¡çš„é¢˜ç›®åŸºæœ¬ä¸Šéƒ½ç¢°åˆ°äº†ï¼Œå•¥éƒ½åˆ«è¯´äº†ï¼Œé¢æ¸£é€†è¢­ YYDSã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250308085803.png" alt="çƒå‹æ‹¿åˆ°äº†ç»çº¬æ’æ¶¦çš„å®ä¹  offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†ç»çº¬æ’æ¶¦çš„å®ä¹  offer</figcaption></figure><h2 id="æ•°æ®åº“æ¶æ„" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“æ¶æ„"><span>æ•°æ®åº“æ¶æ„</span></a></h2><h3 id="_20-è¯´è¯´-mysql-çš„åŸºç¡€æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_20-è¯´è¯´-mysql-çš„åŸºç¡€æ¶æ„"><span>20.è¯´è¯´ MySQL çš„åŸºç¡€æ¶æ„ï¼Ÿ</span></a></h3><p>MySQL é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œä¸»è¦åŒ…æ‹¬è¿æ¥å±‚ã€æœåŠ¡å±‚ã€å’Œå­˜å‚¨å¼•æ“å±‚ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-77626fdb-d2b0-4256-a483-d1c60e68d8ec.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šRedis çš„åŸºç¡€æ¶æ„" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šRedis çš„åŸºç¡€æ¶æ„</figcaption></figure><p>â‘ ã€è¿æ¥å±‚ä¸»è¦è´Ÿè´£å®¢æˆ·ç«¯è¿æ¥çš„ç®¡ç†ï¼ŒåŒ…æ‹¬éªŒè¯ç”¨æˆ·èº«ä»½ã€æƒé™æ ¡éªŒã€è¿æ¥ç®¡ç†ç­‰ã€‚å¯ä»¥é€šè¿‡æ•°æ®åº“è¿æ¥æ± æ¥æå‡è¿æ¥çš„å¤„ç†æ•ˆç‡ã€‚</p><p>â‘¡ã€æœåŠ¡å±‚æ˜¯ MySQL çš„æ ¸å¿ƒï¼Œä¸»è¦è´Ÿè´£æŸ¥è¯¢è§£æã€ä¼˜åŒ–ã€æ‰§è¡Œç­‰æ“ä½œã€‚åœ¨è¿™ä¸€å±‚ï¼ŒSQL è¯­å¥ä¼šç»è¿‡è§£æã€ä¼˜åŒ–å™¨ä¼˜åŒ–ï¼Œç„¶åè½¬å‘åˆ°å­˜å‚¨å¼•æ“æ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœã€‚è¿™ä¸€å±‚åŒ…å«æŸ¥è¯¢è§£æå™¨ã€ä¼˜åŒ–å™¨ã€æ‰§è¡Œè®¡åˆ’ç”Ÿæˆå™¨ã€æ—¥å¿—æ¨¡å—ç­‰ã€‚</p><p>â‘¢ã€å­˜å‚¨å¼•æ“å±‚è´Ÿè´£æ•°æ®çš„å®é™…å­˜å‚¨å’Œæå–ã€‚MySQL æ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œå¦‚ InnoDBã€MyISAMã€Memory ç­‰ã€‚</p><h4 id="binlogå†™å…¥åœ¨å“ªä¸€å±‚" tabindex="-1"><a class="header-anchor" href="#binlogå†™å…¥åœ¨å“ªä¸€å±‚"><span>binlogå†™å…¥åœ¨å“ªä¸€å±‚ï¼Ÿ</span></a></h4><p>binlog åœ¨æœåŠ¡å±‚ï¼Œè´Ÿè´£è®°å½• SQL è¯­å¥çš„å˜åŒ–ã€‚å®ƒè®°å½•äº†æ‰€æœ‰å¯¹æ•°æ®åº“è¿›è¡Œæ›´æ”¹çš„æ“ä½œï¼Œç”¨äºæ•°æ®æ¢å¤ã€ä¸»ä»å¤åˆ¶ç­‰ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 21 æŠ–éŸ³å•†åŸä¸€é¢é¢è¯•åŸé¢˜ï¼šmysqlåˆ†ä¸ºå‡ å±‚ï¼Ÿbinlogå†™å…¥åœ¨å“ªä¸€å±‚</li></ol></blockquote><h3 id="_21-ğŸŒŸä¸€æ¡æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„" tabindex="-1"><a class="header-anchor" href="#_21-ğŸŒŸä¸€æ¡æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„"><span>21.ğŸŒŸä¸€æ¡æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</span></a></h3><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸€æ¡ SELECT è¯­å¥æ—¶ï¼ŒMySQL å¹¶ä¸ä¼šç›´æ¥å»ç£ç›˜è¯»å–æ•°æ®ï¼Œè€Œæ˜¯ç»è¿‡ 6 ä¸ªæ­¥éª¤æ¥è§£æã€ä¼˜åŒ–ã€æ‰§è¡Œï¼Œç„¶åå†è¿”å›ç»“æœã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240415102041.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šSQL æ‰§è¡Œ" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šSQL æ‰§è¡Œ</figcaption></figure><p>ç¬¬ä¸€æ­¥ï¼Œå®¢æˆ·ç«¯å‘é€ SQL æŸ¥è¯¢è¯­å¥åˆ° MySQL æœåŠ¡å™¨ã€‚</p><p>ç¬¬äºŒæ­¥ï¼ŒMySQL æœåŠ¡å™¨çš„è¿æ¥å™¨å¼€å§‹å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè·Ÿå®¢æˆ·ç«¯å»ºç«‹è¿æ¥ã€è·å–æƒé™ã€ç®¡ç†è¿æ¥ã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼Œè§£æå™¨å¯¹ SQL è¯­å¥è¿›è¡Œè§£æï¼Œæ£€æŸ¥è¯­å¥æ˜¯å¦ç¬¦åˆ SQL è¯­æ³•è§„åˆ™ï¼Œç¡®ä¿æ•°æ®åº“ã€è¡¨å’Œåˆ—éƒ½æ˜¯å­˜åœ¨çš„ï¼Œå¹¶å¤„ç† SQL è¯­å¥ä¸­çš„åç§°è§£æå’Œæƒé™éªŒè¯ã€‚</p><p>ç¬¬å››æ­¥ï¼Œä¼˜åŒ–å™¨è´Ÿè´£ç¡®å®š SQL è¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼Œè¿™åŒ…æ‹¬é€‰æ‹©ä½¿ç”¨å“ªäº›ç´¢å¼•ï¼Œä»¥åŠå†³å®šè¡¨ä¹‹é—´çš„è¿æ¥é¡ºåºç­‰ã€‚</p><p>ç¬¬äº”æ­¥ï¼Œæ‰§è¡Œå™¨ä¼šè°ƒç”¨å­˜å‚¨å¼•æ“çš„ API æ¥è¿›è¡Œæ•°æ®çš„è¯»å†™ã€‚</p><p>ç¬¬å…­æ­¥ï¼Œå­˜å‚¨å¼•æ“è´Ÿè´£æŸ¥è¯¢æ•°æ®ï¼Œå¹¶å°†æ‰§è¡Œç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯æ¥æ”¶åˆ°æŸ¥è¯¢ç»“æœï¼Œå®Œæˆè¿™æ¬¡æŸ¥è¯¢è¯·æ±‚ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 2 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL æ‰§è¡Œè¯­å¥çš„æ•´ä¸ªè¿‡ç¨‹äº†è§£å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 18 æˆéƒ½åˆ°å®¶é¢è¯•åŸé¢˜ï¼šmysqlä¸€æ¡æ•°æ®çš„æŸ¥è¯¢è¿‡ç¨‹</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦19ç•ªèŒ„å°è¯´ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQLä¸­ä¸€æ¡SQLçš„æ‰§è¡Œæµç¨‹</li></ol></blockquote><p>memoï¼š2025 å¹´ 3 æœˆ 8 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚</p><h3 id="_22-ä¸€æ¡æ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„" tabindex="-1"><a class="header-anchor" href="#_22-ä¸€æ¡æ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„"><span>22.ä¸€æ¡æ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</span></a></h3><p>æ€»çš„æ¥è¯´ï¼Œä¸€æ¡ UPDATE è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹åŒ…æ‹¬è¯»å–æ•°æ®é¡µã€åŠ é”è§£é”ã€äº‹åŠ¡æäº¤ã€æ—¥å¿—è®°å½•ç­‰å¤šä¸ªæ­¥éª¤ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-812fb038-39de-4204-ac9f-93d8b7448a18.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šupdate æ‰§è¡Œ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šupdate æ‰§è¡Œ</figcaption></figure><p>æ‹¿ <code>update test set a=1 where id=2</code> ä¸¾ä¾‹æ¥è¯´ï¼š</p><p>åœ¨äº‹åŠ¡å¼€å§‹å‰ï¼ŒMySQL éœ€è¦è®°å½•undo logï¼Œç”¨äºäº‹åŠ¡å›æ»šã€‚</p><table><thead><tr><th>æ“ä½œ</th><th>id</th><th>æ—§å€¼</th><th>æ–°å€¼</th></tr></thead><tbody><tr><td>update</td><td>2</td><td>N</td><td>1</td></tr></tbody></table><p>é™¤äº†è®°å½• undo logï¼Œå­˜å‚¨å¼•æ“è¿˜ä¼šå°†æ›´æ–°æ“ä½œå†™å…¥ redo logï¼ŒçŠ¶æ€æ ‡è®°ä¸º prepareï¼Œå¹¶ç¡®ä¿ redo log æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚è¿™ä¸€æ­¥å¯ä»¥ä¿è¯å³ä½¿ç³»ç»Ÿå´©æºƒï¼Œæ•°æ®ä¹Ÿèƒ½é€šè¿‡ redo log æ¢å¤åˆ°ä¸€è‡´çŠ¶æ€ã€‚</p><p>å†™å®Œ redo log åï¼ŒMySQL ä¼šè·å–è¡Œé”ï¼Œå°† a çš„å€¼ä¿®æ”¹ä¸º 1ï¼Œæ ‡è®°ä¸ºè„é¡µï¼Œæ­¤æ—¶æ•°æ®ä»ç„¶åœ¨å†…å­˜çš„ buffer pool ä¸­ï¼Œä¸ä¼šç«‹å³å†™å…¥ç£ç›˜ã€‚åå°çº¿ç¨‹ä¼šåœ¨é€‚å½“çš„æ—¶å€™å°†è„é¡µåˆ·ç›˜ï¼Œä»¥æé«˜æ€§èƒ½ã€‚</p><p>æœ€åæäº¤äº‹åŠ¡ï¼Œredo log ä¸­çš„è®°å½•è¢«æ ‡è®°ä¸º committedï¼Œè¡Œé”é‡Šæ”¾ã€‚</p><p>å¦‚æœ MySQL å¼€å¯äº† binlogï¼Œè¿˜ä¼šå°†æ›´æ–°æ“ä½œè®°å½•åˆ° binlog ä¸­ï¼Œä¸»è¦ç”¨äºä¸»ä»å¤åˆ¶ã€‚</p><p>ä»¥åŠæ•°æ®æ¢å¤ï¼Œå¯ä»¥ç»“åˆ redo log è¿›è¡Œç‚¹å¯¹ç‚¹çš„æ¢å¤ã€‚binlog çš„å†™å…¥é€šå¸¸å‘ç”Ÿåœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œä¸ redo log å…±åŒæ„æˆâ€œä¸¤é˜¶æ®µæäº¤â€ï¼Œç¡®ä¿ä¸¤è€…çš„ä¸€è‡´æ€§ã€‚</p><p>æ³¨æ„ï¼Œredo log çš„å†™å…¥æœ‰ä¸¤ä¸ªé˜¶æ®µçš„æäº¤ï¼Œä¸€æ˜¯ binlog å†™å…¥ä¹‹å‰<code>prepare</code> çŠ¶æ€çš„å†™å…¥ï¼ŒäºŒæ˜¯ binlog å†™å…¥ä¹‹å <code>commit</code> çŠ¶æ€çš„å†™å…¥ã€‚</p><p>memoï¼š2025 å¹´ 3 æœˆ 9 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚</p><h3 id="_23-è¯´è¯´-mysql-çš„æ®µåŒºé¡µè¡Œ-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_23-è¯´è¯´-mysql-çš„æ®µåŒºé¡µè¡Œ-è¡¥å……"><span>23.è¯´è¯´ MySQL çš„æ®µåŒºé¡µè¡Œï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 04 æœˆ 26 æ—¥å¢è¡¥</p></blockquote><p>æ¨èé˜…è¯»ï¼š<a href="https://www.cnblogs.com/ZhuChangwu/p/14035330.html" target="_blank" rel="noopener noreferrer">äº†è§£ MySQLçš„æ•°æ®è¡Œã€è¡Œæº¢å‡ºæœºåˆ¶å—ï¼Ÿ</a></p><p>MySQL æ˜¯ä»¥è¡¨çš„å½¢å¼å­˜å‚¨æ•°æ®çš„ï¼Œè€Œè¡¨ç©ºé—´çš„ç»“æ„åˆ™ç”±æ®µã€åŒºã€é¡µã€è¡Œç»„æˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240515110034.png" alt="ä¸è¦è¿·æ‹å‘å“¥ï¼šæ®µã€åŒºã€é¡µã€è¡Œ" tabindex="0" loading="lazy"><figcaption>ä¸è¦è¿·æ‹å‘å“¥ï¼šæ®µã€åŒºã€é¡µã€è¡Œ</figcaption></figure><p>â‘ ã€æ®µï¼šè¡¨ç©ºé—´ç”±å¤šä¸ªæ®µç»„æˆï¼Œå¸¸è§çš„æ®µæœ‰æ•°æ®æ®µã€ç´¢å¼•æ®µã€å›æ»šæ®µç­‰ã€‚</p><p>åˆ›å»ºç´¢å¼•æ—¶ä¼šåˆ›å»ºä¸¤ä¸ªæ®µï¼Œæ•°æ®æ®µå’Œç´¢å¼•æ®µï¼Œæ•°æ®æ®µç”¨æ¥å­˜å‚¨å¶å­èŠ‚ç‚¹ä¸­çš„æ•°æ®ï¼›ç´¢å¼•æ®µç”¨æ¥å­˜å‚¨éå¶å­èŠ‚ç‚¹çš„æ•°æ®ã€‚</p><p>å›æ»šæ®µåŒ…å«äº†äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ç”¨äºæ•°æ®å›æ»šçš„æ—§æ•°æ®ã€‚</p><p>â‘¡ã€åŒºï¼šæ®µç”±ä¸€ä¸ªæˆ–å¤šä¸ªåŒºç»„æˆï¼ŒåŒºæ˜¯ä¸€ç»„è¿ç»­çš„é¡µï¼Œé€šå¸¸åŒ…å« 64 ä¸ªè¿ç»­çš„é¡µï¼Œä¹Ÿå°±æ˜¯ 1M çš„æ•°æ®ã€‚</p><p>ä½¿ç”¨åŒºè€Œéå•ç‹¬çš„é¡µè¿›è¡Œæ•°æ®åˆ†é…å¯ä»¥ä¼˜åŒ–ç£ç›˜æ“ä½œï¼Œå‡å°‘ç£ç›˜å¯»é“æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§é‡æ•°æ®è¿›è¡Œè¯»å†™æ—¶ã€‚</p><p>â‘¢ã€é¡µï¼šé¡µæ˜¯ InnoDB å­˜å‚¨æ•°æ®çš„åŸºæœ¬å•å…ƒï¼Œæ ‡å‡†å¤§å°ä¸º 16 KBï¼Œç´¢å¼•æ ‘ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªé¡µã€‚</p><p>ä¹Ÿå°±æ„å‘³ç€æ•°æ®åº“æ¯æ¬¡è¯»å†™éƒ½æ˜¯ä»¥ 16 KB ä¸ºå•ä½çš„ï¼Œä¸€æ¬¡æœ€å°‘ä»ç£ç›˜ä¸­è¯»å– 16KB çš„æ•°æ®åˆ°å†…å­˜ï¼Œä¸€æ¬¡æœ€å°‘å†™å…¥ 16KB çš„æ•°æ®åˆ°ç£ç›˜ã€‚</p><p>â‘£ã€è¡Œï¼šInnoDB é‡‡ç”¨è¡Œå­˜å‚¨æ–¹å¼ï¼Œæ„å‘³ç€æ•°æ®æŒ‰ç…§è¡Œè¿›è¡Œç»„ç»‡å’Œç®¡ç†ï¼Œè¡Œæ•°æ®å¯èƒ½æœ‰å¤šä¸ªæ ¼å¼ï¼Œæ¯”å¦‚è¯´ COMPACTã€REDUNDANTã€DYNAMIC ç­‰ã€‚</p><p>MySQL 8.0 é»˜è®¤çš„è¡Œæ ¼å¼æ˜¯ DYNAMICï¼Œç”±COMPACT æ¼”å˜è€Œæ¥ï¼Œæ„å‘³ç€è¿™äº›æ•°æ®å¦‚æœè¶…è¿‡äº†é¡µå†…è”å­˜å‚¨çš„é™åˆ¶ï¼Œåˆ™ä¼šè¢«å­˜å‚¨åœ¨æº¢å‡ºé¡µä¸­ã€‚</p><p>å¯ä»¥é€šè¿‡ <code>show table status like &#39;%article%&#39;</code> æŸ¥çœ‹è¡Œæ ¼å¼ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240515123301.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè¡Œæ ¼å¼" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè¡Œæ ¼å¼</figcaption></figure><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div> <h2 id="å­˜å‚¨å¼•æ“" tabindex="-1"><a class="header-anchor" href="#å­˜å‚¨å¼•æ“"><span>å­˜å‚¨å¼•æ“</span></a></h2><h3 id="_24-ğŸŒŸmysql-æœ‰å“ªäº›å¸¸è§å­˜å‚¨å¼•æ“" tabindex="-1"><a class="header-anchor" href="#_24-ğŸŒŸmysql-æœ‰å“ªäº›å¸¸è§å­˜å‚¨å¼•æ“"><span>24.ğŸŒŸMySQL æœ‰å“ªäº›å¸¸è§å­˜å‚¨å¼•æ“ï¼Ÿ</span></a></h3><p>MySQL æ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œå¸¸è§çš„æœ‰ MyISAMã€InnoDBã€MEMORY ç­‰ã€‚</p><p>---è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ---</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240408073338.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå­˜å‚¨å¼•æ“" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå­˜å‚¨å¼•æ“</figcaption></figure><p>æˆ‘æ¥åšä¸€ä¸ªè¡¨æ ¼å¯¹æ¯”ï¼š</p><table><thead><tr><th>åŠŸèƒ½</th><th>InnoDB</th><th>MyISAM</th><th>MEMORY</th></tr></thead><tbody><tr><td>æ”¯æŒäº‹åŠ¡</td><td>Yes</td><td>No</td><td>No</td></tr><tr><td>æ”¯æŒå…¨æ–‡ç´¢å¼•</td><td>Yes</td><td>Yes</td><td>No</td></tr><tr><td>æ”¯æŒ B+æ ‘ç´¢å¼•</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>æ”¯æŒå“ˆå¸Œç´¢å¼•</td><td>Yes</td><td>No</td><td>Yes</td></tr><tr><td>æ”¯æŒå¤–é”®</td><td>Yes</td><td>No</td><td>No</td></tr></tbody></table><p>---è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ---</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è¿˜äº†è§£åˆ°ï¼š</p><p>â‘ ã€MySQL 5.5 ä¹‹å‰ï¼Œé»˜è®¤å­˜å‚¨å¼•æ“æ˜¯ MyISAMï¼Œ5.5 ä¹‹åæ˜¯ InnoDBã€‚</p><p>â‘¡ã€InnoDB æ”¯æŒçš„å“ˆå¸Œç´¢å¼•æ˜¯è‡ªé€‚åº”çš„ï¼Œä¸èƒ½äººä¸ºå¹²é¢„ã€‚</p><p>â‘¢ã€InnoDB ä» MySQL 5.6 å¼€å§‹ï¼Œæ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚</p><p>â‘£ã€InnoDB çš„æœ€å°è¡¨ç©ºé—´ç•¥å°äº 10Mï¼Œæœ€å¤§è¡¨ç©ºé—´å–å†³äºé¡µé¢å¤§å°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240408074630.png" alt="MySQL å®˜ç½‘ï¼šinnodb-limits.html" tabindex="0" loading="lazy"><figcaption>MySQL å®˜ç½‘ï¼šinnodb-limits.html</figcaption></figure><h4 id="å¦‚ä½•åˆ‡æ¢-mysql-çš„æ•°æ®å¼•æ“" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•åˆ‡æ¢-mysql-çš„æ•°æ®å¼•æ“"><span>å¦‚ä½•åˆ‡æ¢ MySQL çš„æ•°æ®å¼•æ“ï¼Ÿ</span></a></h4><p>å¯ä»¥é€šè¿‡ alter table è¯­å¥æ¥åˆ‡æ¢ MySQL çš„æ•°æ®å¼•æ“ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> your_table_name ENGINE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">InnoDB;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¸è¿‡ä¸å»ºè®®ï¼Œåº”è¯¥æå‰è®¾è®¡å¥½åˆ°åº•ç”¨å“ªä¸€ç§å­˜å‚¨å¼•æ“ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL æ”¯æŒå“ªäº›å­˜å‚¨å¼•æ“?</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç”¨å‹é¢è¯•åŸé¢˜ï¼šinnodb å¼•æ“å’Œ hash å¼•æ“æœ‰ä»€ä¹ˆåŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å›½ä¼é›¶ç¢é¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šMySQL çš„å­˜å‚¨å¼•æ“</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 4 äº‘å®ä¹ é¢è¯•åŸé¢˜ï¼šmysqlçš„æ•°æ®å¼•æ“æœ‰å“ªäº›, åŒºåˆ«(innodb,MyISAM,Memory)</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œç³»é¢ç»åŒå­¦ 19 é¥¿äº†ä¹ˆé¢è¯•åŸé¢˜ï¼šå­˜å‚¨å¼•æ“ä»‹ç»</li></ol></blockquote><p>memoï¼š2025 å¹´ 3 æœˆ 10 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚</p><h3 id="_25-å­˜å‚¨å¼•æ“åº”è¯¥æ€ä¹ˆé€‰æ‹©" tabindex="-1"><a class="header-anchor" href="#_25-å­˜å‚¨å¼•æ“åº”è¯¥æ€ä¹ˆé€‰æ‹©"><span>25.å­˜å‚¨å¼•æ“åº”è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ</span></a></h3><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨é»˜è®¤çš„ InnoDB å°±å¯ä»¥äº†ï¼ŒInnoDB å¯ä»¥æä¾›äº‹åŠ¡ã€è¡Œçº§é”ã€å¤–é”®ã€B+ æ ‘ç´¢å¼•ç­‰èƒ½åŠ›ã€‚</p><p>MyISAM é€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</p><p>MEMORY é€‚åˆä¸´æ—¶è¡¨ï¼Œæ•°æ®é‡ä¸å¤§çš„æƒ…å†µã€‚å› ä¸ºæ•°æ®éƒ½å­˜æ”¾åœ¨å†…å­˜ï¼Œæ‰€ä»¥é€Ÿåº¦éå¸¸å¿«ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQLçš„InnoDBç‰¹ç‚¹ï¼Ÿä¸ºä»€ä¹ˆç”¨B+æ ‘ï¼Ÿè€Œä¸æ˜¯Bæ ‘ï¼ŒåŒºåˆ«ï¼Ÿ</li></ol></blockquote><h3 id="_26-innodb-å’Œ-myisam-ä¸»è¦æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_26-innodb-å’Œ-myisam-ä¸»è¦æœ‰ä»€ä¹ˆåŒºåˆ«"><span>26.InnoDB å’Œ MyISAM ä¸»è¦æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h3><p>InnoDB å’Œ MyISAM çš„æœ€å¤§åŒºåˆ«åœ¨äºäº‹åŠ¡æ”¯æŒå’Œé”æœºåˆ¶ã€‚InnoDB æ”¯æŒäº‹åŠ¡ã€è¡Œçº§é”ï¼Œé€‚åˆå¤§å¤šæ•°ä¸šåŠ¡ç³»ç»Ÿï¼›è€Œ MyISAM ä¸æ”¯æŒäº‹åŠ¡ï¼Œç”¨çš„æ˜¯è¡¨é”ï¼ŒæŸ¥è¯¢å¿«ä½†å†™å…¥æ€§èƒ½å·®ï¼Œé€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-b7aa040e-a3a7-4133-8c43-baccc3c8d012.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šInnoDB å’Œ MyISAM ä¸»è¦æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šInnoDB å’Œ MyISAM ä¸»è¦æœ‰ä»€ä¹ˆåŒºåˆ«</figcaption></figure><p>å¦å¤–ï¼Œä»å­˜å‚¨ç»“æ„ä¸Šæ¥è¯´ï¼ŒMyISAM ç”¨ä¸‰ç§æ ¼å¼çš„æ–‡ä»¶æ¥å­˜å‚¨ï¼Œ.frm æ–‡ä»¶å­˜å‚¨è¡¨çš„å®šä¹‰ï¼›.MYD å­˜å‚¨æ•°æ®ï¼›.MYI å­˜å‚¨ç´¢å¼•ï¼›è€Œ InnoDB ç”¨ä¸¤ç§æ ¼å¼çš„æ–‡ä»¶æ¥å­˜å‚¨ï¼Œ.frm æ–‡ä»¶å­˜å‚¨è¡¨çš„å®šä¹‰ï¼›.ibd å­˜å‚¨æ•°æ®å’Œç´¢å¼•ã€‚</p><p>ä»ç´¢å¼•ç±»å‹ä¸Šæ¥è¯´ï¼ŒMyISAM ä¸ºéèšç°‡ç´¢å¼•ï¼Œç´¢å¼•å’Œæ•°æ®åˆ†å¼€å­˜å‚¨ï¼Œç´¢å¼•ä¿å­˜çš„æ˜¯æ•°æ®æ–‡ä»¶çš„æŒ‡é’ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240403130104.png" alt="æœªè§åˆå¢¨ï¼šMyIsam" tabindex="0" loading="lazy"><figcaption>æœªè§åˆå¢¨ï¼šMyIsam</figcaption></figure><p>InnoDB ä¸ºèšç°‡ç´¢å¼•ï¼Œç´¢å¼•å’Œæ•°æ®ä¸åˆ†å¼€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240403130508.png" alt="yangh124ï¼šInnoDB" tabindex="0" loading="lazy"><figcaption>yangh124ï¼šInnoDB</figcaption></figure><p>æ›´ç»†å¾®çš„å±‚é¢ä¸Šæ¥è®²ï¼ŒMyISAM ä¸æ”¯æŒå¤–é”®ï¼Œå¯ä»¥æ²¡æœ‰ä¸»é”®ï¼Œè¡¨çš„å…·ä½“è¡Œæ•°å­˜å‚¨åœ¨è¡¨çš„å±æ€§ä¸­ï¼ŒæŸ¥è¯¢æ—¶å¯ä»¥ç›´æ¥è¿”å›ï¼›InnoDB æ”¯æŒå¤–é”®ï¼Œå¿…é¡»æœ‰ä¸»é”®ï¼Œå…·ä½“è¡Œæ•°éœ€è¦æ‰«ææ•´ä¸ªè¡¨æ‰èƒ½è¿”å›ï¼Œæœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ä¼šæ‰«æç´¢å¼•ã€‚</p><h4 id="innodbçš„å†…å­˜ç»“æ„äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#innodbçš„å†…å­˜ç»“æ„äº†è§£å—"><span>InnoDBçš„å†…å­˜ç»“æ„äº†è§£å—ï¼Ÿ</span></a></h4><blockquote><p>2025 å¹´ 04 æœˆ 04 æ—¥å¢è¡¥</p></blockquote><p>InnoDB çš„å†…å­˜åŒºåŸŸä¸»è¦æœ‰ä¸¤å—ï¼Œbuffer pool å’Œ log bufferã€‚ buffer pool ç”¨äºç¼“å­˜æ•°æ®é¡µå’Œç´¢å¼•é¡µï¼Œæå‡è¯»å†™æ€§èƒ½ï¼›log buffer ç”¨äºç¼“å­˜ redo logï¼Œæå‡å†™å…¥æ€§èƒ½ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404111739.png" alt="WindWantï¼šInnoDB å­˜å‚¨å¼•æ“æ•´ä½“æ¶æ„å›¾" tabindex="0" loading="lazy"><figcaption>WindWantï¼šInnoDB å­˜å‚¨å¼•æ“æ•´ä½“æ¶æ„å›¾</figcaption></figure><h4 id="æ•°æ®é¡µçš„ç»“æ„äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#æ•°æ®é¡µçš„ç»“æ„äº†è§£å—"><span>æ•°æ®é¡µçš„ç»“æ„äº†è§£å—ï¼Ÿ</span></a></h4><p>InnoDB çš„æ•°æ®é¡µç”± 7 éƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­æ–‡ä»¶å¤´ã€é¡µå¤´å’Œæ–‡ä»¶å°¾çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œåˆ†åˆ«ä¸º 38ã€56 å’Œ 8 ä¸ªå­—èŠ‚ï¼Œç”¨æ¥æ ‡è®°è¯¥é¡µçš„ä¸€äº›ä¿¡æ¯ã€‚è¡Œè®°å½•ã€ç©ºé—²ç©ºé—´å’Œé¡µç›®å½•çš„å¤§å°æ˜¯åŠ¨æ€çš„ï¼Œä¸ºå®é™…çš„è¡Œè®°å½•å­˜å‚¨ç©ºé—´ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404113446.png" alt="nekolr&#39;s blogï¼šæ•°æ®é¡µç»“æ„" tabindex="0" loading="lazy"><figcaption>nekolr&#39;s blogï¼šæ•°æ®é¡µç»“æ„</figcaption></figure><p>æ¥ä¸ªè¡¨æ ¼æ€»ç»“ä¸‹ï¼š</p><table><thead><tr><th>åç§°</th><th>ä¸­æ–‡å</th><th>å¤§å°ï¼ˆå•ä½ï¼šBï¼‰</th><th>æè¿°</th></tr></thead><tbody><tr><td>File Header</td><td>æ–‡ä»¶å¤´éƒ¨</td><td>38</td><td>é¡µçš„ä¸€äº›é€šç”¨ä¿¡æ¯</td></tr><tr><td>Page Header</td><td>é¡µé¢å¤´éƒ¨</td><td>56</td><td>æ•°æ®é¡µä¸“æœ‰çš„ä¸€äº›ä¿¡æ¯</td></tr><tr><td>Infimum + Supermum</td><td>æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•</td><td>26</td><td>ä¸¤ä¸ªè™šæ‹Ÿçš„è¡Œè®°å½•</td></tr><tr><td>User Records</td><td>ç”¨æˆ·çœŸå®è®°å½•</td><td>ä¸ç¡®å®š</td><td>å®é™…å­˜å‚¨çš„è¡Œè®°å½•å†…å®¹</td></tr><tr><td>Free Space</td><td>ç©ºé—²ç©ºé—´</td><td>ä¸ç¡®å®š</td><td>é¡µä¸­å°šæœªä½¿ç”¨çš„ç©ºé—´</td></tr><tr><td>Page Directory</td><td>é¡µé¢ç›®å½•</td><td>ä¸ç¡®å®š</td><td>é¡µä¸­çš„æŸäº›è®°å½•çš„ç›¸å¯¹ä½ç½®</td></tr><tr><td>File Trailer</td><td>æ–‡ä»¶å°¾éƒ¨</td><td>8</td><td>æ ¡éªŒé¡µæ˜¯å¦å®Œæ•´</td></tr></tbody></table><p>çœŸå®çš„è®°å½•ä¼šæŒ‰ç…§æŒ‡å®šçš„è¡Œæ ¼å¼å­˜å‚¨åˆ° User Records ä¸­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404115235.png" alt="GrowthDBAï¼šUser Records" tabindex="0" loading="lazy"><figcaption>GrowthDBAï¼šUser Records</figcaption></figure><p>æ¯ä¸ªæ•°æ®é¡µçš„ File Header éƒ½æœ‰ä¸€ä¸ªä¸Šä¸€é¡µå’Œä¸‹ä¸€é¡µçš„ç¼–å·ï¼Œæ‰€æœ‰çš„æ•°æ®é¡µä¼šå½¢æˆä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404115048.png" alt="GrowthDBAï¼šæ•°æ®é¡µé€šè¿‡åŒå‘é“¾è¡¨è¿æ¥" tabindex="0" loading="lazy"><figcaption>GrowthDBAï¼šæ•°æ®é¡µé€šè¿‡åŒå‘é“¾è¡¨è¿æ¥</figcaption></figure><p>åœ¨ InnoDB ä¸­ï¼Œé»˜è®¤çš„é¡µå¤§å°æ˜¯ 16KBã€‚å¯ä»¥é€šè¿‡ <code>show variables like &#39;innodb_page_size&#39;;</code> æŸ¥çœ‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322135441.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šé¡µçš„å¤§å°" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šé¡µçš„å¤§å°</figcaption></figure><p>æ¨èé˜…è¯»ï¼š<a href="https://www.modb.pro/db/139052" target="_blank" rel="noopener noreferrer">MySQLä¹‹æ•°æ®é¡µç»“æ„</a></p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMyISAM å’Œ InnoDB çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 9 ä¸€é¢é¢è¯•åŸé¢˜ï¼šmysqlå­˜å‚¨çš„æ•°æ®éƒ½æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 3 æœˆ 11 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚</p><h3 id="_27-innodb-çš„-buffer-pooläº†è§£å—-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_27-innodb-çš„-buffer-pooläº†è§£å—-è¡¥å……"><span>27. InnoDB çš„ Buffer Pooläº†è§£å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 11 æœˆ 04 æ—¥å¢è¡¥</p></blockquote><p>Buffer Pool æ˜¯ InnoDB å­˜å‚¨å¼•æ“ä¸­çš„ä¸€ä¸ªå†…å­˜ç¼“å†²åŒºï¼Œå®ƒä¼šå°†ç»å¸¸ä½¿ç”¨çš„æ•°æ®é¡µã€ç´¢å¼•é¡µåŠ è½½è¿›å†…å­˜ï¼Œè¯»çš„æ—¶å€™å…ˆæŸ¥è¯¢ Buffer Poolï¼Œå¦‚æœå‘½ä¸­å°±ä¸ç”¨è®¿é—®ç£ç›˜äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312083102.png" alt="Nuwan Weerasinhgeï¼šMySQL InnoDB Buffer Pool" tabindex="0" loading="lazy"><figcaption>Nuwan Weerasinhgeï¼šMySQL InnoDB Buffer Pool</figcaption></figure><p>å¦‚æœæ²¡æœ‰å‘½ä¸­ï¼Œå°±ä»ç£ç›˜è¯»å–ï¼Œå¹¶åŠ è½½åˆ° Buffer Poolï¼Œæ­¤æ—¶å¯èƒ½ä¼šè§¦å‘é¡µæ·˜æ±°ï¼Œå°†ä¸å¸¸ç”¨çš„é¡µç§»å‡º Buffer Poolã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104202752.png" alt="æå®¢æ—¶é—´ï¼šæ”¹è‰¯çš„ LRU ç®—æ³•" tabindex="0" loading="lazy"><figcaption>æå®¢æ—¶é—´ï¼šæ”¹è‰¯çš„ LRU ç®—æ³•</figcaption></figure><p>å†™æ“ä½œæ—¶ä¸ä¼šç›´æ¥å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯å…ˆä¿®æ”¹å†…å­˜ä¸­çš„é¡µï¼Œæ­¤æ—¶é¡µè¢«æ ‡è®°ä¸ºè„é¡µï¼Œåå°çº¿ç¨‹ä¼šå®šæœŸå°†è„é¡µåˆ·æ–°åˆ°ç£ç›˜ã€‚</p><p>Buffer Pool å¯ä»¥æ˜¾è‘—å‡å°‘ç£ç›˜çš„è¯»å†™æ¬¡æ•°ï¼Œä»è€Œæå‡ MySQL çš„è¯»å†™æ€§èƒ½ã€‚</p><h4 id="buffer-pool-çš„é»˜è®¤å¤§å°æ˜¯å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#buffer-pool-çš„é»˜è®¤å¤§å°æ˜¯å¤šå°‘"><span>Buffer Pool çš„é»˜è®¤å¤§å°æ˜¯å¤šå°‘ï¼Ÿ</span></a></h4><p>æˆ‘æœ¬æœºä¸Š InnoDB çš„ Buffer Pool é»˜è®¤å¤§å°æ˜¯ 128MBã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW VARIABLES </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;innodb_buffer_pool_size&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦å¤–ï¼Œåœ¨å…·æœ‰ 1GB-4GB RAM çš„ç³»ç»Ÿä¸Šï¼Œé»˜è®¤å€¼ä¸ºç³»ç»Ÿ RAM çš„ 25%ï¼›åœ¨å…·æœ‰è¶…è¿‡ 4GB RAM çš„ç³»ç»Ÿä¸Šï¼Œé»˜è®¤å€¼ä¸ºç³»ç»Ÿ RAM çš„ 50%ï¼Œä½†ä¸è¶…è¿‡ 4GBã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312084307.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šbuffer_pool çš„é»˜è®¤å¤§å°" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šbuffer_pool çš„é»˜è®¤å¤§å°</figcaption></figure><h4 id="innodb-å¯¹-lru-ç®—æ³•çš„ä¼˜åŒ–äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#innodb-å¯¹-lru-ç®—æ³•çš„ä¼˜åŒ–äº†è§£å—"><span>InnoDB å¯¹ LRU ç®—æ³•çš„ä¼˜åŒ–äº†è§£å—ï¼Ÿ</span></a></h4><p>äº†è§£ï¼ŒInnoDB å¯¹ LRU ç®—æ³•è¿›è¡Œäº†æ”¹è‰¯ï¼Œæœ€è¿‘è®¿é—®çš„æ•°æ®å¹¶ä¸ç›´æ¥æ”¾åˆ° LRU é“¾è¡¨çš„å¤´éƒ¨ï¼Œè€Œæ˜¯æ”¾åœ¨ä¸€ä¸ªå« midpoiont çš„ä½ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œmidpoint ä½äº LRU åˆ—è¡¨çš„ 5/8 å¤„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312085209.png" alt="smartkeyerrorï¼šInnoDB çš„ LRU" tabindex="0" loading="lazy"><figcaption>smartkeyerrorï¼šInnoDB çš„ LRU</figcaption></figure><p>æ¯”å¦‚ Buffer Pool æœ‰ 100 é¡µï¼Œæ–°é¡µæ’å…¥çš„ä½ç½®å¤§æ¦‚æ˜¯åœ¨ç¬¬ 80 é¡µï¼›å½“é¡µæ•°æ®è¢«é¢‘ç¹è®¿é—®åï¼Œå†å°†å…¶ç§»åŠ¨åˆ° young åŒºï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯çƒ­ç‚¹é¡µèƒ½é•¿æ—¶é—´ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œä¸å®¹æ˜“è¢«æŒ¤å‡ºå»ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>å¯ä»¥é€šè¿‡ <code>innodb_old_blocks_pct</code> å‚æ•°æ¥è°ƒæ•´ Buffer Pool ä¸­ old å’Œ young åŒºçš„æ¯”ä¾‹ï¼›é€šè¿‡ <code>innodb_old_blocks_time</code> å‚æ•°æ¥è°ƒæ•´é¡µåœ¨ young åŒºçš„åœç•™æ—¶é—´ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312093325.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯¹ buffer pool è¿›è¡Œè°ƒæ•´" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯¹ buffer pool è¿›è¡Œè°ƒæ•´</figcaption></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒLRU é“¾è¡¨ä¸­ old åŒºå  37%ï¼›åŒä¸€é¡µå†æ¬¡è®¿é—®æå‡çš„æœ€å°æ—¶é—´é—´éš”æ˜¯ 1000 æ¯«ç§’ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæŸé¡µåœ¨ 1 ç§’å†…è¢«å¤šæ¬¡è®¿é—®ï¼Œåªä¼šè®¡ç®—ä¸€æ¬¡ï¼Œä¸ä¼šç«‹åˆ»å‡çº§ä¸ºçƒ­ç‚¹é¡µï¼Œé˜²æ­¢çŸ­æ—¶é—´æ‰¹é‡è®¿é—®å¯¼è‡´ç¼“å­˜æ±¡æŸ“ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 15 ç‚¹è¯„åç«¯æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šè¯´è¯´ bufferpool</li></ol></blockquote><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div><p>memoï¼š2025 å¹´ 3 æœˆ 12 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ç»§ç»­ç»™å¤§å®¶ä¸€ä¸ªå–œæŠ¥ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹æŠ¥å–œ</a>è¯´ç¤¾æ‹›æ‹¿åˆ°äº†äº¬ä¸œå’Œç¾å›¢çš„ offerï¼Œåç»­è¡¥å……è¯´æ»´æ»´ä¹Ÿè¿‡äº†ï¼Œæˆ‘åªèƒ½è¯´å¤ªå¼ºäº†å‘€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250312172018.png" alt="ä»Šå¤©æœ‰çƒå‹æ‹¿åˆ°äº¬ä¸œå’Œç¾å›¢çš„ offer" tabindex="0" loading="lazy"><figcaption>ä»Šå¤©æœ‰çƒå‹æ‹¿åˆ°äº¬ä¸œå’Œç¾å›¢çš„ offer</figcaption></figure><h2 id="æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—"><span>æ—¥å¿—</span></a></h2><h3 id="_28-ğŸŒŸmysql-æ—¥å¿—æ–‡ä»¶æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_28-ğŸŒŸmysql-æ—¥å¿—æ–‡ä»¶æœ‰å“ªäº›"><span>28.ğŸŒŸMySQL æ—¥å¿—æ–‡ä»¶æœ‰å“ªäº›ï¼Ÿ</span></a></h3><p>æœ‰ 6 å¤§ç±»ï¼Œå…¶ä¸­é”™è¯¯æ—¥å¿—ç”¨äºé—®é¢˜è¯Šæ–­ï¼Œæ…¢æŸ¥è¯¢æ—¥å¿—ç”¨äº SQL æ€§èƒ½åˆ†æï¼Œgeneral log ç”¨äºè®°å½•æ‰€æœ‰çš„ SQL è¯­å¥ï¼Œbinlog ç”¨äºä¸»ä»å¤åˆ¶å’Œæ•°æ®æ¢å¤ï¼Œredo log ç”¨äºä¿è¯äº‹åŠ¡æŒä¹…æ€§ï¼Œundo log ç”¨äºäº‹åŠ¡å›æ»šå’Œ MVCCã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-c0ef6e68-bb33-48fc-b3a2-b9cdadd8e403.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šMySQLçš„ä¸»è¦æ—¥å¿—" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šMySQLçš„ä¸»è¦æ—¥å¿—</figcaption></figure><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>â‘ ã€<strong>é”™è¯¯æ—¥å¿—</strong>ï¼ˆError Logï¼‰ï¼šè®°å½• MySQL æœåŠ¡å™¨å¯åŠ¨ã€è¿è¡Œæˆ–åœæ­¢æ—¶å‡ºç°çš„é—®é¢˜ã€‚</p><p>â‘¡ã€<strong>æ…¢æŸ¥è¯¢æ—¥å¿—</strong>ï¼ˆSlow Query Logï¼‰ï¼šè®°å½•æ‰§è¡Œæ—¶é—´è¶…è¿‡ long_query_time å€¼çš„æ‰€æœ‰ SQL è¯­å¥ã€‚è¿™ä¸ªæ—¶é—´å€¼æ˜¯å¯é…ç½®çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½æ˜¯å…³é—­çš„ã€‚</p><p>â‘¢ã€<strong>ä¸€èˆ¬æŸ¥è¯¢æ—¥å¿—</strong>ï¼ˆGeneral Query Logï¼‰ï¼šè®°å½• MySQL æœåŠ¡å™¨çš„å¯åŠ¨å…³é—­ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯çš„è¿æ¥ä¿¡æ¯ï¼Œä»¥åŠæ›´æ–°ã€æŸ¥è¯¢çš„ SQL è¯­å¥ç­‰ã€‚</p><p>â‘£ã€<strong>äºŒè¿›åˆ¶æ—¥å¿—</strong>ï¼ˆBinary Logï¼‰ï¼šè®°å½•æ‰€æœ‰ä¿®æ”¹æ•°æ®åº“çŠ¶æ€çš„ SQL è¯­å¥ï¼Œä»¥åŠæ¯ä¸ªè¯­å¥çš„æ‰§è¡Œæ—¶é—´ï¼Œå¦‚ INSERTã€UPDATEã€DELETE ç­‰ï¼Œä½†ä¸åŒ…æ‹¬ SELECT å’Œ SHOW è¿™ç±»çš„æ“ä½œã€‚</p><p>â‘¤ã€<strong>é‡åšæ—¥å¿—</strong>ï¼ˆRedo Logï¼‰ï¼šè®°å½•å¯¹äº InnoDB è¡¨çš„æ¯ä¸ªå†™æ“ä½œï¼Œä¸æ˜¯ SQL çº§åˆ«çš„ï¼Œè€Œæ˜¯ç‰©ç†çº§åˆ«çš„ï¼Œä¸»è¦ç”¨äºå´©æºƒæ¢å¤ã€‚</p><p>â‘¥ã€<strong>å›æ»šæ—¥å¿—</strong>ï¼ˆUndo Logï¼Œæˆ–è€…å«äº‹åŠ¡æ—¥å¿—ï¼‰ï¼šè®°å½•æ•°æ®è¢«ä¿®æ”¹å‰çš„å€¼ï¼Œç”¨äºäº‹åŠ¡çš„å›æ»šã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><h4 id="è¯·é‡ç‚¹è¯´è¯´-binlog" tabindex="-1"><a class="header-anchor" href="#è¯·é‡ç‚¹è¯´è¯´-binlog"><span>è¯·é‡ç‚¹è¯´è¯´ binlogï¼Ÿ</span></a></h4><p>æ¨èé˜…è¯»ï¼š<a href="https://www.cnblogs.com/rickiyang/p/13841811.html" target="_blank" rel="noopener noreferrer">å¸¦ä½ äº†è§£ MySQL Binlog ä¸ä¸ºäººçŸ¥çš„ç§˜å¯†</a></p><p>binlog æ˜¯ä¸€ç§ç‰©ç†æ—¥å¿—ï¼Œä¼šåœ¨ç£ç›˜ä¸Šè®°å½•æ•°æ®åº“çš„æ‰€æœ‰ä¿®æ”¹æ“ä½œã€‚</p><p>å¦‚æœè¯¯åˆ äº†æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨ binlog è¿›è¡Œå›é€€åˆ°è¯¯åˆ ä¹‹å‰çš„çŠ¶æ€ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># æ­¥éª¤1ï¼šæ¢å¤å…¨é‡å¤‡ä»½</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mysql -u </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">root</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -p </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> full_backup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">sql</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># æ­¥éª¤2ï¼šåº”ç”¨Binlogåˆ°æŒ‡å®šæ—¶é—´ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mysqlbinlog </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--start-datetime=&quot;2025-03-13 14:00:00&quot; --stop-datetime=&quot;2025-03-13 15:00:00&quot; binlog.000001 | mysql -u root -p</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè¦æ­å»ºä¸»ä»å¤åˆ¶ï¼Œå°±å¯ä»¥è®©ä»åº“å®šæ—¶è¯»å–ä¸»åº“çš„ binlogã€‚</p><p>MySQL æä¾›äº†ä¸‰ç§æ ¼å¼çš„ binlogï¼šStatementã€Row å’Œ Mixedï¼Œåˆ†åˆ«å¯¹åº” SQL è¯­å¥çº§åˆ«ã€è¡Œçº§åˆ«å’Œæ··åˆçº§åˆ«ï¼Œé»˜è®¤ä¸ºè¡Œçº§åˆ«ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250313151551.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQL é»˜è®¤çš„ binlogæ ¼å¼" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQL é»˜è®¤çš„ binlogæ ¼å¼</figcaption></figure><p>ä»åç¼€åä¸Šæ¥çœ‹ï¼Œbinlog æ–‡ä»¶åˆ†ä¸ºä¸¤ç±»ï¼šä»¥ .index ç»“å°¾çš„ç´¢å¼•æ–‡ä»¶ï¼Œä»¥ .00000* ç»“å°¾çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ã€‚</p><p>binlog é»˜è®¤æ˜¯æ²¡æœ‰å¯ç”¨çš„ã€‚</p><p>ç”Ÿäº§ç¯å¢ƒä¸­æ˜¯ä¸€å®šè¦å¯ç”¨çš„ï¼Œå¯ä»¥é€šè¿‡åœ¨ my.cnf æ–‡ä»¶ä¸­é…ç½® log_bin å‚æ•°ï¼Œä»¥å¯ç”¨ binlogã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>log_bin = mysql-bin #å¼€å¯binlog</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#mysql-bin.*æ—¥å¿—æ–‡ä»¶æœ€å¤§å­—èŠ‚ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰</span></span>
<span class="line"><span>#è®¾ç½®æœ€å¤§100MB</span></span>
<span class="line"><span>max_binlog_size=104857600</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#è®¾ç½®äº†åªä¿ç•™7å¤©BINLOGï¼ˆå•ä½ï¼šå¤©ï¼‰</span></span>
<span class="line"><span>expire_logs_days = 7</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#binlogæ—¥å¿—åªè®°å½•æŒ‡å®šåº“çš„æ›´æ–°</span></span>
<span class="line"><span>#binlog-do-db=db_name</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#binlogæ—¥å¿—ä¸è®°å½•æŒ‡å®šåº“çš„æ›´æ–°</span></span>
<span class="line"><span>#binlog-ignore-db=db_name</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#å†™ç¼“å†²å¤šå°‘æ¬¡ï¼Œåˆ·ä¸€æ¬¡ç£ç›˜ï¼Œé»˜è®¤0</span></span>
<span class="line"><span>sync_binlog=0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="binlog-çš„é…ç½®å‚æ•°éƒ½äº†è§£å“ªäº›" tabindex="-1"><a class="header-anchor" href="#binlog-çš„é…ç½®å‚æ•°éƒ½äº†è§£å“ªäº›"><span>binlog çš„é…ç½®å‚æ•°éƒ½äº†è§£å“ªäº›ï¼Ÿ</span></a></h4><p><code>log_bin = mysql-bin</code> ç”¨äºå¯ç”¨ binlogï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ MySQL çš„æ•°æ®ç›®å½•ä¸­æ‰¾åˆ° db-bin.000001ã€db-bin.000002 ç­‰æ—¥å¿—æ–‡ä»¶ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240417074049.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šbinlog æ–‡ä»¶" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šbinlog æ–‡ä»¶</figcaption></figure><p><code>max_binlog_size=104857600</code> ç”¨äºè®¾ç½®æ¯ä¸ª binlog æ–‡ä»¶çš„å¤§å°ï¼Œä¸å»ºè®®è®¾ç½®å¤ªå¤§ï¼Œç½‘ç»œä¼ é€èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚</p><p>å½“ binlog æ–‡ä»¶è¾¾åˆ° max_binlog_size æ—¶ï¼ŒMySQL ä¼šå…³é—­å½“å‰æ–‡ä»¶å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ binlog æ–‡ä»¶ã€‚</p><p><code>expire_logs_days = 7</code> ç”¨äºè®¾ç½® binlog æ–‡ä»¶çš„è‡ªåŠ¨è¿‡æœŸæ—¶é—´ä¸º 7 å¤©ã€‚è¿‡æœŸçš„ binlog æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚é˜²æ­¢é•¿æ—¶é—´ç´¯ç§¯çš„ binlog æ–‡ä»¶å ç”¨è¿‡å¤šå­˜å‚¨ç©ºé—´ï¼Œ<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>æ‰€åœ¨çš„é¡¹ç›®æ˜¯ä¸ç‰ˆæœåŠ¡å™¨ï¼Œæ‰€ä»¥è¿™ä¸ªé…ç½®å¾ˆé‡è¦ã€‚</p><p><code>binlog-do-db=db_name</code>ï¼ŒæŒ‡å®šå“ªäº›æ•°æ®åº“è¡¨çš„æ›´æ–°åº”è¯¥è¢«è®°å½•ã€‚</p><p><code>binlog-ignore-db=db_name</code>ï¼ŒæŒ‡å®šå¿½ç•¥å“ªäº›æ•°æ®åº“è¡¨çš„æ›´æ–°ã€‚</p><p><code>sync_binlog=0</code>ï¼Œè®¾ç½®æ¯å¤šå°‘æ¬¡ binlog å†™æ“ä½œä¼šè§¦å‘ä¸€æ¬¡ç£ç›˜åŒæ­¥æ“ä½œã€‚é»˜è®¤å€¼ä¸º 0ï¼Œè¡¨ç¤º MySQL ä¸ä¼šä¸»åŠ¨è§¦å‘åŒæ­¥æ“ä½œï¼Œè€Œæ˜¯ä¾èµ–æ“ä½œç³»ç»Ÿçš„ç£ç›˜ç¼“å­˜ç­–ç•¥ã€‚</p><p>å³å½“æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œæ•°æ®ä¼šå…ˆå†™å…¥ç¼“å­˜ï¼Œå½“ç¼“å­˜åŒºæ»¡äº†å†ç”±æ“ä½œç³»ç»Ÿå°†æ•°æ®ä¸€æ¬¡æ€§åˆ·å…¥ç£ç›˜ã€‚</p><p>å¦‚æœè®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºæ¯æ¬¡ binlog å†™æ“ä½œåéƒ½ä¼šåŒæ­¥åˆ°ç£ç›˜ï¼Œè™½ç„¶å¯ä»¥ä¿è¯æ•°æ®èƒ½å¤ŸåŠæ—¶å†™å…¥ç£ç›˜ï¼Œä½†ä¼šé™ä½æ€§èƒ½ã€‚</p><p>å¯ä»¥é€šè¿‡ <code>show variables like &#39;%log_bin%&#39;;</code> æŸ¥çœ‹ binlog æ˜¯å¦å¼€å¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240326102701.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¼€å¯ binlog" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¼€å¯ binlog</figcaption></figure><h4 id="æœ‰äº†binlogä¸ºä»€ä¹ˆè¿˜è¦undolog-redolog" tabindex="-1"><a class="header-anchor" href="#æœ‰äº†binlogä¸ºä»€ä¹ˆè¿˜è¦undolog-redolog"><span>æœ‰äº†binlogä¸ºä»€ä¹ˆè¿˜è¦undolog redologï¼Ÿ</span></a></h4><p>binlog å±äº Server å±‚ï¼Œä¸å­˜å‚¨å¼•æ“æ— å…³ï¼Œæ— æ³•ç›´æ¥æ“ä½œç‰©ç†æ•°æ®é¡µã€‚è€Œ redo log å’Œ undo log æ˜¯ InnoDB å­˜å‚¨å¼•æ“å®ç° ACID çš„åŸºçŸ³ã€‚</p><p>binlog å…³æ³¨çš„æ˜¯é€»è¾‘å˜æ›´çš„å…¨å±€è®°å½•ï¼›redo log ç”¨äºç¡®ä¿ç‰©ç†å˜æ›´çš„æŒä¹…æ€§ï¼Œç¡®ä¿äº‹åŠ¡æœ€ç»ˆèƒ½å¤Ÿåˆ·ç›˜æˆåŠŸï¼›undo log æ˜¯é€»è¾‘é€†å‘æ“ä½œæ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ—§å€¼ï¼Œæ–¹ä¾¿æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ã€‚</p><blockquote><p>å¦å¤–ä¸€ç§å›ç­”æ–¹å¼ã€‚</p></blockquote><p>binlog ä¼šè®°å½•æ•´ä¸ª SQL æˆ–è¡Œå˜åŒ–ï¼›redo log æ˜¯ä¸ºäº†æ¢å¤â€œå·²æäº¤ä½†æœªåˆ·ç›˜â€çš„æ•°æ®ï¼Œundo log æ˜¯ä¸ºäº†æ’¤é”€æœªæäº¤çš„äº‹åŠ¡ã€‚</p><p>ä»¥ä¸€æ¬¡äº‹åŠ¡æ›´æ–°ä¸ºä¾‹ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># å¼€å¯äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># æ›´æ–°æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># æäº¤äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>äº‹åŠ¡å¼€å§‹çš„æ—¶å€™ä¼šç”Ÿæˆ undo logï¼Œè®°å½•æ›´æ–°å‰çš„æ•°æ®ï¼Œæ¯”å¦‚åŸå€¼æ˜¯ 18ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>undo log: id=1, age=18</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¿®æ”¹æ•°æ®çš„æ—¶å€™ï¼Œä¼šå°†æ•°æ®å†™å…¥åˆ° redo logã€‚</p><p>æ¯”å¦‚æ•°æ®é¡µ page_id=123 ä¸Šï¼Œid=1 çš„ç”¨æˆ·è¢«æ›´æ–°ä¸º age=26ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>redo log (prepare):</span></span>
<span class="line"><span>page_id=123, offset=0x40, before=18, after=26</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç­‰äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œredo log åˆ·ç›˜ï¼Œbinlog åˆ·ç›˜ã€‚</p><p>binlog å†™å®Œä¹‹åï¼Œredo log çš„çŠ¶æ€ä¼šå˜ä¸º commitï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>redo log (commit):</span></span>
<span class="line"><span>page_id=123, offset=0x40, before=18, after=26</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>binlog å¦‚æœæ˜¯ Statement æ ¼å¼ï¼Œä¼šè®°å½•ä¸€æ¡ SQL è¯­å¥ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>binlog å¦‚æœæ˜¯ Row æ ¼å¼ï¼Œä¼šè®°å½•ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>è¡¨ï¼šusers</span></span>
<span class="line"><span>before: id=1, age=18</span></span>
<span class="line"><span>after:  id=1, age=26</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éšåï¼Œåå°çº¿ç¨‹ä¼šå°† redo log ä¸­çš„å˜æ›´å¼‚æ­¥åˆ·æ–°åˆ°ç£ç›˜ã€‚</p><p>memoï¼š2025 å¹´ 3 æœˆ 13 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚æœ‰<a href="httpshttps://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹æŠ¥å–œ</a>ï¼Œå­—èŠ‚äºŒé¢è¿‡äº†ï¼Œæ‰¾æš‘æœŸé¡ºåˆ©çš„ä¸å¯æ€è®®ï¼Œå…«è‚¡ç›´æ¥åŸå”±é¢æ¸£ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250313170334.png" alt="çƒå‹æŠ¥å–œå­—èŠ‚äºŒé¢è¿‡äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹æŠ¥å–œå­—èŠ‚äºŒé¢è¿‡äº†</figcaption></figure><h4 id="è¯´è¯´-redo-log-çš„å·¥ä½œæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´-redo-log-çš„å·¥ä½œæœºåˆ¶"><span>è¯´è¯´ redo log çš„å·¥ä½œæœºåˆ¶ï¼Ÿ</span></a></h4><p>å½“äº‹åŠ¡å¯åŠ¨æ—¶ï¼ŒMySQL ä¼šä¸ºè¯¥äº‹åŠ¡åˆ†é…ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ã€‚</p><p>åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼ŒMySQL éƒ½ä¼šç”Ÿæˆä¸€æ¡ Redo Logï¼Œè®°å½•ä¿®æ”¹å‰åçš„æ•°æ®çŠ¶æ€ã€‚</p><p>è¿™äº› Redo Log é¦–å…ˆä¼šè¢«å†™å…¥å†…å­˜ä¸­çš„ Redo Log Bufferã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314155647.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š æˆ‘æœ¬æœº MySQL çš„ redolog buffer size ä¸º 16M" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š æˆ‘æœ¬æœº MySQL çš„ redolog buffer size ä¸º 16M</figcaption></figure><p>å½“äº‹åŠ¡æäº¤æ—¶ï¼ŒMySQL å†å°† Redo Log Buffer ä¸­çš„è®°å½•åˆ·æ–°åˆ°ç£ç›˜ä¸Šçš„ Redo Log æ–‡ä»¶ä¸­ã€‚</p><p>åªæœ‰å½“ Redo Log æˆåŠŸå†™å…¥ç£ç›˜ï¼Œäº‹åŠ¡æ‰ç®—çœŸæ­£æäº¤æˆåŠŸã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314160523.png" alt="greatsql ç¤¾åŒºï¼šRedo Logçš„åˆ·ç›˜ç­–ç•¥" tabindex="0" loading="lazy"><figcaption>greatsql ç¤¾åŒºï¼šRedo Logçš„åˆ·ç›˜ç­–ç•¥</figcaption></figure><p>å½“ MySQL å´©æºƒé‡å¯æ—¶ï¼Œä¼šå…ˆæ£€æŸ¥ Redo Logã€‚å¯¹äºå·²æäº¤çš„äº‹åŠ¡ï¼ŒMySQL ä¼šé‡æ”¾ Redo Log ä¸­çš„è®°å½•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314160157.png" alt="greatsql ç¤¾åŒºï¼šredo log æ¢å¤" tabindex="0" loading="lazy"><figcaption>greatsql ç¤¾åŒºï¼šredo log æ¢å¤</figcaption></figure><p>å¯¹äºæœªæäº¤çš„äº‹åŠ¡ï¼ŒMySQL ä¼šé€šè¿‡ Undo Log å›æ»šè¿™äº›ä¿®æ”¹ï¼Œç¡®ä¿æ•°æ®æ¢å¤åˆ°å´©æºƒå‰çš„ä¸€è‡´æ€§çŠ¶æ€ã€‚</p><p>Redo Log æ˜¯å¾ªç¯ä½¿ç”¨çš„ï¼Œå½“æ–‡ä»¶å†™æ»¡åä¼šè¦†ç›–æœ€æ—©çš„è®°å½•ã€‚</p><p>ä¸ºé¿å…è¦†ç›–æœªæŒä¹…åŒ–çš„è®°å½•ï¼ŒMySQL ä¼šå®šæœŸæ‰§è¡Œ CheckPoint æ“ä½œï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®é¡µåˆ·æ–°åˆ°ç£ç›˜ï¼Œå¹¶è®°å½• CheckPoint ç‚¹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314161732.png" alt="åšå®¢å›­å¤ªç™½é‡‘æ˜Ÿæœ‰ç‚¹çƒ¦ï¼šcheckpoint" tabindex="0" loading="lazy"><figcaption>åšå®¢å›­å¤ªç™½é‡‘æ˜Ÿæœ‰ç‚¹çƒ¦ï¼šcheckpoint</figcaption></figure><p>é‡å¯æ—¶ï¼ŒMySQL åªä¼šé‡æ”¾ CheckPoint ä¹‹åçš„ Redo Logï¼Œä»è€Œæé«˜æ¢å¤æ•ˆç‡ã€‚</p><h4 id="redo-log-æ–‡ä»¶çš„å¤§å°æ˜¯å›ºå®šçš„å—" tabindex="-1"><a class="header-anchor" href="#redo-log-æ–‡ä»¶çš„å¤§å°æ˜¯å›ºå®šçš„å—"><span>redo log æ–‡ä»¶çš„å¤§å°æ˜¯å›ºå®šçš„å—ï¼Ÿ</span></a></h4><p>redo log æ–‡ä»¶æ˜¯å›ºå®šå¤§å°çš„ï¼Œé€šå¸¸é…ç½®ä¸ºä¸€ç»„æ–‡ä»¶ï¼Œä½¿ç”¨ç¯å½¢æ–¹å¼å†™å…¥ï¼Œæ—§çš„æ—¥å¿—ä¼šåœ¨ç©ºé—´éœ€è¦æ—¶è¢«è¦†ç›–ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314161331.png" alt="greatsqlç¤¾åŒºï¼šredo log æ–‡ä»¶ç»„" tabindex="0" loading="lazy"><figcaption>greatsqlç¤¾åŒºï¼šredo log æ–‡ä»¶ç»„</figcaption></figure><p>å‘½åæ–¹å¼ä¸º <code>ib_logfile0ã€iblogfile1ã€ã€ã€iblogfilen</code>ã€‚é»˜è®¤ 2 ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶å¤§å°ä¸º 48MBã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314160340.png" alt="greatsqlç¤¾åŒºï¼šib_logfile0å’Œib_logfile1" tabindex="0" loading="lazy"><figcaption>greatsqlç¤¾åŒºï¼šib_logfile0å’Œib_logfile1</figcaption></figure><p>å¯ä»¥é€šè¿‡ <code>show variables like &#39;innodb_log_file_size&#39;;</code> æŸ¥çœ‹ redo log æ–‡ä»¶çš„å¤§å°ï¼›é€šè¿‡ <code>show variables like &#39;innodb_log_files_in_group&#39;;</code> æŸ¥çœ‹ redo log æ–‡ä»¶çš„æ•°é‡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314155806.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šredo log æ–‡ä»¶å¤§å°" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šredo log æ–‡ä»¶å¤§å°</figcaption></figure><h4 id="è¯´è¯´-wal" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´-wal"><span>è¯´è¯´ WALï¼Ÿ</span></a></h4><blockquote><p>WALâ€”â€”Write-Ahead Loggingã€‚</p></blockquote><p>é¢„å†™æ—¥å¿—æ˜¯ InnoDB å®ç°äº‹åŠ¡æŒä¹…åŒ–çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå®ƒçš„æ€æƒ³æ˜¯ï¼šå…ˆå†™æ—¥å¿—å†åˆ·ç£ç›˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314163343.png" alt="å°è®¸ codeï¼šWAL" tabindex="0" loading="lazy"><figcaption>å°è®¸ codeï¼šWAL</figcaption></figure><p>å³åœ¨ä¿®æ”¹æ•°æ®é¡µä¹‹å‰ï¼Œå…ˆå°†ä¿®æ”¹è®°å½•å†™å…¥ Redo Logã€‚</p><p>è¿™æ ·çš„è¯ï¼Œå³ä½¿æ•°æ®é¡µå°šæœªå†™å…¥ç£ç›˜ï¼Œç³»ç»Ÿå´©æºƒæ—¶ä¹Ÿèƒ½é€šè¿‡ Redo Log æ¢å¤æ•°æ®ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦ WALï¼š</p><ul><li>æ•°æ®æœ€ç»ˆæ˜¯è¦å†™å…¥ç£ç›˜çš„ï¼Œä½†ç£ç›˜ IO å¾ˆæ…¢ï¼›</li><li>å¦‚æœæ¯æ¬¡æ›´æ–°éƒ½ç«‹åˆ»æŠŠæ•°æ®é¡µåˆ·ç›˜ï¼Œæ€§èƒ½å¾ˆå·®ï¼›</li><li>å¦‚æœè¿˜æ²¡å†™å…¥ç£ç›˜å°±å®•æœºï¼Œäº‹åŠ¡ä¼šä¸¢å¤±ã€‚</li></ul><p>WAL çš„å¥½å¤„æ˜¯æ›´æ–°æ—¶ä¸ç›´æ¥å†™æ•°æ®é¡µï¼Œè€Œæ˜¯å…ˆå†™ä¸€ä»½å˜æ›´è®°å½•åˆ° redo logï¼Œåå°å†æ…¢æ…¢æŠŠçœŸæ­£çš„æ•°æ®é¡µåˆ·ç›˜ï¼Œä¸€ä¸¾å¤šå¾—ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šMySQL ä¸­çš„ bin log çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 2 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´ MySQL çš„ä¸‰å¤§æ—¥å¿—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 21 æŠ–éŸ³å•†åŸä¸€é¢é¢è¯•åŸé¢˜ï¼šredolog undolog binlogï¼Œæœ‰äº†binlogä¸ºä»€ä¹ˆè¿˜è¦undolog redologï¼Œredologçš„å·¥ä½œæœºåˆ¶ï¼Œè¯´è¯´ WAL</li></ol></blockquote><p>memoï¼š2025 å¹´ 3 æœˆ 14 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ä»Šå¤©ä¿®æ”¹ç®€å†çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä½æ¯”èµ›ç»å†<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">éå¸¸ä¸°å¯Œçš„çƒå‹</a>ï¼Œå¤§å®¶åœ¨æ ¡æœŸé—´å¦‚æœæœ‰æ—¶é—´ï¼Œä¹Ÿå¯ä»¥å†²ä¸€ä¸‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250314163859.png" alt="çƒå‹çš„ç«èµ›ç»å†" tabindex="0" loading="lazy"><figcaption>çƒå‹çš„ç«èµ›ç»å†</figcaption></figure><h3 id="_29-binlog-å’Œ-redo-log-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_29-binlog-å’Œ-redo-log-æœ‰ä»€ä¹ˆåŒºåˆ«"><span>29.binlog å’Œ redo log æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h3><p>binlog ç”± MySQL çš„ Server å±‚å®ç°ï¼Œä¸å­˜å‚¨å¼•æ“æ— å…³ï¼›redo log ç”± InnoDB å­˜å‚¨å¼•æ“å®ç°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250315151137.png" alt="è¿è¾¹ï¼šbinlog å’Œ redo log" tabindex="0" loading="lazy"><figcaption>è¿è¾¹ï¼šbinlog å’Œ redo log</figcaption></figure><p>binlog è®°å½•çš„æ˜¯é€»è¾‘æ—¥å¿—ï¼ŒåŒ…æ‹¬åŸå§‹çš„ SQL è¯­å¥æˆ–è€…è¡Œæ•°æ®å˜åŒ–ï¼Œä¾‹å¦‚â€œå°† id=2 è¿™è¡Œæ•°æ®çš„ age å­—æ®µ+1â€ã€‚</p><p>redo log è®°å½•ç‰©ç†æ—¥å¿—ï¼Œå³æ•°æ®é¡µçš„å…·ä½“ä¿®æ”¹ï¼Œä¾‹å¦‚â€œå°† page_id=123 ä¸Š offset=0x40 çš„æ•°æ®ä» 18 ä¿®æ”¹ä¸º 26â€ã€‚</p><p>binlog æ˜¯è¿½åŠ å†™å…¥çš„ï¼Œæ–‡ä»¶å†™æ»¡åä¼šæ–°å»ºæ–‡ä»¶ç»§ç»­å†™å…¥ï¼Œä¸ä¼šè¦†ç›–å†å²æ—¥å¿—ï¼Œä¿å­˜çš„æ˜¯å…¨é‡æ“ä½œè®°å½•ï¼›redo log æ˜¯å¾ªç¯å†™å…¥çš„ï¼Œç©ºé—´æ˜¯å›ºå®šçš„ï¼Œå†™æ»¡åä¼šè¦†ç›–æ—§çš„æ—¥å¿—ï¼Œä»…ä¿å­˜æœªåˆ·ç›˜çš„è„é¡µæ—¥å¿—ï¼Œå·²æŒä¹…åŒ–çš„æ•°æ®ä¼šè¢«æ¸…é™¤ã€‚</p><p>å¦å¤–ï¼Œä¸ºä¿è¯ä¸¤ç§æ—¥å¿—çš„ä¸€è‡´æ€§ï¼Œinnodb é‡‡ç”¨äº†ä¸¤é˜¶æ®µæäº¤ç­–ç•¥ï¼Œredo log åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­æŒç»­å†™å…¥ï¼Œå¹¶åœ¨äº‹åŠ¡æäº¤å‰è¿›å…¥ prepare çŠ¶æ€ï¼›binlog åœ¨äº‹åŠ¡æäº¤çš„æœ€åé˜¶æ®µå†™å…¥ï¼Œä¹‹å redo log ä¼šè¢«æ ‡è®°ä¸º commit çŠ¶æ€ã€‚</p><p>å¯ä»¥é€šè¿‡å›æ”¾ binlog å®ç°æ•°æ®åŒæ­¥æˆ–è€…æ¢å¤åˆ°æŒ‡å®šæ—¶é—´ç‚¹ï¼›redo log ç”¨æ¥ç¡®ä¿äº‹åŠ¡æäº¤åå³ä½¿ç³»ç»Ÿå®•æœºï¼Œæ•°æ®ä»ç„¶å¯ä»¥é€šè¿‡é‡æ”¾ redo log æ¢å¤ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 2 ä¼˜é€‰ç‰©æµè°ƒåº¦æŠ€æœ¯ 2 é¢é¢è¯•åŸé¢˜ï¼šredo logã€bin log</li></ol></blockquote><h3 id="_30-ğŸŒŸä¸ºä»€ä¹ˆè¦ä¸¤é˜¶æ®µæäº¤å‘¢" tabindex="-1"><a class="header-anchor" href="#_30-ğŸŒŸä¸ºä»€ä¹ˆè¦ä¸¤é˜¶æ®µæäº¤å‘¢"><span>30.ğŸŒŸä¸ºä»€ä¹ˆè¦ä¸¤é˜¶æ®µæäº¤å‘¢ï¼Ÿ</span></a></h3><p>ä¸ºäº†ä¿è¯ redo log å’Œ binlog ä¸­çš„æ•°æ®ä¸€è‡´æ€§ï¼Œé˜²æ­¢ä¸»ä»å¤åˆ¶å’Œäº‹åŠ¡çŠ¶æ€ä¸ä¸€è‡´ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250316104456.png" alt="é˜¿é‡Œï¼šMySQL ä¸¤é˜¶æ®µæäº¤" tabindex="0" loading="lazy"><figcaption>é˜¿é‡Œï¼šMySQL ä¸¤é˜¶æ®µæäº¤</figcaption></figure><h4 id="ä¸ºä»€ä¹ˆ-2pc-èƒ½ä¿è¯-redo-log-å’Œ-binlog-çš„å¼ºä¸€è‡´æ€§" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-2pc-èƒ½ä¿è¯-redo-log-å’Œ-binlog-çš„å¼ºä¸€è‡´æ€§"><span>ä¸ºä»€ä¹ˆ 2PC èƒ½ä¿è¯ redo log å’Œ binlog çš„å¼ºâ¼€è‡´æ€§ï¼Ÿ</span></a></h4><p>å‡å¦‚ MySQL åœ¨é¢„å†™ redo log ä¹‹åã€å†™å…¥ binlog ä¹‹å‰å´©æºƒã€‚é‚£ä¹ˆ MySQL é‡å¯å InnoDB ä¼šå›æ»šè¯¥äº‹åŠ¡ï¼Œå› ä¸º redo log ä¸æ˜¯æäº¤çŠ¶æ€ã€‚å¹¶ä¸”ç”±äº binlog ä¸­æ²¡æœ‰å†™å…¥æ•°æ®ï¼Œæ‰€ä»¥ä»åº“ä¹Ÿä¸ä¼šæœ‰è¯¥äº‹åŠ¡çš„æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250316105500.png" alt="é˜¿é‡Œï¼š2PC å¯ä»¥ä¿è¯redo log å’Œ binlog çš„æ•°æ®ä¸€è‡´æ€§" tabindex="0" loading="lazy"><figcaption>é˜¿é‡Œï¼š2PC å¯ä»¥ä¿è¯redo log å’Œ binlog çš„æ•°æ®ä¸€è‡´æ€§</figcaption></figure><p>å‡å¦‚ MySQL åœ¨å†™å…¥ binlog ä¹‹åã€redo log æäº¤ä¹‹å‰å´©æºƒã€‚é‚£ä¹ˆ MySQL é‡å¯å InnoDB ä¼šæäº¤è¯¥äº‹åŠ¡ï¼Œå› ä¸º redo log æ˜¯å®Œæ•´çš„ prepare çŠ¶æ€ã€‚å¹¶ä¸”ç”±äº binlog ä¸­æœ‰å†™å…¥æ•°æ®ï¼Œæ‰€ä»¥ä»åº“ä¹Ÿä¼šåŒæ­¥åˆ°è¯¥äº‹åŠ¡çš„æ•°æ®ã€‚</p><p>ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// äº‹åŠ¡å¼€å§‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">begin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// try</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æ‰§è¡Œ SQL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    execute SQL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // å†™å…¥ redo log å¹¶æ ‡è®°ä¸º prepare</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    write redo log prepare xid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // å†™å…¥ binlog</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    write binlog xid sql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // æäº¤ redo log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    commit redo log xid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// catch</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">{</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // å›æ»š redo log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    innodb rollback redo log xid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// äº‹åŠ¡ç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="xid-äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#xid-äº†è§£å—"><span>XID äº†è§£å—ï¼Ÿ</span></a></h4><p>XID æ˜¯ binlog ä¸­ç”¨æ¥æ ‡è¯†äº‹åŠ¡æäº¤çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250316113030.png" alt="mysqlï¼šxid" tabindex="0" loading="lazy"><figcaption>mysqlï¼šxid</figcaption></figure><p>åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œä¼šå†™å…¥ä¸€ä¸ª XID_EVENT åˆ° binlogï¼Œè¡¨ç¤ºè¿™ä¸ªäº‹åŠ¡çœŸæ­£å®Œæˆäº†ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  Log_name         | Pos  | Event_type     | Server_id | End_log_pos | Info      </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| mysql-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">bin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">000003</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2005</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | Gtid           |   </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1013307</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |        </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2070</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @@</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">SESSION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">GTID_NEXT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;f971d5f1-d450-11ec-9e7b-5254000a56df:11&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                 |</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| mysql-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">bin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">000003</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2070</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | Query          |   </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1013307</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |        </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2142</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                                                              |</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| mysql-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">bin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">000003</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2142</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | Table_map      |   </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1013307</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |        </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2187</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | table_id: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">109</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)                                                            |</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| mysql-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">bin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">000003</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2187</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | Write_rows     |   </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1013307</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |        </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2227</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | table_id: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">109</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> flags: STMT_END_F                                                    |</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">| mysql-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">bin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">000003</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2227</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | Xid            |   </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1013307</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |        </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2258</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> /* xid=121 */</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ƒä¸ä»…ç”¨äºä¸»ä»å¤åˆ¶ä¸­äº‹åŠ¡å®Œæ•´æ€§çš„åˆ¤æ–­ï¼Œä¹Ÿåœ¨å´©æºƒæ¢å¤ä¸­å¯¹ redo log å’Œ binlog çš„ä¸€è‡´æ€§æ ¡éªŒèµ·åˆ°å…³é”®ä½œç”¨ã€‚</p><p>XID å¯ä»¥å¸®åŠ© MySQL åˆ¤æ–­å“ªäº› redo log æ˜¯å·²æäº¤çš„ï¼Œå“ªäº›æ˜¯æœªæäº¤éœ€è¦å›æ»šçš„ï¼Œæ˜¯ä¸¤é˜¶æ®µæäº¤æœºåˆ¶ä¸­éå¸¸å…³é”®çš„ä¸€ç¯ã€‚</p><p>memoï¼š2025 å¹´ 3 æœˆ 16 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚</p><h3 id="_31-ğŸŒŸredo-log-çš„å†™å…¥è¿‡ç¨‹äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_31-ğŸŒŸredo-log-çš„å†™å…¥è¿‡ç¨‹äº†è§£å—"><span>31.ğŸŒŸredo log çš„å†™å…¥è¿‡ç¨‹äº†è§£å—ï¼Ÿ</span></a></h3><p>InnoDB ä¼šå…ˆå°† Redo Log å†™å…¥å†…å­˜ä¸­çš„ Redo Log Bufferï¼Œä¹‹åå†ä»¥ä¸€å®šçš„é¢‘ç‡åˆ·å…¥åˆ°ç£ç›˜çš„ Redo Log File ä¸­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e1f59341-0695-45db-b759-30db73314e39.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šredo log ç¼“å†²" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šredo log ç¼“å†²</figcaption></figure><h4 id="å“ªäº›åœºæ™¯ä¼šè§¦å‘-redo-log-çš„åˆ·ç›˜åŠ¨ä½œ" tabindex="-1"><a class="header-anchor" href="#å“ªäº›åœºæ™¯ä¼šè§¦å‘-redo-log-çš„åˆ·ç›˜åŠ¨ä½œ"><span>å“ªäº›åœºæ™¯ä¼šè§¦å‘ redo log çš„åˆ·ç›˜åŠ¨ä½œï¼Ÿ</span></a></h4><p>æ¯”å¦‚è¯´ Redo Log Buffer çš„ç©ºé—´ä¸è¶³æ—¶ï¼Œäº‹åŠ¡æäº¤æ—¶ï¼Œè§¦å‘ Checkpoint æ—¶ï¼Œåå°çº¿ç¨‹å®šæœŸåˆ·ç›˜æ—¶ã€‚</p><p>ä¸è¿‡ï¼ŒRedo Log Buffer åˆ·ç›˜åˆ° Redo Log File è¿˜ä¼šæ¶‰åŠåˆ°æ“ä½œç³»ç»Ÿçš„ç£ç›˜ç¼“å­˜ç­–ç•¥ï¼Œå¯èƒ½ä¸ä¼šç«‹å³åˆ·ç›˜ï¼Œè€Œæ˜¯ç­‰å¾…ä¸€å®šæ—¶é—´åæ‰åˆ·ç›˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317160220.png" alt="é…·é…·åšå®¢å›­ï¼šPage Cache" tabindex="0" loading="lazy"><figcaption>é…·é…·åšå®¢å›­ï¼šPage Cache</figcaption></figure><h4 id="innodb-flush-log-at-trx-commit-å‚æ•°ä½ äº†è§£å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#innodb-flush-log-at-trx-commit-å‚æ•°ä½ äº†è§£å¤šå°‘"><span>innodb_flush_log_at_trx_commit å‚æ•°ä½ äº†è§£å¤šå°‘ï¼Ÿ</span></a></h4><p>innodb_flush_log_at_trx_commit å‚æ•°æ˜¯ç”¨æ¥æ§åˆ¶äº‹åŠ¡æäº¤æ—¶ï¼ŒRedo Log çš„åˆ·ç›˜ç­–ç•¥ï¼Œä¸€å…±æœ‰ä¸‰ç§ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317155312.png" alt="greatsqlï¼šinnodb_flush_log_at_trx_commit" tabindex="0" loading="lazy"><figcaption>greatsqlï¼šinnodb_flush_log_at_trx_commit</figcaption></figure><p>0 è¡¨ç¤ºäº‹åŠ¡æäº¤æ—¶ä¸åˆ·ç›˜ï¼Œè€Œæ˜¯äº¤ç»™åå°çº¿ç¨‹æ¯éš” 1 ç§’æ‰§è¡Œä¸€æ¬¡ã€‚è¿™ç§æ–¹å¼æ€§èƒ½æœ€å¥½ï¼Œä½†æ˜¯åœ¨ MySQL å®•æœºæ—¶å¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’å†…çš„äº‹åŠ¡ã€‚</p><p>1 è¡¨ç¤ºäº‹åŠ¡æäº¤æ—¶ä¼šç«‹å³åˆ·ç›˜ï¼Œç¡®ä¿äº‹åŠ¡æäº¤åæ•°æ®å°±æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚è¿™ç§æ–¹å¼æ˜¯æœ€å®‰å…¨çš„ï¼Œä¹Ÿæ˜¯ InnoDB çš„é»˜è®¤å€¼ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317160701.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šinnodb_flush_log_at_trx_commitçš„é»˜è®¤å€¼" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šinnodb_flush_log_at_trx_commitçš„é»˜è®¤å€¼</figcaption></figure><p>2 è¡¨ç¤ºäº‹åŠ¡æäº¤æ—¶åªæŠŠ Redo Log Buffer å†™å…¥åˆ° Page Cacheï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šä»€ä¹ˆæ—¶å€™åˆ·ç›˜ã€‚æ“ä½œç³»ç»Ÿå®•æœºæ—¶ï¼Œå¯èƒ½ä¼šä¸¢å¤±ä¸€éƒ¨åˆ†æ•°æ®ã€‚</p><h4 id="ä¸€ä¸ªæ²¡æœ‰æäº¤äº‹åŠ¡çš„-redo-log-ä¼šä¸ä¼šåˆ·ç›˜" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸ªæ²¡æœ‰æäº¤äº‹åŠ¡çš„-redo-log-ä¼šä¸ä¼šåˆ·ç›˜"><span>ä¸€ä¸ªæ²¡æœ‰æäº¤äº‹åŠ¡çš„ redo logï¼Œä¼šä¸ä¼šåˆ·ç›˜ï¼Ÿ</span></a></h4><p>InnoDB æœ‰ä¸€ä¸ªåå°çº¿ç¨‹ï¼Œæ¯éš” 1 ç§’ä¼šæŠŠ Redo Log Buffer ä¸­çš„æ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜ä¸­ï¼Œç„¶åè°ƒç”¨åˆ·ç›˜æ“ä½œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317161008.png" alt="greatsqlï¼šInnoDB çš„åå°çº¿ç¨‹" tabindex="0" loading="lazy"><figcaption>greatsqlï¼šInnoDB çš„åå°çº¿ç¨‹</figcaption></figure><p>å› æ­¤ï¼Œä¸€ä¸ªæ²¡æœ‰æäº¤äº‹åŠ¡çš„ Redo Log ä¹Ÿå¯èƒ½ä¼šè¢«åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœå½“ Redo Log Buffer å ç”¨çš„ç©ºé—´å³å°†è¾¾åˆ° innodb_log_buffer_size çš„ä¸€åŠæ—¶ï¼Œä¹Ÿä¼šè§¦å‘åˆ·ç›˜æ“ä½œã€‚</p><p>memoï¼š2025 å¹´ 3 æœˆ 17 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚å·²ç»æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹å‘æ¥å–œæŠ¥</a>ï¼Œæš‘æœŸå®ä¹ æ‹¿åˆ°æ’ç”Ÿç”µå­çš„æš‘æœŸå®ä¹ äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250317163123.png" alt="çƒå‹æ‹¿åˆ°æ’ç”Ÿç”µå­çš„æš‘æœŸå®ä¹ äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°æ’ç”Ÿç”µå­çš„æš‘æœŸå®ä¹ äº†</figcaption></figure><h4 id="redo-log-buffer-æ˜¯é¡ºåºå†™è¿˜æ˜¯éšæœºå†™" tabindex="-1"><a class="header-anchor" href="#redo-log-buffer-æ˜¯é¡ºåºå†™è¿˜æ˜¯éšæœºå†™"><span>Redo Log Buffer æ˜¯é¡ºåºå†™è¿˜æ˜¯éšæœºå†™ï¼Ÿ</span></a></h4><p>MySQL åœ¨å¯åŠ¨åä¼šå‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ä½œä¸º Redo Log Bufferï¼Œå¹¶å°†å…¶åˆ†ä¸ºè‹¥å¹²ä¸ªè¿ç»­çš„ Redo Log Blockã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318160752.png" alt="xyZGHioï¼šRedo Log Block" tabindex="0" loading="lazy"><figcaption>xyZGHioï¼šRedo Log Block</figcaption></figure><p>é‚£ä¸ºäº†æé«˜å†™å…¥æ•ˆç‡ï¼ŒRedo Log Buffer é‡‡ç”¨äº†é¡ºåºå†™å…¥çš„æ–¹å¼ï¼Œä¼šå…ˆå¾€å‰é¢çš„ Redo Log Block ä¸­å†™å…¥ï¼Œå½“å†™æ»¡åå†å¾€åé¢çš„ Block ä¸­å†™å…¥ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318152808.png" alt="greatsqlï¼šredo log bufferçš„å†™å…¥" tabindex="0" loading="lazy"><figcaption>greatsqlï¼šredo log bufferçš„å†™å…¥</figcaption></figure><p>äºæ­¤åŒæ—¶ï¼ŒInnoDB è¿˜æä¾›äº†ä¸€ä¸ªå…¨å±€å˜é‡ buf_freeï¼Œæ¥æ§åˆ¶åç»­çš„ redo log è®°å½•åº”è¯¥å†™å…¥åˆ° block ä¸­çš„å“ªä¸ªä½ç½®ã€‚</p><h4 id="buf-next-to-write-äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#buf-next-to-write-äº†è§£å—"><span>buf_next_to_write äº†è§£å—ï¼Ÿ</span></a></h4><p>buf_next_to_write æŒ‡å‘ Redo Log Buffer ä¸­ä¸‹ä¸€æ¬¡éœ€è¦å†™å…¥ç¡¬ç›˜çš„èµ·å§‹ä½ç½®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318180850.png" alt="xyZGHioï¼šbuf_next_to_write" tabindex="0" loading="lazy"><figcaption>xyZGHioï¼šbuf_next_to_write</figcaption></figure><p>è€Œ buf_free æŒ‡å‘çš„æ˜¯ Redo Log Buffer ä¸­ç©ºé—²åŒºåŸŸçš„èµ·å§‹ä½ç½®ã€‚</p><h4 id="äº†è§£-mtr-å—" tabindex="-1"><a class="header-anchor" href="#äº†è§£-mtr-å—"><span>äº†è§£ MTR å—ï¼Ÿ</span></a></h4><p>Mini Transaction æ˜¯ InnoDB å†…éƒ¨ç”¨äºæ“ä½œæ•°æ®é¡µçš„åŸå­æ“ä½œå•å…ƒã€‚</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">mtr_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mtr;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtr_start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">mtr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 1. åŠ é”</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// å¯¹å¾…è®¿é—®çš„indexåŠ é”</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtr_s_lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">rw_lock_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> mtr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtr_x_lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">rw_lock_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> mtr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// å¯¹å¾…è¯»å†™çš„pageåŠ é”</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtr_memo_push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">mtr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> buf_block_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> MTR_MEMO_PAGE_S_FIX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtr_memo_push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">mtr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> buf_block_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> MTR_MEMO_PAGE_X_FIX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 2. è®¿é—®æˆ–ä¿®æ”¹page</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">btr_cur_search_to_nth_level</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">btr_cur_optimistic_insert</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 3. ä¸ºä¿®æ”¹æ“ä½œç”Ÿæˆredo</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mlog_open</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mlog_write_initial_log_record_fast</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mlog_close</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 4. æŒä¹…åŒ–redoï¼Œè§£é”</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtr_commit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">mtr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤šä¸ªäº‹åŠ¡çš„ Redo Log ä¼šä»¥ MTR ä¸ºå•ä½äº¤æ›¿å†™å…¥åˆ° Redo Log Buffer ä¸­ï¼Œå‡å¦‚äº‹åŠ¡ 1 å’Œäº‹åŠ¡ 2 å‡æœ‰ä¸¤ä¸ª MTRï¼Œä¸€æ—¦æŸä¸ª MTR ç»“æŸï¼Œå°±ä¼šå°†å…¶ç”Ÿæˆçš„è‹¥å¹²æ¡ Redo Log è®°å½•é¡ºåºå†™å…¥åˆ° Redo Log Buffer ä¸­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318163110.png" alt="xyZGHioï¼šMTR ä¸ Redo Log Buffer" tabindex="0" loading="lazy"><figcaption>xyZGHioï¼šMTR ä¸ Redo Log Buffer</figcaption></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ª MTR ä¼šåŒ…å«ä¸€ç»„ Redo Log è®°å½•ï¼Œæ˜¯ MySQL å´©æºƒåæ¢å¤äº‹åŠ¡çš„æœ€å°æ‰§è¡Œå•å…ƒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318163310.png" alt="xyZGHioï¼šMTR" tabindex="0" loading="lazy"><figcaption>xyZGHioï¼šMTR</figcaption></figure><h4 id="redo-log-block-çš„ç»“æ„äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#redo-log-block-çš„ç»“æ„äº†è§£å—"><span>Redo Log Block çš„ç»“æ„äº†è§£å—ï¼Ÿ</span></a></h4><p>Redo Log Block ç”±æ—¥å¿—å¤´ã€æ—¥å¿—ä½“å’Œæ—¥å¿—å°¾ç»„æˆï¼Œä¸€å…±å ç”¨ 512 ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­æ—¥å¿—å¤´å ç”¨ 12 ä¸ªå­—èŠ‚ï¼Œæ—¥å¿—å°¾å ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œå‰©ä½™çš„ 496 ä¸ªå­—èŠ‚ç”¨äºå­˜å‚¨æ—¥å¿—ä½“ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318154904.png" alt="greatsqlï¼šRedo Log Block" tabindex="0" loading="lazy"><figcaption>greatsqlï¼šRedo Log Block</figcaption></figure><p>æ—¥å¿—å¤´åŒ…å«äº†å½“å‰ Block çš„åºåˆ—å·ã€ç¬¬ä¸€æ¡æ—¥å¿—çš„åºåˆ—å·ã€ç±»å‹ç­‰ä¿¡æ¯ã€‚</p><table><thead><tr><th>å­—æ®µ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>LOG_BLOCK_HDR_NO</td><td>å½“å‰ Block çš„åºå·ï¼Œå‡å¦‚æŠŠ Redo Log Buffer çœ‹æˆä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆ LOG_BLOCK_HDR_NO å°±ç›¸å½“äº Block åœ¨ Buffer ä¸­çš„ä¸‹æ ‡ã€‚</td></tr><tr><td>LOG_BLOCK_HDR_DATA_LEN</td><td>Block å·²ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œåˆå§‹å€¼ä¸º 12ï¼Œä¹Ÿå°±æ˜¯æ—¥å¿—å¤´çš„é•¿åº¦ï¼›å¦‚æœæ—¥å¿—ä½“è¢«å†™æ»¡ï¼Œå€¼å¢é•¿ä¸º 512ã€‚</td></tr><tr><td>LOG_BLOCK_FIRST_REC_GROUP</td><td>è¯¥ Block ä¸­ç¬¬ä¸€ä¸ª MTR èµ·å§‹å¤„çš„åç§»é‡</td></tr><tr><td>LOG_BLOCK_CHECKPOINT_NO</td><td>Block æœ€åè¢«å†™å…¥æ—¶çš„checkpoint</td></tr></tbody></table><p>æ—¥å¿—å°¾ä¸»è¦å­˜å‚¨çš„æ˜¯ LOG_BLOCK_CHECKSUMï¼Œä¹Ÿå°±æ˜¯ Block çš„æ ¡éªŒå’Œï¼Œä¸»è¦ç”¨äºåˆ¤æ–­ Block æ˜¯å¦å®Œæ•´ã€‚</p><h4 id="redo-log-block-ä¸ºä»€ä¹ˆè®¾è®¡æˆ-512-å­—èŠ‚" tabindex="-1"><a class="header-anchor" href="#redo-log-block-ä¸ºä»€ä¹ˆè®¾è®¡æˆ-512-å­—èŠ‚"><span>Redo Log Block ä¸ºä»€ä¹ˆè®¾è®¡æˆ 512 å­—èŠ‚ï¼Ÿ</span></a></h4><p>å› ä¸ºæœºæ¢°ç¡¬ç›˜çš„ç‰©ç†æ‰‡åŒºå¤§å°é€šå¸¸ä¸º 512 å­—èŠ‚ï¼ŒRedo Log Block ä¹Ÿè®¾è®¡ä¸ºåŒæ ·çš„å¤§å°ï¼Œå°±å¯ä»¥ç¡®ä¿æ¯æ¬¡å†™å…¥éƒ½æ˜¯æ•´æ•°ä¸ªæ‰‡åŒºï¼Œå‡å°‘å¯¹é½å¼€é”€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318155855.png" alt="è¥¿ç»´èœ€é»ï¼šRedo Log å·¥ä½œåŸç†" tabindex="0" loading="lazy"><figcaption>è¥¿ç»´èœ€é»ï¼šRedo Log å·¥ä½œåŸç†</figcaption></figure><p>æ¯”å¦‚è¯´æ“ä½œç³»ç»Ÿçš„é¡µç¼“å­˜é»˜è®¤ä¸º 4KBï¼Œ8 ä¸ª Redo Log Block å°±å¯ä»¥ç»„åˆæˆä¸€ä¸ªé¡µç¼“å­˜å•å…ƒï¼Œä»è€Œæå‡ Redo Log Buffer çš„å†™å…¥æ•ˆç‡ã€‚</p><p>memoï¼š2025 å¹´ 3 æœˆ 18 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚</p><h4 id="lsn-äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#lsn-äº†è§£å—"><span>LSN äº†è§£å—ï¼Ÿ</span></a></h4><p>Log Sequence Number æ˜¯ä¸€ä¸ª 8 å­—èŠ‚çš„å•è°ƒé€’å¢æ•´æ•°ï¼Œç”¨æ¥æ ‡è¯†äº‹åŠ¡å†™å…¥ redo log çš„å­—èŠ‚æ€»é‡ï¼Œå­˜åœ¨äº redo logã€æ•°æ®é¡µå¤´éƒ¨å’Œ checkpoint ä¸­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250318181133.png" alt="xyZGHioï¼šLSN" tabindex="0" loading="lazy"><figcaption>xyZGHioï¼šLSN</figcaption></figure><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>MySQL åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ï¼ŒLSN çš„åˆå§‹å€¼å¹¶ä¸ä¸º 0ï¼Œè€Œæ˜¯ 8704ï¼›å½“ MySQL å†æ¬¡å¯åŠ¨æ—¶ï¼Œä¼šç»§ç»­ä½¿ç”¨ä¸Šä¸€æ¬¡æœåŠ¡åœæ­¢æ—¶çš„ LSNã€‚</p><p>åœ¨è®¡ç®— LSN çš„å¢é‡æ—¶ï¼Œä¸ä»…éœ€è¦è€ƒè™‘ log block body çš„å¤§å°ï¼Œè¿˜éœ€è¦è€ƒè™‘ log block header å’Œ log block tail ä¸­éƒ¨åˆ†å­—èŠ‚æ•°ã€‚</p><p>æ¯”å¦‚è¯´åœ¨ä¸Šå›¾ä¸­ï¼Œäº‹åŠ¡ 3 çš„ MTR æ€»é‡ä¸º 300 å­—èŠ‚ï¼Œé‚£ä¹ˆå†™å…¥åˆ° Redo Log Buffer ä¸­çš„ LSN ä¼šå¢é•¿ä¸º 8704 + 300 + 12 = 9016ã€‚</p><p>å‡å¦‚äº‹åŠ¡ 4 çš„ MTR æ€»é‡ä¸º 900 å­—èŠ‚ï¼Œé‚£ä¹ˆå†æ¬¡å†™å…¥åˆ° Redo Log Buffer ä¸­çš„ LSN ä¼šå¢é•¿ä¸º 9016 + 900 + 12*2 + 4*2 = 9948ã€‚</p><p>2 ä¸ª 12 å­—èŠ‚çš„ log block header + 2 ä¸ª 4 å­—èŠ‚çš„ log block tailã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>æ ¸å¿ƒä½œç”¨æœ‰ä¸‰ä¸ªï¼š</p><p>ç¬¬ä¸€ï¼Œredo log æŒ‰ç…§ LSN é€’å¢é¡ºåºè®°å½•æ‰€æœ‰æ•°æ®çš„ä¿®æ”¹æ“ä½œã€‚LSN çš„é€’å¢é‡ç­‰äºæ¯æ¬¡å†™å…¥æ—¥å¿—çš„å­—èŠ‚æ•°ã€‚</p><p>ç¬¬äºŒï¼ŒInnoDB çš„æ¯ä¸ªæ•°æ®é¡µå¤´éƒ¨ä¸­ï¼Œéƒ½ä¼šè®°å½•è¯¥é¡µæœ€åä¸€æ¬¡åˆ·æ–°åˆ°ç£ç›˜æ—¶çš„ LSNã€‚å¦‚æœæ•°æ®é¡µçš„ LSN å°äº redo log çš„ LSNï¼Œè¯´æ˜è¯¥é¡µéœ€è¦ä»æ—¥å¿—ä¸­æ¢å¤ï¼›å¦åˆ™è¯´æ˜è¯¥é¡µå·²æ›´æ–°ã€‚</p><p>ç¬¬ä¸‰ï¼Œcheckpoint é€šè¿‡ LSN è®°å½•å·²åˆ·æ–°åˆ°ç£ç›˜çš„æ•°æ®é¡µä½ç½®ï¼Œå‡å°‘æ¢å¤æ—¶éœ€è¦å¤„ç†çš„æ—¥å¿—ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><table><thead><tr><th>åœºæ™¯</th><th>LSN çš„ä½œç”¨</th></tr></thead><tbody><tr><td>ğŸ” redo log è®°å½•</td><td>æ¯æ¡ redo log å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„ LSN</td></tr><tr><td>ğŸ“„ æ•°æ®é¡µåˆ·ç›˜</td><td>æ¯ä¸ªæ•°æ®é¡µä¼šè®°å½•å½“å‰åˆ·ç›˜æ—¶çš„ LSNï¼ˆFIL_PAGE_LSNï¼‰</td></tr><tr><td>â›³ Checkpoint</td><td>è¡¨ç¤ºâ€œè„é¡µå·²ç»åˆ·ç›˜ï¼Œå¯ä»¥é‡Šæ”¾ redoâ€çš„å®‰å…¨ç‚¹</td></tr><tr><td>ğŸ’¥ å´©æºƒæ¢å¤</td><td>é‡å¯æ—¶ä» checkpoint LSN å¼€å§‹é‡æ”¾ redo log</td></tr></tbody></table><p>å¯ä»¥é€šè¿‡ <code>show engine innodb status;</code> æŸ¥çœ‹å½“å‰çš„ LSN ä¿¡æ¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250319161213.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šLSN" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šLSN</figcaption></figure><ul><li>Log sequence numberï¼šå½“å‰ç³»ç»Ÿæœ€å¤§ LSNï¼ˆå·²ç”Ÿæˆçš„æ—¥å¿—æ€»é‡ï¼‰ã€‚</li><li>Log flushed up toï¼šå·²å†™å…¥ç£ç›˜çš„ redo log LSNã€‚</li><li>Pages flushed up toï¼šå·²åˆ·æ–°åˆ°æ•°æ®é¡µçš„ LSNã€‚</li><li>Last checkpoint atï¼šæœ€åä¸€æ¬¡æ£€æŸ¥ç‚¹çš„ LSNï¼Œè¡¨ç¤ºå·²æŒä¹…åŒ–çš„æ•°æ®çŠ¶æ€ã€‚</li></ul><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>memoï¼š2025 å¹´ 3 æœˆ 19 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ä»Šå¤©æœ‰è¯»è€…é—®æ€ä¹ˆä»˜è´¹è´­ä¹°çº¸è´¨ç‰ˆ<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­</a>ï¼Œè¯´çœ‹åˆ°ç½‘å‹æœ‰è¿™ä¸ªï¼Œå¥½ç¾¡æ…•å•Šã€‚è¯´å®è¯ï¼Œç¬¬ä¸€çœ¼çœ‹åˆ°è¿™ä¸ªå°é¢ï¼ŒçœŸçš„è§‰å¾—æŒºæƒŠè‰³ï¼ˆè™½ç„¶æ˜¯æˆ‘è®¾è®¡çš„ï¼‰ã€‚ğŸ˜„</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250319163123.png" alt="è¯»è€…å·²ç»æŠŠé¢æ¸£é€†è¢­å½©å°äº†ï¼Œå¥½æ¼‚äº®å•Š" tabindex="0" loading="lazy"><figcaption>è¯»è€…å·²ç»æŠŠé¢æ¸£é€†è¢­å½©å°äº†ï¼Œå¥½æ¼‚äº®å•Š</figcaption></figure><h4 id="checkpoint-äº†è§£å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#checkpoint-äº†è§£å¤šå°‘"><span>Checkpoint äº†è§£å¤šå°‘ï¼Ÿ</span></a></h4><p>Checkpoint æ˜¯ InnoDB ä¸ºäº†ä¿è¯äº‹åŠ¡æŒä¹…æ€§å’Œå›æ”¶ redo log ç©ºé—´çš„ä¸€ç§æœºåˆ¶ã€‚</p><p>å®ƒçš„ä½œç”¨æ˜¯åœ¨åˆé€‚çš„æ—¶æœºå°†éƒ¨åˆ†è„é¡µåˆ·å…¥ç£ç›˜ï¼Œæ¯”å¦‚è¯´ buffer pool çš„å®¹é‡ä¸è¶³æ—¶ã€‚å¹¶è®°å½•å½“å‰ LSN ä¸º Checkpoint LSNï¼Œè¡¨ç¤ºè¿™ä¸ªä½ç½®ä¹‹å‰çš„ redo log file å·²ç»å®‰å…¨ï¼Œå¯ä»¥è¢«è¦†ç›–äº†ã€‚</p><p>MySQL å´©æºƒæ¢å¤æ—¶åªéœ€è¦ä» Checkpoint ä¹‹åå¼€å§‹æ¢å¤ redo log å°±å¯ä»¥äº†ï¼Œè¿™æ ·å¯ä»¥æœ€å¤§ç¨‹åº¦å‡å°‘æ¢å¤æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚</p><p>redo log file çš„å†™å…¥æ˜¯å¾ªç¯çš„ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªæ ‡è®°ä½ç½®éå¸¸é‡è¦ï¼Œä¹Ÿå°±æ˜¯ Checkpoint å’Œ write posã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-8d944e76-89ba-4fa6-9066-64ff4f55b532.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šcheckpoint å’Œ write pos" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šcheckpoint å’Œ write pos</figcaption></figure><p>write pos æ˜¯ redo log å½“å‰å†™å…¥çš„ä½ç½®ï¼ŒCheckpoint æ˜¯å¯ä»¥è¢«è¦†ç›–çš„ä½ç½®ã€‚</p><p>å½“ write pos è¿½ä¸Š Checkpoint æ—¶ï¼Œè¡¨ç¤º redo log æ—¥å¿—å·²ç»å†™æ»¡ã€‚è¿™æ—¶å€™å°±è¦æš‚åœå†™å…¥å¹¶å¼ºåˆ¶åˆ·ç›˜ï¼Œé‡Šæ”¾å¯è¦†å†™çš„æ—¥å¿—ç©ºé—´ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-31a14149-b261-45d9-bd3b-6afaec16e136.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šwrite pos å’Œ checkpoint" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šwrite pos å’Œ checkpoint</figcaption></figure><h4 id="å…³äºredo-log-çš„è°ƒä¼˜å‚æ•°äº†è§£å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#å…³äºredo-log-çš„è°ƒä¼˜å‚æ•°äº†è§£å¤šå°‘"><span>å…³äºredo log çš„è°ƒä¼˜å‚æ•°äº†è§£å¤šå°‘ï¼Ÿ</span></a></h4><p>å¦‚æœæ˜¯é«˜å¹¶å‘å†™å…¥çš„ç”µå•†ç³»ç»Ÿï¼Œå¯ä»¥æœ€å¤§åŒ–å†™å…¥ååé‡ï¼Œå®¹å¿ç§’çº§æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb_flush_log_at_trx_commit </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sync_binlog </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb_redo_log_capacity </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 64G</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb_io_capacity </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb_lru_scan_depth </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb_log_buffer_size </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 256M</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯é‡‘èäº¤æ˜“ç³»ç»Ÿï¼Œéœ€è¦ä¿è¯æ•°æ®é›¶ä¸¢å¤±ï¼Œæ¥å—è¾ƒä½çš„ååé‡ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb_flush_log_at_trx_commit </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sync_binlog </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb_redo_log_capacity </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 32G</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb_io_capacity </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb_lru_scan_depth </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1024</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ ¸å¿ƒå‚æ•°ä¸€è§ˆè¡¨ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>æ§åˆ¶å†…å®¹</th><th>å½±å“ç‚¹</th></tr></thead><tbody><tr><td>innodb_log_file_size</td><td>æ¯ä¸ª redo log æ–‡ä»¶å¤§å°</td><td>æ€» redo ç©ºé—´ã€æ¢å¤æ—¶é—´</td></tr><tr><td>innodb_log_files_in_group</td><td>redo log æ–‡ä»¶ä¸ªæ•°</td><td>é…åˆæ–‡ä»¶å¤§å°å†³å®šæ€»å®¹é‡</td></tr><tr><td>innodb_log_buffer_size</td><td>redo log buffer ç¼“å†²åŒºå¤§å°</td><td>æ˜¯å¦é¢‘ç¹åˆ·ç›˜ã€å†™å…¥æ€§èƒ½</td></tr><tr><td>innodb_flush_log_at_trx_commit</td><td>redo åˆ·ç›˜ç­–ç•¥</td><td>å®‰å…¨æ€§ vs TPS</td></tr><tr><td>innodb_max_dirty_pages_pct</td><td>è„é¡µæ¯”ä¾‹é˜ˆå€¼</td><td>ä½•æ—¶è§¦å‘åˆ·ç›˜ / Checkpoint</td></tr><tr><td>innodb_io_capacity</td><td>åå°åˆ·ç›˜é€Ÿåº¦</td><td>é™åˆ¶ checkpoint åˆ·ç›˜å‹åŠ›</td></tr></tbody></table><p>æ€»ç»“ï¼š</p><ul><li>å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼Œå¦‚é‡‘èäº¤æ˜“ä½¿ç”¨<code>innodb_flush_log_at_trx_commit=1</code>ï¼Œå¯¹å†™å…¥ååé‡æ•æ„Ÿçš„åœºæ™¯ï¼Œå¦‚æ—¥å¿—é‡‡é›†å¯ä»¥ä½¿ç”¨ =2 æˆ– =0ï¼Œéœ€è¦ç»“åˆ sync_binlog å‚æ•°</li><li>sync_binlog å‚æ•°æ§åˆ¶ binlog çš„åˆ·ç›˜ç­–ç•¥ï¼Œå¯ä»¥è®¾ç½®ä¸º 0ã€1ã€Nï¼Œ0 è¡¨ç¤ºä¾èµ–ç³»ç»Ÿåˆ·ç›˜ï¼Œ1 è¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½åˆ·ç›˜ï¼ˆæ¨èä¸ <code>innodb_flush_log_at_trx_commit=1</code> æ­é…ï¼‰ï¼ŒN=1000 è¡¨ç¤ºç´¯è®¡ 1000 æ¬¡äº‹åŠ¡ååˆ·ç›˜</li><li>innodb_redo_log_capacity åŠ¨æ€è°ƒæ•´ Redo Log æ€»å®¹é‡ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡è´Ÿè½½æƒ…å†µè°ƒæ•´ï¼Œå»ºè®®è®¾ç½®ä¸º 1 å°æ—¶å†™å…¥é‡çš„å³°å€¼ï¼ˆå¦‚æ¯ç§’ 10MB å†™å…¥åˆ™è®¾ä¸º 36GBï¼‰</li><li>innodb_io_capacity å®šä¹‰ InnoDB åå°çº¿ç¨‹çš„æ¯ç§’ I/O æ“ä½œä¸Šé™ï¼Œç›´æ¥å½±å“è„é¡µåˆ·æ–°é€Ÿç‡ï¼›æœºæ¢°ç¡¬ç›˜å»ºè®® 200-500ï¼ŒSSD å»ºè®® 1000-2000ï¼ŒNVMe SSD å¯è®¾ä¸º 5000+</li><li>innodb_lru_scan_depth æ§åˆ¶æ¯ä¸ªç¼“å†²æ± å®ä¾‹ä¸­ LRU åˆ—è¡¨çš„æ‰«ææ·±åº¦ï¼Œå†³å®šæ¯ç§’å¯åˆ·æ–°çš„è„é¡µæ•°é‡ï¼Œé»˜è®¤å€¼ 1024 é€‚ç”¨äºå¤šæ•°åœºæ™¯ï¼ŒI/O å¯†é›†å‹è´Ÿè½½å¯é€‚å½“é™ä½ï¼ˆå¦‚ 512ï¼‰ï¼Œå‡å°‘ CPU å¼€é”€ã€‚</li></ul><!----><p>memoï¼š2025 å¹´ 3 æœˆ 20 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹</a>æŠ¥å–œè¯´æ‹¿åˆ°äº†æ»´æ»´çš„æµ‹å¼€å®ä¹  offerï¼Œæ­å–œæ­å–œï¼</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250320163641.png" alt="çƒå‹æ‹¿åˆ°äº†æ»´æ»´çš„æµ‹å¼€å®ä¹  offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†æ»´æ»´çš„æµ‹å¼€å®ä¹  offer</figcaption></figure><h2 id="sql-ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#sql-ä¼˜åŒ–"><span>SQL ä¼˜åŒ–</span></a></h2><h3 id="_32-ğŸŒŸä»€ä¹ˆæ˜¯æ…¢-sql" tabindex="-1"><a class="header-anchor" href="#_32-ğŸŒŸä»€ä¹ˆæ˜¯æ…¢-sql"><span>32.ğŸŒŸä»€ä¹ˆæ˜¯æ…¢ SQLï¼Ÿ</span></a></h3><p>æ¨èé˜…è¯»ï¼š<a href="https://juejin.cn/post/7048974570228809741" target="_blank" rel="noopener noreferrer">æ…¢ SQL ä¼˜åŒ–ä¸€ç‚¹å°æ€è·¯</a></p><p>MySQL ä¸­æœ‰ä¸€ä¸ªå« long_query_time çš„å‚æ•°ï¼ŒåŸåˆ™ä¸Šæ‰§è¡Œæ—¶é—´è¶…è¿‡è¯¥å‚æ•°å€¼çš„ SQL å°±æ˜¯æ…¢ SQLï¼Œä¼šè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>å¯é€šè¿‡ <code>show variables like &#39;long_query_time&#39;;</code> æŸ¥çœ‹å½“å‰çš„ long_query_time çš„å‚æ•°å€¼ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240327083506.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šlong_query_time" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šlong_query_time</figcaption></figure><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><h4 id="sql-çš„æ‰§è¡Œè¿‡ç¨‹äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#sql-çš„æ‰§è¡Œè¿‡ç¨‹äº†è§£å—"><span>SQL çš„æ‰§è¡Œè¿‡ç¨‹äº†è§£å—ï¼Ÿ</span></a></h4><p>äº†è§£ã€‚</p><p>SQL çš„æ‰§è¡Œè¿‡ç¨‹å¤§è‡´å¯ä»¥åˆ†ä¸ºå…­ä¸ªé˜¶æ®µï¼šè¿æ¥ç®¡ç†ã€è¯­æ³•è§£æã€è¯­ä¹‰åˆ†æã€æŸ¥è¯¢ä¼˜åŒ–ã€æ‰§è¡Œå™¨è°ƒåº¦ã€å­˜å‚¨å¼•æ“è¯»å†™ç­‰ã€‚Server å±‚è´Ÿè´£ç†è§£å’Œè§„åˆ’ SQL æ€ä¹ˆæ‰§è¡Œï¼Œå­˜å‚¨å¼•æ“å±‚è´Ÿè´£æ•°æ®çš„çœŸæ­£è¯»å†™ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240327083838.png" alt="ä¸‰ä¸ªçŒªçš®åŒ ï¼šSQL æ‰§è¡Œè¿‡ç¨‹" tabindex="0" loading="lazy"><figcaption>ä¸‰ä¸ªçŒªçš®åŒ ï¼šSQL æ‰§è¡Œè¿‡ç¨‹</figcaption></figure><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>æ¥è¯¦ç»†æ‹†è§£ä¸€ä¸‹ï¼š</p><ol><li>å®¢æˆ·ç«¯å‘é€ SQL è¯­å¥ç»™ MySQL æœåŠ¡å™¨ã€‚</li><li>å¦‚æœæŸ¥è¯¢ç¼“å­˜æ‰“å¼€åˆ™ä¼šä¼˜å…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œç¼“å­˜ä¸­æœ‰å¯¹åº”çš„ç»“æœå°±ç›´æ¥è¿”å›ã€‚ä¸è¿‡ï¼ŒMySQL 8.0 å·²ç»ç§»é™¤äº†æŸ¥è¯¢ç¼“å­˜ã€‚è¿™éƒ¨åˆ†çš„åŠŸèƒ½æ­£åœ¨è¢« Redis ç­‰ç¼“å­˜ä¸­é—´ä»¶å–ä»£ã€‚</li><li>åˆ†æå™¨å¯¹ SQL è¯­å¥è¿›è¡Œè¯­æ³•åˆ†æï¼Œåˆ¤æ–­æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ã€‚</li><li>ææ¸…æ¥š SQL è¯­å¥è¦å¹²å˜›åï¼ŒMySQL ä¼šé€šè¿‡ä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ã€‚</li><li>æ‰§è¡Œå™¨è°ƒç”¨å­˜å‚¨å¼•æ“çš„æ¥å£ï¼Œæ‰§è¡Œ SQL è¯­å¥ã€‚</li></ol><p>SQL æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼˜åŒ–å™¨é€šè¿‡æˆæœ¬è®¡ç®—é¢„ä¼°å‡ºæ‰§è¡Œæ•ˆç‡æœ€é«˜çš„æ–¹å¼ï¼ŒåŸºæœ¬çš„é¢„ä¼°ç»´åº¦ä¸ºï¼š</p><ul><li>IO æˆæœ¬ï¼šä»ç£ç›˜è¯»å–æ•°æ®åˆ°å†…å­˜çš„å¼€é”€ã€‚</li><li>CPU æˆæœ¬ï¼šCPU å¤„ç†å†…å­˜ä¸­æ•°æ®çš„å¼€é”€ã€‚</li></ul><p>åŸºäºè¿™ä¸¤ä¸ªç»´åº¦ï¼Œå¯ä»¥å¾—å‡ºå½±å“ SQL æ‰§è¡Œæ•ˆç‡çš„å› ç´ æœ‰ï¼š</p><p><strong>â‘ ã€IO æˆæœ¬</strong>ï¼Œæ•°æ®é‡è¶Šå¤§ï¼ŒIO æˆæœ¬è¶Šé«˜ã€‚æ‰€ä»¥è¦å°½é‡æŸ¥è¯¢å¿…è¦çš„å­—æ®µï¼›å°½é‡åˆ†é¡µæŸ¥è¯¢ï¼›å°½é‡é€šè¿‡ç´¢å¼•åŠ å¿«æŸ¥è¯¢ã€‚</p><p><strong>â‘¡ã€CPU æˆæœ¬</strong>ï¼Œå°½é‡é¿å…å¤æ‚çš„æŸ¥è¯¢æ¡ä»¶ï¼Œå¦‚æœ‰å¿…è¦ï¼Œè€ƒè™‘å¯¹å­æŸ¥è¯¢ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><h4 id="å¦‚ä½•ä¼˜åŒ–æ…¢-sql-å‘¢" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä¼˜åŒ–æ…¢-sql-å‘¢"><span>å¦‚ä½•ä¼˜åŒ–æ…¢ SQL å‘¢ï¼Ÿ</span></a></h4><p>é¦–å…ˆï¼Œéœ€è¦æ‰¾åˆ°é‚£äº›æ¯”è¾ƒæ…¢çš„ SQLï¼Œå¯ä»¥é€šè¿‡å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œè®°å½•é‚£äº›è¶…è¿‡æŒ‡å®šæ‰§è¡Œæ—¶é—´çš„ SQL æŸ¥è¯¢ã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>show processlist;</code> å‘½ä»¤æŸ¥çœ‹å½“å‰æ­£åœ¨æ‰§è¡Œçš„ SQL è¯­å¥ï¼Œæ‰¾å‡ºæ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„ SQLã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115145204.png" alt="äºŒå“¥çš„java è¿›é˜¶ä¹‹è·¯ï¼šæŠ€æœ¯æ´¾å½“å‰æ­£åœ¨æ‰§è¡Œçš„ sql" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„java è¿›é˜¶ä¹‹è·¯ï¼šæŠ€æœ¯æ´¾å½“å‰æ­£åœ¨æ‰§è¡Œçš„ sql</figcaption></figure><p>æˆ–è€…åœ¨ä¸šåŠ¡åŸºå»ºä¸­åŠ å…¥å¯¹æ…¢ SQL çš„ç›‘æ§ï¼Œå¸¸è§çš„æ–¹æ¡ˆæœ‰å­—èŠ‚ç æ’æ¡©ã€è¿æ¥æ± æ‰©å±•ã€ORM æ¡†æ¶æ‰©å±•ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115145401.png" alt="äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šæŠ€æœ¯æ´¾ä¼šåœ¨æ—¥å¿—ä¸­è®°å½•è¯·æ±‚çš„æ‰§è¡Œæ—¶é—´" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šæŠ€æœ¯æ´¾ä¼šåœ¨æ—¥å¿—ä¸­è®°å½•è¯·æ±‚çš„æ‰§è¡Œæ—¶é—´</figcaption></figure><p>ç„¶åï¼Œä½¿ç”¨ EXPLAIN æŸ¥çœ‹æ…¢ SQL çš„æ‰§è¡Œè®¡åˆ’ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ç”¨ç´¢å¼•ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ…¢ SQL çš„åŸå› éƒ½æ˜¯å› ä¸ºæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> your_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> conditions;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æœ€åï¼Œæ ¹æ®åˆ†æç»“æœï¼Œé€šè¿‡æ·»åŠ ç´¢å¼•ã€ä¼˜åŒ–æŸ¥è¯¢æ¡ä»¶ã€å‡å°‘è¿”å›å­—æ®µç­‰æ–¹å¼è¿›è¡Œä¼˜åŒ–ã€‚</p><h4 id="æ…¢sqlæ—¥å¿—æ€ä¹ˆå¼€å¯" tabindex="-1"><a class="header-anchor" href="#æ…¢sqlæ—¥å¿—æ€ä¹ˆå¼€å¯"><span>æ…¢sqlæ—¥å¿—æ€ä¹ˆå¼€å¯ï¼Ÿ</span></a></h4><p>ç¼–è¾‘ MySQL çš„é…ç½®æ–‡ä»¶ my.cnfï¼Œè®¾ç½® slow_query_log å‚æ•°ä¸º 1ã€‚</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">slow_query_log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">slow_query_log_file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> /var/log/mysql/slow.log</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">long_query_time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 2  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># è®°å½•æ‰§è¡Œæ—¶é—´è¶…è¿‡2ç§’çš„æŸ¥è¯¢</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åé‡å¯ MySQL å°±å¥½äº†ã€‚</p><p>ä¹Ÿå¯ä»¥é€šè¿‡ set global å‘½ä»¤åŠ¨æ€è®¾ç½®ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> slow_query_log </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ON&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> slow_query_log_file </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/var/log/mysql/slow.log&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> long_query_time </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šåœºæ™¯é¢˜ï¼šsql æŸ¥è¯¢å¾ˆæ…¢æ€ä¹ˆæ’æŸ¥</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 5 é¢è¯•åŸé¢˜ï¼šæ…¢sqlæ—¥å¿—æ€ä¹ˆå¼€å¯ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 3 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šå¦‚ä½•åˆ¤æ–­sqlçš„æ•ˆç‡ï¼Œæ€æ ·æ’æŸ¥æ•ˆç‡æ¯”è¾ƒä½çš„sql</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ä½œä¸šå¸®é¢ç»åŒå­¦ 1 Java åç«¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šmysqlä¸­å¦‚ä½•å®šä½æ…¢æŸ¥è¯¢</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šæ…¢æŸ¥è¯¢æ€ä¹ˆåˆ†æ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 27 äº‘åå°æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šå¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢è¯­å¥ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è™¾çš®é¢ç»åŒå­¦ 13 ä¸€é¢é¢è¯•åŸé¢˜ï¼šmysqlæ…¢æŸ¥è¯¢</li></ol></blockquote><p>memoï¼š2025 å¹´ 3 æœˆ 21 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹æŠ¥å–œ</a>è¯´æ‹¿åˆ°äº† wxg çš„å®ä¹  offerï¼Œé˜¿é‡Œäº‘å’Œç¾å›¢ä¹Ÿåœ¨è¿›è¡Œå½“ä¸­ï¼ŒçœŸçš„ tqlã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250321155611.png" alt="çƒå‹æŠ¥å–œè¯´æ‹¿åˆ°äº† wxg çš„å®ä¹  offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æŠ¥å–œè¯´æ‹¿åˆ°äº† wxg çš„å®ä¹  offer</figcaption></figure><h3 id="_33-ğŸŒŸä½ çŸ¥é“å“ªäº›æ–¹æ³•æ¥ä¼˜åŒ–-sql" tabindex="-1"><a class="header-anchor" href="#_33-ğŸŒŸä½ çŸ¥é“å“ªäº›æ–¹æ³•æ¥ä¼˜åŒ–-sql"><span>33.ğŸŒŸä½ çŸ¥é“å“ªäº›æ–¹æ³•æ¥ä¼˜åŒ– SQLï¼Ÿ</span></a></h3><p>SQL ä¼˜åŒ–çš„æ–¹æ³•éå¸¸å¤šï¼Œä½†æœ¬è´¨ä¸Šå°±ä¸€å¥è¯ï¼šå°½å¯èƒ½å°‘åœ°æ‰«æã€å°½å¿«åœ°è¿”å›ç»“æœã€‚</p><p>æœ€å¸¸è§çš„åšæ³•å°±æ˜¯åŠ ç´¢å¼•ã€æ”¹å†™ SQL è®©å®ƒç”¨ä¸Šç´¢å¼•ï¼Œæ¯”å¦‚è¯´ä½¿ç”¨è¦†ç›–ç´¢å¼•ã€è®©è”åˆç´¢å¼•éµå®ˆæœ€å·¦å‰ç¼€åŸåˆ™ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240327104050.png" alt="æ²‰é»˜ç‹äºŒï¼šSQL ä¼˜åŒ–" tabindex="0" loading="lazy"><figcaption>æ²‰é»˜ç‹äºŒï¼šSQL ä¼˜åŒ–</figcaption></figure><h4 id="å¦‚ä½•åˆ©ç”¨è¦†ç›–ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•åˆ©ç”¨è¦†ç›–ç´¢å¼•"><span>å¦‚ä½•åˆ©ç”¨è¦†ç›–ç´¢å¼•ï¼Ÿ</span></a></h4><p>è¦†ç›–ç´¢å¼•çš„æ ¸å¿ƒæ˜¯â€œæŸ¥è¯¢æ‰€éœ€çš„å­—æ®µéƒ½åœ¨åŒä¸€ä¸ªç´¢å¼•é‡Œâ€ï¼Œè¿™æ · MySQL å°±ä¸éœ€è¦å›è¡¨ï¼Œç›´æ¥ä»ç´¢å¼•ä¸­è¿”å›ç»“æœã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250322095940.png" alt="æ¢¦é‡ŒèŠ±ã€‚ï¼šå›è¡¨" tabindex="0" loading="lazy"><figcaption>æ¢¦é‡ŒèŠ±ã€‚ï¼šå›è¡¨</figcaption></figure><p>å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä¼šä¼˜å…ˆè€ƒè™‘æŠŠ WHERE å’Œ SELECT æ¶‰åŠçš„å­—æ®µä¸€èµ·å»ºè”åˆç´¢å¼•ï¼Œå¹¶é€šè¿‡ EXPLAIN è§‚å¯Ÿç»“æœæ˜¯å¦æœ‰ Using indexï¼Œç¡®è®¤å‘½ä¸­ç´¢å¼•ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨è¦ä» test è¡¨ä¸­æŸ¥è¯¢ city ä¸ºä¸Šæµ·çš„ name å­—æ®µã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â testÂ </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â city</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸Šæµ·&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœä»…åœ¨ city å­—æ®µä¸Šæ·»åŠ ç´¢å¼•ï¼Œé‚£ä¹ˆè¿™æ¡æŸ¥è¯¢è¯­å¥ä¼šå…ˆé€šè¿‡ç´¢å¼•æ‰¾åˆ° city ä¸ºä¸Šæµ·çš„è¡Œï¼Œç„¶åå†å›è¡¨æŸ¥è¯¢ name å­—æ®µã€‚</p><p>ä¸ºäº†é¿å…å›è¡¨æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨ city å’Œ name å­—æ®µä¸Šå»ºç«‹è”åˆç´¢å¼•ï¼Œè¿™æ ·æŸ¥è¯¢ç»“æœå°±å¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è·å–ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">alter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â table</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â testÂ </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">add</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â index1(city,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><h4 id="å¦‚ä½•æ­£ç¡®ä½¿ç”¨è”åˆç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•æ­£ç¡®ä½¿ç”¨è”åˆç´¢å¼•"><span>å¦‚ä½•æ­£ç¡®ä½¿ç”¨è”åˆç´¢å¼•ï¼Ÿ</span></a></h4><p>ä½¿ç”¨è”åˆç´¢å¼•æœ€é‡è¦çš„ä¸€æ¡æ˜¯éµå®ˆæœ€å·¦å‰ç¼€åŸåˆ™ï¼Œä¹Ÿå°±æ˜¯æŸ¥è¯¢æ¡ä»¶éœ€è¦ä»ç´¢å¼•çš„å·¦ä¾§å­—æ®µå¼€å§‹ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>æ¯”å¦‚è¯´æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä¸‰åˆ—çš„è”åˆç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_name_age_sex</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, age, sex);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»€ä¹ˆæ ·çš„æŸ¥è¯¢æ¡ä»¶å¯ä»¥ç”¨åˆ°è¿™ä¸ªç´¢å¼•ï¼š</p><table><thead><tr><th>æŸ¥è¯¢æ¡ä»¶</th><th>èƒ½å¦ç”¨ä¸Š idx_name_age_sexï¼Ÿ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>WHERE name = &#39;itwanger&#39;</td><td>âœ… å¯ä»¥</td><td>åŒ¹é…ç¬¬ä¸€åˆ—ï¼Œå‘½ä¸­ç´¢å¼•</td></tr><tr><td>WHERE name = &#39;itwanger&#39; AND age=20</td><td>âœ… å¯ä»¥</td><td>åŒ¹é…å‰ä¸¤åˆ—ï¼Œå‘½ä¸­ç´¢å¼•</td></tr><tr><td>WHERE age = 20</td><td>âŒ ä¸è¡Œ</td><td>ç¬¬ä¸€åˆ—æ²¡ç”¨ä¸Šï¼Œç´¢å¼•å¤±æ•ˆ</td></tr><tr><td>WHERE name=&#39;itwanger&#39; AND sex=&#39;å¥³&#39;</td><td>âœ… éƒ¨åˆ†å¯ç”¨ï¼ˆåªç”¨å‰ä¸€åˆ—ï¼‰</td><td>age è¢«è·³è¿‡ï¼Œåé¢çš„åˆ—æ— æ³•ä½¿ç”¨</td></tr><tr><td>WHERE name LIKE &#39;it%&#39;</td><td>âœ… å¯ä»¥ï¼ˆå‰ç¼€åŒ¹é…ï¼‰</td><td>name æ˜¯å‰ç¼€åŒ¹é…ï¼Œä¸å½±å“ä½¿ç”¨</td></tr><tr><td>WHERE name LIKE &#39;%wanger%&#39;</td><td>âŒ ä¸è¡Œ</td><td>é€šé…ç¬¦åœ¨å‰ï¼Œä¸èƒ½ç”¨ç´¢å¼•</td></tr></tbody></table><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><h4 id="å¦‚ä½•è¿›è¡Œåˆ†é¡µä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è¿›è¡Œåˆ†é¡µä¼˜åŒ–"><span>å¦‚ä½•è¿›è¡Œåˆ†é¡µä¼˜åŒ–ï¼Ÿ</span></a></h4><p>åˆ†é¡µä¼˜åŒ–çš„æ ¸å¿ƒæ˜¯é¿å…æ·±åº¦åç§»å¸¦æ¥çš„å…¨è¡¨æ‰«æï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥ä¼˜åŒ–ï¼šå»¶è¿Ÿå…³è”å’Œæ·»åŠ ä¹¦ç­¾ã€‚</p><p>å»¶è¿Ÿå…³è”é€‚ç”¨äºéœ€è¦ä»å¤šä¸ªè¡¨ä¸­è·å–æ•°æ®ä¸”ä¸»è¡¨è¡Œæ•°è¾ƒå¤šçš„æƒ…å†µã€‚å®ƒé¦–å…ˆä»ç´¢å¼•è¡¨ä¸­æ£€ç´¢å‡ºéœ€è¦çš„è¡Œ IDï¼Œç„¶åå†æ ¹æ®è¿™äº› ID å»å…³è”å…¶ä»–çš„è¡¨è·å–è¯¦ç»†ä¿¡æ¯ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">details</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees e</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> department d </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">department_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å»¶è¿Ÿå…³è”åï¼Œç¬¬ä¸€æ­¥åªæŸ¥ä¸»é”®ï¼Œé€Ÿåº¦å¿«ï¼Œç¬¬äºŒæ­¥åªå¤„ç† 20 æ¡æ•°æ®ï¼Œæ•ˆç‡é«˜ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">details</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sub</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees e </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> sub</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> department d </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">department_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ·»åŠ ä¹¦ç­¾çš„æ–¹å¼æ˜¯é€šè¿‡è®°ä½ä¸Šä¸€æ¬¡æŸ¥è¯¢è¿”å›çš„æœ€åä¸€è¡Œä¸»é”®å€¼ï¼Œç„¶ååœ¨ä¸‹ä¸€æ¬¡æŸ¥è¯¢çš„æ—¶å€™ä»è¿™ä¸ªå€¼å¼€å§‹ï¼Œä»è€Œè·³è¿‡åç§»é‡è®¡ç®—ï¼Œä»…æ‰«æç›®æ ‡æ•°æ®ï¼Œé€‚åˆç¿»é¡µã€èµ„è®¯æµç­‰åœºæ™¯ã€‚</p><p>å‡è®¾éœ€è¦å¯¹ç”¨æˆ·è¡¨è¿›è¡Œåˆ†é¡µã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡æ·»åŠ ä¹¦ç­¾æ¥ä¼˜åŒ–åï¼ŒæŸ¥è¯¢ä¸å†ä½¿ç”¨<code>OFFSET</code>ï¼Œè€Œæ˜¯ä»ä¸Šä¸€é¡µæœ€åä¸€ä¸ªç”¨æˆ·çš„ ID å¼€å§‹æŸ¥è¯¢ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æœ‰æ•ˆé¿å…ä¸å¿…è¦çš„æ•°æ®æ‰«æï¼Œæé«˜äº†åˆ†é¡µæŸ¥è¯¢çš„æ•ˆç‡ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> last_max_id  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å‡è®¾last_max_idæ˜¯ä¸Šä¸€é¡µæœ€åä¸€è¡Œçš„ID</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸ºä»€ä¹ˆåˆ†é¡µä¼šå˜æ…¢" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆåˆ†é¡µä¼šå˜æ…¢"><span>ä¸ºä»€ä¹ˆåˆ†é¡µä¼šå˜æ…¢ï¼Ÿ</span></a></h4><p>åˆ†é¡µæŸ¥è¯¢çš„æ•ˆç‡é—®é¢˜ä¸»è¦æ˜¯ç”±äº OFFSET çš„å­˜åœ¨ï¼ŒOFFSET ä¼šå¯¼è‡´ MySQL å¿…é¡»æ‰«æå’Œè·³è¿‡ offset + limit æ¡æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯éå¸¸è€—æ—¶çš„ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬è¦æŸ¥è¯¢ç¬¬ 100000 æ¡æ•°æ®ï¼Œé‚£ä¹ˆ MySQL å°±å¿…é¡»æ‰«æ 100000 æ¡æ•°æ®ï¼Œç„¶åå†è¿”å› 10 æ¡æ•°æ®ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ•°æ®è¶Šå¤šã€åç§»è¶Šå¤§ï¼Œå°±è¶Šæ…¢ï¼</p><p>memoï¼š2025 å¹´ 3 æœˆ 22 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ç­‰è…¾è®¯äº‘çš„ HR é¢ï¼Œå¾ˆç€æ€¥ï¼Œä½†æˆ‘èµŒä»–ä¸€å®šèƒ½æ‹¿åˆ° offerï¼Œç­‰ä¸€ä¸ªåç»­å“ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250322103527.png" alt="çƒå‹è¿›å…¥è…¾è®¯äº‘çš„ HR é¢äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹è¿›å…¥è…¾è®¯äº‘çš„ HR é¢äº†</figcaption></figure><h4 id="join-ä»£æ›¿å­æŸ¥è¯¢æœ‰ä»€ä¹ˆå¥½å¤„" tabindex="-1"><a class="header-anchor" href="#join-ä»£æ›¿å­æŸ¥è¯¢æœ‰ä»€ä¹ˆå¥½å¤„"><span>JOIN ä»£æ›¿å­æŸ¥è¯¢æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</span></a></h4><p>ç¬¬ä¸€ï¼ŒJOIN çš„ ON æ¡ä»¶èƒ½æ›´ç›´æ¥åœ°è§¦å‘ç´¢å¼•ï¼Œè€Œå­æŸ¥è¯¢å¯èƒ½å› åµŒå¥—å¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</p><p>ç¬¬äºŒï¼ŒJOIN çš„ä¸€æ¬¡è¿æ¥æ“ä½œæ›¿ä»£äº†å­æŸ¥è¯¢çš„å¤šæ¬¡é‡å¤æ‰§è¡Œï¼Œå°¤å…¶åœ¨å¤§æ•°æ®é‡çš„æƒ…å†µä¸‹æ€§èƒ½å·®å¼‚æ˜æ˜¾ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>æ¯”å¦‚è¯´æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¡¨ orders å’Œ customersã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    order_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    customer_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    amount </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DECIMAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_customer_id (customer_id)  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- customer_idå­—æ®µæœ‰ç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> customers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    customer_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å­æŸ¥è¯¢çš„å†™æ³•ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">order_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">amount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> customers c </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        WHERE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> customer_name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders o;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JOIN çš„å†™æ³•ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">order_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">amount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> customer_name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders o</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> customers c </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>å­æŸ¥è¯¢</th><th>JOIN</th></tr></thead><tbody><tr><td>ç´¢å¼•ä½¿ç”¨</td><td>å†…å±‚å­æŸ¥è¯¢ <code>WHERE c.customer_id = o.customer_id</code> æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œå¯èƒ½æ— æ³•ç›´æ¥åˆ©ç”¨ orders è¡¨çš„ customer_id ç´¢å¼•ã€‚</td><td>JOIN çš„ ON æ¡ä»¶ <code>o.customer_id = c.customer_id</code> å¯ä»¥ç›´æ¥åˆ©ç”¨ orders çš„ idx_customer_id ç´¢å¼•ï¼ŒåŠ é€Ÿè¿æ¥è¿‡ç¨‹ã€‚</td></tr><tr><td>æ‰§è¡Œè®¡åˆ’</td><td>å­æŸ¥è¯¢ä¼šè¢«é‡å¤æ‰§è¡Œï¼ˆæ¯æ¬¡å¤–å±‚ orders è¡Œéƒ½ä¼šè§¦å‘ä¸€æ¬¡å­æŸ¥è¯¢ï¼‰ï¼Œå¯¼è‡´å…¨è¡¨æ‰«æã€‚</td><td>ä¼˜åŒ–å™¨å¯èƒ½é€‰æ‹©é€šè¿‡ç´¢å¼•å¿«é€Ÿå…³è”ä¸¤å¼ è¡¨ï¼Œå‡å°‘æ•°æ®æ‰«æé‡ã€‚ä¾‹å¦‚ï¼Œå…ˆé€šè¿‡ orders çš„ç´¢å¼•æ‰¾åˆ° customer_idï¼Œå†ä¸ customers ä¸»é”®å¿«é€ŸåŒ¹é…ã€‚</td></tr><tr><td>æ€§èƒ½è¡¨ç°</td><td>å½“ orders è¡¨æ•°æ®é‡å¤§æ—¶ï¼Œå­æŸ¥è¯¢å¯èƒ½å› é‡å¤æ‰§è¡Œå¯¼è‡´æ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚</td><td>JOIN çš„ä¸€æ¬¡è¿æ¥æ“ä½œé€šå¸¸æ›´é«˜æ•ˆï¼Œå°¤å…¶åœ¨å¤§æ•°æ®é‡æ—¶ã€‚</td></tr></tbody></table><p>å¯¹äºå­æŸ¥è¯¢ï¼Œæ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>å¤–å±‚ orders è¡¨çš„æ¯ä¸€è¡Œéƒ½ä¼šè§¦å‘ä¸€æ¬¡å­æŸ¥è¯¢ã€‚</li><li>å¦‚æœ orders è¡¨æœ‰ 1000 æ¡è®°å½•ï¼Œåˆ™å­æŸ¥è¯¢ä¼šæ‰§è¡Œ 1000 æ¬¡ã€‚</li><li>æ¯æ¬¡å­æŸ¥è¯¢éƒ½éœ€è¦å•ç‹¬æŸ¥è¯¢ customers è¡¨ï¼ˆå³ä½¿ customer_id ç›¸åŒï¼‰ã€‚</li></ul><p>è€Œ JOIN çš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>æ•°æ®åº“ä¼˜åŒ–å™¨ä¼šå°†ä¸¤å¼ è¡¨çš„è¿æ¥æ“ä½œåˆå¹¶ä¸ºä¸€æ¬¡æ‰§è¡Œã€‚</li><li>é€šè¿‡ç´¢å¼•ï¼ˆå¦‚ orders.customer_id å’Œ customers.customer_idï¼‰å¿«é€Ÿå…³è”æ•°æ®ã€‚</li><li>ä»…æ‰§è¡Œä¸€æ¬¡å…³è”æ“ä½œï¼Œè€Œéå¤šæ¬¡å­æŸ¥è¯¢ã€‚</li></ul><p>æ¥çœ‹ä¸€ä¸‹å­æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">order_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">               (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> customers c </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders o;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250323213511.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå­æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå­æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’</figcaption></figure><p>å­æŸ¥è¯¢ï¼ˆDEPENDENT SUBQUERYï¼‰ç±»å‹è¡¨æ˜å…¶ä¾èµ–å¤–å±‚æŸ¥è¯¢çš„æ¯ä¸€è¡Œï¼Œå¯¼è‡´é‡å¤æ‰§è¡Œã€‚</p><p>å†å¯¹æ¯”çœ‹ä¸€ä¸‹ JOIN çš„æ‰§è¡Œè®¡åˆ’ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">order_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">               (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> customers c </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders o;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250323213756.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šJOIN çš„æ‰§è¡Œè®¡åˆ’" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šJOIN çš„æ‰§è¡Œè®¡åˆ’</figcaption></figure><p>JOIN é€šè¿‡ eq_ref ç±»å‹ç›´æ¥åˆ©ç”¨ä¸»é”®ï¼ˆcustomers.customer_idï¼‰å¿«é€Ÿå…³è”ï¼Œå‡å°‘æ‰«ææ¬¡æ•°ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>memoï¼š2025 å¹´ 3 æœˆ 23 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ï¼Œé€šè¿‡ä¸€æ™šä¸Šçš„æ—¶é—´ï¼Œå°±åœ¨æ˜Ÿçƒé‡Œå­¦åˆ°å¾ˆå¤šçŸ¥è¯†ï¼Œè®©ä»–è¿™ä¸ª 7 å¹´ç»éªŒçš„ CRUD Boy å—ç›ŠåŒªæµ…ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250323214034.png" alt="çƒå‹å¯¹æ˜Ÿçƒçš„ä¸€ç§è¤’å¥–" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹æ˜Ÿçƒçš„ä¸€ç§è¤’å¥–</figcaption></figure><h4 id="joinæ“ä½œä¸ºä»€ä¹ˆè¦å°è¡¨é©±åŠ¨å¤§è¡¨" tabindex="-1"><a class="header-anchor" href="#joinæ“ä½œä¸ºä»€ä¹ˆè¦å°è¡¨é©±åŠ¨å¤§è¡¨"><span>JOINæ“ä½œä¸ºä»€ä¹ˆè¦å°è¡¨é©±åŠ¨å¤§è¡¨ï¼Ÿ</span></a></h4><p>ç¬¬ä¸€ï¼Œå¦‚æœå¤§è¡¨çš„ JOIN å­—æ®µæœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆå°è¡¨çš„æ¯ä¸€è¡Œéƒ½å¯ä»¥é€šè¿‡ç´¢å¼•å¿«é€ŸåŒ¹é…å¤§è¡¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324121435.png" alt="æå®¢æ—¶é—´ï¼šIndex Nested-Loop Join" tabindex="0" loading="lazy"><figcaption>æå®¢æ—¶é—´ï¼šIndex Nested-Loop Join</figcaption></figure><p>æ—¶é—´å¤æ‚åº¦ä¸ºå°è¡¨è¡Œæ•° N ä¹˜ä»¥å¤§è¡¨ç´¢å¼•æŸ¥æ‰¾å¤æ‚åº¦ log(å¤§è¡¨è¡Œæ•° M)ï¼Œæ€»å¤æ‚åº¦ä¸º N*log(M)ã€‚</p><p>æ˜¾ç„¶å°è¡¨åšé©±åŠ¨è¡¨æ¯”å¤§è¡¨åšé©±åŠ¨è¡¨çš„æ—¶é—´å¤æ‚åº¦ M*log(N) æ›´ä½ã€‚</p><p>ç¬¬äºŒï¼Œå¦‚æœå¤§è¡¨æ²¡æœ‰ç´¢å¼•ï¼Œéœ€è¦å°†å°è¡¨çš„æ•°æ®åŠ è½½åˆ°å†…å­˜ï¼Œå†å…¨è¡¨æ‰«æå¤§è¡¨è¿›è¡ŒåŒ¹é…ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324121526.png" alt="æå®¢æ—¶é—´ï¼šBlock Nested-Loop Join" tabindex="0" loading="lazy"><figcaption>æå®¢æ—¶é—´ï¼šBlock Nested-Loop Join</figcaption></figure><p>æ—¶é—´å¤æ‚åº¦ä¸ºå°è¡¨åˆ†æ®µæ•° K ä¹˜ä»¥å¤§è¡¨è¡Œæ•° Mï¼Œå…¶ä¸­ K = å°è¡¨è¡Œæ•° N / å†…å­˜å¤§å° join_buffer_sizeã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324152505.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šjoin_buffer_size" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šjoin_buffer_size</figcaption></figure><p>æ˜¾ç„¶å°è¡¨åšé©±åŠ¨è¡¨çš„æ—¶å€™ K çš„å€¼æ›´å°ï¼Œå¤§è¡¨åšé©±åŠ¨è¡¨çš„æ—¶å€™éœ€è¦å¤šæ¬¡åˆ†æ®µã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326213442.png" alt="è´´ä¸€æ®µçƒå‹å¯¹è¿™ä¸ªé—®é¢˜çš„åˆ†æ" tabindex="0" loading="lazy"><figcaption>è´´ä¸€æ®µçƒå‹å¯¹è¿™ä¸ªé—®é¢˜çš„åˆ†æ</figcaption></figure><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å°è¡¨é©±åŠ¨ï¼ˆé«˜æ•ˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> small_table s</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table l </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> l</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- l.idæœ‰ç´¢å¼•</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¤§è¡¨é©±åŠ¨ï¼ˆä½æ•ˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table l</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> small_table s </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> l</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- s.idæ— ç´¢å¼•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>å½“ä½¿ç”¨ left join æ—¶ï¼Œå·¦è¡¨æ˜¯é©±åŠ¨è¡¨ï¼Œå³è¡¨æ˜¯è¢«é©±åŠ¨è¡¨ã€‚</li><li>å½“ä½¿ç”¨ right join æ—¶ï¼Œåˆšå¥½ç›¸åã€‚</li><li>å½“ä½¿ç”¨ join æ—¶ï¼ŒMySQL ä¼šé€‰æ‹©æ•°æ®é‡æ¯”è¾ƒå°çš„è¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼Œå¤§è¡¨ä½œä¸ºè¢«é©±åŠ¨è¡¨ã€‚</li></ol><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>ä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ç‰¹æ„æ–°å»ºäº†ä¸¤ä¸ªè¡¨ departments å’Œ employeesã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324155729.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šjoin çš„éªŒè¯ï¼Œåˆ›å»ºä¸¤ä¸ªè¡¨" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šjoin çš„éªŒè¯ï¼Œåˆ›å»ºä¸¤ä¸ªè¡¨</figcaption></figure><p>æ’å…¥æµ‹è¯•æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ’å…¥æµ‹è¯•æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> departments </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç ”å‘éƒ¨&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å¸‚åœºéƒ¨&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;äººäº‹éƒ¨&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ’å…¥æ›´å¤šæ•°æ®åˆ°å‘˜å·¥è¡¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å¼ ä¸‰&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æå››&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;èµµå…­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;é’±ä¸ƒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å­™å…«&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">7</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å‘¨ä¹&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å´å&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åç”¨ explain æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324155453.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šjoin çš„æ‰§è¡Œè®¡åˆ’" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šjoin çš„æ‰§è¡Œè®¡åˆ’</figcaption></figure><p>å½“ä½¿ç”¨ left join çš„æ—¶å€™ï¼Œç¬¬ä¸€è¡Œæ˜¯ employees è¡¨ï¼Œè¯´æ˜å·¦è¡¨æ˜¯é©±åŠ¨è¡¨ï¼›å½“ä½¿ç”¨ right join çš„æ—¶å€™ï¼Œç¬¬ä¸€è¡Œæ˜¯ departments è¡¨ï¼Œè¯´æ˜å³è¡¨æ˜¯é©±åŠ¨è¡¨ï¼›å½“ä½¿ç”¨ join çš„æ—¶å€™ï¼Œç¬¬ä¸€è¡Œæ˜¯ departments è¡¨ï¼Œè¯´æ˜ MySQL é»˜è®¤é€‰æ‹©äº†å°è¡¨ä½œä¸ºé©±åŠ¨è¡¨ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>è¿™é‡Œçš„å°è¡¨æŒ‡å®é™…å‚ä¸ JOIN çš„æ•°æ®é‡ï¼Œè€Œä¸æ˜¯è¡¨çš„æ€»è¡Œæ•°ã€‚å¤§è¡¨ç»è¿‡ where æ¡ä»¶è¿‡æ»¤åä¹Ÿå¯èƒ½æˆä¸ºé€»è¾‘å°è¡¨ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å®é™…å‚ä¸JOINçš„æ•°æ®é‡å†³å®šå°è¡¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table l</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> small_table s </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> l</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> l</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">created_at</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2025-01-01&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- lç»è¿‡è¿‡æ»¤åå¯èƒ½æˆä¸ºå°è¡¨</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥å¼ºåˆ¶é€šè¿‡ STRAIGHT_JOIN æç¤º MySQL ä½¿ç”¨æŒ‡å®šçš„é©±åŠ¨è¡¨ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">explain </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> table_1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">table_2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">table_3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col2</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">straight_join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_2 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> table_1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">table_2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">straight_join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_3 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> table_1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> table_3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">explain </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> straight_join</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> table_1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">table_2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">table_3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col2</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_2 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> table_1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">table_2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_3 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> table_1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> table_3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">col1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸ºä»€ä¹ˆè¦é¿å…ä½¿ç”¨-join-å…³è”å¤ªå¤šçš„è¡¨" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦é¿å…ä½¿ç”¨-join-å…³è”å¤ªå¤šçš„è¡¨"><span>ä¸ºä»€ä¹ˆè¦é¿å…ä½¿ç”¨ JOIN å…³è”å¤ªå¤šçš„è¡¨ï¼Ÿ</span></a></h4><p>ç¬¬ä¸€ï¼Œå¤šè¡¨ JOIN çš„æ‰§è¡Œè·¯å¾„ä¼šéšç€è¡¨çš„æ•°é‡å‘ˆç°æŒ‡æ•°çº§å¢é•¿ï¼Œä¼˜åŒ–å™¨éœ€è¦ä¼°ç®—æ‰€æœ‰è·¯å¾„çš„æˆæœ¬ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´å‡ºç°å¤§è¡¨é©±åŠ¨å°è¡¨çš„æƒ…å†µã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> A</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> B </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">a_id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> C </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> C</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">b_id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> D </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> C</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> D</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">c_id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> E </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> D</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> E</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">d_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 5 ä¸ªè¡¨ï¼Œä¼˜åŒ–å™¨éœ€è¯„ä¼° 5! = 120 ç§é¡ºåº</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒï¼Œå¤šè¡¨ JOIN éœ€è¦ç¼“å­˜ä¸­é—´ç»“æœé›†ï¼Œå¯èƒ½è¶…å‡º join_buffer_sizeï¼Œè¿™ç§æƒ…å†µä¸‹å†…å­˜ä¸´æ—¶è¡¨å°±ä¼šè½¬ä¸ºç£ç›˜ä¸´æ—¶è¡¨ï¼Œæ€§èƒ½ä¹Ÿä¼šæ€¥å‰§ä¸‹é™ã€‚</p><p>ã€Š<a href="https://javabetter.cn/pdf/ali-java-shouce.html" target="_blank" rel="noopener noreferrer">é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ</a>ã€‹ä¸Šå°±è§„å®šï¼Œä¸è¦ä½¿ç”¨ join å…³è”å¤ªå¤šçš„è¡¨ï¼Œæœ€å¤šä¸è¦è¶…è¿‡ 3 å¼ è¡¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324163735.png" alt="é˜¿é‡Œå¼€å‘æ‰‹å†Œï¼šMySQL è§„çº¦ä¹‹ JOIN å¤šè¡¨" tabindex="0" loading="lazy"><figcaption>é˜¿é‡Œå¼€å‘æ‰‹å†Œï¼šMySQL è§„çº¦ä¹‹ JOIN å¤šè¡¨</figcaption></figure><p>memoï¼š2025 å¹´ 3 æœˆ 24 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹åé¦ˆè¯´</a>ï¼Œç®€å†ä¸ŠåŠ äº† mydb é¡¹ç›®åï¼Œä¹Ÿé¡ºåˆ©æ‹¿åˆ°è…¾è®¯çš„æš‘æœŸå®ä¹  offerã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250324163940.png" alt="çƒå‹æ‹¿åˆ°è…¾è®¯çš„æš‘æœŸ offer+1" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°è…¾è®¯çš„æš‘æœŸ offer+1</figcaption></figure><h4 id="å¦‚ä½•è¿›è¡Œæ’åºä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è¿›è¡Œæ’åºä¼˜åŒ–"><span>å¦‚ä½•è¿›è¡Œæ’åºä¼˜åŒ–ï¼Ÿ</span></a></h4><p>ç¬¬ä¸€ï¼Œå¯¹ ORDER BY æ¶‰åŠçš„å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œé¿å… filesortã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼˜åŒ–å‰ï¼ˆå¯èƒ½è§¦å‘ filesortï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DESC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼˜åŒ–åï¼ˆæ·»åŠ ç´¢å¼•ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ADD</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_age (age);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯å¤šä¸ªå­—æ®µï¼Œè”åˆç´¢å¼•éœ€è¦ä¿è¯ ORDER BY çš„åˆ—æ˜¯ç´¢å¼•çš„æœ€å·¦å‰ç¼€ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è”åˆç´¢å¼•éœ€ä¸ ORDER BY é¡ºåºä¸€è‡´ï¼ˆage åœ¨å‰ï¼Œname åœ¨åï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ADD</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_age_name (age, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æœ‰æ•ˆåˆ©ç”¨ç´¢å¼•çš„æŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ— æ•ˆæ¡ˆä¾‹ï¼ˆç´¢å¼•å¤±æ•ˆï¼Œå›  name åœ¨ç´¢å¼•ä¸­æ’åœ¨ age ä¹‹åï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, age;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒï¼Œå¯ä»¥é€‚å½“è°ƒæ•´æ’åºå‚æ•°ï¼Œå¦‚å¢å¤§ sort_buffer_sizeã€max_length_for_sort_data ç­‰ï¼Œè®©æ’åºåœ¨å†…å­˜ä¸­å®Œæˆã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326213740.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šsort çš„ä¸€äº›å‚æ•°" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šsort çš„ä¸€äº›å‚æ•°</figcaption></figure><ul><li>sort_buffer_sizeï¼šç”¨äºæ§åˆ¶æ’åºç¼“å†²åŒºçš„å¤§å°ï¼Œé»˜è®¤ä¸º 256KBã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ’åºçš„æ•°æ®é‡å°äº 256KBï¼ŒMySQL ä¼šåœ¨å†…å­˜ä¸­ç›´æ¥æ’åºï¼›å¦åˆ™å°±è¦åœ¨ç£ç›˜ä¸Šè¿›è¡Œ filesortã€‚</li><li>max_length_for_sort_dataï¼šå•è¡Œæ•°æ®çš„æœ€å¤§é•¿åº¦ï¼Œä¼šå½±å“æ’åºç®—æ³•é€‰æ‹©ã€‚å¦‚æœå•è¡Œæ•°æ®è¶…è¿‡è¯¥å€¼ï¼ŒMySQL ä¼šä½¿ç”¨åŒè·¯æ’åºï¼Œå¦åˆ™ä½¿ç”¨å•è·¯æ’åºã€‚</li><li>max_sort_lengthï¼šé™åˆ¶å­—ç¬¦ä¸²æ’åºæ—¶æ¯”è¾ƒçš„å‰ç¼€é•¿åº¦ã€‚å½“ MySQL ä¸å¾—ä¸å¯¹ textã€blob å­—æ®µè¿›è¡Œæ’åºæ—¶ï¼Œä¼šæˆªå–å‰ max_sort_length ä¸ªå­—ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚</li></ul><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>ç¬¬ä¸‰ï¼Œå¯ä»¥é€šè¿‡ where å’Œ limit é™åˆ¶å¾…æ’åºçš„æ•°æ®é‡ï¼Œå‡å°‘æ’åºçš„å¼€é”€ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼˜åŒ–å‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼˜åŒ–åï¼ˆå‡å°‘æ•°æ®ä¼ è¾“å’Œæ’åºå¼€é”€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ·±åº¦åˆ†é¡µä¼˜åŒ–ï¼ˆé¿å… OFFSET æ‰«æå…¨è¡¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä½æ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> last_age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- é«˜æ•ˆï¼ˆè®°å½•ä¸Šä¸€é¡µæœ€åä¸€æ¡çš„ age å€¼ï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä»€ä¹ˆæ˜¯-filesort" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-filesort"><span>ä»€ä¹ˆæ˜¯ filesortï¼Ÿ</span></a></h4><p>æ¨èé˜…è¯»ï¼š<a href="https://petrunia.net/2007/08/29/how-mysql-executes-order-by/" target="_blank" rel="noopener noreferrer">MySQL å¦‚ä½•æ‰§è¡Œ ORDER BY</a></p><p>å½“ä¸èƒ½ä½¿ç”¨ç´¢å¼•ç”Ÿæˆæ’åºç»“æœçš„æ—¶å€™ï¼ŒMySQL éœ€è¦è‡ªå·±è¿›è¡Œæ’åºï¼Œå¦‚æœæ•°æ®é‡æ¯”è¾ƒå°ï¼Œä¼šåœ¨å†…å­˜ä¸­è¿›è¡Œï¼›å¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§å°±éœ€è¦å†™ä¸´æ—¶æ–‡ä»¶åˆ°ç£ç›˜å†æ’åºï¼Œæˆ‘ä»¬å°†è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºæ–‡ä»¶æ’åºã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326220036.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šfilesort" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šfilesort</figcaption></figure><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>å¥½ï¼Œè®©æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ filesort çš„æƒ…å†µï¼Œå»ºè¡¨ã€æ’å…¥æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326220632.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šéªŒè¯ filesort" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šéªŒè¯ filesort</figcaption></figure><p>æ‰§è¡Œ explain æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250326220857.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šfilesort çš„æ‰§è¡Œè®¡åˆ’" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šfilesort çš„æ‰§è¡Œè®¡åˆ’</figcaption></figure><p>èƒ½å¤Ÿçœ‹å¾—å‡ºæ¥ï¼Œå½“ order by id ä¹Ÿå°±æ˜¯ä¸»é”®çš„æ—¶å€™ï¼Œæ²¡æœ‰è§¦å‘ filesortï¼›å½“ order by age çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰ç´¢å¼•ï¼Œå°±è§¦å‘äº† filesortã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>memoï¼š2025 å¹´ 3 æœˆ 26 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ï¼Œæ‹¿åˆ°äº†é˜¿é‡Œäº‘çš„å®ä¹  offerï¼ŒçœŸçš„ tqlã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-é˜¿é‡Œäº‘ç»™æ„å‘ä¹¦äº†.png" alt="çƒå‹æ‹¿åˆ°é˜¿é‡Œäº‘çš„æ„å‘ä¹¦äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°é˜¿é‡Œäº‘çš„æ„å‘ä¹¦äº†</figcaption></figure><h4 id="å…¨å­—æ®µæ’åºå’Œ-rowid-æ’åºäº†è§£å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#å…¨å­—æ®µæ’åºå’Œ-rowid-æ’åºäº†è§£å¤šå°‘"><span>å…¨å­—æ®µæ’åºå’Œ rowid æ’åºäº†è§£å¤šå°‘ï¼Ÿ</span></a></h4><p>å½“æ’åºå­—æ®µæ˜¯ç´¢å¼•å­—æ®µä¸”æ»¡è¶³æœ€å·¦å‰ç¼€åŸåˆ™æ—¶ï¼ŒMySQL å¯ä»¥ç›´æ¥åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§å®Œæˆæ’åºã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327164223.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šç´¢å¼•æ’åº" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šç´¢å¼•æ’åº</figcaption></figure><p>å½“æ— æ³•ä½¿ç”¨ç´¢å¼•æ’åºæ—¶ï¼ŒMySQL éœ€è¦åœ¨å†…å­˜æˆ–ç£ç›˜ä¸­è¿›è¡Œæ’åºæ“ä½œï¼Œåˆ†ä¸ºå…¨å­—æ®µæ’åºå’Œ rowid æ’åºä¸¤ç§ç®—æ³•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327172128.png" alt="æå®¢æ—¶é—´ï¼šå…¨å­—æ®µæ’åº" tabindex="0" loading="lazy"><figcaption>æå®¢æ—¶é—´ï¼šå…¨å­—æ®µæ’åº</figcaption></figure><p>å…¨å­—æ®µæ’åºä¼šä¸€æ¬¡æ€§å–å‡ºæ»¡è¶³æ¡ä»¶è¡Œçš„æ‰€æœ‰å­—æ®µï¼Œç„¶ååœ¨ sort buffer ä¸­è¿›è¡Œæ’åºï¼Œæ’åºåç›´æ¥è¿”å›ç»“æœï¼Œæ— éœ€å›è¡¨ã€‚</p><p>ä»¥ <code>SELECT * FROM user WHERE name = &quot;ç‹äºŒ&quot; ORDER BY age</code> ä¸ºä¾‹ï¼š</p><ul><li>ä» name ç´¢å¼•ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ <code>name=&#39;å¼ ä¸‰&#39;</code> çš„ä¸»é”® idï¼›</li><li>æ ¹æ®ä¸»é”® id å–å‡ºæ•´è¡Œæ‰€æœ‰çš„å­—æ®µï¼Œå­˜å…¥ sort bufferï¼›</li><li>é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°å¤„ç†å®Œæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œ</li><li>å¯¹ sort buffer ä¸­çš„æ•°æ®æŒ‰ age æ’åºï¼Œè¿”å›ç»“æœã€‚</li></ul><p>ä¼˜ç‚¹æ˜¯ä»…éœ€è¦ä¸€æ¬¡ç£ç›˜ IOï¼Œç¼ºç‚¹æ˜¯å†…å­˜å ç”¨å¤§ï¼Œå¦‚æœæ•°é‡è¶…è¿‡ sort buffer çš„è¯ï¼Œéœ€è¦åˆ†ç‰‡è¯»å–å¹¶å€ŸåŠ©ä¸´æ—¶æ–‡ä»¶åˆå¹¶æ’åºï¼ŒIO æ¬¡æ•°åè€Œä¼šå¢åŠ ã€‚</p><p>ä¹Ÿæ— æ³•å¤„ç†åŒ…å« text å’Œ blob ç±»å‹çš„å­—æ®µã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327171803.png" alt="æå®¢æ—¶é—´ï¼šrowid æ’åº" tabindex="0" loading="lazy"><figcaption>æå®¢æ—¶é—´ï¼šrowid æ’åº</figcaption></figure><p>rowid æ’åºåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p><ul><li>ç¬¬ä¸€é˜¶æ®µï¼šæ ¹æ®æŸ¥è¯¢æ¡ä»¶å–å‡ºæ’åºå­—æ®µå’Œä¸»é”® IDï¼Œå­˜å…¥ sort buffer è¿›è¡Œæ’åºï¼›</li><li>ç¬¬äºŒé˜¶æ®µï¼šæ ¹æ®æ’åºåçš„ä¸»é”® ID å›è¡¨å–å‡ºå…¶ä»–éœ€è¦çš„å­—æ®µã€‚</li></ul><p>åŒæ ·ä»¥ <code>SELECT * FROM user WHERE name = &quot;ç‹äºŒ&quot; ORDER BY age</code> ä¸ºä¾‹ï¼š</p><ul><li>ä» name ç´¢å¼•ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ <code>name=&#39;å¼ ä¸‰&#39;</code> çš„ä¸»é”® idï¼›</li><li>æ ¹æ®ä¸»é”® id å–å‡ºæ’åºå­—æ®µ ageï¼Œè¿åŒä¸»é”® id ä¸€èµ·å­˜å…¥ sort bufferï¼›</li><li>é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°å¤„ç†å®Œæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œ</li><li>å¯¹ sort buffer ä¸­çš„æ•°æ®æŒ‰ age æ’åºï¼›</li><li>éå†æ’åºåçš„ä¸»é”® idï¼Œå›è¡¨å–å‡ºå…¶ä»–æ‰€éœ€å­—æ®µï¼Œè¿”å›ç»“æœã€‚</li></ul><p>ä¼˜ç‚¹æ˜¯å†…å­˜å ç”¨è¾ƒå°‘ï¼Œé€‚åˆå­—æ®µå¤šæˆ–è€…æ•°æ®é‡å¤§çš„åœºæ™¯ï¼Œç¼ºç‚¹æ˜¯éœ€è¦ä¸¤æ¬¡ç£ç›˜ IOã€‚</p><p>MySQL ä¼šæ ¹æ®ç³»ç»Ÿå˜é‡ max_length_for_sort_data å’ŒæŸ¥è¯¢å­—æ®µçš„æ€»å¤§å°æ¥å†³å®šä½¿ç”¨å…¨å­—æ®µæ’åºè¿˜æ˜¯ rowid æ’åºã€‚</p><p>å¦‚æœæŸ¥è¯¢å­—æ®µæ€»é•¿åº¦ &lt;= max_length_for_sort_dataï¼ŒMySQL ä¼šä½¿ç”¨å…¨å­—æ®µæ’åºï¼›å¦åˆ™ä¼šä½¿ç”¨ rowid æ’åºã€‚</p><h4 id="ä½ å¯¹-sort-merge-passes-å‚æ•°äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#ä½ å¯¹-sort-merge-passes-å‚æ•°äº†è§£å—"><span>ä½ å¯¹ Sort_merge_passes å‚æ•°äº†è§£å—ï¼Ÿ</span></a></h4><p>æ¨èé˜…è¯»ï¼š<a href="https://mp.weixin.qq.com/s/YBWbEahWp0uVN_n9jAFU0A" target="_blank" rel="noopener noreferrer">æ·±å…¥äº†è§£ MySQL Order By æ–‡ä»¶æ’åº</a></p><p>Sort_merge_passes æ˜¯ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼Œç”¨äºç»Ÿè®¡ MySQL åœ¨æ‰§è¡Œæ’åºæ“ä½œæ—¶è¿›è¡Œå½’å¹¶æ’åºçš„æ¬¡æ•°ã€‚</p><p>å½“ MySQL éœ€è¦è¿›è¡Œæ’åºä½†æ’åºæ•°æ®æ— æ³•å®Œå…¨æ”¾å…¥ sort_buffer_size å®šä¹‰çš„å†…å­˜ç¼“å†²åŒºæ—¶ï¼Œå°±ä¼šä½¿ç”¨ä¸´æ—¶æ–‡ä»¶è¿›è¡Œå¤–éƒ¨æ’åºï¼Œè¿™æ—¶å°±ä¼šäº§ç”Ÿ Sort_merge_passesã€‚</p><p>å¦‚æœ Sort_merge_passes åœ¨çŸ­æ—¶é—´å†…å¿«é€Ÿæ¿€å¢ï¼Œè¯´æ˜æ’åºæ“ä½œçš„æ•°æ®é‡è¾ƒå¤§ï¼Œéœ€è¦è°ƒæ•´ sort_buffer_size æˆ–è€…ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327173629.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šSort_merge_passes" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šSort_merge_passes</figcaption></figure><p>MySQL åœ¨æ‰§è¡Œæ’åºæ“ä½œæ—¶ï¼Œä¼šç»å†ä¸¤ä¸ªè¿‡ç¨‹ï¼š</p><ul><li>å†…å­˜æ’åºé˜¶æ®µï¼ŒMySQL é¦–å…ˆå°è¯•åœ¨ sort buffer ä¸­è¿›è¡Œæ’åºã€‚å¦‚æœæ•°æ®é‡å°äº sort_buffer_size ç¼“å†²åŒºå¤§å°ï¼Œä¼šå®Œå…¨åœ¨å†…å­˜ä¸­å®Œæˆå¿«é€Ÿæ’åºã€‚</li><li>å¤–éƒ¨æ’åºé˜¶æ®µï¼Œå¦‚æœæ•°æ®é‡è¶…è¿‡ sort_buffer_sizeï¼ŒMySQL ä¼šå°†æ•°æ®åˆ†æˆå¤šä¸ªå—ï¼Œæ¯å—å•ç‹¬æ’åºåå†™å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åå¯¹è¿™äº›å·²æ’åºçš„å—è¿›è¡Œå½’å¹¶æ’åºã€‚æ¯æ¬¡å½’å¹¶æ“ä½œéƒ½ä¼šå¢åŠ  Sort_merge_passes çš„è®¡æ•°ã€‚</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327174147.png" alt="ä¸€æ ‘ä¸€æºªï¼šå½’å¹¶æ’åº" tabindex="0" loading="lazy"><figcaption>ä¸€æ ‘ä¸€æºªï¼šå½’å¹¶æ’åº</figcaption></figure><p>memoï¼š2025 å¹´ 3 æœˆ 27 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ï¼Œé€šè¿‡äº†å¿«æ‰‹äºŒé¢ï¼Œå¹¶ä¸” HR é¢æ˜¯ä¸æ’åºçš„ï¼Œå·²ç»ç¡®å®šäº†å…¥èŒæ—¶é—´ï¼Œæ­å–œå•Šã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250327174927.png" alt="æœ‰çƒå‹æ‹¿åˆ°å¿«æ‰‹çš„ offer äº†" tabindex="0" loading="lazy"><figcaption>æœ‰çƒå‹æ‹¿åˆ°å¿«æ‰‹çš„ offer äº†</figcaption></figure><h4 id="æ¡ä»¶ä¸‹æ¨ä½ äº†è§£å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#æ¡ä»¶ä¸‹æ¨ä½ äº†è§£å¤šå°‘"><span>æ¡ä»¶ä¸‹æ¨ä½ äº†è§£å¤šå°‘ï¼Ÿ</span></a></h4><p>æ¡ä»¶ä¸‹æ¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¤–å±‚çš„è¿‡æ»¤æ¡ä»¶ï¼Œæ¯”å¦‚è¯´ whereã€join ç­‰ï¼Œå°½å¯èƒ½åœ°ä¸‹æ¨åˆ°æŸ¥è¯¢è®¡åˆ’çš„æ›´åº•å±‚ï¼Œæ¯”å¦‚è¯´å­æŸ¥è¯¢ã€è¿æ¥æ“ä½œä¹‹å‰ï¼Œä»è€Œå‡å°‘ä¸­é—´ç»“æœçš„æ•°æ®é‡ã€‚</p><p>æ¯”å¦‚è¯´åŸå§‹æŸ¥è¯¢æ˜¯ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> total </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> subquery</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> subquery</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;shipped&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°±å¯ä»¥å°†æ¡ä»¶ä¸‹æ¨åˆ°å­æŸ¥è¯¢ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> total </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;shipped&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> subquery;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å°±å¯ä»¥å‡å°‘æŸ¥è¯¢è¿”å›çš„æ•°æ®é‡ï¼Œé¿å…å¤–å±‚å†è¿‡æ»¤ã€‚</p><p>å†æ¯”å¦‚è¯´ union ä¸­çš„åŸå§‹æŸ¥è¯¢æ˜¯ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t1) </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UNION ALL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t2)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> col </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°±å¯ä»¥å°†æ¡ä»¶ä¸‹æ¨åˆ°æ¯ä¸ªå­æŸ¥è¯¢ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t1 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> col </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UNION ALL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t2 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> col </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯ä¸ªå­æŸ¥è¯¢ä»…è¿”å›å‰ 10 æ¡æ•°æ®ï¼Œå‡å°‘ä¸´æ—¶è¡¨çš„æ•°æ®é‡ã€‚</p><p>å†æ¯”å¦‚è¯´è¿æ¥æŸ¥è¯¢ join ä¸­çš„åŸå§‹æŸ¥è¯¢æ˜¯ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> customers </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> customers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> customers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">country</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;china&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°±å¯ä»¥å°†æ¡ä»¶ä¸‹æ¨åˆ°è¡¨æ‰«æçš„æ—¶å€™ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> customers </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> country </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;china&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> filtered_customers</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">customer_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> filtered_customers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…ˆè¿‡æ»¤ customers è¡¨ï¼Œå‡å°‘ join æ—¶çš„æ•°æ®é‡ã€‚</p><h4 id="ä¸ºä»€ä¹ˆè¦å°½é‡é¿å…ä½¿ç”¨-select" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦å°½é‡é¿å…ä½¿ç”¨-select"><span>ä¸ºä»€ä¹ˆè¦å°½é‡é¿å…ä½¿ç”¨ select *ï¼Ÿ</span></a></h4><p>SELECT * ä¼šå¼ºåˆ¶ MySQL è¯»å–è¡¨ä¸­æ‰€æœ‰å­—æ®µçš„æ•°æ®ï¼ŒåŒ…æ‹¬åº”ç”¨ç¨‹åºå¯èƒ½å¹¶ä¸éœ€è¦çš„ï¼Œæ¯”å¦‚ textã€blob ç±»å‹çš„å¤§å­—æ®µã€‚</p><p>åŠ è½½å†—ä½™æ•°æ®ä¼šå ç”¨æ›´å¤šçš„ç¼“å­˜ç©ºé—´ï¼Œä»è€ŒæŒ¤å å…¶ä»–é‡è¦æ•°æ®çš„ç¼“å­˜èµ„æºï¼Œé™ä½æ•´ä½“ç³»ç»Ÿçš„ååé‡ã€‚</p><p>ä¹Ÿä¼šå¢åŠ ç½‘ç»œä¼ è¾“çš„å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å­—æ®µçš„æƒ…å†µä¸‹ã€‚</p><p>æœ€é‡è¦çš„æ˜¯ï¼ŒSELECT * å¯èƒ½ä¼šå¯¼è‡´è¦†ç›–ç´¢å¼•å¤±æ•ˆï¼Œæœ¬æ¥å¯ä»¥èµ°ç´¢å¼•çš„æŸ¥è¯¢æœ€åå˜æˆäº†å…¨è¡¨æ‰«æã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆå‡è®¾ç´¢å¼•ä¸º idx_countryï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, country </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> country </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;china&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯èƒ½ä»…æ‰«æç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä½¿ç”¨ SELECT *</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> country </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;china&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;            </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- éœ€å›è¡¨è¯»å–æ‰€æœ‰åˆ—</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä½ è¿˜çŸ¥é“å“ªäº›-sql-ä¼˜åŒ–æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ä½ è¿˜çŸ¥é“å“ªäº›-sql-ä¼˜åŒ–æ–¹æ³•"><span>ä½ è¿˜çŸ¥é“å“ªäº› SQL ä¼˜åŒ–æ–¹æ³•ï¼Ÿ</span></a></h4><p><strong>â‘ ã€é¿å…ä½¿ç”¨ != æˆ–è€… &lt;&gt; æ“ä½œç¬¦</strong></p><p><code>!=</code> æˆ–è€… <code>&lt;&gt;</code> æ“ä½œç¬¦ä¼šå¯¼è‡´ MySQL æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼Œä»è€Œå¯¼è‡´å…¨è¡¨æ‰«æã€‚</p><p>å¯ä»¥æŠŠ<code>column&lt;&gt;&#39;aaa&#39;</code>ï¼Œæ”¹æˆ<code>column&gt;&#39;aaa&#39; or column&lt;&#39;aaa&#39;</code>ã€‚</p><p><strong>â‘¡ã€ä½¿ç”¨å‰ç¼€ç´¢å¼•</strong></p><p>æ¯”å¦‚ï¼Œé‚®ç®±çš„åç¼€ä¸€èˆ¬éƒ½æ˜¯å›ºå®šçš„<code>@xxx.com</code>ï¼Œé‚£ä¹ˆç±»ä¼¼è¿™ç§åé¢å‡ ä½ä¸ºå›ºå®šå€¼çš„å­—æ®µå°±éå¸¸é€‚åˆå®šä¹‰ä¸ºå‰ç¼€ç´¢å¼•ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">alter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â table</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â testÂ </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">add</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â index2(email(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQL æ— æ³•åˆ©ç”¨å‰ç¼€ç´¢å¼•åš order by å’Œ group by æ“ä½œã€‚</p><p><strong>â‘¢ã€é¿å…åœ¨åˆ—ä¸Šä½¿ç”¨å‡½æ•°</strong></p><p>åœ¨ where å­å¥ä¸­ç›´æ¥å¯¹åˆ—ä½¿ç”¨å‡½æ•°ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œå› ä¸º MySQL éœ€è¦å¯¹æ¯è¡Œçš„åˆ—åº”ç”¨å‡½æ•°åå†è¿›è¡Œæ¯”è¾ƒã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â testÂ </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â date_format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(create_time,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;%Y-%m-%d&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2021-01-01&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¯ä»¥æ”¹æˆï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â testÂ </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â create_time</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2021-01-01 00:00:00&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> and</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> create_time</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2021-01-02 00:00:00&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>é€šè¿‡æ—¥æœŸçš„èŒƒå›´æŸ¥è¯¢ï¼Œè€Œä¸æ˜¯åœ¨åˆ—ä¸Šä½¿ç”¨å‡½æ•°ï¼Œå¯ä»¥åˆ©ç”¨ create_time ä¸Šçš„ç´¢å¼•ã€‚</p><p>memoï¼š2025 å¹´ 3 æœˆ 28 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ï¼Œå­—èŠ‚è·³åŠ¨å’Œè…¾è®¯çš„æš‘æœŸå®ä¹ éƒ½ OC äº†ï¼Œå¾ˆæ„Ÿè°¢å½“æ—¶åŠ äº†äºŒå“¥çš„ç¼–ç¨‹æ˜Ÿçƒï¼Œçœ‹çƒå‹ä»¬æ—¥å¸¸çš„å­¦ä¹ åˆ†äº«ï¼Œä»¥åŠäºŒå“¥æ¨èçš„è½®å­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250328155527.png" alt="çƒå‹å­—èŠ‚å’Œè…¾è®¯éƒ½ OCäº†" tabindex="0" loading="lazy"><figcaption>çƒå‹å­—èŠ‚å’Œè…¾è®¯éƒ½ OCäº†</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 22 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šæŸ¥è¯¢ä¼˜åŒ–ã€è”åˆç´¢å¼•ã€è¦†ç›–ç´¢å¼•</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´ SQL è¯¥å¦‚ä½•ä¼˜åŒ–</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 6 Java é€šç”¨è½¯ä»¶å¼€å‘ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´ SQL è¯¥å¦‚ä½•ä¼˜åŒ–</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾®ä¼—é“¶è¡ŒåŒå­¦ 1 Java åç«¯ä¸€é¢çš„åŸé¢˜ï¼šMySQL ç´¢å¼•å¦‚ä½•ä¼˜åŒ–ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æºç¨‹é¢ç»åŒå­¦ 10 Java æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šè®²ä¸€è®² MySQL çš„ç´¢å¼•ï¼Œå¦‚ä½•ä¼˜åŒ– SQLï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç”¨å‹é¢è¯•åŸé¢˜ï¼šäº†è§£ mysql æ€ä¹ˆä¼˜åŒ–å—</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œç³»é¢ç»åŒå­¦ 19 é¥¿äº†ä¹ˆé¢è¯•åŸé¢˜ï¼šæŸ¥è¯¢å¦‚ä½•ä¼˜åŒ–</li></ol></blockquote><h3 id="_34-ğŸŒŸexplainå¹³å¸¸æœ‰ç”¨è¿‡å—" tabindex="-1"><a class="header-anchor" href="#_34-ğŸŒŸexplainå¹³å¸¸æœ‰ç”¨è¿‡å—"><span>34.ğŸŒŸexplainå¹³å¸¸æœ‰ç”¨è¿‡å—ï¼Ÿ</span></a></h3><p>ç»å¸¸ç”¨ï¼Œexplain æ˜¯ MySQL æä¾›çš„ä¸€ä¸ªç”¨äºæŸ¥çœ‹ SQL æ‰§è¡Œè®¡åˆ’çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ†ææŸ¥è¯¢è¯­å¥çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>ä¸€å…±æœ‰ 10 æ¥ä¸ªè¾“å‡ºå‚æ•°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e234658f-5672-4a8d-9a75-872b305a171d.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šEXPLAIN" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šEXPLAIN</figcaption></figure><p>æ¯”å¦‚è¯´ <code>type=ALL,key=NULL</code> è¡¨ç¤º SQL æ­£åœ¨å…¨è¡¨æ‰«æï¼Œå¯ä»¥è€ƒè™‘ä¸º where å­—æ®µæ·»åŠ ç´¢å¼•è¿›è¡Œä¼˜åŒ–ï¼›<code>Extra=Using filesort</code> è¡¨ç¤º SQL æ­£åœ¨æ–‡ä»¶æ’åºï¼Œå¯ä»¥è€ƒè™‘ä¸º order by å­—æ®µæ·»åŠ ç´¢å¼•ã€‚</p><p>ä½¿ç”¨æ–¹å¼ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥åœ¨ select å‰åŠ ä¸Š <code>explain</code> å…³é”®å­—å°±å¯ä»¥äº†ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">explain </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> students </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ›´é«˜çº§çš„ç”¨æ³•å¯ä»¥é…åˆ <code>format=json</code> å‚æ•°ï¼Œå°† explain çš„è¾“å‡ºç»“æœä»¥ JSON æ ¼å¼è¿”å›ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">explain format</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">json</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> students </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250329103010.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šexplain json æ ¼å¼" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šexplain json æ ¼å¼</figcaption></figure><h4 id="explain-è¾“å‡ºç»“æœä¸­å¸¸è§çš„å­—æ®µå«ä¹‰ç†è§£å—" tabindex="-1"><a class="header-anchor" href="#explain-è¾“å‡ºç»“æœä¸­å¸¸è§çš„å­—æ®µå«ä¹‰ç†è§£å—"><span>explain è¾“å‡ºç»“æœä¸­å¸¸è§çš„å­—æ®µå«ä¹‰ç†è§£å—ï¼Ÿ</span></a></h4><p>åœ¨ EXPLAIN è¾“å‡ºç»“æœä¸­æˆ‘æœ€å…³æ³¨çš„å­—æ®µæ˜¯ typeã€keyã€rows å’Œ Extraã€‚</p><p>æˆ‘ä¼šé€šè¿‡å®ƒä»¬åˆ¤æ–­ SQL æœ‰æ²¡æœ‰èµ°ç´¢å¼•ã€æ˜¯å¦å…¨è¡¨æ‰«æã€é¢„ä¼°æ‰«æè¡Œæ•°æ˜¯å¦å¤ªå¤§ï¼Œä»¥åŠæ˜¯å¦è§¦å‘äº† filesort æˆ–ä¸´æ—¶è¡¨ã€‚ä¸€æ—¦å‘ç°é—®é¢˜ï¼Œæ¯”å¦‚ type=ALL æˆ–è€… Extra=Using filesortï¼Œæˆ‘ä¼šè€ƒè™‘å»ºç´¢å¼•ã€æ”¹å†™ SQL æˆ–æ§åˆ¶æŸ¥è¯¢ç»“æœé›†æ¥åšä¼˜åŒ–ã€‚</p><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>ä»¥ <code>EXPLAIN SELECT * FROM orders WHERE user_id = 100</code> çš„è¾“å‡ºä¸ºä¾‹ï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>å€¼</th><th>å«ä¹‰ä¸ä¼˜åŒ–æŒ‡å¯¼</th></tr></thead><tbody><tr><td>id</td><td>1</td><td>æŸ¥è¯¢åºåˆ—å·ã€‚</td></tr><tr><td>select_type</td><td>SIMPLE</td><td>ç®€å•æŸ¥è¯¢ï¼ˆæ— å­æŸ¥è¯¢æˆ– UNIONï¼‰ã€‚å¤æ‚åœºæ™¯è¿˜æœ‰ PRIMARYã€SUBQUERYã€DERIVED ç­‰ã€‚</td></tr><tr><td>table</td><td>orders</td><td>å½“å‰æ­¥éª¤æ“ä½œçš„è¡¨åã€‚</td></tr><tr><td>partitions</td><td>NULL</td><td>æ¶‰åŠçš„åˆ†åŒºã€‚</td></tr><tr><td>type</td><td>ref</td><td>è®¿é—®ç±»å‹ï¼šå…³é”®æ€§èƒ½æŒ‡æ ‡ï¼Œå¸¸è§ç±»å‹ï¼š<br> - system/constï¼šå”¯ä¸€å€¼åŒ¹é…ï¼ˆæ€§èƒ½æœ€ä½³ï¼‰<br> - eq_refï¼šä¸»é”®/å”¯ä¸€ç´¢å¼•è¿æ¥<br> - refï¼šéå”¯ä¸€ç´¢å¼•åŒ¹é…<br> - rangeï¼šç´¢å¼•èŒƒå›´æ‰«æ<br> - indexï¼šå…¨ç´¢å¼•æ‰«æ<br> - ALLï¼šå…¨è¡¨æ‰«æï¼ˆéœ€ä¼˜åŒ–ï¼‰</td></tr><tr><td>possible_keys</td><td>idx_user_id</td><td>å¯èƒ½ä½¿ç”¨çš„ç´¢å¼•ã€‚è‹¥ä¸ºç©ºï¼Œè¯´æ˜æ— åˆé€‚ç´¢å¼•ã€‚</td></tr><tr><td>key</td><td>idx_user_id</td><td>å®é™…é€‰æ‹©çš„ç´¢å¼•ã€‚è‹¥ä¸º NULLï¼Œè¡¨ç¤ºæœªä½¿ç”¨ç´¢å¼•ã€‚</td></tr><tr><td>key_len</td><td>4</td><td>ç´¢å¼•ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œå¯åˆ¤æ–­æ˜¯å¦ä½¿ç”¨å®Œæ•´ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œè”åˆç´¢å¼• (a,b)ï¼Œè‹¥ key_len=4 å¯èƒ½åªç”¨åˆ°äº† a åˆ—ã€‚</td></tr><tr><td>ref</td><td>const</td><td>ä¸ç´¢å¼•æ¯”è¾ƒçš„åˆ—æˆ–å¸¸é‡ï¼ˆå¦‚ WHERE user_id=100 ä¸­çš„ 100ï¼‰ã€‚</td></tr><tr><td>rows</td><td>50</td><td>é¢„ä¼°æ‰«æè¡Œæ•°ã€‚æ•°å€¼è¶Šå°è¶Šå¥½ï¼Œè‹¥ä¸å®é™…å·®è·å¤§ï¼Œå¯èƒ½ç»Ÿè®¡ä¿¡æ¯è¿‡æœŸï¼ˆéœ€ ANALYZE TABLEï¼‰ã€‚</td></tr><tr><td>filtered</td><td>100.00</td><td>æŸ¥è¯¢æ¡ä»¶è¿‡æ»¤åå‰©ä½™è¡Œçš„ç™¾åˆ†æ¯”ã€‚ä¾‹å¦‚ rows=1000 ä¸” filtered=10%ï¼Œåˆ™æœ€ç»ˆè¿”å›çº¦ 100 è¡Œã€‚</td></tr><tr><td>Extra</td><td>Using where</td><td>é™„åŠ ä¿¡æ¯ï¼š<br>- Using indexï¼šè¦†ç›–ç´¢å¼•ï¼ˆæ— éœ€å›è¡¨ï¼‰<br>- Using temporaryï¼šä½¿ç”¨ä¸´æ—¶è¡¨<br>- Using filesortï¼šæ–‡ä»¶æ’åº</td></tr></tbody></table><p>éè¡¨æ ¼ç‰ˆæœ¬ï¼š</p><p>â‘ ã€<strong>id</strong> åˆ—ï¼šæŸ¥è¯¢çš„æ‰§è¡Œé¡ºåºç¼–å·ã€‚id ç›¸åŒï¼šåŒä¸€æ‰§è¡Œå±‚çº§ï¼ŒæŒ‰ table åˆ—ä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œï¼ˆå¦‚å¤šè¡¨ JOINï¼‰ï¼›id é€’å¢ï¼šåµŒå¥—å­æŸ¥è¯¢ï¼Œæ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆæ‰§è¡Œã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t1 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t2 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sub;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>t2 å­æŸ¥è¯¢çš„ id=2ï¼Œä¼˜å…ˆæ‰§è¡Œã€‚</p><p>â‘¡ã€<strong>select_type</strong> åˆ—ï¼šæŸ¥è¯¢çš„ç±»å‹ã€‚å¸¸è§çš„ç±»å‹æœ‰ï¼š</p><ul><li>SIMPLEï¼šç®€å•æŸ¥è¯¢ï¼Œä¸åŒ…å«å­æŸ¥è¯¢æˆ–è€… UNIONã€‚</li><li>PRIMARYï¼šæŸ¥è¯¢ä¸­å¦‚æœåŒ…å«å­æŸ¥è¯¢ï¼Œåˆ™æœ€å¤–å±‚æŸ¥è¯¢è¢«æ ‡è®°ä¸º PRIMARYã€‚éœ€è¦å…³æ³¨å­æŸ¥è¯¢æˆ–æ´¾ç”Ÿè¡¨æ€§èƒ½ã€‚</li><li>SUBQUERYï¼šå­æŸ¥è¯¢ï¼›éœ€è¦é¿å…å¤šå±‚åµŒå¥—ï¼Œå°½é‡æ”¹å†™ä¸º JOINã€‚</li><li>DERIVEDï¼šæ´¾ç”Ÿè¡¨ï¼ˆFROM å­å¥ä¸­çš„å­æŸ¥è¯¢ï¼‰ã€‚éœ€è¦å‡å°‘æ´¾ç”Ÿè¡¨æ•°æ®é‡ï¼Œæˆ–ç‰©åŒ–ä¸ºä¸´æ—¶è¡¨ã€‚</li></ul><p>â‘¢ã€<strong>table</strong> åˆ—ï¼šæŸ¥çš„å“ªä¸ªè¡¨ã€‚</p><ul><li>derivedNï¼šè¡¨ç¤ºæ´¾ç”Ÿè¡¨ï¼ˆN å¯¹åº” idï¼‰ã€‚</li><li>unionNM,Nï¼šè¡¨ç¤º UNION åˆå¹¶çš„ç»“æœï¼ˆMã€N ä¸ºå‚ä¸ UNION çš„ idï¼‰ã€‚</li></ul><p>â‘£ã€<strong>type</strong> åˆ—ï¼šè¡¨ç¤º MySQL åœ¨è¡¨ä¸­æ‰¾åˆ°æ‰€éœ€è¡Œçš„æ–¹å¼ã€‚</p><ul><li>systemï¼Œè¡¨ä»…æœ‰ä¸€è¡Œï¼ˆç³»ç»Ÿè¡¨æˆ–è¡ç”Ÿè¡¨ï¼‰ï¼Œæ— éœ€ä¼˜åŒ–ã€‚</li><li>constï¼šé€šè¿‡ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ‰¾åˆ°ä¸€è¡Œï¼ˆå¦‚ WHERE id = 1ï¼‰ã€‚ç†æƒ³æƒ…å†µã€‚</li><li>eq_refï¼šå¯¹ä¸»é”®/å”¯ä¸€ç´¢å¼• JOIN åŒ¹é…ï¼ˆå¦‚ <code>A JOIN B ON A.id = B.id</code>ï¼‰ã€‚ç¡®ä¿ JOIN å­—æ®µæœ‰ç´¢å¼•ã€‚</li><li>refï¼šéå”¯ä¸€ç´¢å¼•åŒ¹é…ï¼ˆå¦‚ <code>WHERE name = &#39;ç‹äºŒ&#39;</code>ï¼Œname æœ‰æ™®é€šç´¢å¼•ï¼‰ã€‚</li><li>rangeï¼šåªæ£€ç´¢ç»™å®šèŒƒå›´çš„è¡Œï¼Œä½¿ç”¨ç´¢å¼•æ¥æ£€ç´¢ã€‚åœ¨<code>where</code>è¯­å¥ä¸­ä½¿ç”¨ <code>bettween...and</code>ã€<code>&lt;</code>ã€<code>&gt;</code>ã€<code>&lt;=</code>ã€<code>in</code> ç­‰æ¡ä»¶æŸ¥è¯¢ <code>type</code> éƒ½æ˜¯ <code>range</code>ã€‚</li><li>indexï¼šå…¨ç´¢å¼•æ‰«æï¼Œå¦‚æœä¸éœ€è¦å›è¡¨ï¼Œå¯æ¥å—ï¼›å¦åˆ™è€ƒè™‘è¦†ç›–ç´¢å¼•ã€‚</li><li>ALLï¼šå…¨è¡¨æ‰«æï¼Œæ•ˆç‡æœ€ä½ã€‚</li></ul><p>â‘¤ã€<strong>possible_keys</strong> åˆ—ï¼šå¯èƒ½ä¼šç”¨åˆ°çš„ç´¢å¼•ï¼Œä½†å¹¶ä¸ä¸€å®šå®é™…è¢«ä½¿ç”¨ã€‚</p><p>â‘¥ã€<strong>key</strong> åˆ—ï¼šå®é™…ä½¿ç”¨çš„ç´¢å¼•ã€‚å¦‚æœä¸º NULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ã€‚å¦‚æœä¸º PRIMARYï¼Œåˆ™ä½¿ç”¨äº†ä¸»é”®ç´¢å¼•ã€‚</p><p>â‘¦ã€<strong>key_len</strong> åˆ—ï¼šä½¿ç”¨çš„ç´¢å¼•å­—èŠ‚æ•°ï¼Œåæ˜ ç´¢å¼•åˆ—çš„åˆ©ç”¨ç‡ã€‚ä½¿ç”¨è”åˆç´¢å¼• (a, b)ï¼Œkey_len æ˜¯ a å’Œ b çš„å­—èŠ‚æ€»å’Œï¼ˆä»…å½“æŸ¥è¯¢æ¡ä»¶ç”¨åˆ° a æˆ– a+b æ—¶æœ‰æ•ˆï¼‰ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è¡¨ç»“æ„ï¼šCREATE TABLE t (a INT, b VARCHAR(20), INDEX idx_a_b (a, b));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;test&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>key_len = 4ï¼ˆINTï¼‰ + 20*3ï¼ˆutf8ï¼‰ + 2 = 66 å­—èŠ‚ã€‚</p><p>â‘§ã€<strong>ref</strong> åˆ—ï¼šä¸ç´¢å¼•åˆ—æ¯”è¾ƒçš„å€¼æˆ–åˆ—ã€‚</p><ul><li>constï¼šå¸¸é‡ã€‚ä¾‹å¦‚ WHERE <code>column = &#39;value&#39;</code>ã€‚</li><li>funcï¼šå‡½æ•°ã€‚ä¾‹å¦‚ WHERE <code>column = func(column)</code>ã€‚</li></ul><p>â‘¨ã€<strong>rows</strong> åˆ—ï¼šä¼˜åŒ–å™¨ä¼°ç®—çš„éœ€è¦æ‰«æçš„è¡Œæ•°ã€‚æ•°å€¼è¶Šå°è¶Šå¥½ï¼Œè‹¥ä¸å®é™…å·®è·å¤§ï¼Œå¯èƒ½ç»Ÿè®¡ä¿¡æ¯è¿‡æœŸï¼ˆéœ€ ANALYZE TABLEï¼‰ã€‚ç»“åˆ filtered å­—æ®µå¯ä»¥è®¡ç®—æœ€ç»ˆè¿”å›è¡Œæ•°ï¼ˆrows Ã— filteredï¼‰ã€‚</p><p>â‘©ã€<strong>Extra</strong> åˆ—ï¼šé™„åŠ ä¿¡æ¯ã€‚</p><ul><li>Using indexï¼šè¦†ç›–ç´¢å¼•ï¼Œæ— éœ€å›è¡¨ã€‚</li><li>Using whereï¼šå­˜å‚¨å¼•æ“è¿”å›ç»“æœåï¼ŒServer å±‚éœ€è¦å†æ¬¡è¿‡æ»¤ï¼ˆæ¡ä»¶æœªå®Œå…¨ä¸‹æ¨ï¼‰ã€‚</li><li>Using temporary ï¼šä½¿ç”¨ä¸´æ—¶è¡¨ï¼ˆå¸¸è§äº GROUP BYã€DISTINCTï¼‰ã€‚</li><li>Using filesortï¼šæ–‡ä»¶æ’åºï¼ˆå¸¸è§äº ORDER BYï¼‰ã€‚è€ƒè™‘ä¸º ORDER BY å­—æ®µæ·»åŠ ç´¢å¼•ã€‚</li><li>Select tables optimized awayï¼šä¼˜åŒ–å™¨å·²ä¼˜åŒ–ï¼ˆå¦‚ COUNT(*) é€šè¿‡ç´¢å¼•ç›´æ¥ç»Ÿè®¡ï¼‰ã€‚</li><li>Using join bufferï¼šä½¿ç”¨è¿æ¥ç¼“å†²åŒºï¼ˆBlock Nested Loop æˆ– Hash Joinï¼‰ã€‚è€ƒè™‘å¢å¤§ join_buffer_sizeã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240417092646.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šexplain ç»“æœ" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šexplain ç»“æœ</figcaption></figure><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><h4 id="typeçš„æ‰§è¡Œæ•ˆç‡ç­‰çº§-è¾¾åˆ°ä»€ä¹ˆçº§åˆ«æ¯”è¾ƒåˆé€‚" tabindex="-1"><a class="header-anchor" href="#typeçš„æ‰§è¡Œæ•ˆç‡ç­‰çº§-è¾¾åˆ°ä»€ä¹ˆçº§åˆ«æ¯”è¾ƒåˆé€‚"><span>typeçš„æ‰§è¡Œæ•ˆç‡ç­‰çº§ï¼Œè¾¾åˆ°ä»€ä¹ˆçº§åˆ«æ¯”è¾ƒåˆé€‚ï¼Ÿ</span></a></h4><p>ä»é«˜åˆ°ä½çš„æ•ˆç‡æ’åºæ˜¯ systemã€constã€eq_refã€refã€rangeã€index å’Œ ALLã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå»ºè®® type å€¼è¾¾åˆ° constã€eq_ref æˆ– refï¼Œå› ä¸ºè¿™äº›ç±»å‹è¡¨æ˜æŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚</p><p>å¦‚æœæ˜¯èŒƒå›´æŸ¥è¯¢ï¼Œrange ç±»å‹ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><p>ALL ç±»å‹è¡¨ç¤ºå…¨è¡¨æ‰«æï¼Œæ€§èƒ½æœ€å·®ï¼Œå¾€å¾€ä¸å¯æ¥å—ï¼Œéœ€è¦ä¼˜åŒ–ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šæ€ä¹ˆçœ‹èµ°æ²¡èµ°ç´¢å¼•ï¼Œå¦‚ä½•åˆ†æ SQL</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ä½œä¸šå¸®é¢ç»åŒå­¦ 1 Java åç«¯ä¸€é¢é¢è¯•åŸé¢˜ï¼škey-lenå’Œkeyæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°key-lenï¼Œä½ è¿˜ä¼šæŸ¥çœ‹explainä¸­çš„å“ªäº›å­—æ®µï¼Œextraæœ‰å“ªäº›ç±»å‹</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šexplainåˆ†æåï¼Œ typeçš„æ‰§è¡Œæ•ˆç‡ç­‰çº§ï¼Œè¾¾åˆ°ä»€ä¹ˆçº§åˆ«æ¯”è¾ƒåˆé€‚</li></ol></blockquote><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div><p>memoï¼š2025 å¹´ 3 æœˆ 29 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ç¾å›¢çš„ offer å£å¤´ OC äº†ï¼ŒçœŸçš„å¤ªæ£’äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250329111600.png" alt="çƒå‹ç¾å›¢ offer å£å¤´oc äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹ç¾å›¢ offer å£å¤´oc äº†</figcaption></figure><h2 id="ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#ç´¢å¼•"><span>ç´¢å¼•</span></a></h2><h3 id="_35-ğŸŒŸç´¢å¼•ä¸ºä»€ä¹ˆèƒ½æé«˜mysqlæŸ¥è¯¢æ•ˆç‡" tabindex="-1"><a class="header-anchor" href="#_35-ğŸŒŸç´¢å¼•ä¸ºä»€ä¹ˆèƒ½æé«˜mysqlæŸ¥è¯¢æ•ˆç‡"><span>35.ğŸŒŸç´¢å¼•ä¸ºä»€ä¹ˆèƒ½æé«˜MySQLæŸ¥è¯¢æ•ˆç‡ï¼Ÿ</span></a></h3><p>ç´¢å¼•å°±åƒä¸€æœ¬ä¹¦çš„ç›®å½•ï¼Œèƒ½è®© MySQL å¿«é€Ÿå®šä½æ•°æ®ï¼Œé¿å…å…¨è¡¨æ‰«æã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-6b9c9901-9bf3-46ed-a5c4-c1b781965c1e.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šç´¢å¼•åŠ å¿«æŸ¥è¯¢è¿œç¦»" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šç´¢å¼•åŠ å¿«æŸ¥è¯¢è¿œç¦»</figcaption></figure><p>å®ƒä¸€èˆ¬æ˜¯ B+ æ ‘ç»“æ„ï¼ŒæŸ¥æ‰¾æ•ˆç‡æ˜¯ O(log n)ï¼Œæ¯”ä»å¤´åˆ°å°¾æ‰«ä¸€éæ•°æ®è¦å¿«å¾—å¤šã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330123726.png" alt="MySQL ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>MySQL ç´¢å¼•</figcaption></figure><p>é™¤äº†æŸ¥å¾—å¿«ï¼Œç´¢å¼•è¿˜èƒ½åŠ é€Ÿæ’åºã€åˆ†ç»„ã€è¿æ¥ç­‰æ“ä½œã€‚</p><p>å¯ä»¥é€šè¿‡ <code>create index</code> åˆ›å»ºç´¢å¼•ï¼Œæ¯”å¦‚ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> index</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> students(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><p>æˆ‘ä»¬é€šè¿‡ wrap çš„ agent éªŒè¯ä¸€ä¸‹æœ‰æ²¡æœ‰ç´¢å¼•çš„æŸ¥è¯¢æ•ˆç‡ã€‚</p><p>å…ˆä¸Šç»“æœï¼Œæœ‰ç´¢å¼•çš„æŸ¥è¯¢æ—¶é—´æ˜¯ 0.007 ç§’ï¼Œæ²¡æœ‰ç´¢å¼•çš„æŸ¥è¯¢æ—¶é—´æ˜¯ 0.036 ç§’ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330124012.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæœ‰ç´¢å¼•å’Œæ²¡æœ‰ç´¢å¼•çš„æŸ¥è¯¢æ•ˆç‡" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæœ‰ç´¢å¼•å’Œæ²¡æœ‰ç´¢å¼•çš„æŸ¥è¯¢æ•ˆç‡</figcaption></figure><p>åˆ›å»ºæ•°æ®åº“å’Œè¡¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330124209.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šåˆ›å»º index çš„éªŒè¯è¡¨" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šåˆ›å»º index çš„éªŒè¯è¡¨</figcaption></figure><p>æ’å…¥ 10 ä¸‡æ¡æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330124250.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ’å…¥æ•°æ®" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ’å…¥æ•°æ®</figcaption></figure><p>ç„¶åä¾æ¬¡æ‰§è¡Œ explain æŸ¥çœ‹æ²¡æœ‰ç´¢å¼•å’Œæœ‰ç´¢å¼•æ—¶çš„æ‰§è¡Œè®¡åˆ’ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330124502.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯¹æ¯”æœ‰ç´¢å¼•å’Œæ²¡æœ‰ç´¢å¼•çš„å·®åˆ«" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯¹æ¯”æœ‰ç´¢å¼•å’Œæ²¡æœ‰ç´¢å¼•çš„å·®åˆ«</figcaption></figure><p>----è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 23 QQ åå°æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆç”¨ B+æ ‘</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³é¢ç»åŒå­¦ E ç¬¬äºŒä¸ªéƒ¨é—¨ Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¸ºä»€ä¹ˆéœ€è¦ç´¢å¼•</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åŒå­¦ 5 Java åç«¯é¢è¯•åŸé¢˜ï¼šæ•°æ®åº“ç´¢å¼•è®²ä¸€ä¸‹ï¼Œç„¶åä¸ºä»€ä¹ˆä¼šåŠ å¿«æŸ¥è¯¢é€Ÿåº¦</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å»å“ªå„¿é¢ç»åŒå­¦ 1 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šmysqlä¸ºä»€ä¹ˆç”¨ç´¢å¼•</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ OPPO é¢ç»åŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šå¯¹MySQLç´¢å¼•çš„ç†è§£</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„vivo é¢ç»åŒå­¦ 10 æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šç´¢å¼•ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•æ›´å¿«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 27 äº‘åå°æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä»‹ç»ä¸‹ç´¢å¼•ï¼Ÿåº•å±‚æ˜¯å•¥ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 3 æœˆ 30 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä¹‹å‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>æ‹¿åˆ°äº†æ·˜å¤©æœç´¢çš„æš‘æœŸå®ä¹ ï¼ŒçœŸçš„æ­å–œäº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250330170053.png" alt="çƒå‹æ‹¿åˆ°äº†æ·˜å¤©çš„æš‘æœŸå®ä¹ " tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†æ·˜å¤©çš„æš‘æœŸå®ä¹ </figcaption></figure><h3 id="_36-ğŸŒŸèƒ½ç®€å•è¯´ä¸€ä¸‹ç´¢å¼•çš„åˆ†ç±»å—" tabindex="-1"><a class="header-anchor" href="#_36-ğŸŒŸèƒ½ç®€å•è¯´ä¸€ä¸‹ç´¢å¼•çš„åˆ†ç±»å—"><span>36.ğŸŒŸèƒ½ç®€å•è¯´ä¸€ä¸‹ç´¢å¼•çš„åˆ†ç±»å—ï¼Ÿ</span></a></h3><p>ä»åŠŸèƒ½ä¸Šåˆ†ç±»çš„è¯ï¼Œæœ‰ä¸»é”®ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ï¼›ä»æ•°æ®ç»“æ„ä¸Šåˆ†ç±»çš„è¯ï¼Œæœ‰ B+ æ ‘ç´¢å¼•ã€å“ˆå¸Œç´¢å¼•ï¼›ä»å­˜å‚¨å†…å®¹ä¸Šåˆ†ç±»çš„è¯ï¼Œæœ‰èšç°‡ç´¢å¼•ã€éèšç°‡ç´¢å¼•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240311225809.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šç´¢å¼•ç±»å‹" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šç´¢å¼•ç±»å‹</figcaption></figure><h4 id="ä½ å¯¹ä¸»é”®ç´¢å¼•äº†è§£å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#ä½ å¯¹ä¸»é”®ç´¢å¼•äº†è§£å¤šå°‘"><span>ä½ å¯¹ä¸»é”®ç´¢å¼•äº†è§£å¤šå°‘ï¼Ÿ</span></a></h4><p>ä¸»é”®ç´¢å¼•ç”¨äºå”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯æ¡è®°å½•ï¼Œå…¶åˆ—å€¼å¿…é¡»å”¯ä¸€ä¸”éç©ºã€‚åˆ›å»ºä¸»é”®æ—¶ï¼ŒMySQL ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„å”¯ä¸€ç´¢å¼•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250331165636.png" alt="processonï¼šä¸»é”®ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>processonï¼šä¸»é”®ç´¢å¼•</figcaption></figure><p>æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ç´¢å¼•ï¼Œä¸€èˆ¬æ˜¯è¡¨ä¸­çš„è‡ªå¢ id å­—æ®µã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> emp6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (emp_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å•åˆ—ä¸»é”®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CountryLanguage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    CountryCode </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    Language</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (CountryCode, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Language</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¤åˆä¸»é”®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>å¦‚æœåˆ›å»ºè¡¨çš„æ—¶å€™æ²¡æœ‰æŒ‡å®šä¸»é”®ï¼ŒMySQL çš„ InnoDB å­˜å‚¨å¼•æ“ä¼šä¼˜å…ˆé€‰æ‹©ä¸€ä¸ªéç©ºçš„å”¯ä¸€ç´¢å¼•ä½œä¸ºä¸»é”®ï¼›å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„ç´¢å¼•ï¼ŒMySQL ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšè—çš„ _rowid åˆ—ä½œä¸ºä¸»é”®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250331165053.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQL å®˜æ–¹æ–‡æ¡£éšè—ä¸»é”®" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMySQL å®˜æ–¹æ–‡æ¡£éšè—ä¸»é”®</figcaption></figure><p>å¯ä»¥é€šè¿‡ <code>show index from table_name</code> æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240312090221.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šç´¢å¼•ä¿¡æ¯" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šç´¢å¼•ä¿¡æ¯</figcaption></figure><ul><li><code>Table</code> å½“å‰ç´¢å¼•æ‰€å±çš„è¡¨åã€‚</li><li><code>Non_unique</code> æ˜¯å¦å”¯ä¸€ç´¢å¼•ï¼Œ0 è¡¨ç¤ºå”¯ä¸€ç´¢å¼•ï¼ˆå¦‚ä¸»é”®ï¼‰ï¼Œ1 è¡¨ç¤ºéå”¯ä¸€ã€‚</li><li><code>Key_name</code> ä¸»é”®ç´¢å¼•é»˜è®¤å« PRIMARYï¼›æ™®é€šç´¢å¼•ä¸ºè‡ªå®šä¹‰åã€‚</li><li><code>Seq_in_index</code> ç´¢å¼•ä¸­çš„åˆ—é¡ºåºï¼Œåœ¨è”åˆç´¢å¼•ä¸­è¿™ä¸ªå­—æ®µè¡¨ç¤ºç¬¬å‡ åˆ—ï¼ˆç¬¬ 1 ä¸ªï¼‰ã€‚</li><li><code>Column_name</code> å½“å‰ç´¢å¼•ä¸­åŒ…å«çš„å­—æ®µåã€‚</li><li><code>Collation</code> A è¡¨ç¤ºå‡åºï¼ˆAscendï¼‰ï¼›D è¡¨ç¤ºé™åºã€‚</li><li><code>Cardinality</code> ç´¢å¼•çš„åŸºæ•°ï¼Œå³ä¸é‡å¤çš„ç´¢å¼•å€¼çš„æ•°é‡ã€‚è¶Šé«˜è¯´æ˜åŒºåˆ†åº¦è¶Šå¥½ï¼ˆå½±å“ä¼˜åŒ–å™¨æ˜¯å¦ç”¨æ­¤ç´¢å¼•ï¼‰ã€‚</li><li><code>Sub_part</code> å‰ç¼€ç´¢å¼•çš„é•¿åº¦ã€‚</li><li><code>Packed</code> æ˜¯å¦å‹ç¼©å­˜å‚¨ç´¢å¼•ï¼›ä¸€èˆ¬ä¸ç”¨ï¼Œé»˜è®¤ä¸º NULLã€‚</li><li><code>Null</code> å­—æ®µæ˜¯å¦å…è®¸ä¸º NULLï¼›ä¸»é”®å­—æ®µä¸å…è®¸ä¸º NULLã€‚</li><li><code>Index_type</code> ç´¢å¼•åº•å±‚ç»“æ„ï¼ŒInnoDB é»˜è®¤æ˜¯ B+ æ ‘ï¼ˆBTREEï¼‰ã€‚</li><li><code>Comment</code> ç´¢å¼•çš„æ³¨é‡Šã€‚</li><li><code>Visible</code> æ˜¯å¦å¯è§ï¼›MySQL 8.0+ å¯éšè—ç´¢å¼•ã€‚</li></ul><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="å”¯ä¸€ç´¢å¼•å’Œä¸»é”®ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#å”¯ä¸€ç´¢å¼•å’Œä¸»é”®ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«"><span>å”¯ä¸€ç´¢å¼•å’Œä¸»é”®ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h4><p>ä¸»é”®ç´¢å¼•=å”¯ä¸€ç´¢å¼•+éç©ºã€‚æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ç´¢å¼•ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åœ¨ email åˆ—ä¸Šæ·»åŠ å”¯ä¸€ç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    username </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    email </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    UNIQUE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> uk_email (email)  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å”¯ä¸€ç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¤åˆå”¯ä¸€ç´¢å¼•ï¼ˆä¿è¯ user_id å’Œ role ç»„åˆå”¯ä¸€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> user_roles</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    user_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    role</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    UNIQUE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> uk_user_role (user_id, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">role</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸»é”®ç´¢å¼•ä¸å…è®¸æ’å…¥ NULL å€¼ï¼Œå°è¯•æ’å…¥ NULL ä¼šæŠ¥é”™ï¼›å”¯ä¸€ç´¢å¼•å…è®¸æ’å…¥å¤šä¸ª NULL å€¼ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250331171518.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¸»é”®ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•</figcaption></figure><h4 id="unique-key-å’Œ-unique-index-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#unique-key-å’Œ-unique-index-æœ‰ä»€ä¹ˆåŒºåˆ«"><span>unique key å’Œ unique index æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h4><p>åˆ›å»ºå”¯ä¸€é”®æ—¶ï¼ŒMySQL ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåŒåçš„å”¯ä¸€ç´¢å¼•ï¼›åä¹‹ï¼Œåˆ›å»ºå”¯ä¸€ç´¢å¼•ä¹Ÿä¼šéšå¼æ·»åŠ å”¯ä¸€æ€§çº¦æŸã€‚</p><p>å¯é€šè¿‡ UNIQUE KEY uk_name å®šä¹‰æˆ–è€… CONSTRAINT uk_name UNIQUE å®šä¹‰å”¯ä¸€é”®ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    email </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    -- æ˜¾å¼å‘½åå”¯ä¸€é”®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    CONSTRAINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> uk_email </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UNIQUE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (email)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> users3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    email </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    UNIQUE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> uk_email (email)  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å”¯ä¸€ç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯é€šè¿‡ CREATE UNIQUE INDEX åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    email </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ‰‹åŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UNIQUE INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> uk_email</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users(email);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ <code>SHOW CREATE TABLE table_name</code> æŸ¥çœ‹è¡¨ç»“æ„æ—¶ï¼Œç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250331174044.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šunique key å’Œ unique index" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šunique key å’Œ unique index</figcaption></figure><h4 id="æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«"><span>æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h4><p>æ™®é€šç´¢å¼•ä»…ç”¨äºåŠ é€ŸæŸ¥è¯¢ï¼Œä¸é™åˆ¶å­—æ®µå€¼çš„å”¯ä¸€æ€§ï¼›é€‚ç”¨äºé«˜é¢‘å†™å…¥çš„å­—æ®µã€èŒƒå›´æŸ¥è¯¢çš„å­—æ®µã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ—¥å¿—æ—¶é—´æˆ³å…è®¸é‡å¤ï¼Œæ— éœ€å”¯ä¸€æ€§æ£€æŸ¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_log_time</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> access_logs(access_time);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è®¢å•çŠ¶æ€å…è®¸é‡å¤ï¼Œä½†éœ€é¢‘ç¹æŒ‰çŠ¶æ€è¿‡æ»¤æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_order_status</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">status</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å”¯ä¸€ç´¢å¼•å¼ºåˆ¶å­—æ®µå€¼çš„å”¯ä¸€æ€§ï¼Œæ’å…¥æˆ–æ›´æ–°æ—¶ä¼šè§¦å‘å”¯ä¸€æ€§æ£€æŸ¥ï¼›é€‚ç”¨äºä¸šåŠ¡å”¯ä¸€æ€§çº¦æŸçš„å­—æ®µã€é˜²æ­¢æ•°æ®é‡å¤æ’å…¥çš„å­—æ®µã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç”¨æˆ·é‚®ç®±å¿…é¡»å”¯ä¸€</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UNIQUE INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> uk_email</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users(email);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç¡®ä¿åŒä¸€ç”¨æˆ·å¯¹åŒä¸€å•†å“åªèƒ½æœ‰ä¸€æ¡æœªæ”¯ä»˜è®¢å•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UNIQUE INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> uk_user_product</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders(user_id, product_id) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;unpaid&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>memoï¼š2025 å¹´ 3 æœˆ 31 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ï¼Œæ‹¿åˆ°äº†æ·˜å¤©æš‘æœŸå®ä¹ çš„ offerï¼Œå¹¶ä¸”å†æ¬¡å¼ºè°ƒèƒŒé¢æ¸£é€†è¢­çš„é‡è¦æ€§ï¼Œå“ˆå“ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-å‰å®³çš„ï¼Œæ­å–œå•Š.png" alt="çƒå‹æ‹¿åˆ°äº†æ·˜å¤©çš„æš‘æœŸå®ä¹  offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†æ·˜å¤©çš„æš‘æœŸå®ä¹  offer</figcaption></figure><h4 id="ä½ å¯¹å…¨æ–‡ç´¢å¼•äº†è§£å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#ä½ å¯¹å…¨æ–‡ç´¢å¼•äº†è§£å¤šå°‘"><span>ä½ å¯¹å…¨æ–‡ç´¢å¼•äº†è§£å¤šå°‘ï¼Ÿ</span></a></h4><p>å…¨æ–‡ç´¢å¼•æ˜¯ MySQL ä¸€ç§ä¼˜åŒ–æ–‡æœ¬æ•°æ®æ£€ç´¢çš„ç‰¹æ®Šç±»å‹ç´¢å¼•ï¼Œé€‚ç”¨äº CHARã€VARCHAR å’Œ TEXT ç­‰å­—æ®µã€‚</p><p>MySQL 5.7 åŠä»¥ä¸Šç‰ˆæœ¬å†…ç½®äº† ngram è§£æå™¨ï¼Œå¯å¤„ç†ä¸­æ–‡ã€æ—¥æ–‡å’ŒéŸ©æ–‡ç­‰åˆ†è¯ã€‚</p><p>å»ºè¡¨æ—¶é€šè¿‡ <code>FULLTEXT (title, body)</code> æ¥å®šä¹‰ã€‚é€šè¿‡ <code>MATCH(col1, col2) AGAINST(&#39;keyword&#39;)</code> è¿›è¡Œæ£€ç´¢ï¼Œé»˜è®¤æŒ‰ç…§é™åºè¿”å›ç»“æœï¼Œæ”¯æŒå¸ƒå°”æ¨¡å¼æŸ¥è¯¢ã€‚</p><ul><li><code>+</code> è¡¨ç¤ºå¿…é¡»åŒ…å«ï¼›</li><li><code>-</code> è¡¨ç¤ºæ’é™¤ï¼›</li><li><code>*</code> è¡¨ç¤ºé€šé…ç¬¦ï¼›</li></ul><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å»ºè¡¨æ—¶åˆ›å»ºå…¨æ–‡ç´¢å¼•ï¼ˆæ”¯æŒä¸­æ–‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> articles</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> UNSIGNED AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    title </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    content </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TEXT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    FULLTEXT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(title, content) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WITH</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> PARSER ngram</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ENGINE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä½¿ç”¨å¸ƒå°”æ¨¡å¼æŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> articles </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> MATCH</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(title, content) AGAINST(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;+MySQL -Oracle&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> IN</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> BOOLEAN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> MODE);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åº•å±‚ä½¿ç”¨å€’æ’ç´¢å¼•å°†å­—æ®µä¸­çš„æ–‡æœ¬å†…å®¹è¿›è¡Œåˆ†è¯ï¼Œç„¶åå»ºç«‹ä¸€ä¸ªå€’æ’è¡¨ã€‚æ€§èƒ½æ¯” <code>LIKE &#39;%keyword%&#39;</code> é«˜å¾ˆå¤šã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>å€’æ’ç´¢å¼•é€šè¿‡ä¸€ä¸ªè¾…åŠ©è¡¨å­˜å‚¨å•è¯ä¸å•è¯è‡ªèº«åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£ä¸­æ‰€åœ¨ä½ç½®ä¹‹é—´çš„æ˜ å°„ï¼Œé€šå¸¸é‡‡ç”¨å…³è”æ•°ç»„å®ç°ã€‚</p><p>æœ‰ä¸¤ç§è¡¨ç°å½¢å¼ï¼šinverted file indexï¼ˆ{å•è¯ï¼Œå•è¯æ‰€åœ¨æ–‡æ¡£çš„ID}ï¼‰å’Œfull inverted indexï¼ˆ{å•è¯ï¼Œ(å•è¯æ‰€åœ¨æ–‡æ¡£çš„IDï¼Œåœ¨å…·ä½“æ–‡æ¡£ä¸­çš„ä½ç½®)}ï¼‰</p><p>æ¯”å¦‚æœ‰è¿™æ ·ä¸€ä¸ªæ–‡æ¡£ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> DocumentId  </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          Pease porridge hot, pease porridge cold  </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          Pease porridge </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> the pot  </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          Nine </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">days</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> old  </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          Some </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">like</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> it hot, some </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">like</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> it cold  </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          Some </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">like</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> it </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> the pot  </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          Nine </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">days</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> old</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>inverted file index çš„å…³è”æ•°ç»„å­˜å‚¨å½¢å¼ä¸ºï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>days â†’ 3,6  </span></span>
<span class="line"><span>old â†’ 3,6  </span></span>
<span class="line"><span>pease â†’ 1,2  </span></span>
<span class="line"><span>porridge â†’ 1,2  </span></span>
<span class="line"><span>...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>full inverted index æ›´åŠ è¯¦ç»†ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>days â†’ (3:5),(6:5)  </span></span>
<span class="line"><span>old â†’ (3:11),(6:11)  </span></span>
<span class="line"><span>pease â†’ (1:1),(1:7),(2:1)  </span></span>
<span class="line"><span>porridge â†’ (1:7),(2:7)  </span></span>
<span class="line"><span>...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>full inverted index ä¸ä»…å­˜å‚¨äº†æ–‡æ¡£ IDï¼Œè¿˜å­˜å‚¨äº†å•è¯åœ¨æ–‡æ¡£ä¸­çš„å…·ä½“ä½ç½®ã€‚</p><p>InnoDB é‡‡ç”¨çš„æ˜¯ full inverted index çš„æ–¹å¼å®ç°å…¨æ–‡ç´¢å¼•ã€‚</p><p>å¦‚æœéœ€è¦å¤„ç†ä¸­æ–‡åˆ†è¯çš„è¯ï¼Œä¸€å®šè¦è®°å¾—åŠ ä¸Š <code>WITH PARSER ngram</code>ï¼Œå¦åˆ™å¯èƒ½æŸ¥ä¸å‡ºæ¥æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250401152220.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¸­æ–‡åˆ†è¯" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¸­æ–‡åˆ†è¯</figcaption></figure><p>ä¸è¿‡ï¼Œå¯¹äºå¤æ‚çš„ä¸­æ–‡åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨ <a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">Elasticsearch ç­‰ä¸“ä¸šæœç´¢å¼•æ“æ›¿ä»£</a>ï¼ŒæŠ€æœ¯æ´¾é¡¹ç›®ä¸­å°±ç”¨äº†è¿™ç§æ–¹æ¡ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250401145923.png" alt="æŠ€æœ¯æ´¾ï¼šES å®ç°æŸ¥è¯¢" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼šES å®ç°æŸ¥è¯¢</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>memoï¼š2025 å¹´ 4 æœˆ 1 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ï¼Œæ‹¿åˆ°äº†ç¾å›¢çš„å®ä¹  offerï¼ŒçœŸçš„å¤ªæ£’äº†ï¼Œ18 å·ä¸€é¢ã€25 å·äºŒé¢ã€30 å· OCï¼Œ4 æœˆ 1 å‘é‚®ä»¶ offerï¼ŒèŠ‚å¥æ‹‰æ»¡äº†</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250401155231.png" alt="äºŒå“¥ç¼–ç¨‹æ˜Ÿçƒçš„çƒå‹æ‹¿åˆ°ç¾å›¢å®ä¹  offer äº†" tabindex="0" loading="lazy"><figcaption>äºŒå“¥ç¼–ç¨‹æ˜Ÿçƒçš„çƒå‹æ‹¿åˆ°ç¾å›¢å®ä¹  offer äº†</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç§‘å¤§è®¯é£éå‡¡è®¡åˆ’ç ”å‘ç±»é¢ç»åŸé¢˜ï¼šèŠèŠ MySQL çš„ç´¢å¼•</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 23 QQ åå°æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆç”¨ B+æ ‘</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æºç¨‹é¢ç»åŒå­¦ 10 Java æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šè®²ä¸€è®² MySQL çš„ç´¢å¼•ï¼Œå¦‚ä½•ä¼˜åŒ– SQLï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œé¢ç»åŒå­¦ 5 é˜¿é‡Œå¦ˆå¦ˆ Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šç´¢å¼•çš„åˆ†ç±»ï¼Œåˆ›å»ºç´¢å¼•çš„æœ€ä½³å®è·µ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ 360 é¢ç»åŒå­¦ 3 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šmysql çš„ç´¢å¼•ç”¨è¿‡å“ªäº›</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç”¨å‹é¢è¯•åŸé¢˜ï¼šç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ç´¢å¼•</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ä½œä¸šå¸®é¢ç»åŒå­¦ 1 Java åç«¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šæ™®é€šç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ä»€ä¹ˆ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ä½œä¸šå¸®é¢ç»åŒå­¦ 1 Java åç«¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šinnodbåº•å±‚æœ‰å“ªäº›æ•°æ®ç»“æ„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 12 Java æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šç´¢å¼•æœ‰å“ªäº›ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆ</li></ol></blockquote><h3 id="_37-ğŸŒŸåˆ›å»ºç´¢å¼•æœ‰å“ªäº›æ³¨æ„ç‚¹" tabindex="-1"><a class="header-anchor" href="#_37-ğŸŒŸåˆ›å»ºç´¢å¼•æœ‰å“ªäº›æ³¨æ„ç‚¹"><span>37.ğŸŒŸåˆ›å»ºç´¢å¼•æœ‰å“ªäº›æ³¨æ„ç‚¹ï¼Ÿ</span></a></h3><p>ç¬¬ä¸€ï¼Œé€‰æ‹©åˆé€‚çš„å­—æ®µ</p><ul><li>æ¯”å¦‚è¯´é¢‘ç¹å‡ºç°åœ¨ WHEREã€JOINã€ORDER BYã€GROUP BY ä¸­çš„å­—æ®µã€‚</li><li>ä¼˜å…ˆé€‰æ‹©åŒºåˆ†åº¦é«˜çš„å­—æ®µï¼Œæ¯”å¦‚ç”¨æˆ· IDã€æ‰‹æœºå·ç­‰å”¯ä¸€å€¼å¤šçš„ï¼Œè€Œä¸æ˜¯æ€§åˆ«ã€çŠ¶æ€ç­‰åŒºåˆ†åº¦æä½çš„å­—æ®µï¼Œå¦‚æœçœŸçš„éœ€è¦ï¼Œå¯ä»¥è€ƒè™‘è”åˆç´¢å¼•ã€‚</li></ul><p>ç¬¬äºŒï¼Œè¦æ§åˆ¶ç´¢å¼•çš„æ•°é‡ï¼Œé¿å…è¿‡åº¦ç´¢å¼•ï¼Œæ¯ä¸ªç´¢å¼•éƒ½è¦å ç”¨å­˜å‚¨ç©ºé—´ï¼Œå•è¡¨çš„ç´¢å¼•æ•°é‡ä¸å»ºè®®è¶…è¿‡ 5 ä¸ªã€‚</p><p>è¦å®šæœŸé€šè¿‡ <code>SHOW INDEX FROM table_name</code> æŸ¥çœ‹ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µï¼Œåˆ é™¤ä¸å¿…è¦çš„ç´¢å¼•ã€‚æ¯”å¦‚è¯´å·²ç»æœ‰è”åˆç´¢å¼• (a, b)ï¼Œå•ç´¢å¼•ï¼ˆaï¼‰å°±æ˜¯å†—ä½™çš„ã€‚</p><p>ç¬¬ä¸‰ï¼Œè”åˆç´¢å¼•çš„æ—¶å€™è¦éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™ï¼Œå³åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨è”åˆç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µï¼Œæ‰èƒ½å……åˆ†åˆ©ç”¨ç´¢å¼•ã€‚</p><p>æ¯”å¦‚è¯´è”åˆç´¢å¼• <code>(A, B, C)</code> å¯æ”¯æŒ <code>Aã€A+Bã€A+B+C</code> çš„æŸ¥è¯¢ï¼Œä½†æ— æ³•æ”¯æŒ B æˆ– C çš„å•ç‹¬æŸ¥è¯¢ã€‚</p><p>åŒºåˆ†åº¦é«˜çš„å­—æ®µæ”¾åœ¨å·¦ä¾§ï¼Œç­‰å€¼æŸ¥è¯¢çš„å­—æ®µä¼˜å…ˆäºèŒƒå›´æŸ¥è¯¢çš„å­—æ®µã€‚ä¾‹å¦‚ <code>WHERE A=1 AND B&gt;10 AND C=2</code>ï¼Œä¼˜å…ˆ <code>(A, C, B)</code>ã€‚</p><p>å¦‚æœè”åˆç´¢å¼•åŒ…å«æŸ¥è¯¢çš„æ‰€éœ€å­—æ®µï¼Œè¿˜å¯ä»¥é¿å…å›è¡¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç”¨å‹é‡‘èä¸€é¢åŸé¢˜ï¼šç´¢å¼•çš„ä½œç”¨ï¼ŒåŠ ç´¢å¼•éœ€è¦æ³¨æ„ä»€ä¹ˆ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šæŸ¥è¯¢å’Œæ›´æ–°éƒ½é¢‘ç¹çš„å­—æ®µæ˜¯å¦é€‚åˆåˆ›å»ºç´¢å¼•ï¼Œä¸ºä»€ä¹ˆ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šç´¢å¼•æ€ä¹ˆè®¾è®¡æ‰æ˜¯æœ€å¥½çš„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 1 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL ç´¢å¼•ç»“æ„ï¼Œå»ºç«‹ç´¢å¼•çš„ç­–ç•¥</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œé¢ç»åŒå­¦ 5 é˜¿é‡Œå¦ˆå¦ˆ Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šç´¢å¼•çš„åˆ†ç±»ï¼Œåˆ›å»ºç´¢å¼•çš„æœ€ä½³å®è·µ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„oppo é¢ç»åŒå­¦ 8 åç«¯å¼€å‘ç§‹æ‹›ä¸€é¢é¢è¯•åŸé¢˜ï¼šå»ºç´¢å¼•çš„æ—¶å€™åº”è¯¥æ³¨æ„ä»€ä¹ˆ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šå»ºç«‹ç´¢å¼•è€ƒè™‘å“ªäº›é—®é¢˜</li></ol></blockquote><h3 id="_38-ğŸŒŸç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆå‘¢" tabindex="-1"><a class="header-anchor" href="#_38-ğŸŒŸç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆå‘¢"><span>38.ğŸŒŸç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆå‘¢ï¼Ÿ</span></a></h3><p>ç®€ç‰ˆï¼šæ¯”å¦‚ç´¢å¼•åˆ—ä½¿ç”¨äº†å‡½æ•°ã€ä½¿ç”¨äº†é€šé…ç¬¦å¼€å¤´çš„æ¨¡ç³ŠæŸ¥è¯¢ã€è”åˆç´¢å¼•ä¸æ»¡è¶³æœ€å·¦å‰ç¼€åŸåˆ™ï¼Œæˆ–è€…ä½¿ç”¨ or çš„æ—¶å€™éƒ¨åˆ†å­—æ®µæ— ç´¢å¼•ç­‰ã€‚</p><p>ç¬¬ä¸€ï¼Œå¯¹ç´¢å¼•åˆ—ä½¿ç”¨å‡½æ•°æˆ–è¡¨è¾¾å¼ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç´¢å¼•å¤±æ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> YEAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(create_time) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> products </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> price*</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼˜åŒ–æ–¹æ¡ˆï¼ˆä½¿ç”¨èŒƒå›´æŸ¥è¯¢ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> create_time </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BETWEEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-01-01&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-12-31&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> products </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> price </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒï¼ŒLIKE æ¨¡ç³ŠæŸ¥è¯¢ä»¥é€šé…ç¬¦å¼€å¤´ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç´¢å¼•å¤±æ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> articles </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> title </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;%æ•°æ®åº“%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼ˆä½†èŒƒå›´æœ‰é™ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> articles </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> title </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;æ•°æ®åº“%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è§£å†³æ–¹æ¡ˆï¼šè€ƒè™‘å…¨æ–‡ç´¢å¼•æˆ–æœç´¢å¼•æ“</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> articles </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> MATCH</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(title) AGAINST(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ•°æ®åº“&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰ï¼Œè”åˆç´¢å¼•è¿åäº†æœ€å·¦å‰ç¼€åŸåˆ™ï¼Œç´¢å¼•ä¼šå¤±æ•ˆã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å‡è®¾æœ‰è”åˆç´¢å¼• (a, b, c)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> c </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç´¢å¼•å¤±æ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> c </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åªä½¿ç”¨aåˆ—ç´¢å¼•</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ­£ç¡®ä½¿ç”¨è”åˆç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> c </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è”åˆç´¢å¼•ï¼Œä½† WHERE ä¸æ»¡è¶³æœ€å·¦å‰ç¼€åŸåˆ™ï¼Œç´¢å¼•æ— æ³•èµ·æ•ˆã€‚ä¾‹å¦‚ï¼š<code>SELECT * FROM table WHERE column2 = 2</code>ï¼Œè”åˆç´¢å¼•ä¸º <code>(column1, column2)</code>ã€‚</li></ul><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>ç¬¬å››ï¼Œä½¿ç”¨ OR è¿æ¥éç´¢å¼•åˆ—æ¡ä»¶ï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å‡è®¾nameæœ‰ç´¢å¼•ä½†ageæ²¡æœ‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;å¼ ä¸‰&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> OR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 25</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å…¨è¡¨æ‰«æ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼˜åŒ–æ–¹æ¡ˆ1ï¼šä½¿ç”¨UNION ALL</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;å¼ ä¸‰&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UNION ALL</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 25</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;å¼ ä¸‰&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼˜åŒ–æ–¹æ¡ˆ2ï¼šè€ƒè™‘ä¸ºageæ·»åŠ ç´¢å¼•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äº”ï¼Œä½¿ç”¨ <code>!=</code> æˆ– <code>&lt;&gt;</code> ä¸ç­‰å€¼æŸ¥è¯¢ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è‹¥å¤§éƒ¨åˆ†è¡Œ `status=1`ï¼Œå¯èƒ½å…¨è¡¨æ‰«æ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼˜åŒ–æ–¹æ¡ˆï¼šä½¿ç”¨èŒƒå›´æŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> OR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="ä»€ä¹ˆæƒ…å†µä¸‹æ¨¡ç³ŠæŸ¥è¯¢ä¸èµ°ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæƒ…å†µä¸‹æ¨¡ç³ŠæŸ¥è¯¢ä¸èµ°ç´¢å¼•"><span>ä»€ä¹ˆæƒ…å†µä¸‹æ¨¡ç³ŠæŸ¥è¯¢ä¸èµ°ç´¢å¼•ï¼Ÿ</span></a></h4><p>æ¨¡ç³ŠæŸ¥è¯¢ä¸»è¦ä½¿ç”¨ LIKE è¯­å¥ï¼Œç»“åˆé€šé…ç¬¦æ¥å®ç°ã€‚</p><blockquote><p>%ï¼ˆä»£è¡¨ä»»æ„å¤šä¸ªå­—ç¬¦ï¼‰å’Œ _ï¼ˆä»£è¡¨å•ä¸ªå­—ç¬¦ï¼‰</p></blockquote><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> column </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;%xxx%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™ä¸ªæŸ¥è¯¢ä¼šè¿”å›æ‰€æœ‰ column åˆ—ä¸­åŒ…å« xxx çš„è®°å½•ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæ¨¡ç³ŠæŸ¥è¯¢çš„é€šé…ç¬¦ % å‡ºç°åœ¨æœç´¢å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œå¦‚ <code>LIKE &#39;%xxx&#39;</code>ï¼ŒMySQL å°†æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼Œå› ä¸ºæ•°æ®åº“å¿…é¡»æ‰«æå…¨è¡¨ä»¥åŒ¹é…ä»»æ„ä½ç½®çš„å­—ç¬¦ä¸²ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šwhere b =5 æ˜¯å¦ä¸€å®šä¼šå‘½ä¸­ç´¢å¼•ï¼Ÿï¼ˆç´¢å¼•å¤±æ•ˆåœºæ™¯ï¼‰</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 1 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šç´¢å¼•å¤±æ•ˆçš„æƒ…å†µ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šç¼–å†™ SQL è¯­å¥å“ªäº›æƒ…å†µä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 12 Java æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šç´¢å¼•å¤±æ•ˆåœºæ™¯</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ OPPO é¢ç»åŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•å¤±æ•ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šç´¢å¼•å¤±æ•ˆæƒ…å†µ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç†æƒ³æ±½è½¦é¢ç»åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šä»€ä¹ˆæ“ä½œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Ÿ</li></ol></blockquote><h3 id="_39-ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯å‘¢" tabindex="-1"><a class="header-anchor" href="#_39-ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯å‘¢"><span>39.ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯å‘¢ï¼Ÿ</span></a></h3><p>ç¬¬ä¸€ï¼ŒåŒºåˆ†åº¦ä½çš„åˆ—ï¼Œå¯ä»¥å’Œå…¶ä»–é«˜åŒºåˆ†åº¦çš„åˆ—ç»„æˆè”åˆç´¢å¼•ã€‚</p><p>ç¬¬äºŒï¼Œé¢‘ç¹æ›´æ–°çš„åˆ—ï¼Œç´¢å¼•ä¼šå¢åŠ æ›´æ–°çš„æˆæœ¬ã€‚</p><p>ç¬¬ä¸‰ï¼ŒTEXTã€BLOB ç­‰å¤§å¯¹è±¡ç±»å‹çš„å­—æ®µï¼Œå¯ä»¥ä½¿ç”¨å‰ç¼€ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•æ›¿ä»£ã€‚</p><p>ç¬¬å››ï¼Œå½“è¡¨çš„æ•°æ®é‡å¾ˆå°çš„æ—¶å€™ï¼Œä¸è¶…è¿‡ 1000 è¡Œï¼Œå…¨è¡¨æ‰«æå¯èƒ½æ¯”ä½¿ç”¨ç´¢å¼•æ›´å¿«ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>ä¸ºäº†éªŒè¯ç¬¬å››æ¡ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå°è¡¨ï¼Œç„¶ååˆ†åˆ«æ‰§è¡Œå…¨è¡¨æ‰«æå’Œç´¢å¼•æŸ¥è¯¢ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250402144634.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå°è¡¨çš„å…¨è¡¨æ‰«ææ¯”ç´¢å¼•ä¼šæ›´å¿«" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå°è¡¨çš„å…¨è¡¨æ‰«ææ¯”ç´¢å¼•ä¼šæ›´å¿«</figcaption></figure><p>å¾—å‡ºçš„ç»“è®ºçš„ç¡®æ˜¯è¿™æ ·çš„ï¼Œå…¨è¡¨æ‰«ææ›´å¿«ä¸€äº›ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250402144804.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå°è¡¨åœ¨ç´¢å¼•å’Œå…¨è¡¨æ‰«ææ—¶çš„ç»“æœ" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå°è¡¨åœ¨ç´¢å¼•å’Œå…¨è¡¨æ‰«ææ—¶çš„ç»“æœ</figcaption></figure><p>åŸå› æ—¶å½“æ•°æ®é‡å¾ˆå°æ—¶ï¼Œå…¨è¡¨æ‰«æçš„æˆæœ¬å¾ˆä½ï¼Œå› ä¸ºæ‰€æœ‰çš„æ•°æ®å¯èƒ½éƒ½åŠ è½½åˆ°å†…å­˜ä¸­äº†ï¼Œä½¿ç”¨ç´¢å¼•åè€Œéœ€è¦å…ˆæŸ¥æ‰¾ç´¢å¼•ï¼Œå†é€šè¿‡ç´¢å¼•å»æ‰¾åˆ°å®é™…çš„æ•°æ®è¡Œï¼Œå¢åŠ äº†é¢å¤–çš„ I/O å¯»å€æ—¶é—´ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="æ€§åˆ«å­—æ®µè¦å»ºç«‹ç´¢å¼•å—" tabindex="-1"><a class="header-anchor" href="#æ€§åˆ«å­—æ®µè¦å»ºç«‹ç´¢å¼•å—"><span>æ€§åˆ«å­—æ®µè¦å»ºç«‹ç´¢å¼•å—ï¼Ÿ</span></a></h4><p>æ€§åˆ«å­—æ®µä¸é€‚åˆå»ºç«‹å•ç‹¬ç´¢å¼•ã€‚å› ä¸ºæ€§åˆ«å­—æ®µçš„åŒºåˆ†åº¦å¾ˆä½ã€‚</p><p>å¦‚æœæ€§åˆ«å­—æ®µç¡®å®ç»å¸¸ç”¨äºæŸ¥è¯¢æ¡ä»¶ï¼Œæ•°æ®è§„æ¨¡ä¹Ÿæ¯”è¾ƒå¤§ï¼Œå¯ä»¥å°†æ€§åˆ«å­—æ®µä½œä¸ºè”åˆç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œä¸åŒºåˆ†åº¦é«˜çš„å­—æ®µä¸€èµ·ï¼Œæ•ˆæœä¼šå¥½å¾ˆå¤šã€‚</p><h4 id="ä»€ä¹ˆæ˜¯åŒºåˆ†åº¦" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯åŒºåˆ†åº¦"><span>ä»€ä¹ˆæ˜¯åŒºåˆ†åº¦ï¼Ÿ</span></a></h4><p>åŒºåˆ†åº¦æ˜¯è¡¡é‡ä¸€ä¸ªå­—æ®µåœ¨ MySQL è¡¨ä¸­å”¯ä¸€å€¼çš„æ¯”ä¾‹ã€‚</p><p>åŒºåˆ†åº¦ = å­—æ®µçš„å”¯ä¸€å€¼æ•°é‡ / å­—æ®µçš„æ€»è®°å½•æ•°ï¼›è¶Šæ¥è¿‘ 1ï¼Œå°±è¶Šé€‚åˆä½œä¸ºç´¢å¼•ã€‚å› ä¸ºç´¢å¼•å¯ä»¥æ›´æœ‰æ•ˆåœ°ç¼©å°æŸ¥è¯¢èŒƒå›´ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªè¡¨ä¸­æœ‰ 1000 æ¡è®°å½•ï¼Œå…¶ä¸­æ€§åˆ«å­—æ®µåªæœ‰ä¸¤ä¸ªå€¼ï¼ˆç”·ã€å¥³ï¼‰ï¼Œé‚£ä¹ˆæ€§åˆ«å­—æ®µçš„åŒºåˆ†åº¦åªæœ‰ 0.002ï¼Œå°±ä¸é€‚åˆå»ºç«‹ç´¢å¼•ã€‚</p><p>å¯ä»¥é€šè¿‡ <code>COUNT(DISTINCT column_name)</code> å’Œ <code>COUNT(*)</code> çš„æ¯”å€¼æ¥è®¡ç®—å­—æ®µçš„åŒºåˆ†åº¦ã€‚ä¾‹å¦‚ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DISTINCT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> gender) / </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(*) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> gender_selectivity</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    users;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä»€ä¹ˆæ ·çš„å­—æ®µé€‚åˆåŠ ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ ·çš„å­—æ®µé€‚åˆåŠ ç´¢å¼•"><span>ä»€ä¹ˆæ ·çš„å­—æ®µé€‚åˆåŠ ç´¢å¼•ï¼Ÿ</span></a></h4><p>ä¸€å¥è¯å›ç­”ï¼š</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸»é”®ã€å”¯ä¸€é”®ã€ä»¥åŠç»å¸¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µæœ€é€‚åˆåŠ ç´¢å¼•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå­—æ®µçš„åŒºåˆ†åº¦è¦é«˜ï¼Œè¿™æ ·ç´¢å¼•æ‰èƒ½èµ·åˆ°è¿‡æ»¤ä½œç”¨ï¼›å¦‚æœå­—æ®µç»å¸¸ç”¨äºè¡¨è¿æ¥ã€æ’åºæˆ–åˆ†ç»„ï¼Œä¹Ÿå»ºè®®åŠ ç´¢å¼•ã€‚åŒæ—¶å¦‚æœå¤šä¸ªå­—æ®µç»å¸¸ä¸€èµ·å‡ºç°åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥å»ºç«‹è”åˆç´¢å¼•æ¥æå‡æ€§èƒ½ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>æŸ¥è¯¢æ¡ä»¶ä¸­çš„é«˜é¢‘å­—æ®µï¼Œæ¯”å¦‚è¯´WHEREå­å¥ä¸­é¢‘ç¹ç”¨äºç­‰å€¼æŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢æˆ–è€… IN åˆ—è¡¨çš„å­—æ®µã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;PAID&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> create_time </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-01-01&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è‹¥`status`å’Œ`create_time`å¸¸ç»„åˆæŸ¥è¯¢ï¼Œå»ºè”åˆç´¢å¼•`(status, create_time)`</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤šè¡¨è¿æ¥æ—¶çš„å…³è”å­—æ®µï¼Œæ¯”å¦‚è¯´ user.id å’Œ order.user_idã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user u </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order o </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> u</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- `user_id`éœ€ç´¢å¼•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å‚ä¸æ’åºæˆ–è€…åˆ†ç»„çš„å­—æ®µï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§ï¼Œé¿å…æ–‡ä»¶æ’åºã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> product </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> price </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DESC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;       </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å•å­—æ®µæ’åº</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> category, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(*) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> product </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">GROUP BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> category;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åˆ†ç»„ç»Ÿè®¡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦åˆ©ç”¨è¦†ç›–ç´¢å¼•çš„å­—æ®µï¼Œå¯ä»¥é¿å…å›è¡¨æ“ä½œã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åˆ›å»ºè”åˆç´¢å¼•`(user_id, create_time)`</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id, create_time </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è¦†ç›–ç´¢å¼•ç”Ÿæ•ˆ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šæ€§åˆ«å­—æ®µè¦å»ºç«‹ç´¢å¼•å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯åŒºåˆ†åº¦ï¼ŸMySQLæŸ¥çœ‹å­—æ®µåŒºåˆ†åº¦çš„å‘½ä»¤ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šä»€ä¹ˆæ ·çš„å­—æ®µé€‚åˆåŠ ç´¢å¼•ï¼Ÿä»€ä¹ˆä¸é€‚åˆï¼Ÿ</li></ol></blockquote><h3 id="_40-ç´¢å¼•æ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½" tabindex="-1"><a class="header-anchor" href="#_40-ç´¢å¼•æ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½"><span>40.ç´¢å¼•æ˜¯ä¸æ˜¯å»ºçš„è¶Šå¤šè¶Šå¥½ï¼Ÿ</span></a></h3><p>ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚è™½ç„¶ç´¢å¼•å¯ä»¥åŠ å¿«æŸ¥è¯¢ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥å†™å…¥å˜æ…¢ã€å ç”¨æ›´å¤šå­˜å‚¨ç©ºé—´ã€ç”šè‡³è®©ä¼˜åŒ–å™¨é€‰é”™ç´¢å¼•çš„é£é™©ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>æ¯æ¬¡æ•°æ®å†™å…¥ï¼ˆINSERT/UPDATE/DELETEï¼‰æ—¶ï¼ŒMySQL éƒ½éœ€åŒæ­¥æ›´æ–°æ‰€æœ‰ç›¸å…³ç´¢å¼•ï¼Œç´¢å¼•è¶Šå¤šï¼Œç»´æŠ¤æˆæœ¬è¶Šé«˜ã€‚</p><p>å‡å¦‚æŸè¡¨æœ‰ 10 ä¸ªç´¢å¼•ï¼Œæ’å…¥ä¸€è¡Œæ•°æ®éœ€æ›´æ–° 10 ä¸ª B+æ ‘ç»“æ„ï¼Œå¯¼è‡´å†™å…¥å»¶è¿Ÿå¢åŠ  5~10 å€ã€‚</p><p>å‡å¦‚æŸè¡¨æ•°æ®é‡ 100GBï¼Œè‹¥å»º 5 ä¸ªç´¢å¼•ï¼Œæ€»å­˜å‚¨å¯èƒ½è¾¾åˆ° 200GB+ã€‚</p><p>ç´¢å¼•è¿‡å¤šæ—¶ï¼Œä¼˜åŒ–å™¨éœ€è¯„ä¼°æ›´å¤šå¯èƒ½çš„æ‰§è¡Œè·¯å¾„ï¼Œå¯èƒ½å¯¼è‡´é€‰æ‹©å›°éš¾ç—‡ï¼Œä¼˜åŒ–å™¨ä¹Ÿä¼šé€‰é”™ç´¢å¼•ã€‚</p><p>å†æ¯”å¦‚è¯´ï¼Œå·²æœ‰è”åˆç´¢å¼• (A, B, C)ï¼Œå†å•ç‹¬å»º (A) æˆ– (A, B) ç´¢å¼•å³ä¸ºå†—ä½™ã€‚</p><p>å•è¡¨ç´¢å¼•æ•°é‡å»ºè®®ä¸è¶…è¿‡ 5 ä¸ªï¼ŒMySQL å®˜æ–¹å»ºè®®å•è¡¨ç´¢å¼•æ€»å­—æ®µæ•° â‰¤ è¡¨å­—æ®µæ•°çš„ 30%ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="è¯´è¯´ç´¢å¼•ä¼˜åŒ–çš„æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´ç´¢å¼•ä¼˜åŒ–çš„æ€è·¯"><span>è¯´è¯´ç´¢å¼•ä¼˜åŒ–çš„æ€è·¯ï¼Ÿ</span></a></h4><p>ä¸€å¥è¯å›ç­”ï¼š</p><p>å…ˆé€šè¿‡æ…¢æŸ¥è¯¢æ—¥å¿—æ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆï¼Œç„¶åç”¨ EXPLAIN åˆ†ææ‰§è¡Œè®¡åˆ’ï¼Œåˆ¤æ–­æ˜¯å¦èµ°äº†ç´¢å¼•ã€æ˜¯å¦å›è¡¨ã€æ˜¯å¦æ’åºã€‚æ¥ç€æ ¹æ®å­—æ®µç‰¹æ€§è®¾è®¡åˆé€‚çš„ç´¢å¼•ï¼Œå¦‚é€‰æ‹©åŒºåˆ†åº¦é«˜çš„å­—æ®µï¼Œä½¿ç”¨è”åˆç´¢å¼•å’Œè¦†ç›–ç´¢å¼•ï¼Œé¿å…ç´¢å¼•å¤±æ•ˆçš„å†™æ³•ï¼Œæœ€åé€šè¿‡å®æµ‹æ¥éªŒè¯ä¼˜åŒ–æ•ˆæœã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 12 Java æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šç´¢å¼•ä¼˜åŒ–çš„æ€è·¯</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 2 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ï¼Œæ‹¿åˆ°äº†ç™¾åº¦çš„å®ä¹  offerï¼Œä»…ç”¨äº†ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œå¯å¤ªå¼ºäº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250402160141.png" alt="çƒå‹æ‹¿åˆ°äº†ç™¾åº¦çš„å®ä¹  offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†ç™¾åº¦çš„å®ä¹  offer</figcaption></figure><h3 id="_41-ğŸŒŸä¸ºä»€ä¹ˆ-innodb-è¦ä½¿ç”¨-b-æ ‘ä½œä¸ºç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_41-ğŸŒŸä¸ºä»€ä¹ˆ-innodb-è¦ä½¿ç”¨-b-æ ‘ä½œä¸ºç´¢å¼•"><span>41.ğŸŒŸä¸ºä»€ä¹ˆ InnoDB è¦ä½¿ç”¨ B+æ ‘ä½œä¸ºç´¢å¼•ï¼Ÿ</span></a></h3><p>ä¸€å¥è¯æ€»ç»“ï¼š</p><p>å› ä¸º B+ æ ‘æ˜¯ä¸€ç§é«˜åº¦å¹³è¡¡çš„å¤šè·¯æŸ¥æ‰¾æ ‘ï¼Œèƒ½æœ‰æ•ˆé™ä½ç£ç›˜çš„ IO æ¬¡æ•°ï¼Œå¹¶ä¸”æ”¯æŒæœ‰åºéå†å’ŒèŒƒå›´æŸ¥è¯¢ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322142950.png" alt="ç”¨æˆ·1260737ï¼šB+æ ‘" tabindex="0" loading="lazy"><figcaption>ç”¨æˆ·1260737ï¼šB+æ ‘</figcaption></figure><p>æŸ¥è¯¢æ€§èƒ½éå¸¸é«˜ï¼Œå…¶ç»“æ„ä¹Ÿé€‚åˆ MySQL æŒ‰ç…§é¡µä¸ºå•ä½åœ¨ç£ç›˜ä¸Šå­˜å‚¨ã€‚</p><p>åƒå…¶ä»–é€‰é¡¹ï¼Œæ¯”å¦‚è¯´å“ˆå¸Œè¡¨ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ŒäºŒå‰æ ‘å±‚çº§å¤ªæ·±ï¼ŒB æ ‘åˆä¸æ–¹ä¾¿èŒƒå›´æ‰«æï¼Œæ‰€ä»¥æœ€ç»ˆé€‰æ‹©äº† B+ æ ‘ã€‚</p><p>å†æ¢ä¸€ç§å›ç­”ï¼š</p><ul><li>ç›¸æ¯”å“ˆå¸Œè¡¨ï¼šB+ æ ‘æ”¯æŒèŒƒå›´æŸ¥è¯¢å’Œæ’åº</li><li>ç›¸æ¯”äºŒå‰æ ‘å’Œçº¢é»‘æ ‘ï¼šB+ æ ‘æ›´â€œçŸ®èƒ–â€ï¼Œå±‚çº§æ›´å°‘ï¼Œç£ç›˜ IO æ¬¡æ•°æ›´å°‘</li><li>ç›¸æ¯” B æ ‘ï¼šB+ æ ‘çš„éå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨æ•°æ®å¹¶é€šè¿‡é“¾è¡¨è¿æ¥ï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢</li></ul><p>å¦å¤–ä¸€ç§å›ç­”ç‰ˆæœ¬ï¼š</p><p>B+æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„å¤šè·¯æŸ¥æ‰¾æ ‘ï¼Œå’Œçº¢é»‘æ ‘ã€äºŒå‰å¹³è¡¡æ ‘ä¸åŒï¼ŒB+æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰ m ä¸ªå­èŠ‚ç‚¹ï¼Œè€Œçº¢é»‘æ ‘å’ŒäºŒå‰å¹³è¡¡æ ‘éƒ½åªæœ‰ 2 ä¸ªã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104203402.png" alt="William Johnsonï¼šb+æ ‘" tabindex="0" loading="lazy"><figcaption>William Johnsonï¼šb+æ ‘</figcaption></figure><p>å¦å¤–ï¼Œå’Œ B æ ‘ä¸åŒï¼ŒB+æ ‘çš„éå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼ï¼Œä¸å­˜å‚¨æ•°æ®ï¼Œè€Œå¶å­èŠ‚ç‚¹å­˜å‚¨äº†æ‰€æœ‰çš„æ•°æ®ï¼Œå¹¶ä¸”æ„æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œéå¶å­èŠ‚ç‚¹ä¸Šç”±äºæ²¡æœ‰å­˜å‚¨æ•°æ®ï¼Œå°±å¯ä»¥å­˜å‚¨æ›´å¤šçš„é”®å€¼å¯¹ï¼Œå†åŠ ä¸Šå¶å­èŠ‚ç‚¹æ„æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼ŒèŒƒå›´æŸ¥è¯¢æ—¶å°±å¯ä»¥ç›´æ¥é€šè¿‡å¶å­èŠ‚ç‚¹é—´çš„æŒ‡é’ˆé¡ºåºè®¿é—®æ•´ä¸ªæŸ¥è¯¢èŒƒå›´å†…çš„æ‰€æœ‰è®°å½•ï¼Œè€Œæ— éœ€å¯¹æ ‘è¿›è¡Œå¤šæ¬¡éå†ã€‚æŸ¥è¯¢çš„æ•ˆç‡æ¯” B æ ‘æ›´é«˜ã€‚</p><ol><li>æ¨èé˜…è¯»ï¼š<a href="https://www.bilibili.com/video/BV1mY4y1W7pS" target="_blank" rel="noopener noreferrer">ç»ˆäºæŠŠ B æ ‘ææ˜ç™½äº†</a></li><li>æ¨èé˜…è¯»ï¼š<a href="https://cloud.tencent.com/developer/article/1543335" target="_blank" rel="noopener noreferrer">ä¸€ç¯‡æ–‡ç« è®²é€ MySQL ä¸ºä»€ä¹ˆè¦ç”¨ B+æ ‘å®ç°ç´¢å¼•</a></li></ol><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>å…ˆè¯´è¯´ B æ ‘ã€‚</p><p>B æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„å¤šè·¯æŸ¥æ‰¾æ ‘ï¼Œå’Œçº¢é»‘æ ‘ã€äºŒå‰å¹³è¡¡æ ‘ä¸åŒï¼ŒB æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰ m ä¸ªå­èŠ‚ç‚¹ï¼Œè€Œçº¢é»‘æ ‘å’ŒäºŒå‰å¹³è¡¡æ ‘éƒ½åªæœ‰ 2 ä¸ªã€‚</p><p>æ¢å¥è¯è¯´ï¼Œçº¢é»‘æ ‘ã€äºŒå‰å¹³è¡¡æ ‘æ˜¯ç»†é«˜ä¸ªï¼Œè€Œ B æ ‘æ˜¯çŸ®èƒ–å­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322132606.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šB æ ‘" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šB æ ‘</figcaption></figure><p>å†æ¥è¯´è¯´å†…å­˜å’Œç£ç›˜çš„ IO è¯»å†™ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322133650.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šIO è¯»å†™" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šIO è¯»å†™</figcaption></figure><p>ä¸ºäº†æé«˜è¯»å†™æ•ˆç‡ï¼Œä»ç£ç›˜å¾€å†…å­˜ä¸­è¯»æ•°æ®çš„æ—¶å€™ï¼Œä¸€æ¬¡ä¼šè¯»å–è‡³å°‘ä¸€é¡µçš„æ•°æ®ï¼Œå¦‚æœä¸æ»¡ä¸€é¡µï¼Œä¼šå†å¤šè¯»ç‚¹ã€‚</p><p>æ¯”å¦‚è¯´æŸ¥è¯¢åªéœ€è¦è¯»å– 2KB çš„æ•°æ®ï¼Œä½† MySQL å®é™…ä¸Šä¼šè¯»å– 4KB çš„æ•°æ®ï¼Œä»¥è£…æ»¡æ•´é¡µã€‚é¡µæ˜¯ MySQL è¿›è¡Œå†…å­˜å’Œç£ç›˜äº¤äº’çš„æœ€å°é€»è¾‘å•å…ƒã€‚</p><p>å†æ¯”å¦‚è¯´éœ€è¦è¯»å– 5KB çš„æ•°æ®ï¼Œå®é™…ä¸Š MySQL ä¼šè¯»å– 8KB çš„æ•°æ®ï¼Œåˆšå¥½ä¸¤é¡µã€‚</p><p>å› ä¸ºè¯»çš„æ¬¡æ•°è¶Šå¤šï¼Œæ•ˆç‡å°±è¶Šä½ã€‚å°±å¥½æ¯”æˆ‘ä»¬åœ¨å·¥åœ°ä¸Šæ¬ç –ï¼Œä¸€æ¬¡æ¬ 10 å—ç –è‚¯å®šæ¯”ä¸€æ¬¡æ¬ 1 å—ç –çš„æ•ˆç‡è¦é«˜ï¼Œåæ­£æˆ‘æ¯æ¬¡éƒ½æ¬ 10 å—ï¼ˆğŸ˜ï¼‰ã€‚</p><p>å¯¹äºçº¢é»‘æ ‘ã€äºŒå‰å¹³è¡¡æ ‘è¿™ç§ç»†é«˜ä¸ªæ¥è¯´ï¼Œæ¯æ¬¡æ¬çš„ç –å°‘ï¼Œå› ä¸ºåŠ›æ°”ä¸å¤Ÿå˜›ï¼Œé‚£æ¥å›è·‘çš„æ¬¡æ•°å°±è¶Šå¤šã€‚</p><blockquote><p>é€šå¸¸ B+ æ ‘é«˜åº¦ä¸º 3-4 å±‚å³å¯æ”¯æŒ TB çº§æ•°æ®ï¼Œè€Œæ¯æ¬¡æŸ¥è¯¢åªéœ€ 2-4 æ¬¡ç£ç›˜ I/Oï¼Œè¿œä½äºäºŒå‰æ ‘æˆ–çº¢é»‘æ ‘çš„ O(log2N) å¤æ‚åº¦</p></blockquote><p>æ ‘è¶Šé«˜ï¼Œæ„å‘³ç€æŸ¥æ‰¾æ•°æ®æ—¶å°±éœ€è¦æ›´å¤šçš„ç£ç›˜ IOï¼Œå› ä¸ºæ¯ä¸€å±‚éƒ½å¯èƒ½éœ€è¦ä»ç£ç›˜åŠ è½½æ–°çš„èŠ‚ç‚¹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322140825.png" alt="ç”¨æˆ·1260737ï¼šäºŒå‰æ ‘" tabindex="0" loading="lazy"><figcaption>ç”¨æˆ·1260737ï¼šäºŒå‰æ ‘</figcaption></figure><p>B æ ‘çš„èŠ‚ç‚¹é€šå¸¸ä¸é¡µçš„å¤§å°å¯¹é½ï¼Œè¿™æ ·æ¯æ¬¡ä»ç£ç›˜åŠ è½½ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæ­£å¥½å°±æ˜¯ä¸€é¡µçš„å¤§å°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240322141957.png" alt="ç”¨æˆ·1260737ï¼šB æ ‘" tabindex="0" loading="lazy"><figcaption>ç”¨æˆ·1260737ï¼šB æ ‘</figcaption></figure><p>B æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹é€šå¸¸åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>é”®å€¼ï¼šå³è¡¨ä¸­çš„ä¸»é”®</li><li>æŒ‡é’ˆï¼šå­˜å‚¨å­èŠ‚ç‚¹çš„ä¿¡æ¯</li><li>æ•°æ®ï¼šé™¤ä¸»é”®å¤–çš„è¡Œæ•°æ®</li></ul><p>æ­£æ‰€è°“â€œç¥¸å…®ç¦æ‰€å€šï¼Œç¦å…®ç¥¸æ‰€ä¼â€ï¼Œå› ä¸º B æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½å­˜å‚¨äº†æ•°æ®ï¼Œå°±å¯¼è‡´æ¯ä¸ªèŠ‚ç‚¹èƒ½å­˜å‚¨çš„é”®å€¼å’ŒæŒ‡é’ˆå˜å°‘äº†ï¼Œå› ä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œå¯¹å§ï¼Ÿ</p><p>äºæ˜¯ B+æ ‘å°±æ¥äº†ï¼ŒB+æ ‘çš„éå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼ï¼Œä¸å­˜å‚¨æ•°æ®ï¼Œè€Œå¶å­èŠ‚ç‚¹ä¼šå­˜å‚¨æ‰€æœ‰çš„è¡Œæ•°æ®ï¼Œå¹¶ä¸”æ„æˆä¸€ä¸ªæœ‰åºé“¾è¡¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250403113413.png" alt="æ­»ç£• Javaï¼šB+æ ‘" tabindex="0" loading="lazy"><figcaption>æ­»ç£• Javaï¼šB+æ ‘</figcaption></figure><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œéå¶å­èŠ‚ç‚¹ç”±äºæ²¡æœ‰å­˜å‚¨æ•°æ®ï¼Œå°±å¯ä»¥å­˜å‚¨æ›´å¤šçš„é”®å€¼å¯¹ï¼Œæ ‘å°±å˜å¾—æ›´åŠ çŸ®èƒ–äº†ï¼Œäºæ˜¯å°±æ›´æœ‰åŠ²äº†ï¼Œæ¯æ¬¡æ¬çš„ç –ä¹Ÿå°±æ›´å¤šäº†ï¼ˆğŸ˜‚ï¼‰ã€‚</p><blockquote><p>ç›¸æ¯” B æ ‘ï¼ŒB+ æ ‘çš„éå¶å­èŠ‚ç‚¹å¯å®¹çº³çš„é”®å€¼æ›´å¤šï¼Œä¸€ä¸ª 16KB çš„èŠ‚ç‚¹å¯å­˜å‚¨çº¦ 1200 ä¸ªé”®å€¼ï¼Œå¤§å¹…é™ä½æ ‘çš„é«˜åº¦ã€‚</p></blockquote><p>ç”±æ­¤ä¸€æ¥ï¼ŒæŸ¥æ‰¾æ•°æ®è¿›è¡Œçš„ç£ç›˜ IO å°±æ›´å°‘äº†ï¼ŒæŸ¥è¯¢çš„æ•ˆç‡ä¹Ÿå°±æ›´é«˜äº†ã€‚</p><p>å†åŠ ä¸Šå¶å­èŠ‚ç‚¹æ„æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼ŒèŒƒå›´æŸ¥è¯¢æ—¶å°±å¯ä»¥ç›´æ¥é€šè¿‡å¶å­èŠ‚ç‚¹é—´çš„æŒ‡é’ˆé¡ºåºè®¿é—®æ•´ä¸ªæŸ¥è¯¢èŒƒå›´å†…çš„æ‰€æœ‰è®°å½•ï¼Œè€Œæ— éœ€å¯¹æ ‘è¿›è¡Œå¤šæ¬¡éå†ã€‚</p><p>B æ ‘å°±åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="b-æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯å•å‘é“¾è¡¨è¿˜æ˜¯åŒå‘é“¾è¡¨-å¦‚æœä»å¤§å€¼å‘å°å€¼æ£€ç´¢-å¦‚ä½•æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#b-æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯å•å‘é“¾è¡¨è¿˜æ˜¯åŒå‘é“¾è¡¨-å¦‚æœä»å¤§å€¼å‘å°å€¼æ£€ç´¢-å¦‚ä½•æ“ä½œ"><span>B+æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯å•å‘é“¾è¡¨è¿˜æ˜¯åŒå‘é“¾è¡¨ï¼Ÿå¦‚æœä»å¤§å€¼å‘å°å€¼æ£€ç´¢ï¼Œå¦‚ä½•æ“ä½œï¼Ÿ</span></a></h4><p>B+æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯é€šè¿‡åŒå‘é“¾è¡¨è¿æ¥çš„ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿èŒƒå›´æŸ¥è¯¢å’Œåå‘éå†ã€‚</p><ul><li>å½“æ‰§è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥ä»èŒƒå›´çš„å¼€å§‹ç‚¹æˆ–ç»“æŸç‚¹å¼€å§‹ï¼Œå‘å‰æˆ–å‘åéå†ã€‚</li><li>åœ¨éœ€è¦å¯¹æ•°æ®è¿›è¡Œé€†åºå¤„ç†æ—¶ï¼ŒåŒå‘é“¾è¡¨éå¸¸æœ‰ç”¨ã€‚</li></ul><p>å¦‚æœéœ€è¦åœ¨ B+æ ‘ä¸­ä»å¤§å€¼å‘å°å€¼è¿›è¡Œæ£€ç´¢ï¼Œå¯ä»¥å…ˆå®šä½åˆ°æœ€å³ä¾§èŠ‚ç‚¹ï¼Œæ‰¾åˆ°åŒ…å«æœ€å¤§å€¼çš„å¶å­èŠ‚ç‚¹ã€‚ä»æ ¹èŠ‚ç‚¹å¼€å§‹å‘å³éå†æ ‘çš„æ–¹å¼å®ç°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250403114455.png" alt="Brandåšå®¢å›­ï¼šB+æ ‘" tabindex="0" loading="lazy"><figcaption>Brandåšå®¢å›­ï¼šB+æ ‘</figcaption></figure><p>å®šä½åˆ°æœ€å³ä¾§çš„å¶å­èŠ‚ç‚¹åï¼Œå†åˆ©ç”¨å¶èŠ‚ç‚¹é—´çš„åŒå‘é“¾è¡¨å‘å·¦éå†å°±å¥½äº†ã€‚</p><h4 id="ä¸ºä»€ä¹ˆ-mongodb-çš„ç´¢å¼•ç”¨-bæ ‘-è€Œ-mysql-ç”¨-b-æ ‘" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-mongodb-çš„ç´¢å¼•ç”¨-bæ ‘-è€Œ-mysql-ç”¨-b-æ ‘"><span>ä¸ºä»€ä¹ˆ MongoDB çš„ç´¢å¼•ç”¨ Bæ ‘ï¼Œè€Œ MySQL ç”¨ B+ æ ‘ï¼Ÿ</span></a></h4><p>MongoDB é€šå¸¸ä»¥ JSON æ ¼å¼å­˜å‚¨æ–‡æ¡£ï¼ŒæŸ¥è¯¢ä»¥å•é”®æŸ¥è¯¢ï¼ˆå¦‚ <code>find({_id: 123})</code>ï¼‰ä¸ºä¸»ã€‚B æ ‘çš„â€œèŠ‚ç‚¹æ—¢å­˜é”®åˆå­˜æ•°æ®â€çš„ç‰¹æ€§å…è®¸æŸ¥è¯¢åœ¨éå¶å­èŠ‚ç‚¹æå‰ç»ˆæ­¢ï¼Œä»è€Œå‡å°‘ I/O æ¬¡æ•°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240516125249.png" alt="å­¤ç‹¬çƒŸï¼šBæ ‘" tabindex="0" loading="lazy"><figcaption>å­¤ç‹¬çƒŸï¼šBæ ‘</figcaption></figure><p>MySQL çš„æŸ¥è¯¢é€šå¸¸æ¶‰åŠèŒƒå›´ï¼ˆ<code>WHERE id &gt; 100</code>ï¼‰ã€æ’åºï¼ˆ<code>ORDER BY</code>ï¼‰ã€è¿æ¥ï¼ˆ<code>JOIN</code>ï¼‰ç­‰æ“ä½œã€‚B+ æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯é“¾è¡¨ç»“æ„ï¼Œå¤©ç„¶æ”¯æŒé¡ºåºéå†ï¼Œæ— éœ€å›æº¯è‡³æ ¹èŠ‚ç‚¹æˆ–ä¸­åºéå†ï¼Œæ•ˆç‡è¿œé«˜äº B æ ‘ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240516125326.png" alt="å­¤ç‹¬çƒŸï¼šB+æ ‘" tabindex="0" loading="lazy"><figcaption>å­¤ç‹¬çƒŸï¼šB+æ ‘</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><table><thead><tr><th>ç‰¹æ€§</th><th>MongoDB (Bæ ‘)</th><th>MySQL InnoDB (B+æ ‘)</th></tr></thead><tbody><tr><td>æ•°æ®æ¨¡å‹</td><td>æ–‡æ¡£å‹æ•°æ®åº“</td><td>å…³ç³»å‹æ•°æ®åº“</td></tr><tr><td>å­˜å‚¨æ–¹å¼</td><td>æ•°æ®æ–‡ä»¶+ç´¢å¼•æ–‡ä»¶åˆ†ç¦»</td><td>èšç°‡ç´¢å¼•æ•°æ®ä¸ä¸»é”®ç»‘å®šå­˜å‚¨</td></tr><tr><td>æŸ¥è¯¢æ¨¡å¼</td><td>ä¾§é‡å•æ–‡æ¡£æŸ¥è¯¢</td><td>ä¾§é‡èŒƒå›´æŸ¥è¯¢å’Œå¤æ‚è¿æ¥</td></tr><tr><td>æ•°æ®è®¿é—®æ¨¡å¼</td><td>éšæœºè®¿é—®ä¸ºä¸»</td><td>é¡ºåºè®¿é—®æ›´é¢‘ç¹</td></tr><tr><td>ç´¢å¼•å­˜å‚¨å†…å®¹</td><td>éå¶èŠ‚ç‚¹å­˜å‚¨æ•°æ®æŒ‡é’ˆ</td><td>åªæœ‰å¶èŠ‚ç‚¹å­˜å‚¨æ•°æ®</td></tr><tr><td>èŒƒå›´æŸ¥è¯¢æ•ˆç‡</td><td>éœ€è¦å¤šæ¬¡æ ‘éå†</td><td>é€šè¿‡å¶èŠ‚ç‚¹é“¾è¡¨é«˜æ•ˆéå†</td></tr><tr><td>å†…å­˜åˆ©ç”¨ç‡</td><td>å•ä¸ªæŸ¥è¯¢è·¯å¾„ç¼“å­˜æ›´æœ‰æ•ˆ</td><td>é€‚åˆæ‰¹é‡æ‰«æç¼“å­˜</td></tr></tbody></table><p>æ¨èé˜…è¯»ï¼š<a href="https://www.cnblogs.com/rjzheng/p/12316685.html" target="_blank" rel="noopener noreferrer">ä¸ºä»€ä¹ˆ MongoDB ç´¢å¼•ç”¨ Bæ ‘ï¼Œè€Œ MySQL ç”¨ B+ æ ‘ï¼Ÿ</a></p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨å•†ä¸šåŒ–ä¸€é¢çš„åŸé¢˜ï¼šè¯´è¯´ B+æ ‘ï¼Œä¸ºä»€ä¹ˆ 3 å±‚å®¹çº³ 2000W æ¡ï¼Œä¸ºä»€ä¹ˆ 2000w æ¡æ•°æ®æŸ¥çš„å¿«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å›½ä¼é¢è¯•åŸé¢˜ï¼šè¯´è¯´ MySQL çš„åº•å±‚æ•°æ®ç»“æ„ï¼ŒB æ ‘å’Œ B+æ ‘çš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 22 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL ä¸ºä»€ä¹ˆé€‰ç”¨ B+æ ‘</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³é¢ç»åŒå­¦ E ç¬¬äºŒä¸ªéƒ¨é—¨ Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´ä¸€è¯´ mysql ç´¢å¼•çš„åº•å±‚æœºåˆ¶</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 1 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL ç´¢å¼•ç»“æ„ï¼Œå»ºç«‹ç´¢å¼•çš„ç­–ç•¥</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL ç´¢å¼•ç»“æ„ï¼Œä¸ºä»€ä¹ˆç”¨ B+æ ‘ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åŒå­¦ 5 Java åç«¯é¢è¯•åŸé¢˜ï¼šæ•°æ®åº“ç´¢å¼•è®²ä¸€ä¸‹ï¼Œç„¶åä¸ºä»€ä¹ˆä¼šåŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œæˆ‘è®²åˆ°äº† B+æ ‘ï¼Œç„¶åé—®äº† B æ•°ä¸ B+æ ‘åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šB+æ ‘çš„é¡µæ˜¯å•å‘é“¾è¡¨è¿˜æ˜¯åŒå‘é“¾è¡¨ï¼Ÿå¦‚æœä»å¤§å€¼å‘å°å€¼æ£€ç´¢ï¼Œå¦‚ä½•æ“ä½œï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾—ç‰©é¢ç»åŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šé¡¹ç›®ç´¢å¼•ï¼ŒMySQLç´¢å¼•ï¼ŒmongoDBä¸ºä»€ä¹ˆç”¨çš„Bæ ‘ï¼ŒäºŒè€…æ¯”è¾ƒ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„oppo é¢ç»åŒå­¦ 8 åç«¯å¼€å‘ç§‹æ‹›ä¸€é¢é¢è¯•åŸé¢˜ï¼šMysqlç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©è¿™æ ·çš„æ•°æ®ç»“æ„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 8 é¢è¯•åŸé¢˜ï¼šç´¢å¼•</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 9 ä¸€é¢é¢è¯•åŸé¢˜ï¼šB+æ ‘ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 15 ç‚¹è¯„åç«¯æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šç´¢å¼•çš„æ•°æ®ç»“æ„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾—ç‰©é¢ç»åŒå­¦ 9 é¢è¯•é¢˜ç›®åŸé¢˜ï¼šB+æ ‘äº†è§£å—ï¼Ÿåº•å±‚å‘¢ï¼Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆç”¨ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´é¢ç»åŒå­¦ 3 ç½‘çº¦è½¦åç«¯å¼€å‘ä¸€é¢åŸé¢˜ï¼šMySQLç´¢å¼•åŸç†ï¼ŒB+æ ‘æ›´æ‰ æœ‰ä»€ä¹ˆå¥½å¤„</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 3 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´</a>ï¼Œæ‹¿åˆ°äº†ç¾å›¢çš„å®ä¹  offerï¼Œæ­å–œå•Šã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250403120541.png" alt="çƒå‹æ”¶åˆ°ç¾å›¢ offer äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹æ”¶åˆ°ç¾å›¢ offer äº†</figcaption></figure><h3 id="_42-ğŸŒŸä¸€æ£µb-æ ‘èƒ½å­˜å‚¨å¤šå°‘æ¡æ•°æ®å‘¢" tabindex="-1"><a class="header-anchor" href="#_42-ğŸŒŸä¸€æ£µb-æ ‘èƒ½å­˜å‚¨å¤šå°‘æ¡æ•°æ®å‘¢"><span>42.ğŸŒŸä¸€æ£µB+æ ‘èƒ½å­˜å‚¨å¤šå°‘æ¡æ•°æ®å‘¢ï¼Ÿ</span></a></h3><p>ä¸€å¥è¯å›å¤ï¼š</p><p>ä¸€æ£µ B+ æ ‘èƒ½å­˜å¤šå°‘æ•°æ®ï¼Œå–å†³äºå®ƒçš„åˆ†æ”¯å› å­å’Œé«˜åº¦ã€‚åœ¨ InnoDB ä¸­ï¼Œé¡µçš„é»˜è®¤å¤§å°ä¸º 16KBï¼Œå½“ä¸»é”®ä¸º bigint æ—¶ï¼Œ3 å±‚ B+ æ ‘é€šå¸¸å¯ä»¥å­˜å‚¨çº¦ 2000 ä¸‡æ¡æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-16f3523d-20b0-4376-908d-ac40b329768f.jpg" alt="æ¸…å¹½ä¹‹åœ°ï¼šB+æ ‘å­˜å‚¨æ•°æ®æ¡æ•°" tabindex="0" loading="lazy"><figcaption>æ¸…å¹½ä¹‹åœ°ï¼šB+æ ‘å­˜å‚¨æ•°æ®æ¡æ•°</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>å…ˆæ¥çœ‹ä¸€ä¸‹è®¡ç®—å…¬å¼ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>æœ€å¤§è®°å½•æ•° = (åˆ†æ”¯å› å­)^(æ ‘é«˜åº¦-1) Ã— å¶å­èŠ‚ç‚¹å®¹é‡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å†æ¥çœ‹ä¸€ä¸‹å…³é”®å‚æ•°ï¼š</p><p>â‘ ã€é¡µå¤§å°ï¼Œé»˜è®¤ 16KB</p><p>â‘¡ã€ä¸»é”®å¤§å°ï¼Œå‡è®¾æ˜¯ bigint ç±»å‹ï¼Œé‚£ä¹ˆå®ƒçš„å¤§å°å°±æ˜¯ 8 ä¸ªå­—èŠ‚ã€‚</p><p>â‘¢ã€é¡µæŒ‡é’ˆå¤§å°ï¼ŒInnoDB æºç ä¸­è®¾ç½®ä¸º 6 å­—èŠ‚ï¼Œ4 å­—èŠ‚é¡µå· + 2 å­—èŠ‚é¡µå†…åç§»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404125013.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šGitHubæºç " tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šGitHubæºç </figcaption></figure><p>æ‰€ä»¥éå¶å­èŠ‚ç‚¹å¯ä»¥å­˜å‚¨ 16384/14(é”®å€¼+æŒ‡é’ˆ)=1170 ä¸ªè¿™æ ·çš„å•å…ƒã€‚</p><p>å½“å±‚é«˜ä¸º 2 æ—¶ï¼Œæ ¹èŠ‚ç‚¹å¯ä»¥å­˜å‚¨ 1170 ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ 1170 ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ€»æ•°æ®é‡ä¸º 1170Ã—16 =18720 æ¡ã€‚</p><p>å½“å±‚é«˜ä¸º 3 æ—¶ï¼Œæ ¹èŠ‚ç‚¹æŒ‡å‘ 1170 ä¸ªéå¶å­èŠ‚ç‚¹ï¼Œæ¯ä¸ªéå¶å­èŠ‚ç‚¹å†æŒ‡å‘ 1170 ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ€»æ•°æ®é‡ä¸º 1170Ã—1170Ã—16â‰ˆ21,902,400 æ¡ï¼ˆçº¦2,190ä¸‡æ¡ï¼‰è®°å½•ã€‚</p><p>æ¨èé˜…è¯»ï¼š<a href="https://juejin.cn/post/6904293886626103309" target="_blank" rel="noopener noreferrer">æ¸…å¹½ä¹‹åœ°ï¼šInnoDB ä¸€æ£µ B+æ ‘å¯ä»¥å­˜æ”¾å¤šå°‘è¡Œæ•°æ®ï¼Ÿ</a></p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="ç°åœ¨æœ‰ä¸€å¼ è¡¨-2kw-æ•°æ®-æˆ‘è¿™ä¸ª-b-æ ‘çš„é«˜åº¦æœ‰å‡ å±‚" tabindex="-1"><a class="header-anchor" href="#ç°åœ¨æœ‰ä¸€å¼ è¡¨-2kw-æ•°æ®-æˆ‘è¿™ä¸ª-b-æ ‘çš„é«˜åº¦æœ‰å‡ å±‚"><span>ç°åœ¨æœ‰ä¸€å¼ è¡¨ 2kw æ•°æ®ï¼Œæˆ‘è¿™ä¸ª b+æ ‘çš„é«˜åº¦æœ‰å‡ å±‚ï¼Ÿ</span></a></h4><p>å¯¹äº 2KW æ¡æ•°æ®æ¥è¯´ï¼ŒB+æ ‘çš„é«˜åº¦ä¸º 3 å±‚å°±å¤Ÿäº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250404105416.png" alt="yifanSJï¼š3 å±‚ B+æ ‘" tabindex="0" loading="lazy"><figcaption>yifanSJï¼š3 å±‚ B+æ ‘</figcaption></figure><p>æ¨èé˜…è¯»ï¼š<a href="https://www.cnblogs.com/yifanSJ/p/17662132.html" target="_blank" rel="noopener noreferrer">Innodb å¼•æ“ä¸­ B+æ ‘ä¸€èˆ¬æœ‰å‡ å±‚ï¼Ÿèƒ½å®¹çº³å¤šå°‘æ•°æ®é‡ï¼Ÿ</a></p><h4 id="æ¯ä¸ªå¶å­èŠ‚ç‚¹èƒ½å­˜æ”¾å¤šå°‘æ¡æ•°æ®" tabindex="-1"><a class="header-anchor" href="#æ¯ä¸ªå¶å­èŠ‚ç‚¹èƒ½å­˜æ”¾å¤šå°‘æ¡æ•°æ®"><span>æ¯ä¸ªå¶å­èŠ‚ç‚¹èƒ½å­˜æ”¾å¤šå°‘æ¡æ•°æ®ï¼Ÿ</span></a></h4><p>å¦‚æœå•è¡Œæ•°æ®å¤§å°ä¸º 1KBï¼Œé‚£ä¹ˆæ¯é¡µå¯å­˜å‚¨çº¦ 16 è¡Œï¼ˆ16KB/1KBï¼‰æ•°æ®ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªè¡¨ç»“æ„ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">` (</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `id`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> BIGINT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,        </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 8å­—èŠ‚</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `name`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,   </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å®é™…é•¿åº¦50å­—èŠ‚ï¼ˆUTF8MB4ï¼Œæ¯ä¸ªå­—ç¬¦æœ€å¤š4å­—èŠ‚ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `age`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TINYINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,                  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 1å­—èŠ‚</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `email`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)            </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å®é™…é•¿åº¦30å­—èŠ‚ï¼Œå¯ä¸ºNULL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ROW_FORMAT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">COMPACT;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆä¸€è¡Œæ•°æ®çš„å¤§å°ä¸ºï¼š<code>8 + 50 + 1 + 30 = 89</code> å­—èŠ‚ã€‚</p><p>è¡Œæ ¼å¼çš„å¼€é”€ä¸ºï¼šè¡Œå¤´ 5 å­—èŠ‚+æŒ‡é’ˆ 6 å­—èŠ‚+å¯å˜é•¿åº¦å­—æ®µå¼€é”€ 2 å­—èŠ‚ï¼ˆname å’Œ email å„å  1 å­—èŠ‚ï¼‰+ NULL ä½å›¾ 1 å­—èŠ‚ = 14 å­—èŠ‚ã€‚</p><p>æ‰€ä»¥æ¯è¡Œæ•°æ®çš„å®é™…å¤§å°ä¸ºï¼š<code>89 + 14 = 103</code> å­—èŠ‚ã€‚</p><p>æ¯é¡µå¤§å°é»˜è®¤ä¸º 16KBï¼Œé‚£ä¹ˆæ¯é¡µæœ€å¤šå¯ä»¥å­˜å‚¨ <code>16384 / 103 â‰ˆ 158</code> è¡Œæ•°æ®ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨å•†ä¸šåŒ–ä¸€é¢çš„åŸé¢˜ï¼šè¯´è¯´ B+æ ‘ï¼Œä¸ºä»€ä¹ˆ 3 å±‚å®¹çº³ 2000W æ¡ï¼Œä¸ºä»€ä¹ˆ 2000w æ¡æ•°æ®æŸ¥çš„å¿«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¥‡å®‰ä¿¡é¢ç»åŒå­¦ 1 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šinnodb ä½¿ç”¨æ•°æ®é¡µå­˜å‚¨æ•°æ®ï¼Ÿé»˜è®¤æ•°æ®é¡µå¤§å° 16Kï¼Œæˆ‘ç°åœ¨æœ‰ä¸€å¼ è¡¨ï¼Œæœ‰ 2kw æ•°æ®ï¼Œæˆ‘è¿™ä¸ª b+æ ‘çš„é«˜åº¦æœ‰å‡ å±‚ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 18 æˆéƒ½åˆ°å®¶é¢è¯•åŸé¢˜ï¼šä¸€å¼ è¡¨æœ€å¤šå­˜å¤šå°‘æ•°æ®ï¼ˆæˆ‘ç­”å¾—2kwï¼Œæ ¹æ®b+æ ‘çš„ä¸‰å±‚é«˜åº¦è®¡ç®—ï¼‰</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾—ç‰©é¢ç»åŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šMySQL B+æ ‘çš„åº¦æ•°è¶Šå¤§è¶Šå¥½å—ï¼Œä¸€èˆ¬è®¾å¤šå°‘</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 29 Java åç«¯ä¸€é¢åŸé¢˜ï¼šInnoDBä¸­ä¸€ä¸ªä¸‰å±‚çš„B+æ ‘èƒ½å­˜å¤šå°‘æ•°æ®ï¼Ÿæ¯ä¸ªå¶å­èŠ‚ç‚¹èƒ½å­˜æ”¾å¤šå°‘æ¡æ•°æ®ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 4 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹é—®</a>ï¼Œæœ‰æ²¡æœ‰è‹±æ–‡ç‰ˆçš„é¢æ¸£é€†è¢­ï¼Œä»–äººåœ¨å›½å¤–ç•™å­¦ï¼Œå›½å¤–ä¹Ÿå¼€å§‹å·å…«è‚¡äº†å—ï¼ŒçœŸçš„ç¦»è°±ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-è¯·é—®æœ‰è‹±æ–‡ç¿»è¯‘ç‰ˆçš„å—.png" alt="çƒå‹é—®è‹±æ–‡ç‰ˆçš„é¢ç‚¸é€†è¢­" tabindex="0" loading="lazy"><figcaption>çƒå‹é—®è‹±æ–‡ç‰ˆçš„é¢ç‚¸é€†è¢­</figcaption></figure><h3 id="_43-ç´¢å¼•ä¸ºä»€ä¹ˆç”¨-b-æ ‘ä¸ç”¨æ™®é€šäºŒå‰æ ‘" tabindex="-1"><a class="header-anchor" href="#_43-ç´¢å¼•ä¸ºä»€ä¹ˆç”¨-b-æ ‘ä¸ç”¨æ™®é€šäºŒå‰æ ‘"><span>43.ç´¢å¼•ä¸ºä»€ä¹ˆç”¨ B+æ ‘ä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ</span></a></h3><p>æ™®é€šäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚å½“æ•°æ®æŒ‰é¡ºåºé€’å¢æ’å…¥æ—¶ï¼ŒäºŒå‰æ ‘ä¼šé€€åŒ–æˆé“¾è¡¨ï¼Œå¯¼è‡´æ ‘çš„é«˜åº¦ç­‰äºæ•°æ®é‡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115151059.png" alt="äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šæ™®é€šäºŒå‰æ ‘" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šæ™®é€šäºŒå‰æ ‘</figcaption></figure><p>æ­¤æ—¶æŸ¥æ‰¾ id=7 å°±éœ€è¦ 7 æ¬¡ I/O æ“ä½œï¼Œç›¸å½“äºå…¨è¡¨æ‰«æã€‚è€Œ B+ æ ‘ä½œä¸ºå¤šå‰å¹³è¡¡æ ‘ï¼Œèƒ½å°†æ•°äº¿çº§çš„æ•°æ®é‡æ§åˆ¶åœ¨ 3-4 å±‚çš„æ ‘é«˜ï¼Œèƒ½æå¤§å‡å°‘ç£ç›˜çš„ I/O æ¬¡æ•°ã€‚</p><h4 id="ä¸ºä»€ä¹ˆä¸ç”¨å¹³è¡¡äºŒå‰æ ‘å‘¢" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸ç”¨å¹³è¡¡äºŒå‰æ ‘å‘¢"><span>ä¸ºä»€ä¹ˆä¸ç”¨å¹³è¡¡äºŒå‰æ ‘å‘¢ï¼Ÿ</span></a></h4><p>å¹³è¡¡äºŒå‰æ ‘è™½ç„¶è§£å†³äº†æ™®é€šäºŒå‰æ ‘çš„é€€åŒ–é—®é¢˜ï¼Œä½†æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115151729.png" alt="äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šAVL æ ‘" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šAVL æ ‘</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šMySQL ç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨ B+æ ‘è€Œä¸æ˜¯ç”¨åˆ«çš„æ•°æ®ç»“æ„ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 27 äº‘åå°æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æ ‘ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨AVLæ ‘ï¼Ÿ</li></ol></blockquote><h3 id="_44-ğŸŒŸä¸ºä»€ä¹ˆç”¨-b-æ ‘è€Œä¸ç”¨-b-æ ‘å‘¢" tabindex="-1"><a class="header-anchor" href="#_44-ğŸŒŸä¸ºä»€ä¹ˆç”¨-b-æ ‘è€Œä¸ç”¨-b-æ ‘å‘¢"><span>44.ğŸŒŸä¸ºä»€ä¹ˆç”¨ B+ æ ‘è€Œä¸ç”¨ B æ ‘å‘¢ï¼Ÿ</span></a></h3><p>B+ æ ‘ç›¸æ¯” B æ ‘æœ‰ 3 ä¸ªæ˜¾è‘—ä¼˜åŠ¿ï¼š</p><p>ç¬¬ä¸€ï¼ŒB æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹æ—¢å­˜å‚¨é”®å€¼ï¼Œåˆå­˜å‚¨æ•°æ®å’ŒæŒ‡é’ˆï¼Œå¯¼è‡´å•èŠ‚ç‚¹å­˜å‚¨çš„é”®å€¼æ•°é‡è¾ƒå°‘ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240325115614.png" alt="æå®¢æ—¶é—´ï¼šB æ ‘" tabindex="0" loading="lazy"><figcaption>æå®¢æ—¶é—´ï¼šB æ ‘</figcaption></figure><p>ä¸€ä¸ª 16KB çš„ InnoDB é¡µï¼Œå¦‚æœæ•°æ®è¾ƒå¤§ï¼ŒB æ ‘çš„éå¶å­èŠ‚ç‚¹åªèƒ½å®¹çº³å‡ åä¸ªé”®å€¼ï¼Œè€Œ B+ æ ‘çš„éå¶å­èŠ‚ç‚¹å¯ä»¥å®¹çº³ä¸Šåƒä¸ªé”®å€¼ã€‚</p><p>ç¬¬äºŒï¼ŒB æ ‘çš„èŒƒå›´æŸ¥è¯¢éœ€è¦é€šè¿‡ä¸­åºéå†é€å±‚å›æº¯ï¼›è€Œ B+ æ ‘çš„å¶å­èŠ‚ç‚¹é€šè¿‡åŒå‘é“¾è¡¨é¡ºåºè¿æ¥ï¼ŒèŒƒå›´æŸ¥è¯¢åªéœ€å®šä½èµ·å§‹ç‚¹åé¡ºåºéå†é“¾è¡¨å³å¯ï¼Œæ²¡æœ‰å›æº¯å¼€é”€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240325115641.png" alt="æå®¢æ—¶é—´ï¼šB+æ ‘" tabindex="0" loading="lazy"><figcaption>æå®¢æ—¶é—´ï¼šB+æ ‘</figcaption></figure><p>ç¬¬ä¸‰ï¼ŒB æ ‘çš„æ•°æ®å¯èƒ½å­˜å‚¨åœ¨ä»»æ„èŠ‚ç‚¹ï¼Œå‡å¦‚ç›®æ ‡æ•°æ®æ°å¥½ä½äºæ ¹èŠ‚ç‚¹æˆ–ä¸Šå±‚èŠ‚ç‚¹ï¼ŒæŸ¥è¯¢ä»…éœ€ 1-2 æ¬¡ I/Oï¼›ä½†å¦‚æœæ•°æ®ä½äºåº•å±‚èŠ‚ç‚¹ï¼Œåˆ™éœ€å¤šæ¬¡ I/Oï¼Œå¯¼è‡´æŸ¥è¯¢æ—¶é—´æ³¢åŠ¨è¾ƒå¤§ã€‚</p><p>è€Œ B+ æ ‘çš„æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼ŒæŸ¥è¯¢è·¯å¾„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæ—¶é—´ç¨³å®šä¸º O(logN)ï¼Œå¯¹ MySQL åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ç¨³å®šæ€§è‡³å…³é‡è¦ã€‚</p><p>æƒ³è¦äº†è§£ B æ ‘å’Œ B+æ ‘çš„æ›´å¤šåŒºåˆ«ï¼Œæ¨èé˜…è¯»ï¼š</p><ul><li><a href="https://github.com/wardseptember/notes/blob/master/docs/B%E6%A0%91%E5%92%8CB+%E6%A0%91%E8%AF%A6%E8%A7%A3.md" target="_blank" rel="noopener noreferrer">GitHubï¼šB æ ‘å’Œ B+æ ‘è¯¦è§£</a></li><li><a href="https://segmentfault.com/a/1190000020416577" target="_blank" rel="noopener noreferrer">æ€å¦ï¼šé¢è¯•å®˜é—®ä½  B æ ‘å’Œ B+æ ‘ï¼Œå°±æŠŠè¿™ç¯‡æ–‡ç« ä¸¢ç»™ä»–</a></li><li><a href="https://time.geekbang.org/column/article/112298" target="_blank" rel="noopener noreferrer">æå®¢æ—¶é—´ï¼šä¸ºä»€ä¹ˆç”¨ B+æ ‘æ¥åšç´¢å¼•ï¼Ÿ</a></li><li><a href="https://mp.weixin.qq.com/s/muOwXKNTvPjXjrLsFRveIw" target="_blank" rel="noopener noreferrer">ä¸€é¢—å‰½æ‚çš„ç§å­ï¼šç”¨ 16 å¼ å›¾å°±ç»™ä½ è®²æ˜ç™½ MySQL ä¸ºä»€ä¹ˆè¦ç”¨ B+æ ‘åšç´¢å¼•</a></li></ul><h4 id="b-æ ‘çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#b-æ ‘çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘"><span>B+æ ‘çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ</span></a></h4><p>O(logN)ã€‚</p><p>æ ‘çš„é«˜åº¦ h ä¸ºï¼š</p><mjx-container class="MathJax" jax="SVG" display="true" style="position:relative;"><svg style="vertical-align:-0.566ex;" xmlns="http://www.w3.org/2000/svg" width="13.199ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5834.1 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mo" transform="translate(853.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(1909.6,0)"><path data-c="2308" d="M174 734Q178 746 190 750H298H369Q400 750 411 747T422 730T411 713T372 709Q365 709 345 709T310 710H214V-235Q206 -248 196 -250Q192 -250 189 -249T184 -247T180 -244T178 -241T176 -237T174 -234V734Z"></path></g><g data-mml-node="msub" transform="translate(2353.6,0)"><g data-mml-node="mi"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="mi" transform="translate(1311,-241.4) scale(0.707)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(4335.4,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(4502.1,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(5390.1,0)"><path data-c="2309" d="M21 717T21 730T32 746T75 750H147H256Q266 742 269 735V-235Q262 -248 251 -250Q247 -250 244 -249T239 -247T235 -244T233 -241T231 -237T229 -234V710H133Q119 710 99 710T71 709Q43 709 32 713Z"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>h</mi><mo>=</mo><mo fence="false" stretchy="false">âŒˆ</mo><msub><mi>log</mi><mi>m</mi></msub><mo data-mjx-texclass="NONE">â¡</mo><mi>N</mi><mo fence="false" stretchy="false">âŒ‰</mo></math></mjx-assistive-mml></mjx-container><p>å…¶ä¸­ N æ˜¯æ•°æ®æ€»é‡ï¼Œm æ˜¯é˜¶æ•°ã€‚æ¯å±‚éœ€è¦åšä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼Œå¤æ‚åº¦ä¸º <mjx-container class="MathJax" jax="SVG" style="position:relative;"><svg style="vertical-align:-0.566ex;" xmlns="http://www.w3.org/2000/svg" width="8.741ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3863.7 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="mo" transform="translate(2430,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(2596.7,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(3474.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo data-mjx-texclass="NONE">â¡</mo><mi>m</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container>ã€‚</p><p>æ€»å¤æ‚åº¦ä¸ºï¼š</p><mjx-container class="MathJax" jax="SVG" display="true" style="position:relative;"><svg style="vertical-align:-0.566ex;" xmlns="http://www.w3.org/2000/svg" width="29.027ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 12829.8 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="mi" transform="translate(1311,-241.4) scale(0.707)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(3133.8,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(3300.5,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(4410.7,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z"></path></g><g data-mml-node="mi" transform="translate(4911,0)"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="mo" transform="translate(6189,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(6355.6,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(7233.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(7900.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(8956.2,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mo" transform="translate(9719.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(10108.2,0)"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="mo" transform="translate(11386.2,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(11552.8,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(12440.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>O</mi><mo stretchy="false">(</mo><msub><mi>log</mi><mi>m</mi></msub><mo data-mjx-texclass="NONE">â¡</mo><mi>N</mi><mo>â‹…</mo><mi>log</mi><mo data-mjx-texclass="NONE">â¡</mo><mi>m</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo data-mjx-texclass="NONE">â¡</mo><mi>N</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container><h4 id="ä¸ºä»€ä¹ˆç”¨-b-æ ‘ä¸ç”¨è·³è¡¨å‘¢" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆç”¨-b-æ ‘ä¸ç”¨è·³è¡¨å‘¢"><span>ä¸ºä»€ä¹ˆç”¨ B+æ ‘ä¸ç”¨è·³è¡¨å‘¢ï¼Ÿ</span></a></h4><p>è·³è¡¨æœ¬è´¨ä¸Šè¿˜æ˜¯é“¾è¡¨ç»“æ„ï¼Œåªä¸è¿‡æŠŠæŸäº›èŠ‚ç‚¹æŠ½åˆ°ä¸Šå±‚åšäº†ç´¢å¼•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250405105517.png" alt="dunwuï¼šè·³è¡¨" tabindex="0" loading="lazy"><figcaption>dunwuï¼šè·³è¡¨</figcaption></figure><p>ä¸€æ¡æ•°æ®ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœéœ€è¦å­˜æ”¾ 2000 ä¸‡æ¡æ•°æ®ï¼Œä¸”æ¯æ¬¡æŸ¥è¯¢éƒ½è¦èƒ½è¾¾åˆ°äºŒåˆ†æŸ¥æ‰¾çš„æ•ˆæœï¼Œé‚£ä¹ˆè·³è¡¨çš„é«˜åº¦å¤§çº¦ä¸º 24 å±‚ï¼ˆ2 çš„ 24 æ¬¡æ–¹ï¼‰ã€‚</p><p>åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œè¿™ 24 å±‚æ•°æ®åˆ†æ•£åœ¨ä¸åŒçš„æ•°æ®é¡µï¼ŒæŸ¥æ‰¾ä¸€æ¬¡æ•°æ®å°±éœ€è¦ 24 æ¬¡ç£ç›˜ I/Oã€‚</p><p>è€Œ 2000 ä¸‡æ¡æ•°æ®åœ¨ B+æ ‘ä¸­åªéœ€è¦ 3 å±‚å°±å¯ä»¥äº†ã€‚</p><h4 id="b-æ ‘çš„èŒƒå›´æŸ¥æ‰¾æ€ä¹ˆåšçš„" tabindex="-1"><a class="header-anchor" href="#b-æ ‘çš„èŒƒå›´æŸ¥æ‰¾æ€ä¹ˆåšçš„"><span>B+æ ‘çš„èŒƒå›´æŸ¥æ‰¾æ€ä¹ˆåšçš„ï¼Ÿ</span></a></h4><p>ä¸€å¥è¯å›ç­”ï¼š</p><p>å…ˆé€šè¿‡ç´¢å¼•è·¯å¾„å®šä½åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å¶å­èŠ‚ç‚¹ï¼Œç„¶åé¡ºç€å¶å­èŠ‚ç‚¹ä¹‹é—´çš„é“¾è¡¨å‘å³/å‘å·¦æ‰«æï¼Œç›´åˆ°è¶…è¿‡èŒƒå›´ã€‚</p><p>è¯¦ç»†ç‰ˆï¼š</p><p>B+ æ ‘ç´¢å¼•çš„èŒƒå›´æŸ¥æ‰¾ä¸»è¦ä¾èµ–å¶å­èŠ‚ç‚¹ä¹‹é—´çš„åŒå‘é“¾è¡¨æ¥å®Œæˆã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œä» B+ æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé€šè¿‡ç´¢å¼•é”®å€¼é€å±‚å‘ä¸‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å¶å­èŠ‚ç‚¹ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œåˆ©ç”¨å¶å­èŠ‚ç‚¹ä¹‹é—´çš„åŒå‘é“¾è¡¨ï¼Œä»èµ·å§‹èŠ‚ç‚¹å¼€å§‹ï¼Œä¾æ¬¡å‘åéå†æ¯ä¸ªèŠ‚ç‚¹ã€‚å½“ç´¢å¼•å€¼è¶…è¿‡æŸ¥è¯¢èŒƒå›´ï¼Œæˆ–è€…éå†åˆ°é“¾è¡¨æœ«å°¾æ—¶ï¼Œç»ˆæ­¢æŸ¥è¯¢ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>æ¯”å¦‚è¯´åœ¨ä¸‹é¢è¿™æ£µ B+ æ ‘ä¸ŠæŸ¥æ‰¾ 45ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223114806.png" alt="oi-wikiï¼šæŸ¥æ‰¾ 45" tabindex="0" loading="lazy"><figcaption>oi-wikiï¼šæŸ¥æ‰¾ 45</figcaption></figure><p>ç¬¬ä¸€æ­¥ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå› ä¸ºæ¯” 25 å¤§ï¼Œæ‰€ä»¥ä»å³å­æ ‘å¼€å§‹ã€‚å› ä¸º 45 æ¯” 35å¤§ï¼Œæ‰€ä»¥å’Œå³è¾¹çš„ç´¢å¼•æ¯”è¾ƒï¼Œå³ä¾§çš„ç´¢å¼•ä¹Ÿæ˜¯ 45ï¼Œæ‰€ä»¥ç»§ç»­å¾€å³å­æ ‘æŸ¥æ‰¾ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223114907.png" alt="oi-wikiï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹" tabindex="0" loading="lazy"><figcaption>oi-wikiï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹</figcaption></figure><p>ç¬¬äºŒæ­¥ï¼Œä»å¶å­èŠ‚ç‚¹ 45 å¼€å§‹ï¼Œä¾æ¬¡éå†ï¼Œæ‰¾åˆ° 45ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223115300.png" alt="oi-wikiï¼šæ‰¾åˆ° 45" tabindex="0" loading="lazy"><figcaption>oi-wikiï¼šæ‰¾åˆ° 45</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="äº†è§£å¿«æ’å—" tabindex="-1"><a class="header-anchor" href="#äº†è§£å¿«æ’å—"><span>äº†è§£å¿«æ’å—ï¼Ÿ</span></a></h4><p>å¿«é€Ÿæ’åºä½¿ç”¨åˆ†æ²»æ³•å°†ä¸€ä¸ªåºåˆ—åˆ†ä¸ºè¾ƒå°å’Œè¾ƒå¤§çš„ 2 ä¸ªå­åºåˆ—ï¼Œç„¶åé€’å½’æ’åºä¸¤ä¸ªå­åºåˆ—ï¼Œç”±<a href="https://zh.wikipedia.org/wiki/%E6%9D%B1%E5%B0%BC%C2%B7%E9%9C%8D%E7%88%BE" target="_blank" rel="noopener noreferrer">ä¸œå°¼Â·éœå°”</a>åœ¨ 1960 å¹´æå‡ºã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-Sorting_quicksort_anim.gif" alt="ç»´åŸºç™¾ç§‘ï¼šå¿«é€Ÿæ’åº" tabindex="0" loading="lazy"><figcaption>ç»´åŸºç™¾ç§‘ï¼šå¿«é€Ÿæ’åº</figcaption></figure><p>å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><ol><li>é€‰æ‹©ä¸€ä¸ªåŸºå‡†å€¼ã€‚</li><li>å°†æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦è¾¹å°äºåŸºå‡†å€¼ï¼Œå³è¾¹å¤§äºæˆ–ç­‰äºåŸºå‡†å€¼ã€‚</li><li>å¯¹å·¦å³ä¸¤éƒ¨åˆ†é€’å½’æ’åºï¼Œæœ€ç»ˆåˆå¹¶ã€‚</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> quickSort</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] arr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> low</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> high) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (low </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> high) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> pivotIndex </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> partition</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(arr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> low</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> high)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        quickSort</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(arr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> low</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> pivotIndex </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        quickSort</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(arr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> pivotIndex </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> high)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> partition</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] arr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> low</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> high) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> pivot </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> arr[high]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> low </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> j </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> low</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> j </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> high</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> j</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (arr[j] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> pivot) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">            i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">++;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            swap</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(arr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> j)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    swap</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(arr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> high)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> swap</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[] arr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> j) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> temp </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> arr[i]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    arr[i] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> arr[j]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    arr[j] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> temp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¨èé“¾æ¥ï¼š<a href="https://oi-wiki.org/basic/quick-sort/" target="_blank" rel="noopener noreferrer">å¿«é€Ÿæ’åº</a></p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ”¯ä»˜å®é¢ç»åŒå­¦ 2 æ˜¥æ‹›æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«ï¼ŸB+æ ‘å¶å­èŠ‚ç‚¹é™¤äº†å­˜æ•°æ®è¿˜æœ‰ä»€ä¹ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¥‡å®‰ä¿¡é¢ç»åŒå­¦ 1 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šb æ ‘å’Œ b+æ ‘æœ‰ä»€ä¹ˆåŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šMySQL ç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨ B+æ ‘è€Œä¸æ˜¯ç”¨åˆ«çš„æ•°æ®ç»“æ„ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 8 Java åç«¯å®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šmysql b+æ ‘å’Œbæ ‘çš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ä½œä¸šå¸®é¢ç»åŒå­¦ 1 Java åç«¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šB+æ ‘æœ‰å“ªäº›ä¼˜ç‚¹</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¸ºä»€ä¹ˆç”¨b+æ ‘ä¸ç”¨bæ ‘</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œç³»é¢ç»åŒå­¦ 19 é¥¿äº†ä¹ˆé¢è¯•åŸé¢˜ï¼šç´¢å¼•ä¸ºä»€ä¹ˆç”¨B+æ ‘ä¸ç”¨Bæ ‘ æ—¶é—´å¤æ‚åº¦æ·±ç©¶ b+æ ‘ å¿«é€Ÿæ’åº...</li></ol></blockquote><h3 id="_45-b-æ ‘ç´¢å¼•å’Œ-hash-ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_45-b-æ ‘ç´¢å¼•å’Œ-hash-ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«"><span>45.B+æ ‘ç´¢å¼•å’Œ Hash ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h3><p>ç®€ç‰ˆå›ç­”ï¼š</p><p>B+ æ ‘ç´¢å¼•æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€æœ‰åºæ‰«æï¼Œæ˜¯ InnoDB çš„é»˜è®¤ç´¢å¼•ç»“æ„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240312092745.png" alt="ä¸€é¢—å‰½æ‚çš„ç§å­ï¼šB+æ ‘çš„ç»“æ„" tabindex="0" loading="lazy"><figcaption>ä¸€é¢—å‰½æ‚çš„ç§å­ï¼šB+æ ‘çš„ç»“æ„</figcaption></figure><p>Hash ç´¢å¼•åªæ”¯æŒç­‰å€¼æŸ¥æ‰¾ï¼Œé€Ÿåº¦å¿«ä½†åŠŸèƒ½å¼±ï¼Œå¸¸è§äº Memory å¼•æ“ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240312094537.png" alt="ä¸šä½™ç å†œï¼šå“ˆå¸Œç´¢å¼•" tabindex="0" loading="lazy"><figcaption>ä¸šä½™ç å†œï¼šå“ˆå¸Œç´¢å¼•</figcaption></figure><p>ç¨å¾®è¯¦ç»†ä¸€ç‚¹çš„å›ç­”ï¼š</p><p>B+ æ ‘ç´¢å¼•æ˜¯ä¸€ç§å¹³è¡¡å¤šè·¯æœç´¢æ ‘ï¼Œæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œéå¶å­èŠ‚ç‚¹ä»…å­˜å‚¨ç´¢å¼•é”®ã€‚å¶å­èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆè¿æ¥å½¢æˆæœ‰åºé“¾è¡¨ï¼Œå¤©ç„¶æ”¯æŒæ’åºã€‚</p><p>å¹¶ä¸”æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€æ¨¡ç³ŠæŸ¥è¯¢ï¼Œæ˜¯ InnoDB é»˜è®¤çš„ç´¢å¼•ç»“æ„ã€‚</p><p>Hash ç´¢å¼•åŸºäºå“ˆå¸Œå‡½æ•°å°†é”®å€¼æ˜ å°„åˆ°å›ºå®šé•¿åº¦çš„å“ˆå¸Œå€¼ï¼Œé€šè¿‡å“ˆå¸Œå€¼å®šä½æ•°æ®å­˜å‚¨çš„ä½ç½®ã€‚</p><p>å®Œå…¨æ— åºï¼Œåªæ”¯æŒç­‰å€¼æŸ¥è¯¢ï¼Œå¸¸è§äº Memory å¼•æ“ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>å› ä¸º B+ æ ‘æ˜¯ InnoDB çš„é»˜è®¤ç´¢å¼•ç±»å‹ï¼Œæ‰€ä»¥åˆ›å»º B+ æ ‘çš„æ—¶å€™ä¸éœ€è¦æŒ‡å®šç´¢å¼•ç±»å‹ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> example_btree</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> name_index (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ENGINE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">InnoDB;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥é€šè¿‡ <code>UNIQUE HASH</code> åˆ›å»ºå“ˆå¸Œç´¢å¼•ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> example_hash</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    UNIQUE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> HASH</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ENGINE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">MEMORY;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>InnoDB å¹¶ä¸æä¾›ç›´æ¥åˆ›å»ºå“ˆå¸Œç´¢å¼•çš„é€‰é¡¹ï¼Œå› ä¸º B+ æ ‘ç´¢å¼•èƒ½å¤Ÿå¾ˆå¥½åœ°æ”¯æŒèŒƒå›´æŸ¥è¯¢å’Œç­‰å€¼æŸ¥è¯¢ï¼Œæ»¡è¶³äº†å¤§å¤šæ•°æ•°æ®åº“æ“ä½œçš„éœ€è¦ã€‚</p><p>ä¸è¿‡ï¼ŒInnoDB å†…éƒ¨ä½¿ç”¨äº†ä¸€ç§åä¸ºâ€œè‡ªé€‚åº”å“ˆå¸Œç´¢å¼•â€ï¼ˆAdaptive Hash Index, AHIï¼‰çš„æŠ€æœ¯ï¼Œå½“æŸäº›ç´¢å¼•å€¼é¢‘ç¹è®¿é—®æ—¶ï¼ŒInnoDB ä¼šåœ¨ B+ æ ‘åŸºç¡€ä¸Šè‡ªåŠ¨åˆ›å»ºå“ˆå¸Œç´¢å¼•ï¼Œå…¼å…·ä¸¤è€…çš„ä¼˜ç‚¹ã€‚</p><p>å¯é€šè¿‡ <code>SHOW VARIABLES LIKE &#39;innodb_adaptive_hash_index&#39;;</code> æŸ¥çœ‹è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•çš„çŠ¶æ€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240312095811.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯</figcaption></figure><p>å¦‚æœè¿”å›çš„å€¼æ˜¯ ONï¼Œè¯´æ˜è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•æ˜¯å¼€å¯çš„ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ä½œä¸šå¸®é¢ç»åŒå­¦ 1 Java åç«¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¸ºä»€ä¹ˆä¸ç”¨hashç´¢å¼•</li></ol></blockquote><h3 id="_46-ğŸŒŸèšæ—ç´¢å¼•å’Œéèšæ—ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_46-ğŸŒŸèšæ—ç´¢å¼•å’Œéèšæ—ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«"><span>46.ğŸŒŸèšæ—ç´¢å¼•å’Œéèšæ—ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h3><p>èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨äº†å®Œæ•´çš„æ•°æ®è¡Œï¼Œæ•°æ®å’Œç´¢å¼•æ˜¯åœ¨ä¸€èµ·çš„ã€‚InnoDB çš„ä¸»é”®ç´¢å¼•å°±æ˜¯èšç°‡ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹ä¸ä»…å­˜å‚¨äº†ä¸»é”®å€¼ï¼Œè¿˜å­˜å‚¨äº†å…¶ä»–åˆ—çš„å€¼ï¼Œå› æ­¤æŒ‰ç…§ä¸»é”®è¿›è¡ŒæŸ¥è¯¢çš„é€Ÿåº¦ä¼šéå¸¸å¿«ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240311231652.png" alt="ä»£ç æ•²ä¸Šå¤©.ï¼šèšç°‡ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>ä»£ç æ•²ä¸Šå¤©.ï¼šèšç°‡ç´¢å¼•</figcaption></figure><p>æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œé€šå¸¸ç”±ä¸»é”®å®šä¹‰ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šä¸»é”®ï¼ŒInnoDB ä¼šéšå¼åˆ›å»ºä¸€ä¸ªéšè—çš„ä¸»é”®ç´¢å¼• row_idã€‚</p><p>éèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹åªåŒ…å«äº†ä¸»é”®å€¼ï¼Œéœ€è¦é€šè¿‡å›è¡¨æŒ‰ç…§ä¸»é”®å»èšç°‡ç´¢å¼•æŸ¥æ‰¾å…¶ä»–åˆ—çš„å€¼ï¼Œå”¯ä¸€ç´¢å¼•ã€æ™®é€šç´¢å¼•ç­‰éä¸»é”®ç´¢å¼•éƒ½æ˜¯éèšç°‡ç´¢å¼•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240311231611.png" alt="ä»£ç æ•²ä¸Šå¤©.éèšç°‡ç´¢å¼•ï¼Œä»¥ age ä¸ºç´¢å¼•" tabindex="0" loading="lazy"><figcaption>ä»£ç æ•²ä¸Šå¤©.éèšç°‡ç´¢å¼•ï¼Œä»¥ age ä¸ºç´¢å¼•</figcaption></figure><p>æ¯ä¸ªè¡¨éƒ½å¯ä»¥åˆ›å»ºå¤šä¸ªéèšç°‡ç´¢å¼•ï¼Œå¦‚æœä¸æƒ³å›è¡¨çš„è¯ï¼Œå¯ä»¥é€šè¿‡è¦†ç›–ç´¢å¼•æŠŠè¦æŸ¥è¯¢çš„å­—æ®µä¹Ÿæ”¾åˆ°ç´¢å¼•ä¸­ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>ä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸»é”® id æ˜¯èšç°‡ç´¢å¼•ï¼ŒB+ æ ‘çš„å¶å­èŠ‚ç‚¹ç›´æ¥å­˜å‚¨äº† (id, name, age)ã€‚</p><p>ä¸€å¼ è¡¨å¯ä»¥æœ‰å¤šä¸ªéèšç°‡ç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_age</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user(age);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>idx_name æ˜¯éèšç°‡ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜çš„æ˜¯ name -&gt; idï¼ŒæŸ¥æ•´è¡Œæ•°æ®è¦å›è¡¨ã€‚</p><p>idx_age ä¹Ÿæ˜¯éèšç°‡ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜çš„æ˜¯ age -&gt; idï¼ŒæŸ¥æ•´è¡Œæ•°æ®ä¹Ÿè¦å›è¡¨ã€‚</p><p>æƒ³è¦äº†è§£æ›´å¤šèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ï¼Œæ¨èé˜…è¯»ï¼š</p><ul><li><a href="https://www.cnblogs.com/vipstone/p/16370305.html" target="_blank" rel="noopener noreferrer">ç£Šå“¥ï¼šèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><li><a href="https://learnku.com/articles/50096" target="_blank" rel="noopener noreferrer">æµ…è°ˆèšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•</a></li><li><a href="https://blog.csdn.net/m0_52226803/article/details/135494499" target="_blank" rel="noopener noreferrer">èšç°‡ç´¢å¼•ã€éèšç°‡ç´¢å¼•ã€è”åˆç´¢å¼•ã€å”¯ä¸€ç´¢å¼•</a></li><li><a href="https://mp.weixin.qq.com/s/F0cEzIqecF4sWg7ZRmHKRQ" target="_blank" rel="noopener noreferrer">æ¾å“¥ï¼šå†èŠ MySQL èšç°‡ç´¢å¼•</a></li></ul><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šmysqlï¼šèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ”¯ä»˜å®é¢ç»åŒå­¦ 2 æ˜¥æ‹›æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«ï¼ŸB+æ ‘å¶å­èŠ‚ç‚¹é™¤äº†å­˜æ•°æ®è¿˜æœ‰ä»€ä¹ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šèšç°‡ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿéèšç°‡ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 1 éƒ¨é—¨ä¸»ç«™æŠ€æœ¯éƒ¨é¢è¯•åŸé¢˜ï¼šMysql çš„èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ä½œä¸šå¸®é¢ç»åŒå­¦ 1 Java åç«¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šmysqlçš„èšç°‡ç´¢å¼•æ˜¯ä»€ä¹ˆ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 29 Java åç«¯ä¸€é¢åŸé¢˜ï¼šMySQLçš„ç´¢å¼•æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿæ¯ä¸ªç´¢å¼•ä¸€ä¸ªB+æ ‘ï¼Œè¿˜æ˜¯å¤šä¸ªç´¢å¼•æ”¾ä¸€ä¸ªB+æ ‘ï¼Ÿå¶å­èŠ‚ç‚¹ä¸­å­˜çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 5 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰æ‹¿åˆ°ç¾å›¢æš‘æœŸå®ä¹ çš„çƒå‹è¯´</a>ï¼Œ<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">ç®€å†æ‰¾äºŒå“¥ä¿®æ”¹äº†ä¸¤æ¬¡</a>ï¼ŒåŸºæœ¬ä¸Šä¸å¡ç¬¬ä¸€å­¦å†çš„éƒ½æœ‰é¢ï¼Œå¾ˆæ£’ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250405114505.png" alt="çƒå‹å¤¸äºŒå“¥çš„ç®€å†ä¿®æ”¹çš„å¥½" tabindex="0" loading="lazy"><figcaption>çƒå‹å¤¸äºŒå“¥çš„ç®€å†ä¿®æ”¹çš„å¥½</figcaption></figure><h3 id="_47-ğŸŒŸå›è¡¨äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_47-ğŸŒŸå›è¡¨äº†è§£å—"><span>47.ğŸŒŸå›è¡¨äº†è§£å—ï¼Ÿ</span></a></h3><p>å½“ä½¿ç”¨éèšç°‡ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ŒMySQL éœ€è¦å…ˆé€šè¿‡éèšç°‡ç´¢å¼•æ‰¾åˆ°ä¸»é”®å€¼ï¼Œç„¶åå†æ ¹æ®ä¸»é”®å€¼å›åˆ°èšç°‡ç´¢å¼•ä¸­æŸ¥æ‰¾å®Œæ•´æ•°æ®è¡Œï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå›è¡¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406120133.png" alt="æ¢¦é‡ŒèŠ±ã€‚ï¼šInnoDB å›è¡¨" tabindex="0" loading="lazy"><figcaption>æ¢¦é‡ŒèŠ±ã€‚ï¼šInnoDB å›è¡¨</figcaption></figure><p>å‡è®¾ç°åœ¨æœ‰ä¸€å¼ ç”¨æˆ·è¡¨ usersï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    email </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡ŒæŸ¥è¯¢ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æŸ¥è¯¢è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼ŒMySQL ä½¿ç”¨ name åˆ—ä¸Šçš„éèšç°‡ç´¢å¼•æŸ¥æ‰¾æ‰€æœ‰ <code>name = &#39;ç‹äºŒ&#39;</code> çš„ä¸»é”® idã€‚</li><li>ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨ä¸»é”® id åˆ°èšç°‡ç´¢å¼•ä¸­æŸ¥æ‰¾å®Œæ•´è®°å½•ã€‚</li></ul><h4 id="å›è¡¨çš„ä»£ä»·æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#å›è¡¨çš„ä»£ä»·æ˜¯ä»€ä¹ˆ"><span>å›è¡¨çš„ä»£ä»·æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h4><p>å›è¡¨é€šå¸¸éœ€è¦è®¿é—®é¢å¤–çš„æ•°æ®é¡µï¼Œå¦‚æœæ•°æ®ä¸åœ¨å†…å­˜ä¸­ï¼Œè¿˜éœ€è¦ä»ç£ç›˜è¯»å–ï¼Œå¢åŠ  I/O å¼€é”€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408110030.png" alt="Brandï¼šå›è¡¨" tabindex="0" loading="lazy"><figcaption>Brandï¼šå›è¡¨</figcaption></figure><p>å¯é€šè¿‡è¦†ç›–ç´¢å¼•æˆ–è€…è”åˆç´¢å¼•æ¥é¿å…å›è¡¨ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åŸè¡¨ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_name (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- éœ€è¦æŸ¥è¯¢nameå’Œage</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;å¼ ä¸‰&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è¿™ä¼šå›è¡¨ï¼Œå› ä¸ºageä¸åœ¨idx_nameç´¢å¼•ä¸­</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼˜åŒ–æ–¹æ¡ˆ1ï¼šåˆ›å»ºåŒ…å«ageçš„è”åˆç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ADD</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_name_age (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, age);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç°åœ¨åŒæ ·çš„æŸ¥è¯¢ä¸éœ€è¦å›è¡¨</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘å›è¡¨" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘å›è¡¨"><span>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘å›è¡¨ï¼Ÿ</span></a></h4><p>ç¬¬ä¸€ï¼Œå½“æŸ¥è¯¢å­—æ®µä¸åœ¨éèšç°‡ç´¢å¼•ä¸­æ—¶ï¼Œå¿…é¡»å›è¡¨åˆ°ä¸»é”®ç´¢å¼•è·å–æ•°æ®ã€‚</p><p>ç¬¬äºŒï¼ŒæŸ¥è¯¢å­—æ®µåŒ…å«éç´¢å¼•åˆ—ï¼ˆå¦‚ SELECT *ï¼‰ï¼Œå¿…ç„¶è§¦å‘å›è¡¨ã€‚</p><h4 id="å›è¡¨è®°å½•è¶Šå¤šå¥½å—" tabindex="-1"><a class="header-anchor" href="#å›è¡¨è®°å½•è¶Šå¤šå¥½å—"><span>å›è¡¨è®°å½•è¶Šå¤šå¥½å—ï¼Ÿ</span></a></h4><p>å›è¡¨è®°å½•è¶Šå¤šï¼Œé€šå¸¸ä»£è¡¨æ€§èƒ½è¶Šå·®ï¼Œå› ä¸ºæ¯æ¡è®°å½•éƒ½éœ€è¦é€šè¿‡ä¸»é”®å†æŸ¥è¯¢ä¸€æ¬¡å®Œæ•´æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠå†…å­˜è®¿é—®æˆ–ç£ç›˜ IOï¼Œå°¤å…¶å½“ç¼“å­˜å‘½ä¸­ç‡ä¸é«˜æ—¶ï¼Œå›è¡¨ä¼šä¸¥é‡å½±å“æŸ¥è¯¢æ•ˆç‡ã€‚</p><h4 id="äº†è§£-mrr-å—" tabindex="-1"><a class="header-anchor" href="#äº†è§£-mrr-å—"><span>äº†è§£ MRR å—ï¼Ÿ</span></a></h4><p>MRR æ˜¯ InnoDB ä¸ºäº†è§£å†³å›è¡¨å¸¦æ¥çš„å¤§é‡éšæœº IO é—®é¢˜è€Œå¼•å…¥çš„ä¸€ç§ä¼˜åŒ–ç­–ç•¥ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406125740.png" alt="æå®¢æ—¶é—´ï¼šMRR" tabindex="0" loading="lazy"><figcaption>æå®¢æ—¶é—´ï¼šMRR</figcaption></figure><p>å®ƒä¼šå…ˆæŠŠéèšç°‡ç´¢å¼•æŸ¥åˆ°çš„ä¸»é”®å€¼åˆ—è¡¨è¿›è¡Œæ’åºï¼Œå†æŒ‰é¡ºåºå»ä¸»é”®ç´¢å¼•ä¸­æ‰¹é‡å›è¡¨ï¼Œå°†éšæœº I/O è½¬æ¢ä¸ºé¡ºåº I/Oï¼Œä»¥å‡å°‘ç£ç›˜å¯»é“æ—¶é—´ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>å¯é€šè¿‡ <code>SHOW VARIABLES LIKE &#39;optimizer_switch&#39;;</code> æŸ¥çœ‹ MRR æ˜¯å¦å¯ç”¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406121543.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMRR" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMRR</figcaption></figure><p>å…¶ä¸­ <code>mrr=on</code> è¡¨ç¤ºå¯ç”¨ MRRï¼Œ<code>mrr_cost_based=on</code> è¡¨ç¤ºåŸºäºæˆæœ¬å†³å®šä½¿ç”¨ MRRã€‚</p><p>å¦å¤–å¯ä»¥é€šè¿‡ <code>show variables like &#39;read_rnd_buffer_size&#39;;</code> æŸ¥çœ‹ MRR çš„ç¼“å†²åŒºå¤§å°ï¼Œé»˜è®¤æ˜¯ 256KBã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406122130.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMRR çš„ç¼“å†²åŒº" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMRR çš„ç¼“å†²åŒº</figcaption></figure><p>æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œæ’å…¥ä¸€äº›æ•°æ®ï¼Œç„¶åæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢æ¥æ¼”ç¤º MRR çš„æ•ˆæœã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DATABASE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IF</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> EXISTS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mrr_test; </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">USE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mrr_test; </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IF</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> EXISTS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders (id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, user_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, order_date </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, amount </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DECIMAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">status</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_user_date(user_id, order_date));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">DELIMITER //</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PROCEDURE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> generate_test_data()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    DECLARE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DEFAULT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    WHILE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> DO</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders (user_id, order_date, amount, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">status</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">            FLOOR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> + </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">RAND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() * </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- Random user_id between 1 and 1000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            DATE_ADD(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2023-01-01&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, INTERVAL </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">FLOOR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">RAND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() * </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">365</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DAY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- Random date in 2023</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">            ROUND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> + </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">RAND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() * </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">990</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- Random amount between 10 and 1000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            ELT(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> + </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">FLOOR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">RAND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() * </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;completed&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;pending&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;cancelled&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- Random status</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        );</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    END</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHILE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">END</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> //</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">DELIMITER ;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CALL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> generate_test_data();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DROP</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PROCEDURE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> generate_test_data;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹ MRR å¼€å¯å’Œå…³é—­æ—¶çš„æ€§èƒ½æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç¡®ä¿MRRå¼€å¯å¹¶è®¾ç½®è¶³å¤Ÿå¤§çš„ç¼“å†²åŒº</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> optimizer_switch</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;mrr=on,mrr_cost_based=off&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> read_rnd_buffer_size </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 16</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ¸…ç†ç¼“å­˜å’ŒçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">FLUSH </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">FLUSH TABLES;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¼ºåˆ¶ä½¿ç”¨äºŒçº§ç´¢å¼•å¹¶å›è¡¨æŸ¥è¯¢ï¼ˆé€šè¿‡é€‰æ‹©æœªè¢«ç´¢å¼•çš„åˆ—ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Raw data access pattern with MRR ON&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_case;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> /*+ MRR(orders_mrr_test) */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, shipping_address, customer_name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders_mrr_test </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FORCE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(idx_user_date)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">IN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">400</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">500</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">700</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">900</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BETWEEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-03-01&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-04-01&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 15</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ˜¾ç¤ºå¤„ç†å™¨çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Handler_%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;%mrr%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯¹æ¯”ï¼šå…³é—­MRR</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> optimizer_switch</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;mrr=off,mrr_cost_based=off&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">FLUSH </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">FLUSH TABLES;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Raw data access pattern with MRR OFF&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_case;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, shipping_address, customer_name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders_mrr_test </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FORCE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(idx_user_date)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">IN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">400</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">500</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">700</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">900</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BETWEEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-03-01&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-04-01&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 15</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ˜¾ç¤ºå¤„ç†å™¨çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Handler_%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;%mrr%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ˜¾ç¤ºè¯¦ç»†çš„æ‰§è¡Œè®¡åˆ’</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN FORMAT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">TREE</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> /*+ MRR(orders_mrr_test) */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id, shipping_address, customer_name</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders_mrr_test </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FORCE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(idx_user_date)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">IN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">400</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">500</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">700</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">900</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BETWEEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-03-01&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-04-01&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ° MRR å¼€å¯æ—¶çš„ç»“æœå¯¹æ¯”ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406124955.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMRR å¼€å¯æ—¶çš„å‰åå¯¹æ¯”" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMRR å¼€å¯æ—¶çš„å‰åå¯¹æ¯”</figcaption></figure><p><a href="https://javabetter.cn/gongju/warp.html" target="_blank" rel="noopener noreferrer">Wrap</a> ä¹Ÿç»™å‡ºäº†å¯¹åº”çš„ç»“æœè¯´æ˜ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406125155.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMRR çš„æµ‹è¯•ç»“æœè¯´æ˜" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šMRR çš„æµ‹è¯•ç»“æœè¯´æ˜</figcaption></figure><p>ä¹Ÿå¯ä»¥åœ¨ explain ä¸­ç¡®è®¤ MRR çš„ä½¿ç”¨æƒ…å†µã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406141028.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä½¿ç”¨èšç°‡ç´¢å¼•æ—¶è§¦å‘äº† MRR" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä½¿ç”¨èšç°‡ç´¢å¼•æ—¶è§¦å‘äº† MRR</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä½¿ç”¨éèšç°‡ç´¢å¼•å¦‚ä½•æŸ¥æ‰¾æ•°æ®ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šå›è¡¨è®°å½•è¶Šå¤šå¥½å—ï¼Ÿï¼ˆå›è¡¨çš„ä»£ä»·ï¼‰</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 6 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œçœ‹åˆ°æœ‰çƒå‹å†™<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>åˆ°ç®€å†ä¸Šï¼Œå¾ˆä¸é”™ï¼Œæ¨èç»™å¤§å®¶ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250406142139.png" alt="æŠ€æœ¯æ´¾å¦‚ä½•å†™åˆ°ç®€å†ä¸Šæ¨¡æ¿" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾å¦‚ä½•å†™åˆ°ç®€å†ä¸Šæ¨¡æ¿</figcaption></figure><h3 id="_48-ğŸŒŸè”åˆç´¢å¼•äº†è§£å—-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_48-ğŸŒŸè”åˆç´¢å¼•äº†è§£å—-è¡¥å……"><span>48.ğŸŒŸè”åˆç´¢å¼•äº†è§£å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 11 æœˆ 22 æ—¥å¢è¡¥</p></blockquote><p>è”åˆç´¢å¼•å°±æ˜¯æŠŠå¤šä¸ªå­—æ®µæ”¾åœ¨ä¸€ä¸ªç´¢å¼•é‡Œï¼Œä½†å¿…é¡»éµå®ˆâ€œæœ€å·¦å‰ç¼€â€åŸåˆ™ï¼Œåªæœ‰ä»ç¬¬ä¸€ä¸ªå­—æ®µå¼€å§‹è¿ç»­ä½¿ç”¨ï¼Œç´¢å¼•æ‰ä¼šç”Ÿæ•ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250407152038.png" alt="Yxh_blogsï¼šè”åˆç´¢å¼•" tabindex="0" loading="lazy"><figcaption>Yxh_blogsï¼šè”åˆç´¢å¼•</figcaption></figure><p>è”åˆç´¢å¼•ä¼šæŒ‰å­—æ®µé¡ºåºæ„å»ºB+æ ‘ã€‚ä¾‹å¦‚<code>ï¼ˆage, nameï¼‰</code>ç´¢å¼•ä¼šå…ˆæŒ‰ç…§ age æ’åºï¼Œage ç›¸åŒåˆ™æŒ‰ç…§ name æ’åºï¼Œè‹¥ä¸¤è€…éƒ½ç›¸åŒåˆ™æŒ‰ä¸»é”®æ’åºï¼Œç¡®ä¿å¶å­èŠ‚ç‚¹æ— é‡å¤ç´¢å¼•é¡¹ã€‚</p><p>åˆ›å»º<code>(A,B,C)</code>è”åˆç´¢å¼•ç›¸å½“äºåŒæ—¶åˆ›å»ºäº†<code>(A)</code>ã€<code>(A,B)</code>å’Œ<code>(A,B,C)</code>ä¸‰ä¸ªç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åˆ›å»ºè”åˆç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_order_user_product</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders(user_id, product_id, create_time)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- é«˜æ•ˆæŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1001</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> product_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2002</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> create_time </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DESC</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è”åˆç´¢å¼•åº•å±‚çš„å­˜å‚¨ç»“æ„æ˜¯æ€æ ·çš„" tabindex="-1"><a class="header-anchor" href="#è”åˆç´¢å¼•åº•å±‚çš„å­˜å‚¨ç»“æ„æ˜¯æ€æ ·çš„"><span>è”åˆç´¢å¼•åº•å±‚çš„å­˜å‚¨ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ</span></a></h4><p>è”åˆç´¢å¼•åœ¨åº•å±‚é‡‡ç”¨ B+ æ ‘ç»“æ„è¿›è¡Œå­˜å‚¨ï¼Œè¿™ä¸€ç‚¹ä¸å•åˆ—ç´¢å¼•ç›¸åŒã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250407155043.png" alt="å¥½å¥‡çš„7å·ï¼šè”åˆç´¢å¼•" tabindex="0" loading="lazy"><figcaption>å¥½å¥‡çš„7å·ï¼šè”åˆç´¢å¼•</figcaption></figure><p>ä¸å•åˆ—ç´¢å¼•ä¸åŒçš„æ˜¯ï¼Œè”åˆç´¢å¼•çš„æ¯ä¸ªèŠ‚ç‚¹ä¼šå­˜å‚¨æ‰€æœ‰ç´¢å¼•åˆ—çš„å€¼ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¬¬ä¸€åˆ—çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå¯¹äºè”åˆç´¢å¼•<code>(a,b,c)</code>ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å« aã€bã€c ä¸‰åˆ—çš„å€¼ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">éå¶å­èŠ‚ç‚¹ç¤ºä¾‹ï¼š  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[(a=1, b=2, c=3) â†’ å­èŠ‚ç‚¹1, (a=5, b=3, c=1) â†’ å­èŠ‚ç‚¹2]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">å¶å­èŠ‚ç‚¹ç¤ºä¾‹ï¼ˆInnoDBï¼‰ï¼š  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, b</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, c</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) â†’ PK</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | (a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, b</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, c</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) â†’ PK</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">101</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ï¼ˆé€šè¿‡æŒ‡é’ˆè¿æ¥å½¢æˆåŒå‘é“¾è¡¨ï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è”åˆç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜çš„ä»€ä¹ˆå†…å®¹" tabindex="-1"><a class="header-anchor" href="#è”åˆç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜çš„ä»€ä¹ˆå†…å®¹"><span>è”åˆç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜çš„ä»€ä¹ˆå†…å®¹?</span></a></h4><p>è”åˆç´¢å¼•å±äºéèšç°‡ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯è”åˆç´¢å¼•å„åˆ—çš„å€¼å’Œå¯¹åº”è¡Œçš„ä¸»é”®å€¼ï¼Œè€Œä¸æ˜¯å®Œæ•´çš„æ•°æ®è¡Œã€‚æŸ¥è¯¢éç´¢å¼•å­—æ®µæ—¶ï¼Œéœ€è¦é€šè¿‡ä¸»é”®å€¼å›è¡¨åˆ°èšç°‡ç´¢å¼•è·å–å®Œæ•´æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250407160853.png" alt="mutestï¼šè”åˆç´¢å¼•" tabindex="0" loading="lazy"><figcaption>mutestï¼šè”åˆç´¢å¼•</figcaption></figure><p>ä¾‹å¦‚ç´¢å¼•<code>(a, b)</code>çš„å¶å­èŠ‚ç‚¹ä¼šå®Œæ•´å­˜å‚¨<code>(a, b)</code>çš„å€¼ï¼Œå¹¶æŒ‰å­—æ®µé¡ºåºæ’åºï¼ˆå¦‚ a ä¼˜å…ˆï¼Œa ç›¸åŒåˆ™æŒ‰ b æ’åºï¼‰ã€‚å¦‚æœä¸»é”®æ˜¯ idï¼Œå¶å­èŠ‚ç‚¹ä¼šå­˜å‚¨ <code>(a, b, id)</code> çš„ç»„åˆã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦åŒå­¦ 4 é¢è¯•åŸé¢˜ï¼šè”åˆç´¢å¼•åº•å±‚å­˜å‚¨ç»“æ„(å’Œå…¶ä»–ç§ç±»çš„ç´¢å¼•å­˜å‚¨ç»“æ„æœ‰ä»€ä¹ˆåŒºåˆ«?)è”åˆç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜çš„ä»€ä¹ˆå†…å®¹?</li></ol></blockquote><p>memoï¼š2025 å¹´ 04 æœˆ 07 æ—¥å¢è¡¥è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹åé¦ˆ</a>è¯´ï¼ŒåŠ äº†äºŒå“¥çš„æ˜Ÿçƒï¼Œç®€å†ä¸Šå†™äº†æŠ€æœ¯æ´¾çš„é¡¹ç›®åï¼Œæ‹¿åˆ°äº†è…¾è®¯å¤©ç¾çš„ offerï¼ŒçœŸçš„å¤ªå¼ºäº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408105425.png" alt="çƒå‹æ‹¿åˆ°äº†è…¾è®¯å¤©ç¾çš„åå°å¼€å‘ offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†è…¾è®¯å¤©ç¾çš„åå°å¼€å‘ offer</figcaption></figure><h3 id="_49-ğŸŒŸè¦†ç›–ç´¢å¼•äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_49-ğŸŒŸè¦†ç›–ç´¢å¼•äº†è§£å—"><span>49.ğŸŒŸè¦†ç›–ç´¢å¼•äº†è§£å—ï¼Ÿ</span></a></h3><p>è¦†ç›–ç´¢å¼•æŒ‡çš„æ˜¯ï¼šæŸ¥è¯¢æ‰€éœ€çš„å­—æ®µå…¨éƒ¨éƒ½åœ¨ç´¢å¼•ä¸­ï¼Œä¸éœ€è¦å›è¡¨ï¼Œä»ç´¢å¼•é¡µå°±èƒ½ç›´æ¥è¿”å›ç»“æœã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408110120.png" alt="Brandï¼šè¦†ç›–ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>Brandï¼šè¦†ç›–ç´¢å¼•</figcaption></figure><blockquote><p>empname å’Œ job ä¸¤ä¸ªå­—æ®µæ˜¯ä¸€ä¸ªè”åˆç´¢å¼•ï¼Œè€ŒæŸ¥è¯¢ä¹Ÿæ°å¥½æ˜¯è¿™ä¸¤ä¸ªå­—æ®µï¼Œè¿™æ—¶å€™å•æ¬¡æŸ¥è¯¢å°±å¯ä»¥è¾¾åˆ°ç›®çš„ï¼Œä¸éœ€è¦å›è¡¨ã€‚</p></blockquote><p>å¯ä»¥å°†é«˜é¢‘æŸ¥è¯¢çš„å­—æ®µï¼ˆå¦‚ WHERE æ¡ä»¶å’Œ SELECT åˆ—ï¼‰ç»„åˆä¸ºè”åˆç´¢å¼•ï¼Œå®ç°è¦†ç›–ç´¢å¼•ã€‚ ä¾‹å¦‚ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_empname_job</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employee(empname, job);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™æ ·æŸ¥è¯¢çš„æ—¶å€™å°±å¯ä»¥èµ°ç´¢å¼•ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> empname, job </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employee </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> empname </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> job </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç¨‹åºå‘˜&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ™®é€šç´¢å¼•åªç”¨äºåŠ é€ŸæŸ¥è¯¢æ¡ä»¶çš„åŒ¹é…ï¼Œè€Œè¦†ç›–ç´¢å¼•è¿˜èƒ½ç›´æ¥æä¾›æŸ¥è¯¢ç»“æœã€‚</p><h4 id="ä¸€ä¸ªè¡¨-name-sex-age-id-select-age-id-name-from-tblname-where-name-paicoding-æ€ä¹ˆå»ºç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸ªè¡¨-name-sex-age-id-select-age-id-name-from-tblname-where-name-paicoding-æ€ä¹ˆå»ºç´¢å¼•"><span>ä¸€ä¸ªè¡¨ï¼ˆname, sex,age,idï¼‰ï¼Œselect age,id,name from tblname where name=&#39;paicoding&#39;;æ€ä¹ˆå»ºç´¢å¼•</span></a></h4><p>ç”±äºæŸ¥è¯¢æ¡ä»¶æœ‰ <code>name</code> å­—æ®µï¼Œæ‰€ä»¥æœ€å°‘åº”è¯¥ä¸º name å­—æ®µæ·»åŠ ä¸€ä¸ªç´¢å¼•ã€‚ã€</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tblname(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æŸ¥è¯¢ç»“æœä¸­è¿˜éœ€è¦ <code>age</code>ã€<code>id</code> å­—æ®µï¼Œå¯ä»¥ä¸ºè¿™ä¸‰ä¸ªå­—æ®µåˆ›å»ºä¸€ä¸ªè”åˆç´¢å¼•ï¼Œåˆ©ç”¨è¦†ç›–ç´¢å¼•ï¼Œç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ•°æ®ï¼Œå‡å°‘å›è¡¨ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_name_age_id</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tblname (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, age, id);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ä½œä¸šå¸®é¢ç»åŒå­¦ 1 Java åç«¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº†è§£è¦†ç›–ç´¢å¼•å—</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 9 ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¦†ç›–ç´¢å¼•ï¼Œå›è¡¨ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 13 Java åç«¯äºŒé¢é¢è¯•åŸé¢˜ï¼šä¸€ä¸ªè¡¨ï¼ˆname, sex,age,idï¼‰ï¼Œselect age,id,name from tblname where name=&#39;paicoding&#39;;æ€ä¹ˆå»ºç´¢å¼•</li></ol></blockquote><h3 id="_50-ğŸŒŸä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#_50-ğŸŒŸä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™"><span>50.ğŸŒŸä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿ</span></a></h3><p>æœ€å·¦å‰ç¼€åŸåˆ™æŒ‡çš„æ˜¯ï¼šMySQL ä½¿ç”¨è”åˆç´¢å¼•æ—¶ï¼Œå¿…é¡»ä»æœ€å·¦è¾¹çš„å­—æ®µå¼€å§‹åŒ¹é…ï¼Œæ‰èƒ½å‘½ä¸­ç´¢å¼•ã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªè”åˆç´¢å¼• <code>(A, B, C)</code>ï¼Œå…¶ç”Ÿæ•ˆæ¡ä»¶å¦‚ä¸‹ï¼š</p><table><thead><tr><th>æŸ¥è¯¢æ¡ä»¶</th><th>æ˜¯å¦è§¦å‘ç´¢å¼•ï¼Ÿ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>WHERE A = 1</td><td>âœ… æ˜¯</td><td>ä½¿ç”¨ç´¢å¼•çš„ç¬¬ä¸€åˆ—</td></tr><tr><td>WHERE A = 1 AND B = 2</td><td>âœ… æ˜¯</td><td>ä½¿ç”¨ç´¢å¼•çš„å‰ä¸¤åˆ—</td></tr><tr><td>WHERE A = 1 AND B = 2 AND C = 3</td><td>âœ… æ˜¯</td><td>ä½¿ç”¨ç´¢å¼•çš„å…¨éƒ¨åˆ—</td></tr><tr><td>WHERE B = 2</td><td>âŒ å¦</td><td>è·³è¿‡å·¦ä¾§åˆ— Aï¼Œç´¢å¼•å¤±æ•ˆ</td></tr><tr><td>WHERE B = 2 AND C = 3</td><td>âŒ å¦</td><td>æ— å·¦ä¾§åˆ—ï¼Œç´¢å¼•å¤±æ•ˆ</td></tr><tr><td>WHERE A = 1 AND C = 3</td><td>âš ï¸ éƒ¨åˆ†ç”Ÿæ•ˆ</td><td>ä»…ç”¨ A åˆ—ï¼ŒC åˆ—æ— æ³•åˆ©ç”¨ç´¢å¼•ä¼˜åŒ–</td></tr><tr><td>WHERE A = 1</td><td>âœ… æ˜¯</td><td>ä½¿ç”¨ç´¢å¼•çš„ç¬¬ä¸€åˆ—</td></tr><tr><td>WHERE A = 1 AND B = 2</td><td>âœ… æ˜¯</td><td>ä½¿ç”¨ç´¢å¼•çš„å‰ä¸¤åˆ—</td></tr><tr><td>WHERE A = 1 AND B = 2 AND C = 3</td><td>âœ… æ˜¯</td><td>ä½¿ç”¨ç´¢å¼•å…¨éƒ¨åˆ—ï¼ˆæœ€ç†æƒ³æƒ…å†µï¼‰</td></tr><tr><td>WHERE B = 2</td><td>âŒ å¦</td><td>è·³è¿‡å·¦ä¾§åˆ— Aï¼Œç´¢å¼•å¤±æ•ˆ</td></tr><tr><td>WHERE B = 2 AND C = 3</td><td>âŒ å¦</td><td>æ— å·¦ä¾§åˆ—ï¼Œç´¢å¼•å¤±æ•ˆ</td></tr><tr><td>WHERE A = 1 AND C = 3</td><td>âš ï¸ éƒ¨åˆ†ç”Ÿæ•ˆ</td><td>ä»…ç”¨ A åˆ—ï¼ŒC åˆ—æ— æ³•åˆ©ç”¨ç´¢å¼•ä¼˜åŒ–</td></tr></tbody></table><p>å¦‚æœæ’åºæˆ–åˆ†ç»„çš„åˆ—æ˜¯æœ€å·¦å‰ç¼€çš„ä¸€éƒ¨åˆ†ï¼Œç´¢å¼•è¿˜å¯ä»¥åŠ é€Ÿæ“ä½œã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SQL</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç´¢å¼•(a,b)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯ä»¥åˆ©ç”¨ç´¢å¼•æ’åº</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="èŒƒå›´æŸ¥è¯¢åçš„åˆ—è¿˜èƒ½ç”¨ç´¢å¼•å—" tabindex="-1"><a class="header-anchor" href="#èŒƒå›´æŸ¥è¯¢åçš„åˆ—è¿˜èƒ½ç”¨ç´¢å¼•å—"><span>èŒƒå›´æŸ¥è¯¢åçš„åˆ—è¿˜èƒ½ç”¨ç´¢å¼•å—ï¼Ÿ</span></a></h4><p>èŒƒå›´æŸ¥è¯¢åªèƒ½åº”ç”¨äºæœ€å·¦å‰ç¼€çš„æœ€åä¸€åˆ—ã€‚èŒƒå›´æŸ¥è¯¢ä¹‹åçš„åˆ—æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SQL</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç´¢å¼•(a,b,c)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> c </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åªèƒ½ä½¿ç”¨aå’Œbï¼Œcæ— æ³•ä½¿ç”¨ç´¢å¼•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸ºä»€ä¹ˆä¸ä»æœ€å·¦å¼€å§‹æŸ¥-å°±æ— æ³•åŒ¹é…å‘¢" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸ä»æœ€å·¦å¼€å§‹æŸ¥-å°±æ— æ³•åŒ¹é…å‘¢"><span>ä¸ºä»€ä¹ˆä¸ä»æœ€å·¦å¼€å§‹æŸ¥ï¼Œå°±æ— æ³•åŒ¹é…å‘¢ï¼Ÿ</span></a></h4><p>ä¸€å¥è¯å›ç­”ï¼š</p><p>å› ä¸ºè”åˆç´¢å¼•åœ¨ B+ æ ‘ä¸­æ˜¯æŒ‰ç…§æœ€å·¦å­—æ®µä¼˜å…ˆæ’åºæ„å»ºçš„ï¼Œå¦‚æœè·³è¿‡æœ€å·¦å­—æ®µï¼ŒMySQL æ— æ³•åˆ¤æ–­æŸ¥æ‰¾èŒƒå›´ä»å“ªé‡Œå¼€å§‹ï¼Œè‡ªç„¶ä¹Ÿå°±æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e348203c-f00a-42a4-a745-b219d98ea435.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šè”åˆç´¢å¼•" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šè”åˆç´¢å¼•</figcaption></figure><p>æ¯”å¦‚æœ‰ä¸€ä¸ª user è¡¨ï¼Œæˆ‘ä»¬ç»™ name å’Œ age å»ºç«‹äº†ä¸€ä¸ªè”åˆç´¢å¼• <code>(name, age)</code>ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â userÂ </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">add</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Â INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Â comidx_name_phoneÂ (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,age);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è”åˆç´¢å¼•åœ¨ B+ æ ‘ä¸­æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡å»ºç«‹æœç´¢æ ‘ï¼Œname åœ¨å·¦ï¼Œage åœ¨å³ã€‚</p><p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>where name= &#39;ç‹äºŒ&#39; and age = &#39;20&#39;</code> å»æŸ¥è¯¢çš„æ—¶å€™ï¼Œ B+ æ ‘ä¼šä¼˜å…ˆæ¯”è¾ƒ name æ¥ç¡®å®šä¸‹ä¸€æ­¥åº”è¯¥æœç´¢çš„æ–¹å‘ï¼Œå¾€å·¦è¿˜æ˜¯å¾€å³ã€‚</p><p>å¦‚æœ name ç›¸åŒçš„æ—¶å€™å†æ¯”è¾ƒ ageã€‚</p><p>ä½†å¦‚æœæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰ nameï¼Œå°±ä¸çŸ¥é“åº”è¯¥æ€ä¹ˆæŸ¥äº†ï¼Œå› ä¸º name æ˜¯ B+æ ‘ä¸­çš„å‰ç½®æ¡ä»¶ï¼Œæ²¡æœ‰ nameï¼Œç´¢å¼•å°±æ´¾ä¸ä¸Šç”¨åœºäº†ã€‚</p><h4 id="è”åˆç´¢å¼•-a-b-where-a-1-å’Œ-where-b-1-æ•ˆæœæ˜¯ä¸€æ ·çš„å—" tabindex="-1"><a class="header-anchor" href="#è”åˆç´¢å¼•-a-b-where-a-1-å’Œ-where-b-1-æ•ˆæœæ˜¯ä¸€æ ·çš„å—"><span>è”åˆç´¢å¼• (a, b)ï¼Œwhere a = 1 å’Œ where b = 1ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„å—</span></a></h4><p>ä¸ä¸€æ ·ã€‚</p><p><code>WHERE a = 1</code> èƒ½å‘½ä¸­è”åˆç´¢å¼•ï¼Œå› ä¸º a æ˜¯è”åˆç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µï¼Œç¬¦åˆæœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ã€‚è€Œ <code>WHERE b = 1</code> æ— æ³•å‘½ä¸­è”åˆç´¢å¼•ï¼Œå› ä¸ºç¼ºå°‘ a çš„åŒ¹é…æ¡ä»¶ï¼ŒMySQL ä¼šå…¨è¡¨æ‰«æã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼Œå‡è®¾æœ‰ä¸€ä¸ª ab è¡¨ï¼Œå»ºç«‹äº†è”åˆç´¢å¼• <code>(a, b)</code>ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ab</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    a </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    b </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ab_index (a, b)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ’å…¥æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ab (a, b) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ‰§è¡ŒæŸ¥è¯¢ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241105120556.png" alt="äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šæœ€å·¦å‰ç¼€åŒ¹é…çš„å·®å¼‚" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šæœ€å·¦å‰ç¼€åŒ¹é…çš„å·®å¼‚</figcaption></figure><p>é€šè¿‡ explain å¯ä»¥çœ‹åˆ°ï¼Œ<code>WHERE a = 1</code> ä½¿ç”¨äº†è”åˆç´¢å¼•ï¼Œè€Œ <code>WHERE b = 1</code> éœ€è¦å…¨è¡¨æ‰«æï¼Œä¾æ¬¡æ£€æŸ¥æ¯ä¸€è¡Œã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="å‡å¦‚æœ‰è”åˆç´¢å¼•-abc-ä¸‹é¢çš„-sql-æ€ä¹ˆèµ°çš„è”åˆç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#å‡å¦‚æœ‰è”åˆç´¢å¼•-abc-ä¸‹é¢çš„-sql-æ€ä¹ˆèµ°çš„è”åˆç´¢å¼•"><span>å‡å¦‚æœ‰è”åˆç´¢å¼• abcï¼Œä¸‹é¢çš„ sql æ€ä¹ˆèµ°çš„è”åˆç´¢å¼•ï¼Ÿ</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> and</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> and</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> c </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> and</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸€æ¡ SQL è¯­å¥åŒ…å«æ¡ä»¶ a = 2 å’Œ b = 2ï¼Œåˆšå¥½ç¬¦åˆè”åˆç´¢å¼•çš„å‰ä¸¤åˆ—ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115153445.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šexplainä¸­ä¹Ÿå¯ä»¥æ˜ç¡®çœ‹å‡ºæ¥ç”¨äº†ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šexplainä¸­ä¹Ÿå¯ä»¥æ˜ç¡®çœ‹å‡ºæ¥ç”¨äº†ç´¢å¼•</figcaption></figure><p>ç¬¬äºŒæ¡ SQL è¯­å¥ç”±äºæœªä½¿ç”¨æœ€å·¦å‰ç¼€ä¸­çš„ aï¼Œä¼šè§¦å‘å…¨è¡¨æ‰«æã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115153552.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šrows ä¸º 10 è¡Œï¼Œè¯´æ˜å…¨è¡¨æ‰«æäº†" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šrows ä¸º 10 è¡Œï¼Œè¯´æ˜å…¨è¡¨æ‰«æäº†</figcaption></figure><p>ç¬¬ä¸‰æ¡ SQL è¯­å¥åœ¨èŒƒå›´æ¡ä»¶ <code>a &gt; 2</code> ä¹‹åï¼Œç´¢å¼•åä¼šåœæ­¢åŒ¹é…ï¼Œb = 2 çš„æ¡ä»¶éœ€è¦é¢å¤–è¿‡æ»¤ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241115153636.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šrows ä¸º 9 è¡Œè¯´æ˜çš„ç¡®èµ°ç´¢å¼•äº†ï¼Œä½†è¿˜éœ€è¦é¢å¤–è¿‡æ»¤" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šrows ä¸º 9 è¡Œè¯´æ˜çš„ç¡®èµ°ç´¢å¼•äº†ï¼Œä½†è¿˜éœ€è¦é¢å¤–è¿‡æ»¤</figcaption></figure><h4 id="a-b-c-è”åˆç´¢å¼•-select-from-tbn-where-a-and-b-in-and-c-ä¼šèµ°ç´¢å¼•å—" tabindex="-1"><a class="header-anchor" href="#a-b-c-è”åˆç´¢å¼•-select-from-tbn-where-a-and-b-in-and-c-ä¼šèµ°ç´¢å¼•å—"><span>(A,B,C) è”åˆç´¢å¼• <code>select * from tbn where a=? and b in (?,?) and c&gt;?</code> ä¼šèµ°ç´¢å¼•å—ï¼Ÿ</span></a></h4><blockquote><p>2024 å¹´ 03 æœˆ 15 æ—¥å¢è¡¥ã€‚</p></blockquote><p>è¿™ä¸ªæŸ¥è¯¢ä¼šå‘½ä¸­è”åˆç´¢å¼•ï¼Œå› ä¸º a æ˜¯ç­‰å€¼åŒ¹é…ï¼Œb æ˜¯ IN ç­‰å€¼å¤šåŒ¹é…ï¼Œc æ˜¯ b ä¹‹åçš„èŒƒå›´æ¡ä»¶ï¼Œç¬¦åˆæœ€å·¦å‰ç¼€åŸåˆ™ã€‚</p><ol><li><p>å¯¹äº <code>a=?</code>ï¼šè¿™æ˜¯ä¸€ä¸ªç²¾ç¡®åŒ¹é…ï¼Œå¹¶ä¸”æ˜¯è”åˆç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µï¼Œæ‰€ä»¥ä¸€å®šä¼šå‘½ä¸­ç´¢å¼•ã€‚</p></li><li><p>å¯¹äº <code>b IN (?, ?)</code>ï¼šç­‰ä»·äº b=? OR b=?ï¼Œå±äºå¤šå€¼åŒ¹é…ï¼Œå¹¶ä¸”æ˜¯è”åˆç´¢å¼•çš„ç¬¬äºŒä¸ªå­—æ®µï¼Œæ‰€ä»¥ä¹Ÿä¼šå‘½ä¸­ç´¢å¼•ã€‚</p></li><li><p>å¯¹äº <code>c&gt;?</code>ï¼šè¿™æ˜¯ä¸€ä¸ªèŒƒå›´æ¡ä»¶ï¼Œå±äºè”åˆç´¢å¼•çš„ç¬¬ä¸‰ä¸ªå­—æ®µï¼Œä¹Ÿä¼šå‘½ä¸­ç´¢å¼•ã€‚</p></li></ol><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>æ¥éªŒè¯ä¸€ä¸‹ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œå»ºè¡¨ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> tbn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (A </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, B </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, C </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, D </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TEXT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_abc</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn (A, B, C);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼Œæ’å…¥æ•°æ®ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;First&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Second&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Third&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Fourth&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Fifth&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››æ­¥ï¼Œæ‰§è¡ŒæŸ¥è¯¢ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> B </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">IN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> C</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\G</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240315140807.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šéªŒè¯æ˜¯å¦èµ°è”åˆç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šéªŒè¯æ˜¯å¦èµ°è”åˆç´¢å¼•</figcaption></figure><p>ä» <code>EXPLAIN</code> è¾“å‡ºç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ° MySQL æ˜¯å¦‚ä½•æ‰§è¡ŒæŸ¥è¯¢çš„ä¸€äº›å…³é”®ä¿¡æ¯ï¼š</p><ul><li><strong>type</strong>: æŸ¥è¯¢ç±»å‹ï¼Œè¿™é‡Œæ˜¯ <code>range</code>ï¼Œè¡¨ç¤º MySQL ä½¿ç”¨äº†èŒƒå›´æŸ¥æ‰¾ï¼Œè¿™æ˜¯å› ä¸ºæŸ¥è¯¢æ¡ä»¶åŒ…å«äº† <code>&gt;</code> æ“ä½œç¬¦ã€‚</li><li><strong>possible_keys</strong>: å¯èƒ½è¢«ç”¨æ¥æ‰§è¡ŒæŸ¥è¯¢çš„ç´¢å¼•ï¼Œè¿™é‡Œæ˜¯ <code>idx_abc</code>ï¼Œè¡¨ç¤º MySQL è®¤ä¸º <code>idx_abc</code> ç´¢å¼•ä¼šç”¨äºæŸ¥è¯¢ä¼˜åŒ–ã€‚</li><li><strong>key</strong>: å®é™…ç”¨æ¥æ‰§è¡ŒæŸ¥è¯¢çš„ç´¢å¼•ï¼Œä¹Ÿæ˜¯ <code>idx_abc</code>ï¼Œè¿™ç¡®å®šè¿™æ¡æŸ¥è¯¢å‘½ä¸­äº†è”åˆç´¢å¼•ã€‚</li><li><strong>Extra</strong>: æä¾›äº†å…³äºæŸ¥è¯¢æ‰§è¡Œçš„é¢å¤–ä¿¡æ¯ã€‚<code>Using index condition</code> è¡¨ç¤º MySQL ä½¿ç”¨äº†ç´¢å¼•ä¸‹æ¨ï¼ˆIndex Condition Pushdownï¼ŒICPï¼‰ï¼Œè¿™æ˜¯ MySQL çš„ä¸€ä¸ªä¼˜åŒ–æ–¹å¼ï¼Œå®ƒå…è®¸åœ¨ç´¢å¼•å±‚é¢è¿‡æ»¤æ•°æ®ã€‚</li></ul><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="è”åˆç´¢å¼•çš„ä¸€ä¸ªåœºæ™¯é¢˜-a-b-c-è”åˆç´¢å¼•-b-c-æ˜¯å¦ä¼šèµ°ç´¢å¼•å—" tabindex="-1"><a class="header-anchor" href="#è”åˆç´¢å¼•çš„ä¸€ä¸ªåœºæ™¯é¢˜-a-b-c-è”åˆç´¢å¼•-b-c-æ˜¯å¦ä¼šèµ°ç´¢å¼•å—"><span>è”åˆç´¢å¼•çš„ä¸€ä¸ªåœºæ™¯é¢˜ï¼š(a,b,c)è”åˆç´¢å¼•ï¼Œ(b,c)æ˜¯å¦ä¼šèµ°ç´¢å¼•å—ï¼Ÿ</span></a></h4><blockquote><p>2024 å¹´ 04 æœˆ 06 æ—¥å¢è¡¥</p></blockquote><p>æ ¹æ®æœ€å·¦å‰ç¼€åŸåˆ™ï¼Œ(b,c) æŸ¥è¯¢ä¸ä¼šèµ°ç´¢å¼•ã€‚</p><p>å› ä¸ºè”åˆç´¢å¼• (a,b,c) ä¸­ï¼Œa æ˜¯æœ€å·¦è¾¹çš„åˆ—ï¼Œè”åˆç´¢å¼•åœ¨åˆ›å»ºç´¢å¼•æ ‘çš„æ—¶å€™éœ€è¦å…ˆæœ‰ aï¼Œç„¶åæ‰ä¼šæœ‰ b å’Œ cã€‚è€ŒæŸ¥è¯¢æ¡ä»¶ä¸­æ²¡æœ‰åŒ…å« aï¼Œæ‰€ä»¥ MySQL æ— æ³•åˆ©ç”¨è¿™ä¸ªç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> C</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\G</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240408092425.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šbcæ²¡æœ‰å‘½ä¸­è”åˆç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šbcæ²¡æœ‰å‘½ä¸­è”åˆç´¢å¼•</figcaption></figure><h4 id="å»ºç«‹è”åˆç´¢å¼•-a-b-c-where-c-5-æ˜¯å¦ä¼šç”¨åˆ°ç´¢å¼•-ä¸ºä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#å»ºç«‹è”åˆç´¢å¼•-a-b-c-where-c-5-æ˜¯å¦ä¼šç”¨åˆ°ç´¢å¼•-ä¸ºä»€ä¹ˆ"><span>å»ºç«‹è”åˆç´¢å¼•(a,b,c)ï¼Œwhere c = 5 æ˜¯å¦ä¼šç”¨åˆ°ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</span></a></h4><blockquote><p>2024 å¹´ 04 æœˆ 08 æ—¥å¢è¡¥</p></blockquote><p>ä¸ä¼šã€‚åªæœ‰ç´¢å¼•çš„ç¬¬ä¸‰åˆ— c è¢«ç”¨ä½œæŸ¥è¯¢æ¡ä»¶ï¼Œè€Œå‰ä¸¤åˆ— a å’Œ b éƒ½æ²¡æœ‰è¢«ä½¿ç”¨ã€‚è¿™ä¸ç¬¦åˆæœ€å·¦å‰ç¼€åŸåˆ™ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> C</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\G</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240408092646.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šcä¸ä¼šå‘½ä¸­è”åˆç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šcä¸ä¼šå‘½ä¸­è”åˆç´¢å¼•</figcaption></figure><h4 id="sqlä¸­ä½¿ç”¨like-å¦‚æœéµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…-æŸ¥è¯¢æ˜¯ä¸æ˜¯ä¸€å®šä¼šç”¨åˆ°ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#sqlä¸­ä½¿ç”¨like-å¦‚æœéµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…-æŸ¥è¯¢æ˜¯ä¸æ˜¯ä¸€å®šä¼šç”¨åˆ°ç´¢å¼•"><span>sqlä¸­ä½¿ç”¨likeï¼Œå¦‚æœéµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…ï¼ŒæŸ¥è¯¢æ˜¯ä¸æ˜¯ä¸€å®šä¼šç”¨åˆ°ç´¢å¼•ï¼Ÿ</span></a></h4><blockquote><p>2024 å¹´ 11 æœˆ 04 æ—¥å¢è¡¥</p></blockquote><p>å¦‚æœæŸ¥è¯¢æ¨¡å¼æ˜¯åç¼€é€šé…ç¬¦ <code>LIKE &#39;prefix%&#39;</code>ï¼Œä¸”è¯¥å­—æ®µæœ‰ç´¢å¼•ï¼Œä¼˜åŒ–å™¨é€šå¸¸ä¼šä½¿ç”¨ç´¢å¼•ã€‚å¦åˆ™å³ä¾¿æ˜¯éµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…ï¼ŒLIKE å­—æ®µä¹Ÿæ— æ³•å‘½ä¸­ç´¢å¼•ã€‚</p><p>å¦‚ <code>age = 18 and name LIKE &#39;%xxx&#39;</code>ï¼ŒMySQL ä¼šå…ˆä½¿ç”¨è”åˆç´¢å¼• age_name æ‰¾åˆ° age ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰è¡Œï¼Œç„¶åå†å…¨è¡¨æ‰«æè¿›è¡Œ name å­—æ®µçš„è¿‡æ»¤ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104212447.png" alt="äºŒå“¥çš„java è¿›é˜¶ä¹‹è·¯ï¼šè”åˆç´¢å¼•å‰ç¼€é€šé…ç¬¦" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„java è¿›é˜¶ä¹‹è·¯ï¼šè”åˆç´¢å¼•å‰ç¼€é€šé…ç¬¦</figcaption></figure><p><code>type: ref</code> è¡¨ç¤ºä½¿ç”¨ç´¢å¼•æŸ¥æ‰¾åŒ¹é…æŸä¸ªå€¼çš„æ‰€æœ‰è¡Œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104212743.png" alt="äºŒå“¥çš„java è¿›é˜¶ä¹‹è·¯ï¼š6 è¡Œæ•°æ®" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„java è¿›é˜¶ä¹‹è·¯ï¼š6 è¡Œæ•°æ®</figcaption></figure><p>å¦‚æœæ˜¯åç¼€é€šé…ç¬¦ï¼Œå¦‚ <code>age = 18 and name LIKE &#39;xxx%&#39;</code>ï¼ŒMySQL ä¼šç›´æ¥ä½¿ç”¨è”åˆç´¢å¼• age_name æ‰¾åˆ°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è¡Œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241104213135.png" alt="äºŒå“¥çš„java è¿›é˜¶ä¹‹è·¯ï¼šè”åˆç´¢å¼•åç¼€é€šé…ç¬¦" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„java è¿›é˜¶ä¹‹è·¯ï¼šè”åˆç´¢å¼•åç¼€é€šé…ç¬¦</figcaption></figure><p>type ä¸º rangeï¼Œè¡¨ç¤º MySQL ä½¿ç”¨äº†ç´¢å¼•èŒƒå›´æ‰«æï¼Œ<code>filtered ä¸º 100.00%</code>ï¼Œè¡¨ç¤ºåœ¨æ‰«æçš„è¡Œä¸­ï¼Œæ‰€æœ‰çš„è¡Œéƒ½æ»¡è¶³ WHERE æ¡ä»¶ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨å•†ä¸šåŒ–ä¸€é¢çš„åŸé¢˜ï¼š(A,B,C) è”åˆç´¢å¼• <code>select * from tbn where a=? and b in (?,?) and c&gt;?</code> ä¼šèµ°ç´¢å¼•å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šè”åˆç´¢å¼• abcï¼Œa=1,c=1/b=1,c=1/a=1,c=1,b=1 èµ°ä¸èµ°ç´¢å¼•</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 7 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè”åˆç´¢å¼•çš„ä¸€ä¸ªåœºæ™¯é¢˜ï¼š(a,b,c)è”åˆç´¢å¼•ï¼Œ(b,c)æ˜¯å¦ä¼šèµ°ç´¢å¼•</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šå»ºç«‹è”åˆç´¢å¼•(a,b,c)ï¼Œwhere c = 5 æ˜¯å¦ä¼šç”¨åˆ°ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 15 ç‚¹è¯„åç«¯æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šsqlä¸­ä½¿ç”¨likeï¼Œå¦‚æœéµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…ï¼ŒæŸ¥è¯¢æ˜¯ä¸æ˜¯ä¸€å®šä¼šç”¨åˆ°ç´¢å¼•ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 3 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´ä¸€ä¸‹æ•°æ®åº“ç´¢å¼•ï¼Œæœ€å·¦åŒ¹é…åŸåˆ™å’Œç´¢å¼•çš„ç»“æ„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´æœ€å·¦å‰ç¼€åŸåˆ™</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ‹›é“¶ç½‘ç»œç§‘æŠ€é¢ç»åŒå­¦ 9 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMysqlè”åˆç´¢å¼•çš„è®¾è®¡åŸåˆ™</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè”åˆç´¢å¼• (a, b)ï¼Œwhere a = 1 å’Œ where b = 1ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„å—</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 27 äº‘åå°æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šï¼ˆè”åˆç´¢å¼•ï¼‰ä¸‹é¢æ€ä¹ˆèµ°çš„ç´¢å¼•ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´é¢ç»åŒå­¦ 3 ç½‘çº¦è½¦åç«¯å¼€å‘ä¸€é¢åŸé¢˜ï¼šè”åˆç´¢å¼• (a, b, c)ï¼Œwhere b = 1ï¼Œèƒ½èµ°å—ï¼Œwhere a = 1ï¼Œèƒ½èµ°å—</li></ol></blockquote><h3 id="_51-ğŸŒŸä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨" tabindex="-1"><a class="header-anchor" href="#_51-ğŸŒŸä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨"><span>51.ğŸŒŸä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨ï¼Ÿ</span></a></h3><p>ç´¢å¼•ä¸‹æ¨æ˜¯æŒ‡ï¼šMySQL æŠŠ WHERE æ¡ä»¶å°½å¯èƒ½â€œä¸‹æ¨â€åˆ°ç´¢å¼•æ‰«æé˜¶æ®µï¼Œåœ¨å­˜å‚¨å¼•æ“å±‚æå‰è¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„è®°å½•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408150326.png" alt="Echo Blogï¼šç´¢å¼•ä¸‹æ¨" tabindex="0" loading="lazy"><figcaption>Echo Blogï¼šç´¢å¼•ä¸‹æ¨</figcaption></figure><p>å½“æŸ¥è¯¢æ¡ä»¶åŒ…å«ç´¢å¼•åˆ—ä½†æœªå®Œå…¨åŒ¹é…æ—¶ï¼ŒICP ä¼šåœ¨å­˜å‚¨å¼•æ“å±‚è¿‡æ»¤éç´¢å¼•åˆ—æ¡ä»¶ï¼Œä»¥å‡å°‘å›è¡¨æ¬¡æ•°ã€‚</p><p>ä¼ ç»Ÿçš„æŸ¥è¯¢æµç¨‹æ˜¯ï¼Œå‚¨å¼•æ“é€šè¿‡è”åˆç´¢å¼•å®šä½åˆ°ç¬¦åˆæœ€å·¦å‰ç¼€æ¡ä»¶çš„ä¸»é”® IDï¼›å›è¡¨è¯»å–å®Œæ•´æ•°æ®è¡Œå¹¶è¿”å›ç»™ Server å±‚ï¼›Server å±‚å¯¹æ‰€æœ‰è¿”å›çš„è¡Œè¿›è¡Œ WHERE æ¡ä»¶è¿‡æ»¤ã€‚</p><p>æœ‰äº† ICP åï¼Œå­˜å‚¨å¼•æ“åœ¨ç´¢å¼•å±‚ç›´æ¥è¿‡æ»¤å¯ä¸‹æ¨çš„æ¡ä»¶ï¼Œä»…å¯¹ç¬¦åˆç´¢å¼•æ¡ä»¶çš„è®°å½•å›è¡¨è¯»å–æ•°æ®ï¼Œå†è¿”å›ç»™ Server å±‚è¿›è¡Œå‰©ä½™æ¡ä»¶è¿‡æ»¤ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>ä¾‹å¦‚æœ‰ä¸€å¼  user è¡¨ï¼Œå»ºäº†ä¸€ä¸ªè”åˆç´¢å¼•ï¼ˆname, ageï¼‰ï¼ŒæŸ¥è¯¢è¯­å¥ï¼š<code>select * from user where name like &#39;å¼ %&#39; and age=10;</code>ï¼Œæ²¡æœ‰ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼š</p><p>MySQL ä¼šä½¿ç”¨ç´¢å¼• name æ‰¾åˆ°æ‰€æœ‰ <code>name like &#39;å¼ %&#39;</code> çš„ä¸»é”®ï¼Œæ ¹æ®è¿™äº›ä¸»é”®ï¼Œä¸€æ¡æ¡å›è¡¨æŸ¥è¯¢æ•´è¡Œæ•°æ®ï¼Œå¹¶åœ¨ Server å±‚è¿‡æ»¤æ‰ä¸ç¬¦åˆ <code>age=10</code> çš„æ•°æ®è¡Œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-c58f59e0-850b-4dfd-8129-2dfc51cf4768.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ²¡æœ‰ä½¿ç”¨ ICP" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ²¡æœ‰ä½¿ç”¨ ICP</figcaption></figure><p>å¯ç”¨ ICP åï¼ŒInnoDB ä¼šé€šè¿‡è”åˆç´¢å¼•ç›´æ¥ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„ä¸»é”® IDï¼ˆ<code>name like &#39;å¼ %&#39; and age=10</code>ï¼‰ï¼Œç„¶åå†å›è¡¨æŸ¥è¯¢æ•´è¡Œæ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-a8525cf3-2d16-49a9-a7da-a19762ed16df.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä½¿ç”¨ ICP" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä½¿ç”¨ ICP</figcaption></figure><p>æ¢å¥è¯è¯´ï¼Œå‡è®¾ <code>name like &#39;å¼ %&#39;</code> æ‰¾åˆ° 10000 è¡Œæ•°æ®ï¼Œ<code>age=10</code> åªæœ‰å…¶ä¸­ 10 è¡Œï¼Œæ²¡æœ‰ç´¢å¼•ä¸‹æ¨çš„æƒ…å†µä¸‹ï¼ŒMySQL ä¼šå›è¡¨ 10000 æ¬¡ï¼Œè¯»å– 10000 è¡Œæ•°æ®ï¼Œç„¶ååœ¨ Server å±‚è¿‡æ»¤æ‰ 9990 è¡Œã€‚</p><p>è€Œæœ‰äº†ç´¢å¼•ä¸‹æ¨åï¼ŒMySQL åªä¼šå›è¡¨ 10 æ¬¡ï¼Œè¯»å– 10 è¡Œæ•°æ®ã€‚</p><p>æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408152401.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¼€å¯ ICP å’Œå…³é—­ ICP çš„æŸ¥è¯¢è¯­å¥" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¼€å¯ ICP å’Œå…³é—­ ICP çš„æŸ¥è¯¢è¯­å¥</figcaption></figure><p>ä»ç»“æœä¸­æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ° ICP çš„æ•ˆæœã€‚ICP å¼€å¯æ—¶ï¼ŒExtra åˆ—æ˜¾ç¤º&quot;Using index condition&quot;ï¼Œè¡¨æ˜è¿‡æ»¤æ¡ä»¶è¢«ä¸‹æ¨åˆ°å­˜å‚¨å¼•æ“å±‚ã€‚</p><p>ICPå…³é—­æ—¶ï¼ŒExtra åˆ—ä»…æ˜¾ç¤º&quot;Using where&quot;ï¼Œè¡¨æ˜è¿‡æ»¤æ¡ä»¶åœ¨æœåŠ¡å™¨å±‚æ‰§è¡Œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408152547.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¼€å¯ ICPå‰åçš„ç»“æœå¯¹æ¯”" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¼€å¯ ICPå‰åçš„ç»“æœå¯¹æ¯”</figcaption></figure><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¼€å¯ICP</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> optimizer_switch</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;index_condition_pushdown=on&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ¸…ç†çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">FLUSH </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Performance test with ICP ON&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_case;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ‰§è¡ŒæŸ¥è¯¢å¹¶åˆ†ææ€§èƒ½</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN ANALYZE</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> /*+ ICP_ON */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders_mrr_test</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BETWEEN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 200</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-01-01&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-02-01&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-01-15%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ˜¾ç¤ºå¤„ç†å™¨çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Handler_read%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å…³é—­ICP</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> optimizer_switch</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;index_condition_pushdown=off&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ¸…ç†çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">FLUSH </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Performance test with ICP OFF&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_case;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN ANALYZE</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders_mrr_test</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BETWEEN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 200</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-01-01&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-02-01&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2023-01-15%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ˜¾ç¤ºå¤„ç†å™¨çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Handler_read%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®é™…çš„æ€§èƒ½å·®è·ä¹Ÿå¾ˆå¤§ã€‚ICP å¼€å¯æ—¶ï¼Œå®é™…æ‰«æè¡Œæ•°ï¼š1,649 è¡Œï¼Œæ‰§è¡Œæ—¶é—´ï¼šçº¦12.3 æ¯«ç§’ã€‚å…³é—­æ—¶ï¼Œå®é™…æ‰«æè¡Œæ•°ï¼š19,959 è¡Œï¼Œæ‰§è¡Œæ—¶é—´ï¼šçº¦ 32.1 æ¯«ç§’ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408153010.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ€§èƒ½å·®è·" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ€§èƒ½å·®è·</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 9 ä¸€é¢é¢è¯•åŸé¢˜ï¼šç´¢å¼•ä¸‹æ¨</li></ol></blockquote><h3 id="_52-å¦‚ä½•æŸ¥çœ‹æ˜¯å¦ç”¨åˆ°äº†ç´¢å¼•-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_52-å¦‚ä½•æŸ¥çœ‹æ˜¯å¦ç”¨åˆ°äº†ç´¢å¼•-è¡¥å……"><span>52.å¦‚ä½•æŸ¥çœ‹æ˜¯å¦ç”¨åˆ°äº†ç´¢å¼•ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 03 æœˆ 15 æ—¥å¢è¡¥ã€‚</p></blockquote><p>å¯ä»¥é€šè¿‡ <code>EXPLAIN</code> å…³é”®å­—æ¥æŸ¥çœ‹æ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> column </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;value&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœä½¿ç”¨äº†ç´¢å¼•ï¼Œç»“æœä¸­çš„ <code>key</code> å€¼ä¼šæ˜¾ç¤ºç´¢å¼•çš„åç§°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240417092646.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šexplain å’Œç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šexplain å’Œç´¢å¼•</figcaption></figure><h4 id="è”åˆç´¢å¼•-abc-a-1-c-1-b-1-c-1-a-1-c-1-b-1-èµ°ä¸èµ°ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#è”åˆç´¢å¼•-abc-a-1-c-1-b-1-c-1-a-1-c-1-b-1-èµ°ä¸èµ°ç´¢å¼•"><span>è”åˆç´¢å¼• abcï¼Œa=1,c=1/b=1,c=1/a=1,c=1,b=1 èµ°ä¸èµ°ç´¢å¼•ï¼Ÿ</span></a></h4><blockquote><p>2024 å¹´ 03 æœˆ 19 æ—¥å¢è¡¥</p></blockquote><p>ac èƒ½ç”¨ä¸Šç´¢å¼•ï¼Œæ¡ä»¶ a=1 ç¬¦åˆæœ€å·¦å‰ç¼€åŸåˆ™ï¼Œè§¦å‘ç´¢å¼•çš„ç¬¬ä¸€åˆ— aï¼›ç”±äºè·³è¿‡äº†ä¸­é—´åˆ— bï¼Œc=1 æ— æ³•ç›´æ¥åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§ä¼˜åŒ–ï¼Œä½†å¯é€šè¿‡ç´¢å¼•ä¸‹æ¨åœ¨å­˜å‚¨å¼•æ“å±‚è¿‡æ»¤ c çš„æ¡ä»¶ï¼Œå‡å°‘å›è¡¨æ¬¡æ•°ã€‚</p><p>bc æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼Œåªèƒ½å…¨è¡¨æ‰«æï¼Œå› ä¸ºä¸ç¬¦åˆæœ€å·¦å‰ç¼€åŸåˆ™ï¼›acb è™½ç„¶é¡ºåºæ˜¯ä¹±çš„ï¼Œä½† MySQL ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨é‡æ’ä¸º abcï¼Œæ‰€ä»¥èƒ½å‘½ä¸­ç´¢å¼•ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>æˆ‘ä»¬é€šè¿‡å®é™…çš„ SQL æ¥éªŒè¯ä¸€ä¸‹ã€‚</p><p>ç¤ºä¾‹ 1ï¼ˆa=1,c=1ï¼‰ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> C</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\G</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240319131120.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šac ä¼šç”¨åˆ°è”åˆç´¢å¼•çš„ä¸€éƒ¨åˆ†" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šac ä¼šç”¨åˆ°è”åˆç´¢å¼•çš„ä¸€éƒ¨åˆ†</figcaption></figure><p>key æ˜¯ idx_abcï¼Œè¡¨æ˜ a=1,c=1 ä¼šä½¿ç”¨è”åˆç´¢å¼•ã€‚<code>Extra: Using index condition</code> è¡¨ç¤º ICP ç”Ÿæ•ˆã€‚</p><p>ç¤ºä¾‹ 2ï¼ˆb=1,c=1ï¼‰ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> C</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\G</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240319131245.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šbc æ— æ³•å‘½ä¸­ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šbc æ— æ³•å‘½ä¸­ç´¢å¼•</figcaption></figure><p>key æ˜¯ NULLï¼Œè¡¨æ˜ b=1,c=1 ä¸ä¼šä½¿ç”¨è”åˆç´¢å¼•ã€‚è¿™æ˜¯å› ä¸ºæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™ã€‚</p><p>ç¤ºä¾‹ 3ï¼ˆa=1,c=1,b=1ï¼‰ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> C</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\G</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´æ¡ä»¶é¡ºåºä¸º a=1 AND b=1 AND c=1ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240319131306.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šacb ä¼šå‘½ä¸­ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šacb ä¼šå‘½ä¸­ç´¢å¼•</figcaption></figure><p>key æ˜¯ idx_abcï¼Œè¡¨æ˜ a=1,c=1,b=1 ä¼šä½¿ç”¨è”åˆç´¢å¼•ã€‚</p><p>å¹¶ä¸” rows=1ï¼Œå› ä¸º MySQL ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨é‡æ’æŸ¥è¯¢æ¡ä»¶ï¼Œä»¥æ»¡è¶³æœ€å·¦å‰ç¼€åŸåˆ™ï¼Œç›´æ¥ä½¿ç”¨è”åˆç´¢å¼•æ‰¾å‡º <code>a=1 AND b=1 AND c=1</code> çš„è¡Œã€‚</p><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div><p>memoï¼š2025 å¹´ 4 æœˆ 8 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰çƒå‹åé¦ˆè¯´ï¼Œæ‹¿åˆ°äº†é¹…å‚å’Œç¾å›¢çš„æš‘æœŸå®ä¹  offerï¼Œå¹¶ä¸”éƒ½å·²ç» OCï¼ŒçœŸçš„æ­å–œï¼Œåˆæ˜¯ä¸€ä¸ªå€¼å¾—æ™’æˆç»©çš„æ—¥å­ï¼Œå“ˆå“ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250408155951.png" alt="çƒå‹æ‹¿åˆ°äº†è…¾è®¯å’Œç¾å›¢çš„ offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†è…¾è®¯å’Œç¾å›¢çš„ offer</figcaption></figure><h2 id="é”" tabindex="-1"><a class="header-anchor" href="#é”"><span>é”</span></a></h2><h3 id="_53-ğŸŒŸmysql-ä¸­æœ‰å“ªå‡ ç§é”" tabindex="-1"><a class="header-anchor" href="#_53-ğŸŒŸmysql-ä¸­æœ‰å“ªå‡ ç§é”"><span>53.ğŸŒŸMySQL ä¸­æœ‰å“ªå‡ ç§é”ï¼Ÿ</span></a></h3><p>MySQL ä¸­æœ‰å¤šç§ç±»å‹çš„é”ï¼Œå¯ä»¥ä»ä¸åŒç»´åº¦æ¥åˆ†ç±»ï¼ŒæŒ‰é”ç²’åº¦åˆ’åˆ†çš„è¯ï¼Œæœ‰è¡¨é”ã€è¡Œé”ã€‚</p><p>æŒ‰ç…§åŠ é”æœºåˆ¶åˆ’åˆ†çš„è¯ï¼Œæœ‰ä¹è§‚é”å’Œæ‚²è§‚é”ã€‚æŒ‰ç…§å…¼å®¹æ€§åˆ’åˆ†çš„è¯ï¼Œæœ‰å…±äº«é”å’Œæ’ä»–é”ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-a07e4525-ccc1-4287-aec5-ebf3f277857c.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šMySQL ä¸­çš„é”" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šMySQL ä¸­çš„é”</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>è¡¨é”ï¼šé”å®šæ•´ä¸ªè¡¨ï¼Œèµ„æºå¼€é”€å°ï¼ŒåŠ é”å¿«ï¼Œä½†å¹¶å‘åº¦ä½ï¼Œä¸ä¼šå‡ºç°æ­»é”ï¼›é€‚åˆæŸ¥è¯¢ä¸ºä¸»ã€å°‘é‡æ›´æ–°çš„åœºæ™¯ï¼ˆå¦‚ MyISAM å¼•æ“ï¼‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411093212.png" alt="IServiseï¼šè¡¨çº§é”" tabindex="0" loading="lazy"><figcaption>IServiseï¼šè¡¨çº§é”</figcaption></figure><p>å†ç»†åˆ†çš„è¯ï¼Œæœ‰è¡¨å…±äº«è¯»é”ï¼ˆSé”ï¼‰ï¼šå…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶è¯»ï¼Œä½†é˜»å¡å†™æ“ä½œï¼›è¡¨ç‹¬å å†™é”ï¼ˆXé”ï¼‰ï¼šç‹¬å è¡¨ï¼Œé˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å†™ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250410121135.png" alt="Dravenï¼šå…±äº«é”å’Œç‹¬å é”" tabindex="0" loading="lazy"><figcaption>Dravenï¼šå…±äº«é”å’Œç‹¬å é”</figcaption></figure><p>è¡Œé”ï¼šé”å®šå•è¡Œæˆ–å¤šè¡Œï¼Œå¼€é”€å¤§ã€åŠ é”æ…¢ï¼Œå¯èƒ½å‡ºç°æ­»é”ï¼Œä½†å¹¶å‘åº¦é«˜ï¼ˆInnoDB é»˜è®¤æ”¯æŒï¼‰ã€‚</p><p>å†ç»†åˆ†çš„è¯ï¼Œæœ‰è®°å½•é”ï¼ˆRecord Lockï¼‰ï¼šé”å®šç´¢å¼•ä¸­çš„å…·ä½“è®°å½•ï¼›é—´éš™é”ï¼ˆGap Lockï¼‰ï¼šé”å®šç´¢å¼•è®°å½•ä¹‹é—´çš„é—´éš™ï¼Œé˜²æ­¢å¹»è¯»ï¼›ä¸´é”®é”ï¼ˆNext-Key Lockï¼‰ï¼šç»“åˆè®°å½•é”å’Œé—´éš™é”ï¼Œé”å®šä¸€ä¸ªå·¦å¼€å³é—­çš„åŒºé—´ï¼ˆå¦‚ <code>(5, 10]</code>ï¼‰ã€‚</p><p>å…±äº«é”ï¼ˆSé”/è¯»é”ï¼‰ï¼Œå…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶è¯»å–æ•°æ®ï¼Œä½†é˜»å¡å†™æ“ä½œã€‚è¯­æ³•ï¼š<code>SELECT ... LOCK IN SHARE MODE</code></p><p>æ’ä»–é”ï¼ˆXé”/å†™é”ï¼‰ï¼Œç‹¬å æ•°æ®ï¼Œé˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å†™ã€‚è¯­æ³•ï¼š<code>SELECT ... FOR UPDATE</code>ã€‚</p><p>ä¹è§‚é”å‡è®¾å†²çªå°‘ï¼Œé€šè¿‡ç‰ˆæœ¬å·æˆ– CAS æœºåˆ¶æ£€æµ‹å†²çªï¼ˆå¦‚ <code>UPDATE SET version=version+1 WHERE version=old_version</code>ï¼‰ã€‚</p><p>æ‚²è§‚é”å‡è®¾å¹¶å‘å†²çªé¢‘ç¹ï¼Œå…ˆåŠ é”å†æ“ä½œ<code>SELECT FOR UPDATE</code>ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 4 äº‘å®ä¹ é¢è¯•åŸé¢˜ï¼šmysqlä¸€å…±æœ‰å“ªäº›é”</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 15 ç‚¹è¯„åç«¯æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šé—®äº†ä¸€ä¸‹mysqlçš„é”å’ŒMVCC</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œç³»é¢ç»åŒå­¦ 19 é¥¿äº†ä¹ˆé¢è¯•åŸé¢˜ï¼šMySQLé”</li></ol></blockquote><h3 id="_54-å…¨å±€é”äº†è§£å—-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_54-å…¨å±€é”äº†è§£å—-è¡¥å……"><span>54.å…¨å±€é”äº†è§£å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 07 æœˆ 15 æ—¥å¢è¡¥ã€‚</p></blockquote><p>å…¨å±€é”å°±æ˜¯å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹è¿›è¡ŒåŠ é”ï¼Œå½“æ‰§è¡Œå…¨å±€é”å®šæ“ä½œæ—¶ï¼Œæ•´ä¸ªæ•°æ®åº“å°†ä¼šå¤„äºåªè¯»çŠ¶æ€ï¼Œæ‰€æœ‰å†™æ“ä½œéƒ½ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å…¨å±€é”è¢«é‡Šæ”¾ã€‚</p><p>åœ¨è¿›è¡Œå…¨åº“å¤‡ä»½ï¼Œæˆ–è€…æ•°æ®è¿ç§»æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å…¨å±€é”æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>åœ¨ MySQL ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>FLUSH TABLES WITH READ LOCK</code> å‘½ä»¤æ¥è·å–å…¨å±€é”ã€‚</p><p>æ‰§è¡Œè¯¥å‘½ä»¤åï¼Œæ‰€æœ‰è¡¨å°†è¢«é”å®šä¸ºåªè¯»çŠ¶æ€ã€‚è®°å¾—åœ¨å®Œæˆå¤‡ä»½æˆ–è¿ç§»åï¼Œä½¿ç”¨ <code>UNLOCK TABLES</code> å‘½ä»¤é‡Šæ”¾å…¨å±€é”ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- é”å®šæ•´ä¸ªæ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">FLUSH TABLES </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WITH</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> LOCK;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ‰§è¡Œå¤‡ä»½æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¾‹å¦‚ä½¿ç”¨ mysqldump è¿›è¡Œå¤‡ä»½</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">! mysqldump -u username -p </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">database_name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> backup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">sql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- é‡Šæ”¾å…¨å±€é”å®š</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UNLOCK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> TABLES;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è¡¨é”äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#è¡¨é”äº†è§£å—"><span>è¡¨é”äº†è§£å—ï¼Ÿ</span></a></h4><p>äº†è§£ã€‚</p><p>è¡¨é”å¸¸è§äº MyISAM å¼•æ“ï¼ŒInnoDB ä¹Ÿå¯ä»¥æ‰‹åŠ¨é€šè¿‡ <code>LOCK TABLES</code> åŠ é”ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250409144701.png" alt="å‘¨äºŒé¸­ï¼šè¡¨é”" tabindex="0" loading="lazy"><figcaption>å‘¨äºŒé¸­ï¼šè¡¨é”</figcaption></figure><p>é€‚åˆè¯»å¤šå†™å°‘ã€å…¨è¡¨æ‰«ææˆ–è€…è¡¨ç»“æ„å˜æ›´çš„åœºæ™¯ç”¨ã€‚</p><p>è¡¨é”åˆå¯ä»¥ç»†åˆ†ä¸ºå…±äº«é”å’Œæ’ä»–é”ã€‚å…±äº«é”å…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶è¯»è¡¨ï¼Œä½†ä¸å…è®¸å†™æ“ä½œã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">LOCK TABLES table_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">READ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ˜¾å¼åŠ è¯»é”</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_name;     </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å…¶ä»–ä¼šè¯å¯è¯»ï¼Œä¸å¯å†™</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UNLOCK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> TABLES;                </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- é‡Šæ”¾é”</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ’ä»–é”åªå…è®¸ä¸€ä¸ªäº‹åŠ¡è¿›è¡Œå†™æ“ä½œï¼Œå…¶ä»–äº‹åŠ¡ä¸èƒ½è¯»ä¹Ÿä¸èƒ½å†™ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">LOCK TABLES table_name WRITE; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ˜¾å¼åŠ å†™é”</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DELETE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_name; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å…¶ä»–ä¼šè¯è¯»å†™å‡é˜»å¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UNLOCK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> TABLES;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MyISAM åœ¨æ‰§è¡Œ <code>SELECT</code> æ—¶ä¼šè‡ªåŠ¨åŠ è¯»é”ï¼Œæ‰§è¡Œ <code>INSERT/UPDATE/DELETE</code> æ—¶ä¼šåŠ å†™é”ã€‚</p><p>å¯¹äº InnoDB å¼•æ“ï¼Œæ— ç´¢å¼•çš„ <code>UPDATE/DELETE</code> å¯èƒ½ä¼šå¯¼è‡´é”å‡çº§ä¸ºè¡¨é”ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> innodb_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;new&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;old&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å…¨è¡¨æ‰«æï¼Œé€€åŒ–ä¸ºè¡¨é”</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ‰§è¡Œ <code>ALTER TABLE</code> æ—¶ä¼šè‡ªåŠ¨åŠ è¡¨é”ï¼Œé˜»å¡æ‰€æœ‰è¯»å†™æ“ä½œã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 3 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šæ•°æ®åº“ä¸­çš„å…¨å±€é” è¡¨é” è¡Œçº§é” æ¯ç§é”çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 30 è…¾è®¯éŸ³ä¹é¢è¯•åŸé¢˜ï¼šmysqlçš„è¡¨çº§é”æœ‰å‡ ç§</li></ol></blockquote><h3 id="_55-ğŸŒŸè¯´è¯´-mysql-çš„è¡Œé”" tabindex="-1"><a class="header-anchor" href="#_55-ğŸŒŸè¯´è¯´-mysql-çš„è¡Œé”"><span>55.ğŸŒŸè¯´è¯´ MySQL çš„è¡Œé”ï¼Ÿ</span></a></h3><p>è¡Œé”æ˜¯ InnoDB å­˜å‚¨å¼•æ“ä¸­æœ€ç»†ç²’åº¦çš„é”ï¼Œå®ƒé”å®šè¡¨ä¸­çš„ä¸€è¡Œè®°å½•ï¼Œå…è®¸å…¶ä»–äº‹åŠ¡è®¿é—®è¡¨ä¸­çš„å…¶ä»–è¡Œã€‚</p><p>åº•å±‚æ˜¯é€šè¿‡ç»™ç´¢å¼•åŠ é”å®ç°çš„ï¼Œè¿™å°±æ„å‘³ç€åªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®æ—¶ï¼ŒInnoDB æ‰èƒ½ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ä¼šé€€åŒ–ä¸ºè¡¨é”ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250409150234.png" alt="å‘¨äºŒé¸­ï¼šè¡Œé”" tabindex="0" loading="lazy"><figcaption>å‘¨äºŒé¸­ï¼šè¡Œé”</figcaption></figure><p>è¡Œé”åˆå¯ä»¥ç»†åˆ†ä¸ºè®°å½•é”ã€é—´éš™é”å’Œä¸´é”®é”ä¸‰ç§å½¢å¼ã€‚é€šè¿‡ <code>SELECT ... FOR UPDATE</code> å¯ä»¥åŠ æ’ä»–é”ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åŠ æ’ä»–é”ï¼Œé”å®šæŸä¸€è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> your_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯¹è¯¥è¡Œè¿›è¡Œæ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> your_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> column1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;new_value&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ <code>SELECT ...LOCK IN SHARE MODE</code> å¯ä»¥åŠ å…±äº«é”ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åŠ å…±äº«é”ï¼Œé”å®šæŸä¸€è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> your_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> LOCK </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">IN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SHARE MODE;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åªèƒ½è¯»å–è¯¥è¡Œï¼Œä¸èƒ½ä¿®æ”¹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="select-for-update-æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„" tabindex="-1"><a class="header-anchor" href="#select-for-update-æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„"><span>select for update æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„ï¼Ÿ</span></a></h4><p>ç¬¬ä¸€ï¼Œå¿…é¡»åœ¨äº‹åŠ¡ä¸­ä½¿ç”¨ï¼Œå¦åˆ™é”ä¼šç«‹å³é‡Šæ”¾ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> your_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯¹è¯¥è¡Œè¿›è¡Œæ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒï¼Œä½¿ç”¨æ—¶å¿…é¡»æ³¨æ„æ˜¯å¦å‘½ä¸­ç´¢å¼•ï¼Œå¦åˆ™å¯èƒ½é”å…¨è¡¨ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- name æ²¡æœ‰ç´¢å¼•ï¼Œä¼šé€€åŒ–ä¸ºè¡¨é”</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>å‡è®¾æœ‰ä¸€å¼ åä¸º orders çš„è¡¨ï¼ŒåŒ…å«ä»¥ä¸‹æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    order_no </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    amount </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DECIMAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    status</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (order_no)  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- order_no ä¸Šæœ‰ç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¡¨ä¸­çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</p><table><thead><tr><th>id</th><th>order_no</th><th>amount</th><th>status</th></tr></thead><tbody><tr><td>1</td><td>10001</td><td>50.00</td><td>pending</td></tr><tr><td>2</td><td>10002</td><td>75.00</td><td>pending</td></tr><tr><td>3</td><td>10003</td><td>100.00</td><td>pending</td></tr><tr><td>4</td><td>10004</td><td>150.00</td><td>completed</td></tr><tr><td>5</td><td>10005</td><td>200.00</td><td>pending</td></tr></tbody></table><p>å¦‚æœæˆ‘ä»¬é€šè¿‡ä¸»é”®ç´¢å¼•æ‰§è¡Œ <code>SELECT FOR UPDATE</code>ï¼Œç¡®å®åªä¼šé”å®šç‰¹å®šçš„è¡Œï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯¹ id=1 çš„è¡Œè¿›è¡Œæ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äº id æ˜¯ä¸»é”®ï¼Œæ‰€ä»¥åªä¼šé”å®š <code>id=1</code> è¿™è¡Œï¼Œä¸ä¼šå½±å“å…¶ä»–è¡Œçš„æ“ä½œã€‚å…¶ä»–äº‹åŠ¡ä¾ç„¶å¯ä»¥å¯¹ id = 2, 3, 4, 5 ç­‰è¡Œæ‰§è¡Œæ›´æ–°æ“ä½œï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰è¢«é”å®šã€‚</p><p>å¦‚æœä½¿ç”¨ order_no è¿™ä¸ªæ™®é€šç´¢å¼•æ‰§è¡Œ <code>SELECT FOR UPDATE</code>ï¼Œä¹Ÿåªä¼šé”å®šç‰¹å®šçš„è¡Œï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_no </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;10001&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯¹ order_no=10001 çš„è¡Œè¿›è¡Œæ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸º order_no æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œæ‰€ä»¥åªä¼šé”å®š <code>order_no=10001</code> è¿™è¡Œï¼Œä¸ä¼šå½±å“å…¶ä»–è¡Œçš„æ“ä½œã€‚</p><p>ä½†å¦‚æœ WHERE æ¡ä»¶æ˜¯ <code>status=&#39;pending&#39;</code>ï¼Œè€Œ status ä¸Šæ²¡æœ‰ç´¢å¼•ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;pending&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯¹ status=pending çš„è¡Œè¿›è¡Œæ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°±ä¼šé€€åŒ–ä¸ºè¡¨é”ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒMySQL éœ€è¦å…¨è¡¨æ‰«ææ£€æŸ¥æ¯ä¸€è¡Œçš„ statusã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>memoï¼š2025 å¹´ 4 æœˆ 9 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹åé¦ˆè¯´</a>ï¼Œæ‹¿åˆ°äº†ç¾å›¢çš„æš‘æœŸå®ä¹  offerï¼Œå¹¶ä¸”ç‰¹æ„æ„Ÿè°¢äº†é¢æ¸£é€†è¢­ï¼Œå£ç¢‘+1ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250409152600.png" alt="çƒå‹æ‹¿åˆ°äº†ç¾å›¢çš„æš‘æœŸå®ä¹  offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†ç¾å›¢çš„æš‘æœŸå®ä¹  offer</figcaption></figure><h4 id="è¯´è¯´è®°å½•é”å§" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´è®°å½•é”å§"><span>è¯´è¯´è®°å½•é”å§ï¼Ÿ</span></a></h4><p>è®°å½•é”æ˜¯è¡Œé”æœ€åŸºæœ¬çš„è¡¨ç°å½¢å¼ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å”¯ä¸€ç´¢å¼•æˆ–è€…ä¸»é”®ç´¢å¼•è¿›è¡Œç­‰å€¼æŸ¥è¯¢æ—¶ï¼ŒMySQL ä¼šä¸ºè¯¥è®°å½•è‡ªåŠ¨æ·»åŠ æ’ä»–é”ï¼Œç¦æ­¢å…¶ä»–äº‹åŠ¡è¯»å–æˆ–è€…ä¿®æ”¹é”å®šè®°å½•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250410114455.png" alt="ä¸œå¹³çš„ç¬”è®°ä»“åº“ï¼šè®°å½•é”" tabindex="0" loading="lazy"><figcaption>ä¸œå¹³çš„ç¬”è®°ä»“åº“ï¼šè®°å½•é”</figcaption></figure><p>ä¾‹å¦‚ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åŠ Xé”</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- éšå¼åŠ Xé”</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é—´éš™é”äº†è§£å—-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#é—´éš™é”äº†è§£å—-è¡¥å……"><span>é—´éš™é”äº†è§£å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h4><blockquote><p>2024 å¹´ 12 æœˆ 15 æ—¥å¢è¡¥ã€‚</p></blockquote><p>é—´éš™é”ç”¨äºåœ¨èŒƒå›´æŸ¥è¯¢æ—¶é”å®šè®°å½•ä¹‹é—´çš„â€œé—´éš™â€ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¯¥èŒƒå›´å†…æ’å…¥æ–°è®°å½•ã€‚ä»…åœ¨å¯é‡å¤è¯»åŠä»¥ä¸Šçš„éš”ç¦»çº§åˆ«ä¸‹ç”Ÿæ•ˆï¼Œä¸»è¦ç”¨äºé˜²æ­¢å¹»è¯»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250410114820.png" alt="X1aoHeiï¼šé—´éš™é”" tabindex="0" loading="lazy"><figcaption>X1aoHeiï¼šé—´éš™é”</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>ä¾‹å¦‚äº‹åŠ¡ A é”å®šäº† <code>(1000,2000)</code> åŒºé—´ï¼Œä¼šé˜»æ­¢äº‹åŠ¡ B åœ¨æ­¤åŒºé—´æ’å…¥æ–°è®°å½•ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- äº‹åŠ¡A</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> amount </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BETWEEN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2000</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- äº‹åŠ¡Bå°è¯•æ’å…¥ä¼šè¢«é˜»å¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1500</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;pending&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- é˜»å¡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡è®¾è¡¨ test_gaplock æœ‰ idã€ageã€name ä¸‰ä¸ªå­—æ®µï¼Œå…¶ä¸­ id æ˜¯ä¸»é”®ï¼Œage ä¸Šæœ‰ç´¢å¼•ï¼Œå¹¶æ’å…¥äº† 4 æ¡æ•°æ®ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">test_gaplock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">` (</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `id`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">11</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `age`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">11</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `name`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> varchar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`id`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  KEY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `age`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`age`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ENGINE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">insert into</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_gaplock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">values</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å¼ ä¸‰&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å´è€äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;èµµå››&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">12</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">12</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç†Šå¤§&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é—´éš™é”ä¼šé”ä½ï¼š</p><ul><li><code>(âˆ’âˆ, 1)</code>ï¼šæœ€å°è®°å½•ä¹‹å‰çš„é—´éš™ã€‚</li><li><code>(1, 6)ã€(6, 8)ã€(8, 12)</code>ï¼šè®°å½•ä¹‹é—´çš„é—´éš™ã€‚</li><li><code>(12, +âˆ)</code>ï¼šæœ€å¤§è®°å½•ä¹‹åçš„é—´éš™ã€‚</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-d60f3a42-4b0f-4612-b7ad-65191fecb852.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šé—´éš™é”" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šé—´éš™é”</figcaption></figure><p>å‡è®¾æœ‰ä¸¤ä¸ªäº‹åŠ¡ï¼ŒT1 æ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_gaplock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>T2 æ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_gaplock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">7</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">7</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äº”&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>T1 ä¼šé”ä½ <code>(6, 8)</code> çš„é—´éš™ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥æ–°è®°å½•ã€‚</p><p>T2 åœ¨æ’å…¥ <code>(7, 7, &#39;ç‹äº”&#39;)</code> æ—¶ï¼Œä¼šè¢«é˜»å¡ï¼Œå¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªä¼šè¯ä¸­æ‰§è¡Œ <code>SHOW ENGINE INNODB STATUS</code> æŸ¥çœ‹åˆ°é—´éš™é”çš„ä¿¡æ¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241215095640.png" alt="äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šé—´éš™é”" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šé—´éš™é”</figcaption></figure><p>æ¨èé˜…è¯»ï¼š<a href="https://www.51cto.com/article/779551.html" target="_blank" rel="noopener noreferrer">å…­ä¸ªæ¡ˆä¾‹ææ‡‚é—´éš™é”</a>ã€<a href="https://blog.csdn.net/javaanddonet/article/details/111187345" target="_blank" rel="noopener noreferrer">MySQLä¸­é—´éš™é”çš„åŠ é”æœºåˆ¶</a></p><h4 id="æ‰§è¡Œä»€ä¹ˆå‘½ä»¤ä¼šåŠ ä¸Šé—´éš™é”" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œä»€ä¹ˆå‘½ä»¤ä¼šåŠ ä¸Šé—´éš™é”"><span>æ‰§è¡Œä»€ä¹ˆå‘½ä»¤ä¼šåŠ ä¸Šé—´éš™é”ï¼Ÿ</span></a></h4><p>åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ‰§è¡Œ FOR UPDATE / LOCK IN SHARE MODE ç­‰åŠ é”è¯­å¥ï¼Œä¸”æŸ¥è¯¢æ¡ä»¶æ˜¯èŒƒå›´æŸ¥è¯¢æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨åŠ ä¸Šé—´éš™é”ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- SELECT ... FOR UPDATE + èŒƒå›´æŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> score </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- SELECT ... LOCK IN SHARE MODE + èŒƒå›´æŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BETWEEN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> LOCK </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">IN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SHARE MODE;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- UPDATE/DELETE + èŒƒå›´æŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DELETE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> score </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šmysqlçš„ä»€ä¹ˆå‘½ä»¤ä¼šåŠ ä¸Šé—´éš™é”</li></ol></blockquote><h3 id="_56-ä¸´é”®é”äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_56-ä¸´é”®é”äº†è§£å—"><span>56.ä¸´é”®é”äº†è§£å—ï¼Ÿ</span></a></h3><p>ä¸´é”®é”æ˜¯è®°å½•é”å’Œé—´éš™é”çš„ç»“åˆä½“ï¼Œé”ä½çš„æ˜¯ç´¢å¼•è®°å½•å’Œç´¢å¼•è®°å½•ä¹‹é—´çš„é—´éš™ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250410121613.png" alt="å°å¾å…ˆç”Ÿçš„ç¼–ç¨‹ä¸–ç•Œï¼šä¸´é”®é”" tabindex="0" loading="lazy"><figcaption>å°å¾å…ˆç”Ÿçš„ç¼–ç¨‹ä¸–ç•Œï¼šä¸´é”®é”</figcaption></figure><p>å’Œé—´éš™é”ä¸åŒï¼Œä¸´é”®é”çš„é—´éš™æ˜¯ä¸€ä¸ª<strong>å·¦å¼€å³é—­åŒºé—´</strong>ã€‚ä¾‹å¦‚ <code>(1,3]</code> è¡¨ç¤ºé”å®šå¤§äº 1 ä¸”å°äºç­‰äº 3 çš„æ‰€æœ‰è®°å½•ã€‚</p><p>å½“ InnoDB æ‰§è¡Œä¸€ä¸ªèŒƒå›´æŸ¥è¯¢æ—¶ï¼Œä¼šä½¿ç”¨ä¸´é”®é”æ¥é”å®šæ»¡è¶³æ¡ä»¶çš„è¡Œæ•°æ®ä»¥åŠè¯¥èŒƒå›´å†…çš„é—´éš™ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411094421.png" alt="IServiseï¼šä¸´é”®é”" tabindex="0" loading="lazy"><figcaption>IServiseï¼šä¸´é”®é”</figcaption></figure><p>æ¯”å¦‚è¯´ä¸‹é¢è¿™æ¡è¯­å¥ä¼šé”å®š id åœ¨ 5 åˆ° 10 ä¹‹é—´çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠè¿™äº›è®°å½•ä¹‹é—´çš„é—´éš™ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BETWEEN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>MySQL é»˜è®¤çš„è¡Œé”ç±»å‹å°±æ˜¯ä¸´é”®é”ã€‚å½“ä½¿ç”¨å”¯ä¸€ç´¢å¼•çš„ç­‰å€¼æŸ¥è¯¢åŒ¹é…åˆ°ä¸€æ¡è®°å½•æ—¶ï¼Œä¸´é”®é”ä¼šé€€åŒ–æˆè®°å½•é”ï¼›å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•è®°å½•ï¼Œä¼šé€€åŒ–æˆé—´éš™é”ã€‚</p><p>memoï¼š2025 å¹´ 4 æœˆ 10 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰å­¦é™¢æœ¬çš„çƒå‹åé¦ˆè¯´</a>ï¼Œæ‹¿åˆ°äº†æ»´æ»´çš„ sp offerï¼ŒçœŸçš„æ— æ•Œå•Šï¼Œå¤ªèƒ½å·äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-ç­‰ä¸€æ‰‹ç»éªŒè´´åˆ†äº«ï¼Œå‘ä¸ªçº¢åŒ…ï¼Œå“ˆå“ˆ.png" alt="çƒå‹å­¦é™¢æœ¬æ‹¿åˆ°äº†æ»´æ»´çš„ SP" tabindex="0" loading="lazy"><figcaption>çƒå‹å­¦é™¢æœ¬æ‹¿åˆ°äº†æ»´æ»´çš„ SP</figcaption></figure><h3 id="_57-æ„å‘é”æ˜¯ä»€ä¹ˆçŸ¥é“å—" tabindex="-1"><a class="header-anchor" href="#_57-æ„å‘é”æ˜¯ä»€ä¹ˆçŸ¥é“å—"><span>57.æ„å‘é”æ˜¯ä»€ä¹ˆçŸ¥é“å—ï¼Ÿ</span></a></h3><p>æ„å‘é”æ˜¯ä¸€ç§è¡¨çº§é”ï¼Œè¡¨ç¤ºäº‹åŠ¡æ‰“ç®—å¯¹è¡¨ä¸­çš„æŸäº›è¡Œæ•°æ®åŠ é”ï¼Œä½†ä¸ä¼šç›´æ¥é”å®šæ•°æ®è¡Œæœ¬èº«ã€‚</p><p>ç”± InnoDB è‡ªåŠ¨ç®¡ç†ï¼Œå½“äº‹åŠ¡éœ€è¦æ·»åŠ è¡Œé”æ—¶ï¼Œä¼šå…ˆåœ¨è¡¨ä¸Šæ·»åŠ æ„å‘é”ã€‚è¿™æ ·å½“è¦æ·»åŠ è¡¨é”çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹è¡¨ä¸Šçš„æ„å‘é”ï¼Œå¿«é€Ÿåˆ¤æ–­æ˜¯å¦æœ‰å†²çªï¼Œè€Œæ— éœ€é€è¡Œæ£€æŸ¥ï¼Œä»è€Œæé«˜åŠ é”æ•ˆç‡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-31f7f49c-1e5a-4d42-b8b3-e022b3ba82ae.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ„å‘é”" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ„å‘é”</figcaption></figure><p>å½“æ‰§è¡Œ <code>SELECT ... LOCK IN SHARE MODE</code> æ—¶ï¼Œä¼šè‡ªåŠ¨åŠ æ„å‘å…±äº«é”ï¼›å½“æ‰§è¡Œ <code>SELECT ... FOR UPDATE</code> æ—¶ï¼Œä¼šè‡ªåŠ¨åŠ æ„å‘æ’ä»–é”ã€‚</p><p>æ„å‘é”ä¹‹é—´äº’ç›¸å…¼å®¹ï¼Œä¹Ÿä¸ä¼šä¸è¡Œé”å†²çªã€‚</p><table><thead><tr><th>å…¼å®¹å…³ç³»</th><th>æ„å‘å…±äº«é”</th><th>æ„å‘æ’ä»–é”</th><th>å…±äº«é”(è¡¨çº§)</th><th>æ‹ä»–é”(è¡¨çº§)</th></tr></thead><tbody><tr><td>æ„å‘å…±äº«é”</td><td>å…¼å®¹</td><td>å…¼å®¹</td><td>å…¼å®¹</td><td>å†²çª</td></tr><tr><td>æ„å‘æ’ä»–é”</td><td>å…¼å®¹</td><td>å…¼å®¹</td><td>å†²çª</td><td>å†²çª</td></tr><tr><td>Sé”</td><td>å…¼å®¹</td><td>å†²çª</td><td>å…¼å®¹</td><td>å†²çª</td></tr><tr><td>Xé”</td><td>å†²çª</td><td>å†²çª</td><td>å†²çª</td><td>å†²çª</td></tr></tbody></table><h4 id="æ„å‘é”çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æ„å‘é”çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ"><span>æ„å‘é”çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h4><p>åœ¨æ²¡æœ‰æ„å‘é”çš„æƒ…å†µä¸‹ï¼Œå½“äº‹åŠ¡ A æŒæœ‰æŸè¡¨çš„è¡Œé”æ—¶ï¼Œå¦‚æœäº‹åŠ¡ B æƒ³æ·»åŠ è¡¨é”ï¼ŒInnoDB å¿…é¡»æ£€æŸ¥è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®æ˜¯å¦è¢«åŠ é”ï¼Œè¿™ç§å…¨è¡¨æ‰«æçš„æ–¹å¼æ•ˆç‡æä½ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411093326.png" alt="IServiseï¼šæ„å‘é”" tabindex="0" loading="lazy"><figcaption>IServiseï¼šæ„å‘é”</figcaption></figure><p>æœ‰äº†æ„å‘é”ä¹‹åï¼Œäº‹åŠ¡åœ¨åŠ è¡Œé”å‰ï¼Œå…ˆåœ¨è¡¨ä¸ŠåŠ å¯¹åº”çš„æ„å‘é”ï¼›å…¶ä»–äº‹åŠ¡åŠ è¡¨é”æ—¶ï¼Œåªéœ€æ£€æŸ¥è¡¨ä¸Šçš„æ„å‘é”ï¼Œæ— éœ€é€è¡Œæ£€æŸ¥ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- äº‹åŠ¡Aè·å–æŸè¡Œçš„æ’ä»–é”</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è‡ªåŠ¨åŠ IXé”å’Œè¡ŒXé”</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- äº‹åŠ¡Bå°è¯•åŠ è¡¨é”</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">LOCK TABLES users </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">READ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å‘ç°è¡¨ä¸Šæœ‰IXé”ï¼Œä¸Sé”å†²çªï¼Œç›´æ¥é˜»å¡è€Œæ— éœ€æ‰«æå…¨è¡¨</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>memoï¼š2025 å¹´ 4 æœˆ 11 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æ‹¿åˆ°æ»´æ»´ offer çš„çƒå‹åé¦ˆ</a>ï¼ŒMQ éƒ¨åˆ†ä¸»è¦çœ‹çš„é¢æ¸£é€†è¢­ï¼Œæ¯”è¾ƒå…¨ï¼Œè¿™ä¸ï¼Œå£ç¢‘å°±æ¥äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-ä¸»è¦æˆ‘çœ‹çš„å‡ ä¸ªå…«è‚¡éƒ½æ˜¯ç»“åˆèµ·æ¥çš„.png" alt="çƒå‹ç»™é¢æ¸£é€†è¢­ä¸Šäº†å£ç¢‘" tabindex="0" loading="lazy"><figcaption>çƒå‹ç»™é¢æ¸£é€†è¢­ä¸Šäº†å£ç¢‘</figcaption></figure><h3 id="_58-ğŸŒŸmysqlçš„ä¹è§‚é”å’Œæ‚²è§‚é”äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_58-ğŸŒŸmysqlçš„ä¹è§‚é”å’Œæ‚²è§‚é”äº†è§£å—"><span>58.ğŸŒŸMySQLçš„ä¹è§‚é”å’Œæ‚²è§‚é”äº†è§£å—ï¼Ÿ</span></a></h3><p>æ‚²è§‚é”æ˜¯ä¸€ç§&quot;å…ˆä¸Šé”å†æ“ä½œ&quot;çš„ä¿å®ˆç­–ç•¥ï¼Œå®ƒå‡è®¾æ•°æ®è¢«å¤–ç•Œè®¿é—®æ—¶å¿…ç„¶ä¼šäº§ç”Ÿå†²çªï¼Œå› æ­¤åœ¨æ•°æ®å¤„ç†è¿‡ç¨‹ä¸­å…¨ç¨‹åŠ é”ï¼Œä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411092155.png" alt="ç‰§å°å†œï¼šæ‚²è§‚é”" tabindex="0" loading="lazy"><figcaption>ç‰§å°å†œï¼šæ‚²è§‚é”</figcaption></figure><p>MySQL ä¸­çš„è¡Œé”å’Œè¡¨é”éƒ½æ˜¯æ‚²è§‚é”ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411092536.png" alt="ç‰§å°å†œï¼šæ‚²è§‚é”çš„å¤„ç†æ€è·¯" tabindex="0" loading="lazy"><figcaption>ç‰§å°å†œï¼šæ‚²è§‚é”çš„å¤„ç†æ€è·¯</figcaption></figure><p>ä¹è§‚é”ä¼šå‡è®¾å¹¶å‘æ“ä½œä¸ä¼šæ€»å‘ç”Ÿå†²çªï¼Œå±äºå°æ¦‚ç‡äº‹ä»¶ï¼Œå› æ­¤ä¸ä¼šåœ¨è¯»å–æ•°æ®æ—¶åŠ é”ï¼Œè€Œæ˜¯åœ¨æäº¤æ›´æ–°æ—¶æ‰æ£€æŸ¥æ•°æ®æ˜¯å¦è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹è¿‡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411092610.png" alt="ç‰§å°å†œï¼šä¹è§‚é”" tabindex="0" loading="lazy"><figcaption>ç‰§å°å†œï¼šä¹è§‚é”</figcaption></figure><p>ä¹è§‚é”å¹¶ä¸æ˜¯ MySQL å†…ç½®çš„é”æœºåˆ¶ï¼Œè€Œæ˜¯é€šè¿‡ç¨‹åºé€»è¾‘å®ç°çš„ï¼Œå¸¸è§çš„å®ç°æ–¹å¼æœ‰ç‰ˆæœ¬å·æœºåˆ¶å’Œæ—¶é—´æˆ³æœºåˆ¶ã€‚é€šè¿‡åœ¨è¡¨ä¸­å¢åŠ  version å­—æ®µæˆ–è€… timestamp å­—æ®µæ¥å®ç°ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>å½“äº‹åŠ¡ A å·²ç»ä¸Šé”åï¼Œäº‹åŠ¡ B ä¼šä¸€ç›´ç­‰å¾…äº‹åŠ¡ A é‡Šæ”¾é”ï¼›å¦‚æœäº‹åŠ¡ A é•¿æ—¶é—´ä¸é‡Šæ”¾é”ï¼Œäº‹åŠ¡ B å°±ä¼šæŠ¥é”™ <code>Lock wait timeout exceeded; try restarting transaction</code>ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411094551.png" alt="ç‰§å°å†œï¼šçš„å®ç°æ–¹å¼" tabindex="0" loading="lazy"><figcaption>ç‰§å°å†œï¼šçš„å®ç°æ–¹å¼</figcaption></figure><p>äº‹åŠ¡ A å’Œäº‹åŠ¡ B åŒæ—¶è¯»å–åŒä¸€ä¸ªä¸»é”® ID çš„æ•°æ®ï¼Œç‰ˆæœ¬å·ä¸º 0ï¼›äº‹åŠ¡ A å°†ç‰ˆæœ¬å·ï¼ˆversion=1ï¼‰ä½œä¸ºæ¡ä»¶è¿›è¡Œæ•°æ®æ›´æ–°ï¼ŒåŒæ—¶ç‰ˆæœ¬å· +1ï¼›äº‹åŠ¡ B ä¹Ÿå°† version=1 ä½œä¸ºæ›´æ–°æ¡ä»¶ï¼Œå‘ç°ç‰ˆæœ¬å·ä¸åŒ¹é…ï¼Œæ›´æ–°å¤±è´¥ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411094932.png" alt="ç‰§å°å†œï¼šä¹è§‚é”çš„å®ç°æ–¹å¼" tabindex="0" loading="lazy"><figcaption>ç‰§å°å†œï¼šä¹è§‚é”çš„å®ç°æ–¹å¼</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><h4 id="å¦‚ä½•é€šè¿‡æ‚²è§‚é”å’Œä¹è§‚é”è§£å†³åº“å­˜è¶…å–é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•é€šè¿‡æ‚²è§‚é”å’Œä¹è§‚é”è§£å†³åº“å­˜è¶…å–é—®é¢˜"><span>å¦‚ä½•é€šè¿‡æ‚²è§‚é”å’Œä¹è§‚é”è§£å†³åº“å­˜è¶…å–é—®é¢˜ï¼Ÿ</span></a></h4><p>æ‚²è§‚é”é€šè¿‡ <code>SELECT ... FOR UPDATE</code> åœ¨æŸ¥è¯¢æ—¶ç›´æ¥é”å®šè®°å½•ï¼Œç¡®ä¿å…¶ä»–äº‹åŠ¡å¿…é¡»ç­‰å¾…å½“å‰äº‹åŠ¡å®Œæˆæ‰èƒ½æ“ä½œè¯¥è¡Œæ•°æ®ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¯¹id=1çš„å•†å“è®°å½•åŠ æ’ä»–é”</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> stock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> products </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç”Ÿæˆè®¢å•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders (user_id, product_id) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">123</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ‰£å‡åº“å­˜</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> products </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> stock</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">stock-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹è§‚é”é€šè¿‡åœ¨è¡¨ä¸­å¢åŠ  version å­—æ®µä½œä¸ºåˆ¤æ–­æ¡ä»¶ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œè·å–ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> stock, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">version</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> products </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ›´æ–°åº“å­˜æ—¶æ£€æŸ¥ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> products </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> stock</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">stock-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">+</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">æ—§ç‰ˆæœ¬å·;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>åº“å­˜è¶…å–æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„é—®é¢˜ï¼š</p><ul><li>äº‹åŠ¡AæŸ¥è¯¢å•†å“åº“å­˜ï¼Œå¾—åˆ°åº“å­˜å€¼ä¸º1</li><li>äº‹åŠ¡Bä¹ŸæŸ¥è¯¢åŒä¸€å•†å“åº“å­˜ï¼ŒåŒæ ·å¾—åˆ°åº“å­˜å€¼ä¸º1</li><li>äº‹åŠ¡AåŸºäºæŸ¥è¯¢ç»“æœæ‰§è¡Œåº“å­˜æ‰£å‡ï¼Œå°†åº“å­˜æ›´æ–°ä¸º0</li><li>äº‹åŠ¡Bä¹Ÿæ‰§è¡Œåº“å­˜æ‰£å‡ï¼Œå°†åº“å­˜æ›´æ–°ä¸º-1</li></ul><p>æ‚²è§‚é”çš„å…³é”®ç‚¹ï¼š</p><ul><li>å¿…é¡»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œï¼›</li><li>é€šè¿‡ <code>SELECT ... FOR UPDATE</code> é”å®šè¡Œï¼Œç¡®ä¿å…¶ä»–äº‹åŠ¡å¿…é¡»ç­‰å¾…å½“å‰äº‹åŠ¡å®Œæˆæ‰èƒ½æ“ä½œè¯¥è¡Œæ•°æ®ï¼›</li><li>è®°å¾—ç»™æŸ¥è¯¢æ¡ä»¶åŠ ç´¢å¼•ï¼Œé¿å…å…¨è¡¨æ‰«æå¯¼è‡´é”å‡çº§ä¸ºè¡¨é”ã€‚</li></ul><p>ä¹è§‚é”çš„å…³é”®ç‚¹ï¼š</p><ul><li>åœ¨è¡¨ä¸­å¢åŠ  version å­—æ®µï¼›</li><li>æŸ¥è¯¢æ—¶è·å–å½“å‰ç‰ˆæœ¬å·ï¼›</li><li>æ›´æ–°æ—¶æ£€æŸ¥ç‰ˆæœ¬å·æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚</li></ul><p>Java ç¨‹åºçš„å®Œæ•´ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ProductService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ProductMapper</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> productMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> purchaseWithOptimisticLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> productId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> quantity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> retryCount</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(retryCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æœ€å¤§é‡è¯•æ¬¡æ•°</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Product</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> product</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> productMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">selectById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(productId);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">product</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getStock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> quantity) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// åº“å­˜ä¸è¶³</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> updated</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> productMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">reduceStockWithVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                productId, quantity, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">product</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(updated </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ›´æ–°æˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            retryCount++;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æ›´æ–°å¤±è´¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„ mapperï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Update</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;UPDATE products SET stock=stock-#{quantity}, version=version+1 &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;WHERE id=#{productId} AND version=#{version}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> reduceStockWithVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Param</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;productId&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> productId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                          @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Param</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;quantity&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> quantity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                          @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Param</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;version&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> version)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ—¶é—´æˆ³æœºåˆ¶å®ç°çš„ä¹è§‚é”ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> products </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> stock</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">stock-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, update_time</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOW</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> update_time</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">æ—§æ—¶é—´æˆ³;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸¤ç§æ–¹å¼éƒ½éœ€è¦ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œéœ€è¦å°†å¤šä¸ª SQL æ”¾åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œã€‚</p><p>æ¨èé˜…è¯»ï¼š<a href="https://www.cnblogs.com/mingyueyy/p/13049431.html" target="_blank" rel="noopener noreferrer">ç‰§å°å†œï¼šæ‚²è§‚é”å’Œä¹è§‚é”</a></p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šä¹è§‚é”å’Œæ‚²è§‚é”ï¼Œåº“å­˜çš„è¶…å–é—®é¢˜çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¹è§‚é”ä¸æ‚²è§‚é”</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 12 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹åé¦ˆè¯´</a>ï¼Œäº¬ä¸œè¿›å…¥ HR é¢äº†ï¼Œä½†åŠ äº†ä¸€ä¸ª VP çº§åˆ«çš„é¢è¯•ï¼Œå‰¯æ€»ç›‘ï¼Œç­‰ä¸€æ‰‹ä»–çš„å¥½æ¶ˆæ¯ã€‚å½“ç„¶äº†ï¼Œä»ç„¶ä¸å¿˜æ„Ÿè°¢ä¸€ä¸‹é¢æ¸£é€†è¢­å¯¹ä»–çš„å¸®åŠ©ï¼Œå“ˆå“ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250411101319.png" alt="çƒå‹è¿›å…¥äº¬ä¸œçš„ HR é¢äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹è¿›å…¥äº¬ä¸œçš„ HR é¢äº†</figcaption></figure><h3 id="_59-é‡åˆ°è¿‡mysqlæ­»é”é—®é¢˜å—-ä½ æ˜¯å¦‚ä½•è§£å†³çš„" tabindex="-1"><a class="header-anchor" href="#_59-é‡åˆ°è¿‡mysqlæ­»é”é—®é¢˜å—-ä½ æ˜¯å¦‚ä½•è§£å†³çš„"><span>59.é‡åˆ°è¿‡MySQLæ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</span></a></h3><p>é‡åˆ°è¿‡ã€‚MySQL çš„æ­»é”æ˜¯ç”±äºå¤šä¸ªäº‹åŠ¡æŒæœ‰èµ„æºå¹¶ç›¸äº’ç­‰å¾…å¼•èµ·çš„ã€‚æˆ‘é€šè¿‡ <code>SHOW ENGINE INNODB STATUS</code> æŸ¥çœ‹æ­»é”ä¿¡æ¯ï¼Œå®šä½åˆ°æ˜¯åŠ é”é¡ºåºä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œæœ€åé€šè¿‡è°ƒæ•´åŠ é”é¡ºåºè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413095712.png" alt="draven.coï¼šæ­»é”çš„å‘ç”Ÿ" tabindex="0" loading="lazy"><figcaption>draven.coï¼šæ­»é”çš„å‘ç”Ÿ</figcaption></figure><p>æ¯”å¦‚è¯´<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œä¸¤ä¸ªäº‹åŠ¡åˆ†åˆ«æ›´æ–°ä¸¤å¼ è¡¨ï¼Œä½†æ˜¯æ›´æ–°é¡ºåºä¸ä¸€è‡´ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åˆ›å»ºè¡¨/æ’å…¥æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> account</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    balance </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> account (balance) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- äº‹åŠ¡ 1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- é”ä½ id=1 çš„è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> account </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance - </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç­‰å¾…é”ä½ id=2 çš„è¡Œï¼ˆäº‹åŠ¡ 2 å·²é”ä½ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> account </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- äº‹åŠ¡ 2</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- é”ä½ id=2 çš„è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> account </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance - </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç­‰å¾…é”ä½ id=1 çš„è¡Œï¼ˆäº‹åŠ¡ 1 å·²é”ä½ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> account </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¿é—®ç›¸åŒçš„èµ„æºï¼Œä½†é¡ºåºä¸åŒï¼Œå°±ä¼šå¯¼è‡´æ­»é”ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241201101426.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ­»é”" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ­»é”</figcaption></figure><p>è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œå…ˆä½¿ç”¨ <code>SHOW ENGINE INNODB STATUS\G;</code> ç¡®è®¤æ­»é”çš„å…·ä½“ä¿¡æ¯ï¼Œç„¶åè°ƒæ•´èµ„æºçš„è®¿é—®é¡ºåºã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241201101704.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæŸ¥çœ‹æ­»é”" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæŸ¥çœ‹æ­»é”</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è™¾çš®é¢ç»åŒå­¦ 13 ä¸€é¢é¢è¯•åŸé¢˜ï¼šé‡åˆ°è¿‡mysqlæ­»é”æˆ–è€…æ•°æ®ä¸å®‰å…¨å—</li></ol></blockquote><!----><h2 id="äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡"><span>äº‹åŠ¡</span></a></h2><h3 id="_60-ğŸŒŸmysqläº‹åŠ¡çš„å››å¤§ç‰¹æ€§è¯´ä¸€ä¸‹" tabindex="-1"><a class="header-anchor" href="#_60-ğŸŒŸmysqläº‹åŠ¡çš„å››å¤§ç‰¹æ€§è¯´ä¸€ä¸‹"><span>60.ğŸŒŸMySQLäº‹åŠ¡çš„å››å¤§ç‰¹æ€§è¯´ä¸€ä¸‹ï¼Ÿ</span></a></h3><p>äº‹åŠ¡æ˜¯ä¸€æ¡æˆ–å¤šæ¡ SQL è¯­å¥ç»„æˆçš„æ‰§è¡Œå•å…ƒã€‚å››ä¸ªç‰¹æ€§åˆ†åˆ«æ˜¯åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ã€‚åŸå­æ€§ä¿è¯äº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œã€è¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼›ä¸€è‡´æ€§ä¿è¯æ•°æ®ä»äº‹åŠ¡å¼€å§‹å‰çš„ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬ç§»åˆ°ç»“æŸåçš„å¦å¤–ä¸€ä¸ªä¸€è‡´çŠ¶æ€ï¼›éš”ç¦»æ€§ä¿è¯å¹¶å‘äº‹åŠ¡ä¹‹é—´äº’ä¸å¹²æ‰°ï¼›æŒä¹…æ€§ä¿è¯äº‹åŠ¡æäº¤åæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413102346.png" alt="åŒ—é‡æ–°æ´¥ï¼šACID" tabindex="0" loading="lazy"><figcaption>åŒ—é‡æ–°æ´¥ï¼šACID</figcaption></figure><h4 id="è¯¦ç»†è¯´ä¸€ä¸‹åŸå­æ€§" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è¯´ä¸€ä¸‹åŸå­æ€§"><span>è¯¦ç»†è¯´ä¸€ä¸‹åŸå­æ€§ï¼Ÿ</span></a></h4><p>åŸå­æ€§æ„å‘³ç€äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œå®ƒæ˜¯ä¸å¯åˆ†å‰²çš„å•ä½ã€‚å¦‚æœäº‹åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªæ“ä½œå¤±è´¥äº†ï¼Œæ•´ä¸ªäº‹åŠ¡éƒ½ä¼šå›æ»šåˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰çš„çŠ¶æ€ï¼Œå¦‚åŒè¿™äº›æ“ä½œä»æœªè¢«æ‰§è¡Œè¿‡ä¸€æ ·ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance - </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¦‚æœç¬¬äºŒæ¡è¯­å¥å¤±è´¥ï¼Œç¬¬ä¸€æ¡ä¹Ÿä¼šå›æ»š</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç®€çŸ­å›ç­”ï¼šåŸå­æ€§è¦æ±‚äº‹åŠ¡çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼Œå¯¹äºä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ“ä½œä¸èƒ½åªæ‰§è¡Œå…¶ä¸­ä¸€éƒ¨åˆ†ã€‚</p><h4 id="è¯¦ç»†è¯´ä¸€ä¸‹ä¸€è‡´æ€§" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è¯´ä¸€ä¸‹ä¸€è‡´æ€§"><span>è¯¦ç»†è¯´ä¸€ä¸‹ä¸€è‡´æ€§ï¼Ÿ</span></a></h4><p>ä¸€è‡´æ€§ç¡®ä¿äº‹åŠ¡ä»ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚</p><p>æ¯”å¦‚åœ¨é“¶è¡Œè½¬è´¦äº‹åŠ¡ä¸­ï¼Œæ— è®ºå‘ç”Ÿä»€ä¹ˆï¼Œè½¬è´¦å‰åä¸¤ä¸ªè´¦æˆ·çš„æ€»é‡‘é¢åº”ä¿æŒä¸å˜ã€‚å‡å¦‚ A è´¦æˆ·ï¼ˆ100 å—ï¼‰ç»™ B è´¦æˆ·ï¼ˆ10 å—ï¼‰è½¬äº† 10 å—é’±ï¼Œä¸ç®¡æˆåŠŸä¸å¦ï¼ŒA å’Œ B çš„æ€»é‡‘é¢éƒ½æ˜¯ 110 å—ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å‡è®¾ A è´¦æˆ·ä½™é¢ä¸º 100ï¼ŒB è´¦æˆ·ä½™é¢ä¸º 10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è½¬è´¦å‰çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;A&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 100</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;B&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è½¬è´¦æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance - </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;A&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;B&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- è½¬è´¦åçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;A&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 90</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;B&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 20`</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ€»é‡‘é¢ä»ç„¶æ˜¯ 110</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç®€çŸ­å›ç­”ï¼šä¸€è‡´æ€§ç¡®ä¿æ•°æ®çš„çŠ¶æ€ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬å˜ä¸ºå¦ä¸€ä¸ªä¸€è‡´çŠ¶æ€ã€‚ä¸€è‡´æ€§ä¸ä¸šåŠ¡è§„åˆ™æœ‰å…³ï¼Œæ¯”å¦‚é“¶è¡Œè½¬è´¦ï¼Œä¸è®ºäº‹åŠ¡æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œè½¬è´¦åŒæ–¹çš„æ€»é‡‘é¢åº”è¯¥æ˜¯ä¸å˜çš„ã€‚</p><h4 id="è¯¦ç»†è¯´ä¸€ä¸‹éš”ç¦»æ€§" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è¯´ä¸€ä¸‹éš”ç¦»æ€§"><span>è¯¦ç»†è¯´ä¸€ä¸‹éš”ç¦»æ€§ï¼Ÿ</span></a></h4><p>éš”ç¦»æ€§æ„å‘³ç€å¹¶å‘æ‰§è¡Œçš„äº‹åŠ¡æ˜¯å½¼æ­¤éš”ç¦»çš„ï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸ä¼šè¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ã€‚äº‹åŠ¡ä¹‹é—´æ˜¯äº•æ°´ä¸çŠ¯æ²³æ°´çš„ã€‚</p><p>éš”ç¦»æ€§ä¸»è¦æ˜¯ä¸ºäº†è§£å†³äº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶å¯èƒ½å‡ºç°çš„è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ç­‰é—®é¢˜ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>æ¯”å¦‚è¯´åœ¨è¯»æœªæäº¤çš„éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¼šå‡ºç°è„è¯»ç°è±¡ï¼šä¸€ä¸ªäº‹åŠ¡C è¯»å–äº†äº‹åŠ¡B å°šæœªæäº¤çš„ä¿®æ”¹æ•°æ®ã€‚å¦‚æœäº‹åŠ¡B æœ€ç»ˆå›æ»šï¼Œäº‹åŠ¡C è¯»å–çš„æ•°æ®å°±æ˜¯æ— æ•ˆçš„â€œè„æ•°æ®â€ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ A</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åˆ›å»ºæ¨¡æ‹Ÿå¹¶å‘çš„æµ‹è¯•è¡¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DROP</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> IF</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> EXISTS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> accounts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    balance </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DECIMAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ’å…¥æµ‹è¯•æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, balance) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å¼ ä¸‰&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æå››&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯B ä¸­ï¼Œè®¾ç½®éš”ç¦»çº§åˆ«ä¸ºè¯»æœªæäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UNCOMMITTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åœ¨ä¼šè¯ B ä¸­æ›´æ–°æ•°æ®ä½†ä¸æäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance - </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">500</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯C æ˜¯è¯»ä¸ºæäº¤çº§åˆ«ï¼Œè¯»å–æ•°æ®ï¼Œå¾—åˆ° 500</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UNCOMMITTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ç»§ç»­åˆ«çš„æ“ä½œï¼ŒåŸºäº 500</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B çš„äº‹åŠ¡å›æ»šï¼Œå¯¼è‡´ä¼šè¯ A è¯»åˆ°çš„æ•°æ®å…¶å®æ˜¯è„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ROLLBACK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413155703.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè¯»æœªæäº¤ä¸‹å‡ºç°è„è¯»" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè¯»æœªæäº¤ä¸‹å‡ºç°è„è¯»</figcaption></figure><p>é€šè¿‡å‡çº§éš”ç¦»çº§åˆ«ä¸ºè¯»å·²æäº¤å¯ä»¥è§£å†³è„è¯»çš„é—®é¢˜ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¿®æ”¹ä¸ºè¯»å·²æäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> COMMITTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ‰§è¡Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ 1000</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C ä¸­ï¼Œè®¾ç½®éš”ç¦»çº§åˆ«ä¸ºè¯»å·²æäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> COMMITTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åœ¨ä¼šè¯ C ä¸­æ›´æ–°æ•°æ®ä½†ä¸æäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¸­å†æ¬¡è¯»å–æ•°æ®ï¼Œç»“æœä»ç„¶ä¸º 1000</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C ä¸­å›æ»šäº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ROLLBACK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¸­å†æ¬¡è¯»å–æ•°æ®ï¼Œç»“æœä»ç„¶ä¸º 1000</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413160617.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè¯»å·²æäº¤å¯ä»¥è§£å†³è„è¯»é—®é¢˜" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè¯»å·²æäº¤å¯ä»¥è§£å†³è„è¯»é—®é¢˜</figcaption></figure><p>ä½†ä¼šå‡ºç°ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼šäº‹åŠ¡B ç¬¬ä¸€æ¬¡è¯»å–æŸè¡Œæ•°æ®å€¼ä¸ºXï¼ŒæœŸé—´äº‹åŠ¡Cä¿®æ”¹è¯¥æ•°æ®ä¸ºYå¹¶æäº¤ï¼Œäº‹åŠ¡B å†æ¬¡è¯»å–æ—¶å‘ç°å€¼å˜ä¸ºYï¼Œå¯¼è‡´ä¸¤æ¬¡è¯»å–ç»“æœä¸ä¸€è‡´ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¿®æ”¹ä¸ºè¯»å·²æäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> COMMITTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ‰§è¡Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ 1000</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C ä¸­ï¼Œè®¾ç½®éš”ç¦»çº§åˆ«ä¸ºè¯»å·²æäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> COMMITTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åœ¨ä¼šè¯ C ä¸­æ›´æ–°æ•°æ®å¹¶æäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C æäº¤äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¸­å†æ¬¡è¯»å–æ•°æ®ï¼Œç»“æœä»ç„¶ä¸º 1200</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413162654.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè¯»å·²æäº¤ä¼šå‡ºç°ä¸å¯é‡å¤è¯»çš„é—®é¢˜" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè¯»å·²æäº¤ä¼šå‡ºç°ä¸å¯é‡å¤è¯»çš„é—®é¢˜</figcaption></figure><p>å¯ä»¥é€šè¿‡å‡çº§éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»æ¥è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¿®æ”¹ä¸ºå¯é‡å¤è¯»</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> REPEATABLE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- å¼€å§‹äº‹åŠ¡å¹¶æ‰§è¡Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ 1000</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C ä¸­ï¼Œè®¾ç½®éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> REPEATABLE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åœ¨ä¼šè¯ C ä¸­æ›´æ–°æ•°æ®å¹¶æäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C æäº¤äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¸­å†æ¬¡è¯»å–æ•°æ®ï¼Œç»“æœä»ç„¶ä¸º 1000</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413162908.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯é‡å¤è¯»çº§åˆ«è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯é‡å¤è¯»çº§åˆ«è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜</figcaption></figure><p>ä½†å¯é‡å¤è¯»çº§åˆ«ä¸‹ä»ç„¶ä¼šå‡ºç°å¹»è¯»çš„é—®é¢˜ï¼šäº‹åŠ¡B ç¬¬ä¸€æ¬¡æŸ¥è¯¢è·å¾— 2æ¡æ•°æ®ï¼Œäº‹åŠ¡C æ–°å¢ 1æ¡æ•°æ®å¹¶æäº¤åï¼Œäº‹åŠ¡B å†æ¬¡æŸ¥è¯¢æ—¶ä»ç„¶ä¸º 2 æ¡æ•°æ®ï¼Œä½†å¯ä»¥æ›´æ–°æ–°å¢çš„æ•°æ®ï¼Œå†æ¬¡æŸ¥è¯¢æ—¶å°±å‘ç°æœ‰ 3 æ¡æ•°æ®äº†ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¿®æ”¹ä¸ºå¯é‡å¤è¯»</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> REPEATABLE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ‰§è¡Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼ŒæŸ¥åˆ° 2 æ¡è®°å½•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C ä¸­ï¼Œè®¾ç½®éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> REPEATABLE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åœ¨ä¼šè¯ C ä¸­æ–°å¢æ•°æ®å¹¶æäº¤</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, balance) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äº”&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C æäº¤äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¸­å†æ¬¡è¯»å–æ•°æ®ï¼Œç»“æœä»ç„¶ä¸º 2 æ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¸­å°è¯•æ›´æ–°ç‹äº”çš„ä½™é¢ä¸º 5000ï¼Œç«Ÿç„¶æˆåŠŸäº†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5000</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äº”&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¸­å†æ¬¡è¯»å–æ•°æ®ï¼Œå‘ç° 3 æ¡è®°å½•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413171035.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯é‡å¤è¯»çº§åˆ«ä¸‹å¯èƒ½å‡ºç°å¹»è¯»" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯é‡å¤è¯»çº§åˆ«ä¸‹å¯èƒ½å‡ºç°å¹»è¯»</figcaption></figure><p>å¯ä»¥é€šè¿‡å‡çº§éš”ç¦»çº§åˆ«ä¸ºä¸²è¡ŒåŒ–æ¥è§£å†³å¹»è¯»çš„é—®é¢˜ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¿®æ”¹ä¸ºå¯ä¸²è¡ŒåŒ–</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SERIALIZABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ‰§è¡Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼ŒæŸ¥åˆ° 2 æ¡è®°å½•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C ä¸­ï¼Œè®¾ç½®éš”ç¦»çº§åˆ«ä¸ºå¯ä¸²è¡ŒåŒ–</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SESSION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SERIALIZABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åœ¨ä¼šè¯ C ä¸­æ–°å¢æ•°æ®ï¼Œä¼šå¡ä½</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, balance) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç‹äº”&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åªæœ‰ç­‰ä¼šè¯ B æäº¤äº‹åŠ¡åä¼šè¯ C æ‰ä¼šç»§ç»­æ‰§è¡Œå¹¶æäº¤äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413171627.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«ä¸‹ä¸ä¼šå‡ºç°å¹»è¯»é—®é¢˜" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«ä¸‹ä¸ä¼šå‡ºç°å¹»è¯»é—®é¢˜</figcaption></figure><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>æ˜¯å¦ä¼šè„è¯»</th><th>æ˜¯å¦ä¼šä¸å¯é‡å¤è¯»</th><th>æ˜¯å¦ä¼šå¹»è¯»</th></tr></thead><tbody><tr><td>Read Uncommittedï¼ˆè¯»æœªæäº¤ï¼‰</td><td>âœ… å¯èƒ½</td><td>âœ… å¯èƒ½</td><td>âœ… å¯èƒ½</td></tr><tr><td>Read Committedï¼ˆè¯»å·²æäº¤ï¼‰</td><td>âŒ ä¸ä¼š</td><td>âœ… å¯èƒ½</td><td>âœ… å¯èƒ½</td></tr><tr><td>Repeatable Readï¼ˆå¯é‡å¤è¯»ï¼‰</td><td>âŒ ä¸ä¼š</td><td>âŒ ä¸ä¼š</td><td>âœ… å¯èƒ½ï¼ˆä½† InnoDB å·²è§£å†³ï¼‰</td></tr><tr><td>Serializableï¼ˆå¯ä¸²è¡ŒåŒ–ï¼‰</td><td>âŒ ä¸ä¼š</td><td>âŒ ä¸ä¼š</td><td>âŒ ä¸ä¼š</td></tr></tbody></table><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä¸èƒŒ ----</p><p>ç®€çŸ­å›ç­”ï¼šå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´éœ€è¦ç›¸äº’éš”ç¦»ï¼Œå³ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ã€‚</p><h4 id="è¯¦ç»†è¯´ä¸€ä¸‹æŒä¹…æ€§" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è¯´ä¸€ä¸‹æŒä¹…æ€§"><span>è¯¦ç»†è¯´ä¸€ä¸‹æŒä¹…æ€§ï¼Ÿ</span></a></h4><p>æŒä¹…æ€§ç¡®ä¿äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®æ‰€åšçš„æ›´æ”¹å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå³ä½¿ç³»ç»Ÿå‘ç”Ÿå´©æºƒï¼Œæ•°æ®ä¹Ÿèƒ½æ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡æäº¤çš„çŠ¶æ€ã€‚</p><p>MySQL çš„æŒä¹…æ€§æ˜¯é€šè¿‡ InnoDB å¼•æ“çš„ redo log å®ç°çš„ã€‚åœ¨äº‹åŠ¡æäº¤æ—¶ï¼ŒInnoDB ä¼šå…ˆå°†ä¿®æ”¹æ“ä½œå†™å…¥ redo logï¼Œå¹¶åˆ·ç›˜æŒä¹…åŒ–ã€‚å´©æºƒåï¼ŒInnoDB ä¼šé€šè¿‡ redo log æ¢å¤æ•°æ®ï¼Œä»è€Œä¿è¯äº‹åŠ¡æäº¤æˆåŠŸçš„æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413172141.png" alt="Mayank Sharmaï¼šå¯æŒä¹…åŒ–" tabindex="0" loading="lazy"><figcaption>Mayank Sharmaï¼šå¯æŒä¹…åŒ–</figcaption></figure><p>ç®€çŸ­å›ç­”ï¼šä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œåˆ™å…¶æ‰€åšçš„ä¿®æ”¹å°†æ°¸ä¹…ä¿å­˜åˆ° MySQL ä¸­ã€‚å³ä½¿å‘ç”Ÿç³»ç»Ÿå´©æºƒï¼Œä¿®æ”¹çš„æ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šäº‹åŠ¡çš„å››ä¸ªç‰¹æ€§ï¼Œæ€ä¹ˆç†è§£äº‹åŠ¡ä¸€è‡´æ€§</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 16 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL äº‹åŠ¡æ˜¯ä»€ä¹ˆï¼Œé»˜è®¤éš”ç¦»çº§åˆ«ï¼Œä»€ä¹ˆæ˜¯å¯é‡å¤è¯»ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 23 QQ åå°æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL äº‹åŠ¡ï¼Œéš”ç¦»çº§åˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä»€ä¹ˆæ˜¯æ•°æ®åº“äº‹åŠ¡ï¼Ÿäº‹åŠ¡çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ OPPO é¢ç»åŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šå¯¹MySQLäº‹åŠ¡çš„ç†è§£</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„vivo é¢ç»åŒå­¦ 10 æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡çš„æ¦‚å¿µ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡ACID</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨åŒå­¦ 17 åç«¯æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šä»€ä¹ˆæ˜¯äº‹åŠ¡ äº‹åŠ¡ä¸ºä»€ä¹ˆè¦æœ‰éš”ç¦»çº§åˆ« å¹»è¯»æ˜¯ä»€ä¹ˆ ä»€ä¹ˆæ—¶å€™è¦è§£å†³å¹»è¯» ä»€ä¹ˆæ—¶å€™ä¸ç”¨è§£å†³</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦19ç•ªèŒ„å°è¯´ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQLä¸­çš„äº‹åŠ¡</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 13 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©ç»™<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œå‘ç°è¿™ç§å½©è™¹å±çœŸçš„ç¦»è°±äº†ï¼Œç›´æ¥é…äº«å¤ªåº™äº†ï¼Œä½†æœ‰ä¸€è¯´ä¸€è¿™ä½çƒå‹çš„è¯æ˜¯çœŸçš„ç”œï¼Œç®€å†å†™çš„ç¡®å®ä¹Ÿå¾ˆç”¨å¿ƒäº†ï¼Œç¡®å®šä¸€ä¸ª offer æ”¶å‰²æœºã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-äºŒå“¥æ‚¨å¥½ï¼Œéº»çƒ¦æ‚¨å¸®å¿™æ”¹ä¸€ä¸‹ç®€å†ï¼ŒäºŒå“¥çœŸæ˜¯é…äº«å¤ªåº™çš„ç”·äºº.png" alt="çƒå‹çš„å½©è™¹å±çœŸçš„å¤ªçŒ›äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹çš„å½©è™¹å±çœŸçš„å¤ªçŒ›äº†</figcaption></figure><h3 id="_61-acid-é ä»€ä¹ˆä¿è¯çš„å‘¢" tabindex="-1"><a class="header-anchor" href="#_61-acid-é ä»€ä¹ˆä¿è¯çš„å‘¢"><span>61.ACID é ä»€ä¹ˆä¿è¯çš„å‘¢ï¼Ÿ</span></a></h3><p>ä¸€å¥è¯æ€»ç»“ï¼š</p><p>ACID ä¸­çš„åŸå­æ€§ä¸»è¦é€šè¿‡ Undo Log æ¥å®ç°ï¼ŒæŒä¹…æ€§é€šè¿‡ Redo Log æ¥å®ç°ï¼Œéš”ç¦»æ€§ç”± MVCC å’Œé”æœºåˆ¶æ¥å®ç°ï¼Œä¸€è‡´æ€§åˆ™ç”±å…¶ä»–ä¸‰å¤§ç‰¹æ€§å…±åŒä¿è¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20230919103025.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šACID çš„ä¿è¯æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šACID çš„ä¿è¯æœºåˆ¶</figcaption></figure><h4 id="è¯¦ç»†è¯´è¯´å¦‚ä½•ä¿è¯åŸå­æ€§" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è¯´è¯´å¦‚ä½•ä¿è¯åŸå­æ€§"><span>è¯¦ç»†è¯´è¯´å¦‚ä½•ä¿è¯åŸå­æ€§ï¼Ÿ</span></a></h4><p>äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹å‰ï¼Œä¼šè®°å½•ä¸€ä»½å¿«ç…§åˆ° Undo Logï¼Œå¦‚æœäº‹åŠ¡ä¸­æœ‰ä»»ä½•ä¸€æ­¥æ‰§è¡Œå¤±è´¥ï¼Œç³»ç»Ÿä¼šè¯»å– Undo Log å°†æ‰€æœ‰æ“ä½œå›æ»šï¼Œæ¢å¤åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œä»è€Œä¿è¯äº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414121841.png" alt="å°è®¸ codeï¼šundo logä¿è¯åŸå­æ€§" tabindex="0" loading="lazy"><figcaption>å°è®¸ codeï¼šundo logä¿è¯åŸå­æ€§</figcaption></figure><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ï¼‰</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ï¼‰</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance - </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">   =&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> å†™å…¥ Undo </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ï¼šè®°å½• id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> çš„åŸå§‹ä½™é¢ </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">500</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ï¼‰</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">   =&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> å†™å…¥ Undo </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ï¼šè®°å½• id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> çš„åŸå§‹ä½™é¢ </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ï¼‰</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">   =&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> æ¸…ç©º Undo </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ï¼Œäº‹åŠ¡æˆåŠŸ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">â—å¦‚æœå¤±è´¥ï¼š</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">   =&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> æ‰§è¡Œ </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ROLLBACK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ï¼šæ ¹æ® Undo </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> æŠŠæ•°æ®è¿˜åŸï¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¨èé˜…è¯»ï¼š<a href="http://mysql.taobao.org/monthly/2021/10/01/" target="_blank" rel="noopener noreferrer">åº–ä¸è§£InnoDBä¹‹UNDO LOG</a></p><h4 id="è¯¦ç»†è¯´è¯´å¦‚ä½•ä¿è¯æŒä¹…æ€§" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è¯´è¯´å¦‚ä½•ä¿è¯æŒä¹…æ€§"><span>è¯¦ç»†è¯´è¯´å¦‚ä½•ä¿è¯æŒä¹…æ€§ï¼Ÿ</span></a></h4><p>MySQL çš„æŒä¹…æ€§ä¸»è¦ç”±é¢„å†™ Redo Logã€åŒå†™æœºåˆ¶ã€ä¸¤é˜¶æ®µæäº¤ä»¥åŠ Checkpoint åˆ·ç›˜æœºåˆ¶å…±åŒä¿è¯ã€‚</p><p>å½“äº‹åŠ¡æäº¤æ—¶ï¼ŒMySQL ä¼šå…ˆå°†äº‹åŠ¡çš„ä¿®æ”¹æ“ä½œå†™å…¥ Redo Logï¼Œå¹¶å¼ºåˆ¶åˆ·ç›˜ï¼Œç„¶åå†å°†å†…å­˜ä¸­çš„æ•°æ®é¡µåˆ·å…¥ç£ç›˜ã€‚è¿™æ ·å³ä½¿ç³»ç»Ÿå´©æºƒï¼Œé‡å¯åä¹Ÿèƒ½é€šè¿‡ Redo Log é‡æ”¾æ¢å¤æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414154202.png" alt="å°è®¸ codeï¼šredo log çš„ WALï¼ŒWrite-Ahead Logging" tabindex="0" loading="lazy"><figcaption>å°è®¸ codeï¼šredo log çš„ WALï¼ŒWrite-Ahead Logging</figcaption></figure><p>åœ¨å°†æ•°æ®é¡µå†™å…¥åˆ°ç£ç›˜æ—¶ï¼Œå¦‚æœå‘ç”Ÿå´©æºƒï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®é¡µä¸å®Œæ•´ã€‚InnoDB çš„æ•°æ®é¡µå¤§å°ä¸º16KBï¼Œé€šå¸¸å¤§äºæ“ä½œç³»ç»Ÿçš„ 4KBé¡µå¤§å°ã€‚</p><p>ä¸ºäº†è§£å†³åªå†™å…¥éƒ¨åˆ†çš„é—®é¢˜ï¼ŒMySQL é‡‡ç”¨äº†åŒå†™æœºåˆ¶ï¼Œè„ç›˜åˆ·é¡µæ—¶ï¼Œå…ˆå°†æ•°æ®é¡µå†™å…¥åˆ°ä¸€ä¸ªåŒå†™ç¼“å†²åŒºä¸­ï¼Œ2M çš„è¿ç»­ç©ºé—´ï¼Œç„¶åå†å°†å…¶å†™å…¥åˆ°ç£ç›˜çš„å®é™…ä½ç½®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414154539.png" alt="BookSeaï¼šDoublewrite" tabindex="0" loading="lazy"><figcaption>BookSeaï¼šDoublewrite</figcaption></figure><p>å´©æºƒæ¢å¤æ—¶ï¼Œå¦‚æœå‘ç°æ•°æ®é¡µä¸å®Œæ•´ï¼Œä¼šä»åŒå†™ç¼“å†²åŒºä¸­æ¢å¤å‰¯æœ¬ï¼Œç¡®ä¿æ•°æ®é¡µçš„å®Œæ•´æ€§ã€‚</p><p>åœ¨æ¶‰åŠä¸»ä»å¤åˆ¶æ—¶ï¼ŒMySQL é€šè¿‡ä¸¤é˜¶æ®µæäº¤ä¿è¯ Redo Log å’Œ Binlog çš„ä¸€è‡´æ€§ï¼šç¬¬ä¸€é˜¶æ®µï¼Œå†™å…¥ Redo Log å¹¶æ ‡è®°ä¸º prepare çŠ¶æ€ï¼›ç¬¬äºŒé˜¶æ®µï¼Œå†™å…¥ Binlog å†æäº¤ Redo Log ä¸º commit çŠ¶æ€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414155206.png" alt="ä¸€æ ‘ä¸€æºªï¼š2PC" tabindex="0" loading="lazy"><figcaption>ä¸€æ ‘ä¸€æºªï¼š2PC</figcaption></figure><p>å´©æºƒæ¢å¤æ—¶ï¼Œå¦‚æœå‘ç° Redo Log æ˜¯ prepare ä½† Binlog å®Œæ•´ï¼Œåˆ™ä¼šæäº¤äº‹åŠ¡ï¼›åä¹‹ä¼šå›æ»šï¼Œé¿å…ä¸»ä»ä¸ä¸€è‡´ã€‚</p><p>å¦å¤–ï¼Œç”±äº Redo Log çš„å®¹é‡æœ‰é™ï¼ŒCheckpoint æœºåˆ¶ä¼šå®šæœŸå°†å†…å­˜ä¸­çš„è„é¡µåˆ·åˆ°ç£ç›˜ï¼Œè¿™æ ·èƒ½å‡å°‘å´©æºƒæ¢å¤æ—¶éœ€è¦å¤„ç†çš„ Redo Log æ•°é‡ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414154331.png" alt="å°è®¸ codeï¼šCheckpoint" tabindex="0" loading="lazy"><figcaption>å°è®¸ codeï¼šCheckpoint</figcaption></figure><p>æ¨èé˜…è¯»ï¼š<a href="https://cloud.tencent.com/developer/article/2339261" target="_blank" rel="noopener noreferrer">æ·±å…¥è§£æMySQLåŒå†™ç¼“å†²åŒº</a>ã€<a href="https://mp.weixin.qq.com/s/kqi_xHErTKA_omwFCfVt_w" target="_blank" rel="noopener noreferrer">MySQL äº‹åŠ¡äºŒé˜¶æ®µæäº¤</a></p><h4 id="è¯¦ç»†è¯´è¯´å¦‚ä½•ä¿è¯éš”ç¦»æ€§" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è¯´è¯´å¦‚ä½•ä¿è¯éš”ç¦»æ€§"><span>è¯¦ç»†è¯´è¯´å¦‚ä½•ä¿è¯éš”ç¦»æ€§ï¼Ÿ</span></a></h4><p>éš”ç¦»æ€§ä¸»è¦é€šè¿‡é”æœºåˆ¶å’Œ MVCC æ¥å®ç°ã€‚</p><p>æ¯”å¦‚è¯´ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨ä¿®æ”¹æŸæ¡æ•°æ®æ—¶ï¼ŒMySQL ä¼šé€šè¿‡ä¸´é”®é”æ¥é˜²æ­¢å…¶ä»–äº‹åŠ¡åŒæ—¶è¿›è¡Œä¿®æ”¹ï¼Œé¿å…æ•°æ®å†²çªã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414162829.png" alt="é˜¿é‡Œäº‘ç¤¾åŒºï¼šä¸´é”®é”" tabindex="0" loading="lazy"><figcaption>é˜¿é‡Œäº‘ç¤¾åŒºï¼šä¸´é”®é”</figcaption></figure><p>åŒæ—¶ï¼Œä¸´é”®é”å¯ä»¥é˜²æ­¢å¹»è¯»ç°è±¡çš„å‘ç”Ÿã€‚æ¯”å¦‚äº‹åŠ¡ A æŸ¥è¯¢ <code>id &gt; 10</code> çš„è®°å½•ï¼Œé‚£ä¹ˆä¸´é”®é”ä¸ä»…ä¼šé”ä½ id=10 çš„è¡Œï¼Œè¿˜ä¼šé”ä½ 10 åé¢çš„â€œé—´éš™â€ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡æ’å…¥ id=15 çš„æ•°æ®ã€‚</p><p>å‡å¦‚è¡¨ä¸­çš„ä¸»é”®æœ‰ <code>id: 5, 10, 15, 20, 25</code>ï¼Œé‚£ä¹ˆ InnoDB ä¼šå¯¹ä»¥ä¸‹åŒºé—´å’Œè®°å½•åŠ é”ï¼š</p><table><thead><tr><th>åŠ é”å¯¹è±¡</th><th>ç±»å‹</th><th>é”å®šå«ä¹‰</th></tr></thead><tbody><tr><td><code>(10, 15]</code></td><td>ä¸´é”®é”</td><td>é”ä½ id=15 å’Œå‰é—´éš™ï¼Œé˜²æ­¢æ’å…¥11~14</td></tr><tr><td><code>(15, 20]</code></td><td>ä¸´é”®é”</td><td>é”ä½äº† id=20 å’Œå‰é—´éš™</td></tr><tr><td><code>(20, 25]</code></td><td>ä¸´é”®é”</td><td>é”ä½äº† id=25 å’Œå‰é—´éš™</td></tr><tr><td><code>(25, +âˆ)</code></td><td>é—´éš™é”</td><td>é”ä½å°¾éƒ¨é˜²æ­¢æ’å…¥30ç­‰</td></tr></tbody></table><p>MVCC ä¸»è¦ç”¨æ¥ä¼˜åŒ–è¯»æ“ä½œï¼Œé€šè¿‡ä¿å­˜æ•°æ®çš„å†å²ç‰ˆæœ¬ï¼Œè®©è¯»æ“ä½œä¸éœ€è¦åŠ é”å°±èƒ½ç›´æ¥è¯»å–å¿«ç…§ï¼Œæé«˜è¯»çš„å¹¶å‘æ€§èƒ½ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414171111.png" alt="å°ä½™å“¥ï¼šReadView" tabindex="0" loading="lazy"><figcaption>å°ä½™å“¥ï¼šReadView</figcaption></figure><p>ä¸åŒçš„éš”ç¦»çº§åˆ«å¯¹åº”ä¸åŒçš„å®ç°ç­–ç•¥ï¼Œæ¯”å¦‚è¯´åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡ç¬¬ä¸€æ¬¡æŸ¥è¯¢æ—¶ä¼šç”Ÿæˆä¸€ä¸ª Read Viewï¼Œä¹‹åæ‰€æœ‰è¯»æ“ä½œéƒ½å¤ç”¨è¿™ä¸ªè§†å›¾ï¼Œä¿è¯å¤šæ¬¡è¯»å–çš„ç»“æœä¸€è‡´ã€‚</p><h4 id="å¦‚ä½•ä¿è¯ä¸€è‡´æ€§å‘¢" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä¿è¯ä¸€è‡´æ€§å‘¢"><span>å¦‚ä½•ä¿è¯ä¸€è‡´æ€§å‘¢ï¼Ÿ</span></a></h4><p>MySQL çš„ä¸€è‡´æ€§å¹¶ä¸æ˜¯é æŸä¸€ä¸ªæœºåˆ¶å•ç‹¬ä¿è¯çš„ï¼Œè€Œæ˜¯åŸå­æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ååŒä½œç”¨çš„ç»“æœã€‚</p><h4 id="äº‹åŠ¡ä¼šä¸ä¼šè‡ªåŠ¨æäº¤" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡ä¼šä¸ä¼šè‡ªåŠ¨æäº¤"><span>äº‹åŠ¡ä¼šä¸ä¼šè‡ªåŠ¨æäº¤ï¼Ÿ</span></a></h4><p>æ˜¯çš„ï¼ŒMySQL é»˜è®¤å¼€å¯äº†äº‹åŠ¡è‡ªåŠ¨æäº¤æ¨¡å¼ã€‚</p><p>æ¯æ¡å•ç‹¬çš„ SQL è¯­å¥éƒ½ä¼šè¢«è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„äº‹åŠ¡å¤„ç†å•å…ƒï¼›SQL è¯­å¥æ‰§è¡ŒæˆåŠŸåä¼šè‡ªåŠ¨æ‰§è¡Œ COMMITï¼›æ‰§è¡Œå¤±è´¥æ—¶ä¼šè‡ªåŠ¨ ROLLBACKã€‚</p><p>å¯é€šè¿‡ <code>SELECT @@autocommit;</code> æŸ¥çœ‹å½“å‰ä¼šè¯çš„è‡ªåŠ¨æäº¤çŠ¶æ€ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414171920.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@@autocommit" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@@autocommit</figcaption></figure><p>å¦‚æœéœ€è¦æ‰§è¡Œå¤šæ¡ SQL è¯­å¥ï¼Œå¯ä»¥å°†å®ƒä»¬æ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œä½¿ç”¨ <code>START TRANSACTION</code> å¼€å¯äº‹åŠ¡ï¼Œæ‰§è¡Œå®Œæ‰€æœ‰ SQL è¯­å¥åæ‰‹åŠ¨æäº¤ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance - </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 2 ä¼˜é€‰ç‰©æµè°ƒåº¦æŠ€æœ¯ 2 é¢é¢è¯•åŸé¢˜ï¼šMySQL ACID å“ªäº›æœºåˆ¶æ¥ä¿è¯</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦åŒå­¦ 4 é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡ä¼šä¸ä¼šè‡ªåŠ¨æäº¤?</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 14 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œæ˜¨å¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹å‘å¸–</a>è¯´æ‹¿åˆ°äº†å­—èŠ‚ã€ç¾å›¢çš„æš‘æœŸå®ä¹  offerï¼ŒåŒéæœ¬æœ« 9 ç¡•ï¼Œ<a href="https://t.zsxq.com/AC5qq" target="_blank" rel="noopener noreferrer">å…¨æ–‡å¾ˆç¡¬</a>ï¼Œå¼ºçƒˆæ¨èå¤§å®¶çœ‹çœ‹ï¼Œå·®ä¸å¤šæœ‰ 3000 å¤šå­—ï¼Œè¯¦ç»†å‰–æäº†è‡ªå·±çš„å‡†å¤‡è¿‡ç¨‹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250414172446.png" alt="æ˜¨å¤©æœ‰çƒå‹å‘å¸–è¯´æ‹¿åˆ°äº†å­—èŠ‚ã€ç¾å›¢çš„æš‘æœŸå®ä¹  offer" tabindex="0" loading="lazy"><figcaption>æ˜¨å¤©æœ‰çƒå‹å‘å¸–è¯´æ‹¿åˆ°äº†å­—èŠ‚ã€ç¾å›¢çš„æš‘æœŸå®ä¹  offer</figcaption></figure><h3 id="_62-ğŸŒŸäº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_62-ğŸŒŸäº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›"><span>62.ğŸŒŸäº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼Ÿ</span></a></h3><p>éš”ç¦»çº§åˆ«å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡å¯èƒ½å—å…¶ä»–äº‹åŠ¡å½±å“çš„ç¨‹åº¦ï¼ŒMySQL æ”¯æŒå››ç§éš”ç¦»çº§åˆ«ï¼Œåˆ†åˆ«æ˜¯ï¼šè¯»æœªæäº¤ã€è¯»å·²æäº¤ã€å¯é‡å¤è¯»å’Œä¸²è¡ŒåŒ–ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250413100533.png" alt="draven.coï¼šäº‹åŠ¡çš„å››ä¸ªéš”ç¦»çº§åˆ«" tabindex="0" loading="lazy"><figcaption>draven.coï¼šäº‹åŠ¡çš„å››ä¸ªéš”ç¦»çº§åˆ«</figcaption></figure><p>è¯»æœªæäº¤ä¼šå‡ºç°è„è¯»ï¼Œè¯»å·²æäº¤ä¼šå‡ºç°ä¸å¯é‡å¤è¯»ï¼Œå¯é‡å¤è¯»æ˜¯ InnoDB é»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼Œå¯ä»¥é¿å…è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†ä¼šå‡ºç°å¹»è¯»ã€‚ä¸è¿‡é€šè¿‡ MVCC å’Œä¸´é”®é”ï¼Œèƒ½å¤Ÿé˜²æ­¢å¤§å¤šæ•°å¹¶å‘é—®é¢˜ã€‚</p><p>ä¸²è¡ŒåŒ–æœ€å®‰å…¨ï¼Œä½†æ€§èƒ½è¾ƒå·®ï¼Œé€šå¸¸ä¸æ¨èä½¿ç”¨ã€‚</p><h4 id="è¯¦ç»†è¯´è¯´è¯»æœªæäº¤" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è¯´è¯´è¯»æœªæäº¤"><span>è¯¦ç»†è¯´è¯´è¯»æœªæäº¤ï¼Ÿ</span></a></h4><p>äº‹åŠ¡å¯ä»¥è¯»å–å…¶ä»–æœªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæœªæäº¤çš„äº‹åŠ¡ä¸€æ—¦å›æ»šï¼Œè¯»å–åˆ°çš„æ•°æ®å°±ä¼šå˜æˆäº†â€œè„æ•°æ®â€ï¼Œé€šå¸¸ä¸ä¼šä½¿ç”¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415152542.png" alt="æ˜“å°˜åŸƒï¼šè¯»æœªæäº¤" tabindex="0" loading="lazy"><figcaption>æ˜“å°˜åŸƒï¼šè¯»æœªæäº¤</figcaption></figure><h4 id="ä»€ä¹ˆæ˜¯è¯»å·²æäº¤" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯è¯»å·²æäº¤"><span>ä»€ä¹ˆæ˜¯è¯»å·²æäº¤ï¼Ÿ</span></a></h4><p>è¯»å·²æäº¤é¿å…äº†è„è¯»ï¼Œä½†å¯èƒ½ä¼šå‡ºç°ä¸å¯é‡å¤è¯»ï¼Œå³åŒä¸€äº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ç»“æœä¼šä¸åŒï¼Œå› ä¸ºå…¶ä»–äº‹åŠ¡æäº¤çš„ä¿®æ”¹ï¼Œå¯¹å½“å‰äº‹åŠ¡æ˜¯å¯è§çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415152926.png" alt="æ˜“å°˜åŸƒï¼šè¯»å·²æäº¤" tabindex="0" loading="lazy"><figcaption>æ˜“å°˜åŸƒï¼šè¯»å·²æäº¤</figcaption></figure><p>æ˜¯ Oracleã€SQL Server ç­‰æ•°æ®åº“çš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯å¯é‡å¤è¯»" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¯é‡å¤è¯»"><span>ä»€ä¹ˆæ˜¯å¯é‡å¤è¯»ï¼Ÿ</span></a></h4><p>å¯é‡å¤è¯»èƒ½ç¡®ä¿åŒä¸€äº‹åŠ¡å†…å¤šæ¬¡è¯»å–ç›¸åŒæ•°æ®çš„ç»“æœä¸€è‡´ï¼Œå³ä½¿å…¶ä»–äº‹åŠ¡å·²æäº¤ä¿®æ”¹ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415153434.png" alt="æ˜“å°˜åŸƒï¼šå¯é‡å¤è¯»" tabindex="0" loading="lazy"><figcaption>æ˜“å°˜åŸƒï¼šå¯é‡å¤è¯»</figcaption></figure><p>æ˜¯ MySQL é»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼Œé¿å…äº†â€œè„è¯»â€å’Œâ€œä¸å¯é‡å¤è¯»â€ï¼Œé€šè¿‡ MVCC å’Œä¸´é”®é”ä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…å¹»è¯»ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- Session A:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--è¿”å›500</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- Session B:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- Session Aå†æ¬¡æŸ¥è¯¢:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--ä»è¿”å›500(å¯é‡å¤è¯»)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- Session Aæ›´æ–°åæŸ¥è¯¢:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--åŸºäºæœ€æ–°å€¼550æ›´æ–°ä¸º600 </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">--è¿”å›600</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä»€ä¹ˆæ˜¯ä¸²è¡ŒåŒ–" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯ä¸²è¡ŒåŒ–"><span>ä»€ä¹ˆæ˜¯ä¸²è¡ŒåŒ–ï¼Ÿ</span></a></h4><p>ä¸²è¡ŒåŒ–æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œé€šè¿‡å¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œæ¥è§£å†³â€œå¹»è¯»â€é—®é¢˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415153614.png" alt="æ˜“å°˜åŸƒï¼šä¸²è¡ŒåŒ–" tabindex="0" loading="lazy"><figcaption>æ˜“å°˜åŸƒï¼šä¸²è¡ŒåŒ–</figcaption></figure><p>ä½†ä¼šå¯¼è‡´å¤§é‡çš„é”ç«äº‰é—®é¢˜ï¼Œå®é™…åº”ç”¨ä¸­å¾ˆå°‘ç”¨ã€‚</p><h4 id="a-äº‹åŠ¡æœªæäº¤-b-äº‹åŠ¡ä¸ŠæŸ¥è¯¢åˆ°çš„æ˜¯æ—§å€¼è¿˜æ˜¯æ–°å€¼" tabindex="-1"><a class="header-anchor" href="#a-äº‹åŠ¡æœªæäº¤-b-äº‹åŠ¡ä¸ŠæŸ¥è¯¢åˆ°çš„æ˜¯æ—§å€¼è¿˜æ˜¯æ–°å€¼"><span>A äº‹åŠ¡æœªæäº¤ï¼ŒB äº‹åŠ¡ä¸ŠæŸ¥è¯¢åˆ°çš„æ˜¯æ—§å€¼è¿˜æ˜¯æ–°å€¼ï¼Ÿ</span></a></h4><p>å¦‚æœ B æ˜¯æ™®é€šçš„ SELECTï¼Œä¹Ÿå°±æ˜¯å¿«ç…§è¯»ï¼Œå®ƒè¯»çš„æ˜¯æ—§å€¼ï¼Œå³äº‹åŠ¡ A ä¿®æ”¹å‰çš„å¿«ç…§ï¼Œå¹¶ä¸”ä¸ä¼šé˜»å¡ï¼›å¦‚æœ B æ˜¯å½“å‰è¯»ï¼Œæ¯”å¦‚ <code>SELECT â€¦ FOR UPDATE</code>ï¼Œå®ƒä¼šè¢«é˜»å¡ç›´åˆ°äº‹åŠ¡ A æäº¤æˆ–å›æ»šã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ A ä¸­ï¼Œæ›´æ–°ç‹äºŒçš„ä½™é¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> balance </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8000</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ­¤æ—¶å¹¶æ²¡æœ‰ COMMIT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¸­æŸ¥è¯¢ç‹äºŒçš„ä½™é¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ B ä¼šè¯»å–åˆ° æ—§å€¼ 1000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C ä¸­ä½¿ç”¨å½“å‰è¯»æŸ¥è¯¢ç‹äºŒçš„ä½™é¢</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> accounts </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç‹äºŒ&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä¼šè¯ C ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°ä¼šè¯ A æäº¤æˆ–å›æ»š</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250415162326.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¿«ç…§è¯»å’Œå½“å‰è¯»çš„å·®åˆ«" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¿«ç…§è¯»å’Œå½“å‰è¯»çš„å·®åˆ«</figcaption></figure><h4 id="æ€ä¹ˆæ›´æ”¹äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆæ›´æ”¹äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><span>æ€ä¹ˆæ›´æ”¹äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ</span></a></h4><p>MySQL æ”¯æŒé€šè¿‡ SET è¯­å¥ä¿®æ”¹äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŒåŒ…æ‹¬å…¨å±€çº§åˆ«ã€å½“å‰ä¼šè¯ï¼Œä½†ä¸€èˆ¬ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éšæ„ä¿®æ”¹éš”ç¦»çº§åˆ«ã€‚</p><p>æµ‹è¯•ç¯å¢ƒä¸‹å¯ä»¥ä½¿ç”¨ <code>SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;</code> å¯ä»¥ä¿®æ”¹å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«ã€‚</p><p>ä½¿ç”¨ <code>SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;</code> å¯ä»¥ä¿®æ”¹å…¨å±€éš”ç¦»çº§åˆ«ï¼Œå½±å“æ–°çš„è¿æ¥ï¼Œä½†ä¸ä¼šæ”¹å˜ç°æœ‰ä¼šè¯ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 16 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL äº‹åŠ¡æ˜¯ä»€ä¹ˆï¼Œé»˜è®¤éš”ç¦»çº§åˆ«ï¼Œä»€ä¹ˆæ˜¯å¯é‡å¤è¯»ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 23 QQ åå°æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL äº‹åŠ¡ï¼Œéš”ç¦»çº§åˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 7 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´ä¸€ä¸‹äº‹åŠ¡çš„å››å¤§éš”ç¦»çº§åˆ«ï¼Œåˆ†åˆ«è§£å†³ä»€ä¹ˆé—®é¢˜</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL é»˜è®¤éš”ç¦»çº§åˆ«ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 2 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´ MySQL äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šMySQL çš„å››ä¸ªéš”ç¦»çº§åˆ«ä»¥åŠé»˜è®¤éš”ç¦»çº§åˆ«ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ 360 é¢ç»åŒå­¦ 3 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šæ•°æ®åº“éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼Ÿmysql æ˜¯å±äºå“ªä¸ªéš”ç¦»çº§åˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è”æƒ³é¢ç»åŒå­¦ 7 é¢è¯•åŸé¢˜ï¼šMysql å››ä¸ªéš”ç¦»çº§åˆ«ï¼ŒMVCC å®ç°</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„oppo é¢ç»åŒå­¦ 8 åç«¯å¼€å‘ç§‹æ‹›ä¸€é¢é¢è¯•åŸé¢˜ï¼šè®²è®²Mysqlçš„å››ä¸ªéš”ç¦»çº§åˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 12 Java æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šmysqlçš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 27 äº‘åå°æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿè¿™äº›éš”ç¦»çº§åˆ«æ˜¯æ€ä¹ˆä¿è¯æ•°æ®çš„ä¸€è‡´æ€§çš„ï¼Ÿé»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å•¥ï¼Ÿï¼ˆMVCCï¼‰æ€ä¹ˆæ›´æ”¹äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦19ç•ªèŒ„å°è¯´ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå“ªä¸ªæ˜¯é»˜è®¤çš„ï¼Œç‰¹ç‚¹</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è™¾çš®é¢ç»åŒå­¦ 13 ä¸€é¢é¢è¯•åŸé¢˜ï¼šmysqläº‹åŠ¡éš”ç¦»çº§åˆ«</li></ol></blockquote><h3 id="_63-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ˜¯å¦‚ä½•å®ç°çš„" tabindex="-1"><a class="header-anchor" href="#_63-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ˜¯å¦‚ä½•å®ç°çš„"><span>63.äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</span></a></h3><p>è¯»æœªæäº¤é€šè¿‡è¡Œé”å…±äº«é”ç¡®ä¿ä¸€ä¸ªäº‹åŠ¡åœ¨æ›´æ–°è¡Œæ•°æ®ä½†æ²¡æœ‰æäº¤çš„æƒ…å†µä¸‹ï¼Œå…¶ä»–äº‹åŠ¡ä¸èƒ½æ›´æ–°è¯¥è¡Œæ•°æ®ï¼Œä½†ä¸ä¼šé˜»æ­¢è„è¯»ï¼Œæ„å‘³ç€äº‹åŠ¡2 å¯ä»¥åœ¨äº‹åŠ¡1 æäº¤ä¹‹å‰è¯»å–åˆ°äº‹åŠ¡1 ä¿®æ”¹çš„æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250416112357.png" alt="allaroundjavaï¼šRead uncommitted" tabindex="0" loading="lazy"><figcaption>allaroundjavaï¼šRead uncommitted</figcaption></figure><p>è¯»å·²æäº¤ä¼šåœ¨æ›´æ–°æ•°æ®å‰åŠ è¡Œçº§æ’ä»–é”ï¼Œä¸å…è®¸å…¶ä»–äº‹åŠ¡å†™å…¥æˆ–è€…è¯»å–æœªæäº¤çš„æ•°æ®ï¼Œä¹Ÿå°±æ„å‘³ç€äº‹åŠ¡2 ä¸èƒ½åœ¨äº‹åŠ¡ 1 æäº¤ä¹‹å‰è¯»å–åˆ°äº‹åŠ¡1 ä¿®æ”¹çš„æ•°æ®ï¼Œä»è€Œè§£å†³è„è¯»çš„é—®é¢˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250416114215.png" alt="allaroundjavaï¼šRead committed" tabindex="0" loading="lazy"><figcaption>allaroundjavaï¼šRead committed</figcaption></figure><p>å¦å¤–ï¼Œè¯»å·²æäº¤ä¼šåœ¨æ¯æ¬¡è¯»å–æ•°æ®å‰éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„ ReadViewï¼Œæ‰€ä»¥ä¼šå‡ºç°ä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚</p><p>å¯é‡å¤è¯»åªåœ¨ç¬¬ä¸€æ¬¡è¯»æ“ä½œæ—¶ç”Ÿæˆ ReadViewï¼Œåç»­è¯»æ“ä½œéƒ½ä¼šä½¿ç”¨è¿™ä¸ª ReadViewï¼Œä»è€Œé¿å…ä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚</p><p>å¦å¤–ï¼Œå¯¹äºå½“å‰è¯»æ“ä½œï¼Œå¯é‡å¤è¯»ä¼šé€šè¿‡ä¸´é”®é”æ¥é”ä½å½“å‰è¡Œå’Œå‰é—´éš™ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥æ•°æ®ï¼Œä»è€Œé¿å…å¹»è¯»çš„é—®é¢˜ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250416115217.png" alt="allaroundjavaï¼šRepeatable read" tabindex="0" loading="lazy"><figcaption>allaroundjavaï¼šRepeatable read</figcaption></figure><p>ä¸²è¡ŒåŒ–çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡åœ¨è¯»æ“ä½œæ—¶ï¼Œä¼šå…ˆåŠ è¡¨çº§å…±äº«é”ï¼›åœ¨å†™æ“ä½œæ—¶ï¼Œä¼šå…ˆåŠ è¡¨çº§æ’ä»–é”ã€‚</p><p>ç›´åˆ°äº‹åŠ¡ç»“æŸåæ‰é‡Šæ”¾é”ï¼Œè¿™æ ·å°±èƒ½ç¡®ä¿äº‹åŠ¡ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 2 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´ MySQL äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾—ç‰©é¢ç»åŒå­¦ 9 é¢è¯•é¢˜ç›®åŸé¢˜ï¼šMysqléš”ç¦»æœºåˆ¶æœ‰å“ªäº›ï¼Ÿæ€ä¹ˆå®ç°çš„ï¼Ÿå¯ä¸²è¡ŒåŒ–æ˜¯æ€ä¹ˆé¿å…çš„ä¸‰ä¸ªäº‹åŠ¡é—®é¢˜ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´é¢ç»åŒå­¦ 3 ç½‘çº¦è½¦åç«¯å¼€å‘ä¸€é¢åŸé¢˜ï¼šå¯é‡å¤è¯»çº§åˆ«æ˜¯æ€ä¹ˆå®ç°çš„</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 17 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹å‘å¾®ä¿¡</a>è¯´æ‹¿åˆ°äº¬ä¸œçš„æš‘æœŸå®ä¹  offerï¼Œå¹¶ä¸”ä»Šå¤© VIP 9 ç¾¤æœ‰çƒå‹è¯´ä»Šå¤©æ˜¯æ™’ offer æ—¥ï¼Œå› ä¸º 9 ç¾¤æœ‰å¥½å‡ ä¸ªçƒå‹æ‹¿åˆ°äº†å¤§å‚ offerï¼Œåé¢æˆ‘å†åŒæ­¥ç»™å¤§å®¶ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417215132.png" alt="çƒå‹æ‹¿åˆ°äº†äº¬ä¸œçš„æš‘æœŸå®ä¹  offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†äº¬ä¸œçš„æš‘æœŸå®ä¹  offer</figcaption></figure><h3 id="_64-ğŸŒŸè¯·è¯¦ç»†è¯´è¯´å¹»è¯»å‘¢" tabindex="-1"><a class="header-anchor" href="#_64-ğŸŒŸè¯·è¯¦ç»†è¯´è¯´å¹»è¯»å‘¢"><span>64.ğŸŒŸè¯·è¯¦ç»†è¯´è¯´å¹»è¯»å‘¢ï¼Ÿ</span></a></h3><p>å¹»è¯»æ˜¯æŒ‡åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå¤šæ¬¡æ‰§è¡Œç›¸åŒçš„èŒƒå›´æŸ¥è¯¢ï¼Œç»“æœå´ä¸åŒã€‚è¿™ç§ç°è±¡é€šå¸¸å‘ç”Ÿåœ¨å…¶ä»–äº‹åŠ¡åœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ’å…¥æˆ–åˆ é™¤äº†ç¬¦åˆå½“å‰æŸ¥è¯¢æ¡ä»¶çš„æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417222847.png" alt="Jennyï¼šPhantom read" tabindex="0" loading="lazy"><figcaption>Jennyï¼šPhantom read</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä»¥ä¸èƒŒ ----</p><p>æ¯”å¦‚è¯´äº‹åŠ¡ A åœ¨ç¬¬ä¸€æ¬¡æŸ¥è¯¢æŸä¸ªæ¡ä»¶èŒƒå›´çš„æ•°æ®è¡Œåï¼Œäº‹åŠ¡ B æ’å…¥äº†ä¸€æ¡æ–°æ•°æ®ä¸”ç¬¦åˆæ¡ä»¶èŒƒå›´ï¼Œäº‹åŠ¡ A å†æ¬¡æŸ¥è¯¢æ—¶ï¼Œå‘ç°å¤šäº†ä¸€æ¡æ•°æ®ã€‚</p><p>æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼Œå…ˆåˆ›å»ºæµ‹è¯•è¡¨ï¼Œæ’å…¥æµ‹è¯•æ•°æ®ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">user_info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">` (</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `id`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> BIGINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) UNSIGNED </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸»é”®id&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `name`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DEFAULT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> COMMENT </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å§“å&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `gender`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DEFAULT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> COMMENT </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ€§åˆ«&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  `email`</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DEFAULT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> COMMENT </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;é‚®ç®±&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`id`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ENGINE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">INNODB </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CHARSET</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">utf8mb4 COMMENT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç”¨æˆ·ä¿¡æ¯è¡¨&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æ’å…¥æµ‹è¯•æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `user_info`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`id`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`name`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`gender`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`email`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Curry&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç”·&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;curry@163.com&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Wade&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç”·&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;wade@163.com&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;James&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç”·&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;james@163.com&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬åœ¨äº‹åŠ¡ A ä¸­æ‰§è¡ŒæŸ¥è¯¢ <code>SELECT * FROM user_info WHERE id &gt; 1;</code>ï¼Œåœ¨äº‹åŠ¡ B ä¸­æ’å…¥æ•°æ® <code>INSERT INTO user_info (name, gender, email) VALUES (&#39;wanger&#39;, &#39;å¥³&#39;, &#39;wanger@163.com&#39;);</code>ï¼Œå†åœ¨äº‹åŠ¡ A ä¸­ä¿®æ”¹åˆšåˆšæ’å…¥çš„æ•°æ® <code>update user_info set gender=&#39;ç”·&#39; where id = 4;</code>ï¼Œæœ€ååœ¨äº‹åŠ¡ A ä¸­å†æ¬¡æŸ¥è¯¢ <code>SELECT * FROM user_info WHERE id &gt; 1;</code>ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417222448.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯ä»¥å‘ç°äº§ç”Ÿå¹»è¯»äº†" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¯ä»¥å‘ç°äº§ç”Ÿå¹»è¯»äº†</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä»¥ä¸èƒŒ ----</p><h4 id="å¦‚ä½•é¿å…å¹»è¯»" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•é¿å…å¹»è¯»"><span>å¦‚ä½•é¿å…å¹»è¯»ï¼Ÿ</span></a></h4><p>MySQL åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œé€šè¿‡ MVCC å’Œä¸´é”®é”å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…å¹»è¯»ã€‚</p><p>æ¯”å¦‚è¯´åœ¨æŸ¥è¯¢æ—¶æ˜¾ç¤ºåŠ é”ï¼Œåˆ©ç”¨ä¸´é”®é”é”å®šæŸ¥è¯¢èŒƒå›´ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡æ’å…¥æ–°çš„æ•°æ®ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_info </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FOR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åŠ ä¸´é”®é”</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä»–äº‹åŠ¡åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å½“å‰äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417223640.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¸´é”®é”èƒ½é˜²æ­¢å¹»è¯»" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šä¸´é”®é”èƒ½é˜²æ­¢å¹»è¯»</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä»¥ä¸èƒŒ ----</p><p>è§£é‡Šä¸€ä¸‹ã€‚</p><p>å¦‚æœæŸ¥è¯¢è¯­å¥ä¸­åŒ…å«æ˜¾å¼åŠ é”ï¼ˆå¦‚ <code>FOR UPDATE</code>ï¼‰ï¼ŒInnoDB ä¼šä½¿ç”¨å½“å‰è¯»ï¼Œç›´æ¥è¯»å–æœ€æ–°çš„æ•°æ®ï¼Œå¹¶åŠ é”ã€‚</p><p>åœ¨èŒƒå›´æŸ¥è¯¢æ—¶ï¼ŒInnoDB ä¸ä»…ä¼šå¯¹ç¬¦åˆæ¡ä»¶çš„è®°å½•åŠ è¡Œé”ï¼Œè¿˜ä¼šå¯¹ç›¸é‚»çš„ç´¢å¼•é—´éš™åŠ é—´éš™é”ï¼Œä»è€Œå½¢æˆä¸´é”®é”ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418102139.png" alt="è½¬è½¬æŠ€æœ¯ï¼šä¸´é”®é”" tabindex="0" loading="lazy"><figcaption>è½¬è½¬æŠ€æœ¯ï¼šä¸´é”®é”</figcaption></figure><p>ä¸´é”®é”å¯ä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨é—´éš™ä¸­æ’å…¥æ–°æ•°æ®ï¼Œä»è€Œé¿å…å¹»è¯»ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä»¥ä¸èƒŒ ----</p><p>æ¯”å¦‚è¯´åœ¨æ‰§è¡ŒæŸ¥è¯¢çš„äº‹åŠ¡ä¸­ï¼Œä¸è¦å°è¯•å»æ›´æ–°å…¶ä»–äº‹åŠ¡æ’å…¥/åˆ é™¤çš„æ•°æ®ï¼Œåˆ©ç”¨å¿«ç…§è¯»æ¥é¿å…å¹»è¯»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250417224334.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šåªç”¨å¿«ç…§è¯»" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šåªç”¨å¿«ç…§è¯»</figcaption></figure><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ startï¼Œé¢è¯•ä¸­å¯ä»¥ä¸èƒŒ ----</p><p>ä½¿ç”¨ SELECT æŸ¥è¯¢æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼åŠ é”ï¼ŒInnoDB ä¼šä½¿ç”¨ MVCC æä¾›ä¸€è‡´æ€§è§†å›¾ã€‚</p><p>æ¯ä¸ªäº‹åŠ¡åœ¨å¯åŠ¨æ—¶éƒ½ä¼šç”Ÿæˆä¸€ä¸ª Read Viewï¼Œç”¨æ¥ç¡®å®šå“ªäº›æ•°æ®å¯¹å½“å‰äº‹åŠ¡å¯è§ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418103117.png" alt="Keep It Simpleï¼šRead View" tabindex="0" loading="lazy"><figcaption>Keep It Simpleï¼šRead View</figcaption></figure><p>å…¶ä»–äº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡å¯åŠ¨åæ’å…¥çš„æ–°æ•°æ®ä¸ä¼šè¢«å½“å‰äº‹åŠ¡çœ‹åˆ°ï¼Œå› æ­¤ä¸ä¼šå‡ºç°å¹»è¯»ã€‚</p><p>---- è¿™éƒ¨åˆ†æ˜¯å¸®åŠ©å¤§å®¶ç†è§£ endï¼Œé¢è¯•ä¸­å¯ä»¥ä¸èƒŒ ----</p><h4 id="ä»€ä¹ˆæ˜¯å½“å‰è¯»å‘¢" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å½“å‰è¯»å‘¢"><span>ä»€ä¹ˆæ˜¯å½“å‰è¯»å‘¢ï¼Ÿ</span></a></h4><p>å½“å‰è¯»æ˜¯æŒ‡è¯»å–è®°å½•çš„æœ€æ–°å·²æäº¤ç‰ˆæœ¬ï¼Œå¹¶ä¸”åœ¨è¯»å–æ—¶å¯¹è®°å½•åŠ é”ï¼Œç¡®ä¿å…¶ä»–å¹¶å‘äº‹åŠ¡ä¸èƒ½ä¿®æ”¹å½“å‰è®°å½•ã€‚</p><p>æ¯”å¦‚ <code>SELECT ... LOCK IN SHARE MODE</code>ã€<code>SELECT ... FOR UPDATE</code>ï¼Œä»¥åŠ UPDATEã€DELETEï¼Œéƒ½å±äºå½“å‰è¯»ã€‚</p><h4 id="ä¸ºä»€ä¹ˆ-update-å’Œ-delete-ä¹Ÿå±äºå½“å‰è¯»" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-update-å’Œ-delete-ä¹Ÿå±äºå½“å‰è¯»"><span>ä¸ºä»€ä¹ˆ UPDATE å’Œ DELETE ä¹Ÿå±äºå½“å‰è¯»ï¼Ÿ</span></a></h4><p>å› ä¸ºæ›´æ–°ã€åˆ é™¤è¿™äº›æ“ä½œï¼Œæœ¬è´¨ä¸Šä¸ä»…æ˜¯å†™æ“ä½œï¼Œè¿˜éœ€è¦åœ¨å†™ä¹‹å‰è¯»å–æ•°æ®ï¼Œç„¶åæ‰èƒ½ä¿®æ”¹æˆ–åˆ é™¤ã€‚ä¸ºäº†ä¿è¯ä¿®æ”¹çš„æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œå¹¶é˜²æ­¢å¹¶å‘å†²çªï¼ŒInnoDB å¿…é¡»è¯»å–æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®å¹¶åŠ é”ï¼Œå› æ­¤ UPDATE å’Œ DELETE ä¹Ÿå±äºå½“å‰è¯»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418102600.png" alt="æºªæ°´é™å¹½ï¼šå½“å‰è¯»" tabindex="0" loading="lazy"><figcaption>æºªæ°´é™å¹½ï¼šå½“å‰è¯»</figcaption></figure><table><thead><tr><th>SQLè¯­å¥</th><th>æ˜¯å¦å½“å‰è¯»</th><th>æ˜¯å¦åŠ é”</th></tr></thead><tbody><tr><td><code>SELECT * FROM user WHERE id=1</code></td><td>âŒ å¦</td><td>âŒ å¦</td></tr><tr><td><code>SELECT * FROM user WHERE id=1</code> FOR UPDATE</td><td>âœ… æ˜¯</td><td>âœ… åŠ æ’ä»–é”</td></tr><tr><td><code>SELECT * FROM user WHERE id=1 LOCK IN SHARE MODE</code></td><td>âœ… æ˜¯</td><td>âœ… åŠ å…±äº«é”</td></tr><tr><td><code>UPDATE user SET ... WHERE id=1</code></td><td>âœ… æ˜¯</td><td>âœ… åŠ æ’ä»–é”</td></tr><tr><td><code>DELETE FROM user WHERE id=1</code></td><td>âœ… æ˜¯</td><td>âœ… åŠ æ’ä»–é”</td></tr></tbody></table><h4 id="ä»€ä¹ˆæ˜¯å¿«ç…§è¯»å‘¢" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¿«ç…§è¯»å‘¢"><span>ä»€ä¹ˆæ˜¯å¿«ç…§è¯»å‘¢ï¼Ÿ</span></a></h4><p>å¿«ç…§è¯»æ˜¯ InnoDB é€šè¿‡ MVCC å®ç°çš„ä¸€ç§éé˜»å¡è¯»æ–¹å¼ã€‚å½“äº‹åŠ¡æ‰§è¡Œ SELECT æŸ¥è¯¢æ—¶ï¼ŒInnoDB å¹¶ä¸ä¼šç›´æ¥è¯»å½“å‰æœ€æ–°çš„æ•°æ®ï¼Œè€Œæ˜¯æ ¹æ®äº‹åŠ¡å¼€å§‹æ—¶ç”Ÿæˆçš„ Read View å»åˆ¤æ–­æ¯æ¡è®°å½•çš„å¯è§æ€§ï¼Œä»è€Œè¯»å–ç¬¦åˆæ¡ä»¶çš„å†å²ç‰ˆæœ¬ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418105347.png" alt="çˆ±åƒé±¼é¥¼çš„çŒ«ï¼šå¿«ç…§è¯»" tabindex="0" loading="lazy"><figcaption>çˆ±åƒé±¼é¥¼çš„çŒ«ï¼šå¿«ç…§è¯»</figcaption></figure><table><thead><tr><th>SQL</th><th>æ˜¯å¦å¿«ç…§è¯»ï¼Ÿ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>SELECT * FROM t WHERE id=1</code></td><td>âœ… æ˜¯</td><td>å¿«ç…§è¯»</td></tr><tr><td><code>SELECT * FROM t WHERE id=1 FOR UPDATE</code></td><td>âŒ å¦</td><td>å½“å‰è¯»ï¼Œè¯»å–æœ€æ–°ç‰ˆæœ¬å¹¶åŠ é”</td></tr><tr><td><code>UPDATE / DELETE</code></td><td>âŒ å¦</td><td>å½“å‰è¯»ï¼Œå¿…é¡»è¯»å–å½“å‰ç‰ˆæœ¬å¹¶åŠ é”</td></tr><tr><td><code>INSERT</code></td><td>âŒ å¦</td><td>å†™æ“ä½œï¼Œä¸å­˜åœ¨å†å²ç‰ˆæœ¬</td></tr></tbody></table><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 7 äº¬ä¸œåˆ°å®¶é¢è¯•åŸé¢˜ï¼šmysqläº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤éš”ç¦»çº§åˆ«ï¼Œå¦‚ä½•é¿å…å¹»è¯»</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå¹»è¯»å’Œè„è¯»çš„åŒºåˆ«ï¼Œå¦‚ä½•é˜²æ­¢å¹»è¯»ï¼Œäº‹åŠ¡çš„mvccæœºåˆ¶</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 18 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹å‘å¸–</a>è¯´æ‹¿åˆ°äº†èš‚èšçš„æš‘æœŸå®ä¹  offerï¼Œé—®å‰æ™¯æ€ä¹ˆæ ·ï¼Œæˆ‘åªèƒ½è¯´èš‚èšä½œä¸ºé˜¿é‡Œçš„å«¡é•¿å­ï¼Œä¸€ç›´å¤„åœ¨æˆ˜ç•¥å‘å±•çš„æ ¸å¿ƒä½ç½®ï¼Œè‚¯å®šæ˜¯å€¼å¾—å»çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250418105609.png" alt="çƒå‹æ‹¿åˆ°äº†èš‚èšæš‘æœŸå®ä¹  offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†èš‚èšæš‘æœŸå®ä¹  offer</figcaption></figure><h3 id="_65-ğŸŒŸmvcc-äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_65-ğŸŒŸmvcc-äº†è§£å—"><span>65.ğŸŒŸMVCC äº†è§£å—ï¼Ÿ</span></a></h3><p>MVCC æŒ‡çš„æ˜¯å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œæ¯æ¬¡ä¿®æ”¹æ•°æ®æ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨åŸæœ‰æ•°æ®ä¸Šè¿›è¡Œä¿®æ”¹ã€‚å¹¶ä¸”æ¯ä¸ªäº‹åŠ¡åªèƒ½çœ‹åˆ°åœ¨å®ƒå¼€å§‹ä¹‹å‰å·²ç»æäº¤çš„æ•°æ®ç‰ˆæœ¬ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241215073837.png" alt="å¤©ç‘•ï¼šundo log ç‰ˆæœ¬é“¾å’Œ ReadView" tabindex="0" loading="lazy"><figcaption>å¤©ç‘•ï¼šundo log ç‰ˆæœ¬é“¾å’Œ ReadView</figcaption></figure><p>è¿™æ ·çš„è¯ï¼Œè¯»æ“ä½œå°±ä¸ä¼šé˜»å¡å†™æ“ä½œï¼Œå†™æ“ä½œä¹Ÿä¸ä¼šé˜»å¡è¯»æ“ä½œï¼Œä»è€Œé¿å…åŠ é”å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚</p><p>å…¶åº•å±‚å®ç°ä¸»è¦ä¾èµ–äº Undo Log å’Œ Read Viewã€‚</p><p>æ¯æ¬¡ä¿®æ”¹æ•°æ®å‰ï¼Œå…ˆå°†è®°å½•æ‹·è´åˆ°Undo Logï¼Œå¹¶ä¸”æ¯æ¡è®°å½•ä¼šåŒ…å«ä¸‰ä¸ªéšè—åˆ—ï¼ŒDB_TRX_ID ç”¨æ¥è®°å½•ä¿®æ”¹è¯¥è¡Œçš„äº‹åŠ¡ IDï¼ŒDB_ROLL_PTR ç”¨æ¥æŒ‡å‘ Undo Log ä¸­çš„å‰ä¸€ä¸ªç‰ˆæœ¬ï¼ŒDB_ROW_ID ç”¨æ¥å”¯ä¸€æ ‡è¯†è¯¥è¡Œæ•°æ®ï¼ˆä»…æ— ä¸»é”®æ—¶ç”Ÿæˆï¼‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419152549.png" alt="guozhchunï¼šé¢å¤–çš„å­˜å‚¨ä¿¡æ¯" tabindex="0" loading="lazy"><figcaption>guozhchunï¼šé¢å¤–çš„å­˜å‚¨ä¿¡æ¯</figcaption></figure><p>æ¯æ¬¡è¯»å–æ•°æ®æ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ª ReadViewï¼Œå…¶ä¸­è®°å½•äº†å½“å‰æ´»è·ƒäº‹åŠ¡çš„ ID é›†åˆã€æœ€å°äº‹åŠ¡ IDã€æœ€å¤§äº‹åŠ¡ ID ç­‰ä¿¡æ¯ï¼Œé€šè¿‡ä¸ DB_TRX_ID è¿›è¡Œå¯¹æ¯”ï¼Œåˆ¤æ–­å½“å‰äº‹åŠ¡æ˜¯å¦å¯ä»¥çœ‹åˆ°è¯¥æ•°æ®ç‰ˆæœ¬ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419152750.png" alt="luozhiyunï¼šReadView" tabindex="0" loading="lazy"><figcaption>luozhiyunï¼šReadView</figcaption></figure><h4 id="è¯·è¯¦ç»†è¯´è¯´ä»€ä¹ˆæ˜¯ç‰ˆæœ¬é“¾" tabindex="-1"><a class="header-anchor" href="#è¯·è¯¦ç»†è¯´è¯´ä»€ä¹ˆæ˜¯ç‰ˆæœ¬é“¾"><span>è¯·è¯¦ç»†è¯´è¯´ä»€ä¹ˆæ˜¯ç‰ˆæœ¬é“¾ï¼Ÿ</span></a></h4><p>ç‰ˆæœ¬é“¾æ˜¯æŒ‡ InnoDB ä¸­åŒä¸€æ¡è®°å½•çš„å¤šä¸ªå†å²ç‰ˆæœ¬ï¼Œé€šè¿‡ DB_ROLL_PTR å­—æ®µå°†å®ƒä»¬åƒé“¾è¡¨ä¸€æ ·ä¸²èµ·æ¥ï¼Œç”¨æ¥æ”¯æŒ MVCC çš„å¿«ç…§è¯»ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240415084347.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šç‰ˆæœ¬é“¾" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šç‰ˆæœ¬é“¾</figcaption></figure><p>å‡è®¾æœ‰ä¸€å¼ <code>hero</code>è¡¨ï¼Œè¡¨ä¸­æœ‰è¿™æ ·ä¸€è¡Œè®°å½•ï¼Œname ä¸ºå¼ ä¸‰ï¼Œcity ä¸ºå¸éƒ½ï¼Œæ’å…¥è¿™è¡Œè®°å½•çš„äº‹åŠ¡ id æ˜¯ 80ã€‚</p><p>æ­¤æ—¶ï¼Œ<code>DB_TRX_ID</code>çš„å€¼å°±æ˜¯ 80ï¼Œ<code>DB_ROLL_PTR</code>çš„å€¼å°±æ˜¯æŒ‡å‘è¿™æ¡ insert undo æ—¥å¿—çš„æŒ‡é’ˆã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-80ebc2b3-ae63-417d-9307-f6a7811f7965.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šDB_ROLL_PTR" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šDB_ROLL_PTR</figcaption></figure><p>æ¥ä¸‹æ¥ï¼Œå¦‚æœæœ‰ä¸¤ä¸ª<code>DB_TRX_ID</code>åˆ†åˆ«ä¸º<code>100</code>ã€<code>200</code>çš„äº‹åŠ¡å¯¹è¿™æ¡è®°å½•è¿›è¡Œäº†<code>update</code>æ“ä½œï¼Œé‚£ä¹ˆè¿™æ¡è®°å½•çš„ç‰ˆæœ¬é“¾å°±ä¼šå˜æˆä¸‹é¢è¿™æ ·ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-bf4ff00d-01bd-4170-a17b-6919f7873ea4.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šupdate æ“ä½œ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šupdate æ“ä½œ</figcaption></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ›´æ–°ä¸€è¡Œæ•°æ®æ—¶ï¼ŒInnoDB ä¸ä¼šç›´æ¥è¦†ç›–åŸæœ‰æ•°æ®ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®ç‰ˆæœ¬ï¼Œå¹¶æ›´æ–° DB_TRX_ID å’Œ DB_ROLL_PTRï¼Œä½¿å®ƒä»¬æŒ‡å‘å‰ä¸€ä¸ªç‰ˆæœ¬å’Œç›¸å…³çš„ undo æ—¥å¿—ã€‚</p><p>è¿™æ ·ï¼Œè€ç‰ˆæœ¬çš„æ•°æ®å°±ä¸ä¼šä¸¢å¤±ï¼Œå¯ä»¥é€šè¿‡ç‰ˆæœ¬é“¾æ‰¾åˆ°ã€‚</p><p>ç”±äº undo æ—¥å¿—ä¼šè®°å½•æ¯ä¸€æ¬¡çš„ updateï¼Œå¹¶ä¸”æ–°æ’å…¥çš„è¡Œæ•°æ®ä¼šè®°å½•ä¸Šä¸€æ¡ undo æ—¥å¿—çš„æŒ‡é’ˆï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ DB_ROLL_PTR è¿™ä¸ªæŒ‡é’ˆæ‰¾åˆ°ä¸Šä¸€æ¡è®°å½•ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªç‰ˆæœ¬é“¾ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-765b3d83-14eb-4b56-8940-9d60bfaf1737.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šç‰ˆæœ¬é“¾" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šç‰ˆæœ¬é“¾</figcaption></figure><h4 id="è¯·è¯¦ç»†è¯´è¯´ä»€ä¹ˆæ˜¯readview" tabindex="-1"><a class="header-anchor" href="#è¯·è¯¦ç»†è¯´è¯´ä»€ä¹ˆæ˜¯readview"><span>è¯·è¯¦ç»†è¯´è¯´ä»€ä¹ˆæ˜¯ReadViewï¼Ÿ</span></a></h4><p>ReadView æ˜¯ InnoDB ä¸ºæ¯ä¸ªäº‹åŠ¡åˆ›å»ºçš„ä¸€ä»½â€œå¯è§æ€§è§†å›¾â€ï¼Œç”¨äºåˆ¤æ–­åœ¨æ‰§è¡Œå¿«ç…§è¯»æ—¶ï¼Œå“ªäº›æ•°æ®ç‰ˆæœ¬æ˜¯å½“å‰è¿™ä¸ªäº‹åŠ¡å¯ä»¥çœ‹åˆ°çš„ï¼Œå“ªäº›ä¸èƒ½çœ‹åˆ°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240415093703.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šReadView" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šReadView</figcaption></figure><p>å½“äº‹åŠ¡å¼€å§‹æ‰§è¡Œæ—¶ï¼ŒInnoDB ä¼šä¸ºè¯¥äº‹åŠ¡åˆ›å»ºä¸€ä¸ª ReadViewï¼Œè¿™ä¸ª ReadView ä¼šè®°å½• 4 ä¸ªé‡è¦çš„ä¿¡æ¯ï¼š</p><ul><li>creator_trx_idï¼šåˆ›å»ºè¯¥ ReadView çš„äº‹åŠ¡ IDã€‚</li><li>m_idsï¼šæ‰€æœ‰æ´»è·ƒäº‹åŠ¡çš„ ID åˆ—è¡¨ï¼Œæ´»è·ƒäº‹åŠ¡æ˜¯æŒ‡é‚£äº›å·²ç»å¼€å§‹ä½†å°šæœªæäº¤çš„äº‹åŠ¡ã€‚</li><li>min_trx_idï¼šæ‰€æœ‰æ´»è·ƒäº‹åŠ¡ä¸­æœ€å°çš„äº‹åŠ¡ IDã€‚å®ƒæ˜¯ m_ids æ•°ç»„ä¸­æœ€å°çš„äº‹åŠ¡ IDã€‚</li><li>max_trx_id ï¼šäº‹åŠ¡ ID çš„æœ€å¤§å€¼åŠ ä¸€ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒæ˜¯ä¸‹ä¸€ä¸ªå°†è¦ç”Ÿæˆçš„äº‹åŠ¡ IDã€‚</li></ul><h4 id="readview-æ˜¯å¦‚ä½•åˆ¤æ–­è®°å½•çš„æŸä¸ªç‰ˆæœ¬æ˜¯å¦å¯è§çš„" tabindex="-1"><a class="header-anchor" href="#readview-æ˜¯å¦‚ä½•åˆ¤æ–­è®°å½•çš„æŸä¸ªç‰ˆæœ¬æ˜¯å¦å¯è§çš„"><span>ReadView æ˜¯å¦‚ä½•åˆ¤æ–­è®°å½•çš„æŸä¸ªç‰ˆæœ¬æ˜¯å¦å¯è§çš„ï¼Ÿ</span></a></h4><p>ä¼šé€šè¿‡ä¸‰ä¸ªæ­¥éª¤æ¥åˆ¤æ–­ï¼š</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240415094939.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šReadViewåˆ¤æ–­è§„åˆ™" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šReadViewåˆ¤æ–­è§„åˆ™</figcaption></figure><p>â‘ ã€å¦‚æœæŸä¸ªæ•°æ®ç‰ˆæœ¬çš„ DB_TRX_ID å°äº min_trx_idï¼Œåˆ™è¯¥æ•°æ®ç‰ˆæœ¬åœ¨ç”Ÿæˆ ReadView ä¹‹å‰å°±å·²ç»æäº¤ï¼Œå› æ­¤å¯¹å½“å‰äº‹åŠ¡æ˜¯å¯è§çš„ã€‚</p><p>â‘¡ã€å¦‚æœ DB_TRX_ID å¤§äº max_trx_idï¼Œåˆ™è¡¨ç¤ºåˆ›å»ºè¯¥æ•°æ®ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨ç”Ÿæˆ ReadView ä¹‹åå¼€å§‹ï¼Œå› æ­¤å¯¹å½“å‰äº‹åŠ¡ä¸å¯è§ã€‚</p><p>â‘¢ã€å¦‚æœ DB_TRX_ID åœ¨ min_trx_id å’Œ max_trx_id ä¹‹é—´ï¼Œéœ€è¦åˆ¤æ–­ DB_TRX_ID æ˜¯å¦åœ¨ m_ids åˆ—è¡¨ä¸­ï¼š</p><ul><li>ä¸åœ¨ï¼Œè¡¨ç¤ºåˆ›å»ºè¯¥æ•°æ®ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨ç”Ÿæˆ ReadView ä¹‹åå·²ç»æäº¤ï¼Œå› æ­¤å¯¹å½“å‰äº‹åŠ¡ä¹Ÿæ˜¯å¯è§çš„ã€‚</li><li>åœ¨ï¼Œè¡¨ç¤ºäº‹åŠ¡ä»ç„¶æ´»è·ƒï¼Œæˆ–è€…åœ¨å½“å‰äº‹åŠ¡ç”Ÿæˆ ReadView ä¹‹åæ‰å¼€å§‹ï¼Œå› æ­¤æ˜¯ä¸å¯è§çš„ã€‚</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419162341.png" alt="å°è®¸ codeï¼šå¯è§æ€§åŒ¹é…è§„åˆ™" tabindex="0" loading="lazy"><figcaption>å°è®¸ codeï¼šå¯è§æ€§åŒ¹é…è§„åˆ™</figcaption></figure><p>ä¸¾ä¸ªå®é™…çš„ä¾‹å­ã€‚</p><p>è¯»äº‹åŠ¡å¼€å¯äº†ä¸€ä¸ª ReadViewï¼Œè¿™ä¸ª ReadView é‡Œé¢è®°å½•äº†å½“å‰æ´»è·ƒäº‹åŠ¡çš„ ID åˆ—è¡¨ï¼ˆ444ã€555ã€665ï¼‰ï¼Œä»¥åŠæœ€å°äº‹åŠ¡ IDï¼ˆ444ï¼‰å’Œæœ€å¤§äº‹åŠ¡ IDï¼ˆ666ï¼‰ã€‚å½“ç„¶è¿˜æœ‰è‡ªå·±çš„äº‹åŠ¡ ID 520ï¼Œä¹Ÿå°±æ˜¯ creator_trx_idã€‚</p><p>å®ƒè¦è¯»çš„è¿™è¡Œæ•°æ®çš„å†™äº‹åŠ¡ ID æ˜¯ xï¼Œä¹Ÿå°±æ˜¯ DB_TRX_IDã€‚</p><ul><li>å¦‚æœ x = 110ï¼Œæ˜¾ç„¶åœ¨ ReadView ç”Ÿæˆä¹‹å‰å°±æäº¤äº†ï¼Œæ‰€ä»¥è¿™è¡Œæ•°æ®æ˜¯å¯è§çš„ã€‚</li><li>å¦‚æœ x = 667ï¼Œæ˜¾ç„¶æ˜¯æœªçŸ¥ä¸–ç•Œï¼Œæ‰€ä»¥è¿™è¡Œæ•°æ®å¯¹è¯»æ“ä½œæ˜¯ä¸å¯è§çš„ã€‚</li><li>å¦‚æœ x = 519ï¼Œè™½ç„¶ 519 å¤§äº 444 å°äº 666ï¼Œä½†æ˜¯ 519 ä¸åœ¨æ´»è·ƒäº‹åŠ¡åˆ—è¡¨é‡Œï¼Œæ‰€ä»¥è¿™è¡Œæ•°æ®æ˜¯å¯è§çš„ã€‚å› ä¸º 519 æ˜¯åœ¨ 520 ç”Ÿæˆ ReadView ä¹‹å‰å°±æäº¤äº†ã€‚</li><li>å¦‚æœ x = 555ï¼Œè™½ç„¶ 555 å¤§äº 444 å°äº 666ï¼Œä½†æ˜¯ 555 åœ¨æ´»è·ƒäº‹åŠ¡åˆ—è¡¨é‡Œï¼Œæ‰€ä»¥è¿™è¡Œæ•°æ®æ˜¯ä¸å¯è§çš„ã€‚å› ä¸º 555 ä¸ç¡®å®šæœ‰æ²¡æœ‰æäº¤ã€‚</li></ul><h4 id="å¯é‡å¤è¯»å’Œè¯»å·²æäº¤åœ¨-readview-ä¸Šçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#å¯é‡å¤è¯»å’Œè¯»å·²æäº¤åœ¨-readview-ä¸Šçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"><span>å¯é‡å¤è¯»å’Œè¯»å·²æäº¤åœ¨ ReadView ä¸Šçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h4><p>å¯é‡å¤è¯»ï¼šåœ¨ç¬¬ä¸€æ¬¡è¯»å–æ•°æ®æ—¶ç”Ÿæˆä¸€ä¸ª ReadViewï¼Œè¿™ä¸ª ReadView ä¼šä¸€ç›´ä¿æŒåˆ°äº‹åŠ¡ç»“æŸï¼Œè¿™æ ·å¯ä»¥ä¿è¯åœ¨äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€è¡Œæ•°æ®æ—¶ï¼Œè¯»å–åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419163740.png" alt="ç¨‹åºå‘˜xï¼šreadview åœ¨å¯é‡å¤è¯»å’Œè¯»å·²æäº¤ä¸‹çš„ä¸åŒ" tabindex="0" loading="lazy"><figcaption>ç¨‹åºå‘˜xï¼šreadview åœ¨å¯é‡å¤è¯»å’Œè¯»å·²æäº¤ä¸‹çš„ä¸åŒ</figcaption></figure><p>è¯»å·²æäº¤ï¼šæ¯æ¬¡è¯»å–æ•°æ®å‰éƒ½ç”Ÿæˆä¸€ä¸ª ReadViewï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ¯æ¬¡è¯»å–çš„æ•°æ®éƒ½æ˜¯æœ€æ–°çš„ã€‚</p><p>æ¨èé˜…è¯»ï¼š<a href="http://xiaoyuge.work/mysql-innodb-mvcc/index.html" target="_blank" rel="noopener noreferrer">ææ‡‚Mysqlä¹‹InnoDB MVCC</a></p><h4 id="å¦‚æœä¸¤ä¸ª-ab-äº‹åŠ¡å¹¶å‘ä¿®æ”¹ä¸€ä¸ªå˜é‡-é‚£ä¹ˆ-a-è¯»åˆ°çš„å€¼æ˜¯ä»€ä¹ˆ-æ€ä¹ˆåˆ†æã€‚" tabindex="-1"><a class="header-anchor" href="#å¦‚æœä¸¤ä¸ª-ab-äº‹åŠ¡å¹¶å‘ä¿®æ”¹ä¸€ä¸ªå˜é‡-é‚£ä¹ˆ-a-è¯»åˆ°çš„å€¼æ˜¯ä»€ä¹ˆ-æ€ä¹ˆåˆ†æã€‚"><span>å¦‚æœä¸¤ä¸ª AB äº‹åŠ¡å¹¶å‘ä¿®æ”¹ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆ A è¯»åˆ°çš„å€¼æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆåˆ†æã€‚</span></a></h4><p>äº‹åŠ¡ A åœ¨è¯»å–æ—¶æ˜¯å¦èƒ½è¯»åˆ°äº‹åŠ¡ B çš„ä¿®æ”¹ï¼Œå–å†³äº A æ˜¯å¿«ç…§è¯»è¿˜æ˜¯å½“å‰è¯»ã€‚å¦‚æœæ˜¯å¿«ç…§è¯»ï¼ŒInnoDB ä¼šä½¿ç”¨ MVCC çš„ ReadView åˆ¤æ–­è®°å½•ç‰ˆæœ¬æ˜¯å¦å¯è§ï¼Œè‹¥äº‹åŠ¡ B å°šæœªæäº¤æˆ–åœ¨ A çš„è§†å›¾ä¸å¯è§ï¼Œåˆ™ A ä¼šè¯»åˆ°æ—§å€¼ï¼›å¦‚æœæ˜¯å½“å‰è¯»ï¼Œåˆ™éœ€è¦åŠ é”ï¼Œè‹¥ B å·²æäº¤å¯ç›´æ¥è¯»å–ï¼Œå¦åˆ™ A ä¼šé˜»å¡ç›´åˆ° B ç»“æŸã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 2 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´ MVCCï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šäº†è§£çš„ MVCC å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è”æƒ³é¢ç»åŒå­¦ 7 é¢è¯•åŸé¢˜ï¼šMysql å››ä¸ªéš”ç¦»çº§åˆ«ï¼ŒMVCC å®ç°ï¼Œå¦‚æœä¸¤ä¸ªABäº‹åŠ¡å¹¶å‘ä¿®æ”¹ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆAè¯»åˆ°çš„å€¼æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆåˆ†æï¼Œå¿«ç…§è¯»çš„åŸç†ï¼Œè¯»å·²æäº¤å’Œå¯é‡å¤è¯»åŒºåˆ«ï¼Œå…·ä½“åŸç†æ˜¯ä»€ä¹ˆã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„oppo é¢ç»åŒå­¦ 8 åç«¯å¼€å‘ç§‹æ‹›ä¸€é¢é¢è¯•åŸé¢˜ï¼šè®²è®²Mysqlçš„MVCCæœºåˆ¶</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŸMVCCæœºåˆ¶ä»‹ç»ä¸‹ï¼Ÿï¼ˆç‰ˆæœ¬é“¾ï¼‰ç‰ˆæœ¬é“¾é€šè¿‡ä»€ä¹ˆæ§åˆ¶</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 15 ç‚¹è¯„åç«¯æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šé—®äº†ä¸€ä¸‹mysqlçš„é”å’ŒMVCC</li></ol></blockquote><div style="border:1px solid #096dd9;padding:20px;border-radius:15px;background-color:#f0f8ff;max-width:800px;margin:0 auto;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);"><p>å—¨å—¨å—¨ï¼Œæ—¶éš”ä¸¤å¹´ï¼Œé¢æ¸£é€†è¢­<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" style="color:#096dd9;text-decoration:none;font-weight:bold;">ç¬¬äºŒç‰ˆ PDF ç»ˆäºå¯ä»¥ä¸‹è½½äº†</a>ã€‚æˆ‘ä»¬åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼š</p><ol style="margin-left:20px;"><li><strong><span style="color:#d32f2f;">å¯¹äºé«˜é¢‘é¢˜</span></strong>ï¼šä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" style="color:#096dd9;">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li><strong><span style="color:#d32f2f;">ç»“åˆé¡¹ç›®</span></strong>ï¼šåŒ…æ‹¬<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" style="color:#096dd9;">æŠ€æœ¯æ´¾</a>ã€<a href="https://t.zsxq.com/0bhcI0Gs6" style="color:#096dd9;">mydb</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" style="color:#096dd9;">pmhub</a>æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li><strong><span style="color:#d32f2f;">ä¿®å¤é—®é¢˜</span></strong>ï¼šç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ<a href="https://github.com/itwanger/toBeBetterJavaer/issues" style="color:#096dd9;"> GitHub ä»“åº“ä¸­çš„ issue</a>ï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li><strong><span style="color:#d32f2f;">ä¼˜åŒ–æ’ç‰ˆ</span></strong>ï¼šå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ol><p>ä½ å¯ä»¥æ‰«ä¸‹é¢çš„äºŒç»´ç ï¼ˆæˆ–è€…é•¿æŒ‰è‡ªåŠ¨è¯†åˆ«ï¼‰å…³æ³¨ã€<b>æ²‰é»˜ç‹äºŒ</b>ã€‘å…¬ä¼—å·ï¼Œå‘é€å…³é”®å­— <b>222</b> æ¥è·å– PDF ç‰ˆæœ¬ï¼Œå¦‚æœé¢æ¸£é€†è¢­çœŸçš„å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¸Œæœ›èƒ½ç»™äºŒå“¥çš„å…¬ä¼—å·åŠ ä¸€ä¸ªæ˜Ÿæ ‡ï¼Œæ»¡è¶³æˆ‘é‚£ä¸€ä¸ç‚¹è™šè£å¿ƒï¼Œè¿™å°†æ˜¯æˆ‘æ›´æ–°ä¸‹å»çš„æœ€å¼ºåŠ¨åŠ›ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>é¢æ¸£é€†è¢­çš„æ•´ç†å·¥ä½œçœŸçš„å¤ªä¸å®¹æ˜“äº†ï¼ŒèŠ±äº†æˆ‘å¥½å¤šå¥½å¤šçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå†…å®¹å®Œå…¨å…è´¹ï¼Œä½†è´¨é‡å´æœ‰å£çš†ç¢‘ï¼Œå°±æ˜¯ä¸ºäº†åšä¸€ç‚¹çœŸæ­£æœ‰æ„ä¹‰çš„ã€çº¯ç²¹çš„äº‹æƒ…ã€‚</p></div><p>memoï¼š2025 å¹´ 4 æœˆ 19 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹å‘å¸–</a>è¯´æ‹¿åˆ°äº†æ‹¼å¤šå¤šçš„ offerï¼Œè¿™ä¸‹çœŸçš„æ˜¯åœ†æ»¡äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250419164013.png" alt="çƒå‹æ‹¿åˆ°äº†æ‹¼å¤šå¤šçš„ offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†æ‹¼å¤šå¤šçš„ offer</figcaption></figure><h2 id="é«˜å¯ç”¨" tabindex="-1"><a class="header-anchor" href="#é«˜å¯ç”¨"><span>é«˜å¯ç”¨</span></a></h2><h3 id="_66-mysqlæ•°æ®åº“è¯»å†™åˆ†ç¦»äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_66-mysqlæ•°æ®åº“è¯»å†™åˆ†ç¦»äº†è§£å—"><span>66.MySQLæ•°æ®åº“è¯»å†™åˆ†ç¦»äº†è§£å—ï¼Ÿ</span></a></h3><p>è¯»å†™åˆ†ç¦»å°±æ˜¯æŠŠâ€œå†™æ“ä½œâ€äº¤ç»™ä¸»åº“å¤„ç†ï¼Œâ€œè¯»æ“ä½œâ€åˆ†ç»™å¤šä¸ªä»åº“å¤„ç†ï¼Œä»è€Œæå‡ç³»ç»Ÿå¹¶å‘æ€§èƒ½ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-31df767c-db05-4de4-a05b-a45bcf76c1bf.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šè¯»å†™åˆ†ç¦»" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šè¯»å†™åˆ†ç¦»</figcaption></figure><p>åº”ç”¨å±‚é€šè¿‡ä¸­é—´ä»¶ï¼ˆå¦‚ MyCatã€ShardingSphereï¼‰è‡ªåŠ¨è·¯ç”±è¯·æ±‚ï¼Œå°† INSERT / UPDATE / DELETE ç­‰å†™æ“ä½œå‘é€ç»™ä¸»åº“ï¼Œå°† SELECT æŸ¥è¯¢æ“ä½œå‘é€ç»™ä»åº“ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">// ç¤ºä¾‹ï¼šJavaä¸­é€šè¿‡ä¸åŒæ•°æ®æºåˆ‡æ¢</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">@Transactional</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">public void updateOrder(Order order) {</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    masterDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(order); // å†™æ“ä½œèµ°ä¸»åº“</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">public Order getOrderById(Long id) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> slaveDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">query</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id); // è¯»æ“ä½œèµ°ä»åº“</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸»åº“å°†æ•°æ®å˜æ›´é€šè¿‡ binlog åŒæ­¥åˆ°ä»åº“ï¼Œä»è€Œä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250420153404.png" alt="è½»é£åšå®¢ï¼šä¸»ä»åŒæ­¥" tabindex="0" loading="lazy"><figcaption>è½»é£åšå®¢ï¼šä¸»ä»åŒæ­¥</figcaption></figure><p>ä¸»åº“ dump_thread çº¿ç¨‹é€šè¿‡ TCP å°† binlog æ¨é€ç»™ä»åº“ï¼Œä»åº“ io_thread çº¿ç¨‹ï¼Œæ¥æ”¶ä¸»åº“ binlogï¼Œå†™å…¥ relay logï¼Œä»åº“ sql_thread çº¿ç¨‹è¯»å– relay logï¼Œå¹¶é¡ºåºæ‰§è¡Œ SQL è¯­å¥ï¼Œæ›´æ–°ä»åº“æ•°æ®ã€‚</p><h3 id="_67-è¯»å†™åˆ†ç¦»çš„å®ç°æ–¹å¼æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_67-è¯»å†™åˆ†ç¦»çš„å®ç°æ–¹å¼æœ‰å“ªäº›"><span>67.è¯»å†™åˆ†ç¦»çš„å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</span></a></h3><p>å®ç°è¯»å†™åˆ†ç¦»æœ‰ä¸‰ç§æ–¹å¼ï¼šæœ€ç®€å•çš„æ˜¯åœ¨åº”ç”¨å±‚æ‰‹åŠ¨æ§åˆ¶ä¸»ä»æ•°æ®æºï¼Œé€‚ç”¨äºå°å‹é¡¹ç›®ï¼›</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-771eb01f-3f1a-4437-8e1b-affe4de36ec3.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸šåŠ¡ä»£ç å°è£…" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸šåŠ¡ä»£ç å°è£…</figcaption></figure><p>ä¸­ç­‰é¡¹ç›®æ˜¯é€šè¿‡ Spring + å¤šæ•°æ®æºæ’ä»¶ã€AOP æ³¨è§£è‡ªåŠ¨è·¯ç”±ï¼›</p><p>å¤§å‹ç³»ç»Ÿé€šå¸¸ä½¿ç”¨ä¸­é—´ä»¶ï¼Œå¦‚ ShardingSphereã€MyCatï¼Œæ”¯æŒè‡ªåŠ¨è·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ç­‰åŠŸèƒ½ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-f2313613-25bd-4065-8f63-969a4b5757a7.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ•°æ®åº“ä¸­é—´ä»¶" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ•°æ®åº“ä¸­é—´ä»¶</figcaption></figure><p>Mycat çš„è¯»å†™åˆ†ç¦»åŠŸèƒ½ä¾èµ–äº MySQL çš„ä¸»ä»å¤åˆ¶æ¶æ„ï¼š</p><ul><li>writeHost: è¡¨ç¤ºä¸»èŠ‚ç‚¹ï¼Œè´Ÿè´£å¤„ç†æ‰€æœ‰çš„ DML SQL è¯­å¥ï¼Œå¦‚ INSERTã€UPDATE å’Œ DELETEã€‚</li><li>readHost: è¡¨ç¤ºä»èŠ‚ç‚¹ï¼Œè´Ÿè´£å¤„ç†æŸ¥è¯¢ SQL è¯­å¥ï¼ˆå¦‚ SELECTï¼‰ï¼Œä»¥å®ç°è¯»å†™åˆ†ç¦»ã€‚</li></ul><p>æ­£å¸¸æƒ…å†µä¸‹ï¼ŒMycat ä¼šå°†ç¬¬ä¸€ä¸ªé…ç½®çš„ writeHost ä½œä¸ºé»˜è®¤çš„å†™èŠ‚ç‚¹ã€‚æ‰€æœ‰çš„ DML SQL è¯­å¥ä¼šè¢«å‘é€åˆ°æ­¤é»˜è®¤å†™èŠ‚ç‚¹æ‰§è¡Œã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250420160540.png" alt="é²²é¹ï¼šMycat for MySQL è¯»å†™åˆ†ç¦»" tabindex="0" loading="lazy"><figcaption>é²²é¹ï¼šMycat for MySQL è¯»å†™åˆ†ç¦»</figcaption></figure><p>å†™èŠ‚ç‚¹å®Œæˆæ•°æ®å†™å…¥åï¼Œé€šè¿‡ MySQL çš„ä¸»ä»å¤åˆ¶æœºåˆ¶ï¼Œå°†æ•°æ®åŒæ­¥åˆ°æ‰€æœ‰ä»èŠ‚ç‚¹ï¼Œç¡®ä¿ä¸»ä»æ•°æ®ä¸€è‡´æ€§ã€‚</p><h3 id="_68-ä¸»ä»å¤åˆ¶åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_68-ä¸»ä»å¤åˆ¶åŸç†äº†è§£å—"><span>68.ä¸»ä»å¤åˆ¶åŸç†äº†è§£å—ï¼Ÿ</span></a></h3><p>MySQL çš„ä¸»ä»å¤åˆ¶æ˜¯ä¸€ç§æ•°æ®åŒæ­¥æœºåˆ¶ï¼Œç”¨äºå°†æ•°æ®ä»ä¸»æ•°æ®åº“å¤åˆ¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªä»æ•°æ®åº“ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-1bfbfcb5-2392-4f98-be1b-a66204da09e5.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸»ä»å¤åˆ¶" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸»ä»å¤åˆ¶</figcaption></figure><p>ä¸»åº“æ‰§è¡Œäº‹åŠ¡æäº¤æ—¶ï¼Œå°†æ•°æ®å˜æ›´ä»¥äº‹ä»¶å½¢å¼è®°å½•åˆ° Binlogã€‚ä»åº“é€šè¿‡ I/O çº¿ç¨‹ä»ä¸»åº“çš„ Binlog ä¸­è¯»å–å˜æ›´äº‹ä»¶ï¼Œå¹¶å°†è¿™äº›äº‹ä»¶å†™å…¥åˆ°æœ¬åœ°çš„ä¸­ç»§æ—¥å¿—æ–‡ä»¶ä¸­ï¼ŒSQL çº¿ç¨‹ä¼šå®æ—¶ç›‘æ§ä¸­ç»§æ—¥å¿—çš„å†…å®¹ï¼ŒæŒ‰é¡ºåºè¯»å–å¹¶æ‰§è¡Œè¿™äº›äº‹ä»¶ï¼Œä»è€Œä¿è¯ä»åº“ä¸ä¸»åº“æ•°æ®ä¸€è‡´ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šMySQL çš„ä¸»ä»å¤åˆ¶è¿‡ç¨‹</li></ol></blockquote><h3 id="_69-ä¸»ä»åŒæ­¥å»¶è¿Ÿæ€ä¹ˆå¤„ç†" tabindex="-1"><a class="header-anchor" href="#_69-ä¸»ä»åŒæ­¥å»¶è¿Ÿæ€ä¹ˆå¤„ç†"><span>69.ä¸»ä»åŒæ­¥å»¶è¿Ÿæ€ä¹ˆå¤„ç†ï¼Ÿ</span></a></h3><p>ä¸»ä»åŒæ­¥å»¶è¿Ÿæ˜¯å› ä¸ºä»åº“éœ€è¦å…ˆæ¥æ”¶ binlogï¼Œå†æ‰§è¡Œ SQL æ‰èƒ½åŒæ­¥ä¸»åº“æ•°æ®ï¼Œåœ¨é«˜å¹¶å‘å†™æˆ–ç½‘ç»œæŠ–åŠ¨æ—¶å®¹æ˜“å‡ºç°å»¶è¿Ÿï¼Œå¯¼è‡´è¯»å†™ä¸ä¸€è‡´ã€‚</p><p>ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆï¼šå¯¹ä¸€è‡´æ€§è¦æ±‚é«˜çš„æŸ¥è¯¢ï¼ˆå¦‚æ”¯ä»˜ç»“æœæŸ¥è¯¢ï¼‰å¯ä»¥ç›´æ¥èµ°ä¸»åº“ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ä¼ªä»£ç ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> query</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> sql) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isWriteQuery</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(sql) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> needStrongConsistency</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(sql)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> masterDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> slaveDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆï¼šå¯¹äºéå…³é”®ä¸šåŠ¡å…è®¸çŸ­æš‚æ•°æ®ä¸ä¸€è‡´ï¼Œå¯ä»¥æç¤ºç”¨æˆ·â€œæ•°æ®åŒæ­¥ä¸­ï¼Œè¯·ç¨ååˆ·æ–°â€ï¼Œç„¶åå€ŸåŠ©å¼‚æ­¥é€šçŸ¥æœºåˆ¶æ›¿ä»£å®æ—¶æŸ¥è¯¢ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// ä¼ªä»£ç ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> query</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> sql) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isWriteQuery</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(sql)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> masterDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // å¼‚æ­¥é€šçŸ¥ç”¨æˆ·æ•°æ®å·²æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        notifyUser</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ•°æ®åŒæ­¥ä¸­ï¼Œè¯·ç¨ååˆ·æ–°&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> slaveDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼šé‡‡ç”¨åŠåŒæ­¥å¤åˆ¶ï¼Œä¸»åº“åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œè¦ç­‰è‡³å°‘ä¸€ä¸ªä»åº“ç¡®è®¤æ”¶åˆ° binlogï¼ˆä½†ä¸è¦æ±‚æ‰§è¡Œå®Œæˆï¼‰ï¼Œæ‰ç®—æäº¤æˆåŠŸã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250420164609.png" alt="éªé©¬é‡‘é¾™ï¼šåŠåŒæ­¥å¤åˆ¶" tabindex="0" loading="lazy"><figcaption>éªé©¬é‡‘é¾™ï¼šåŠåŒæ­¥å¤åˆ¶</figcaption></figure><h4 id="è¯·è¯´è¯´åŠåŒæ­¥å¤åˆ¶çš„æµç¨‹" tabindex="-1"><a class="header-anchor" href="#è¯·è¯´è¯´åŠåŒæ­¥å¤åˆ¶çš„æµç¨‹"><span>è¯·è¯´è¯´åŠåŒæ­¥å¤åˆ¶çš„æµç¨‹ï¼Ÿ</span></a></h4><p>ç¬¬ä¸€æ­¥ï¼Œä¸»åº“å®‰è£…åŠåŒæ­¥æ’ä»¶ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">INSTALL PLUGIN rpl_semi_sync_master SONAME </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;semisync_master.so&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œä¸»åº“å¯ç”¨åŠåŒæ­¥å¤åˆ¶å¹¶è®¾ç½®è¶…æ—¶æ—¶é—´ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rpl_semi_sync_master_enabled </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rpl_semi_sync_master_timeout </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸»åº“ my.cnf é…ç½®ç¤ºä¾‹ï¼š</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">plugin-load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;rpl_semi_sync_master=semisync_master.so&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">rpl_semi_sync_master_enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">rpl_semi_sync_master_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 10000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># MySQL 5.7+å»ºè®®ä½¿ç”¨æ— æŸæ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">rpl_semi_sync_master_wait_point</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> AFTER_SYNC</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼Œä»åº“å®‰è£…åŠåŒæ­¥æ’ä»¶ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">INSTALL PLUGIN rpl_semi_sync_slave SONAME </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;semisync_slave.so&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç¬¬å››æ­¥ï¼Œä»åº“å¯ç”¨åŠåŒæ­¥å¤åˆ¶ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rpl_semi_sync_slave_enabled </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä»åº“ my.cnf é…ç½®ç¤ºä¾‹ï¼š</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">plugin-load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;rpl_semi_sync_slave=semisync_slave.so&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">rpl_semi_sync_slave_enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>memoï¼š2025 å¹´ 4 æœˆ 20 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">ç»™çƒå‹ä¿®æ”¹ç®€å†</a>æ—¶ï¼Œç¢°åˆ°æœ‰çƒå‹è¯´ï¼ŒæŠŠæ˜Ÿçƒå®‰åˆ©ç»™äº†åŒé—¨ï¼Œè¿›æ¥åéƒ½è¯´å¥½ï¼Œå£ç¢‘+1ï¼Œå¾ˆæ¬£æ…°å‘¢ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250420170230.png" alt="çƒå‹å·²ç»æŠŠæ˜Ÿçƒå®‰åˆ©ç»™äº†åŒé—¨" tabindex="0" loading="lazy"><figcaption>çƒå‹å·²ç»æŠŠæ˜Ÿçƒå®‰åˆ©ç»™äº†åŒé—¨</figcaption></figure><h3 id="_70-ğŸŒŸä½ ä»¬ä¸€èˆ¬æ˜¯æ€ä¹ˆåˆ†åº“çš„å‘¢" tabindex="-1"><a class="header-anchor" href="#_70-ğŸŒŸä½ ä»¬ä¸€èˆ¬æ˜¯æ€ä¹ˆåˆ†åº“çš„å‘¢"><span>70.ğŸŒŸä½ ä»¬ä¸€èˆ¬æ˜¯æ€ä¹ˆåˆ†åº“çš„å‘¢ï¼Ÿ</span></a></h3><p>åˆ†åº“çš„ç­–ç•¥æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯å‚ç›´åˆ†åº“ï¼šæŒ‰ç…§ä¸šåŠ¡æ¨¡å—å°†ä¸åŒçš„è¡¨æ‹†åˆ†åˆ°ä¸åŒçš„åº“ä¸­ï¼Œæ¯”å¦‚è¯´ç”¨æˆ·ã€ç™»å½•ã€æƒé™ç­‰è¡¨æ”¾åœ¨ç”¨æˆ·åº“ä¸­ï¼Œå•†å“ã€åˆ†ç±»ã€åº“å­˜æ”¾åœ¨å•†å“åº“ä¸­ï¼Œä¼˜æƒ åˆ¸ã€æ»¡å‡ã€ç§’æ€æ”¾åœ¨æ´»åŠ¨åº“ä¸­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-2a43af18-617b-4502-b66a-894c2ff4c6c3.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå‚ç›´åˆ†åº“" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå‚ç›´åˆ†åº“</figcaption></figure><p>ç¬¬äºŒç§æ˜¯æ°´å¹³åˆ†åº“ï¼šæŒ‰ç…§ä¸€å®šçš„ç­–ç•¥å°†ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªåº“ä¸­ï¼Œæ¯”å¦‚å“ˆå¸Œåˆ†ç‰‡å’ŒèŒƒå›´åˆ†ç‰‡ï¼Œå¯¹ç”¨æˆ· id è¿›è¡Œå–æ¨¡è¿ç®—æˆ–è€…èŒƒå›´åˆ’åˆ†ï¼Œå°†æ•°æ®åˆ†æ•£åˆ°ä¸åŒçš„åº“ä¸­ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-debe0fb1-d7f7-4ef2-8c99-13c9377138b6.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ°´å¹³åˆ†åº“" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ°´å¹³åˆ†åº“</figcaption></figure><p>è´´ä¸€æ®µä½¿ç”¨ ShardingSphere çš„ inline ç®—æ³•å®šä¹‰åˆ†ç‰‡è§„åˆ™ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">rules</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!SHARDING</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  tables</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    order</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      actualDataNodes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">db_${0..3}.order_${0..15}</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      databaseStrategy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        standard</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          shardingColumn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">user_id</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          shardingAlgorithmName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">db_hash_mod</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      tableStrategy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        standard</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          shardingColumn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">order_time</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          shardingAlgorithmName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">table_interval_yearly</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  shardingAlgorithms</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    db_hash_mod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">HASH_MOD</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      props</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        sharding-count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    table_interval_yearly</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">INTERVAL</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      props</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        datetime-pattern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;yyyy-MM-dd HH:mm:ss&#39;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        datetime-lower</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2024-01-01 00:00:00&#39;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        datetime-upper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2025-01-01 00:00:00&#39;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        sharding-suffix-pattern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;yyyy&#39;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        datetime-interval-amount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        datetime-interval-unit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Years&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 7 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šåˆ†åº“åˆ†è¡¨äº†è§£å—</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´åˆ†åº“åˆ†è¡¨çš„å‡†åˆ™</li></ol></blockquote><h3 id="_71-ğŸŒŸé‚£ä½ ä»¬æ˜¯æ€ä¹ˆåˆ†è¡¨çš„" tabindex="-1"><a class="header-anchor" href="#_71-ğŸŒŸé‚£ä½ ä»¬æ˜¯æ€ä¹ˆåˆ†è¡¨çš„"><span>71.ğŸŒŸé‚£ä½ ä»¬æ˜¯æ€ä¹ˆåˆ†è¡¨çš„ï¼Ÿ</span></a></h3><p>å½“å•è¡¨è¶…è¿‡ 500 ä¸‡æ¡æ•°æ®ï¼Œå°±å¯ä»¥è€ƒè™‘æ°´å¹³åˆ†è¡¨äº†ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥å°†æ–‡ç« è¡¨æ‹†åˆ†æˆå¤šä¸ªè¡¨ï¼Œå¦‚ article_0ã€article_9999ã€article_19999 ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-7cba6ce0-c8bb-4f51-9c3b-e5a44e724c79.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šè¡¨æ‹†åˆ†" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šè¡¨æ‹†åˆ†</figcaption></figure><p>åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸­ï¼Œæˆ‘ä»¬å°†æ–‡ç« çš„åŸºæœ¬ä¿¡æ¯å’Œå†…å®¹è¯¦æƒ…åšäº†å‚ç›´åˆ†è¡¨å¤„ç†ï¼Œå› ä¸ºæ–‡ç« çš„å†…å®¹ä¼šå ç”¨æ¯”è¾ƒå¤§çš„ç©ºé—´ï¼Œåœ¨åªéœ€è¦æŸ¥çœ‹æ–‡ç« åŸºæœ¬ä¿¡æ¯æ—¶æŠŠæ–‡ç« è¯¦æƒ…ä¹Ÿå¸¦å‡ºæ¥çš„è¯ï¼Œå°±ä¼šå ç”¨æ›´å¤šçš„ç½‘ç»œ IO å’Œå†…å­˜å¯¼è‡´æŸ¥è¯¢å˜æ…¢ï¼›è€Œæ–‡ç« çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚æ ‡é¢˜ã€ä½œè€…ã€çŠ¶æ€ç­‰ä¿¡æ¯å ç”¨çš„ç©ºé—´è¾ƒå°ï¼Œå¾ˆé€‚åˆä¸éœ€è¦æŸ¥è¯¢æ–‡ç« è¯¦æƒ…çš„åœºæ™¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250422152008.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ–‡ç« å’Œè¯¦æƒ…å‚ç›´åˆ†è¡¨" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ–‡ç« å’Œè¯¦æƒ…å‚ç›´åˆ†è¡¨</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 7 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šåˆ†åº“åˆ†è¡¨äº†è§£å—</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´åˆ†åº“åˆ†è¡¨çš„å‡†åˆ™</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 29 Java åç«¯ä¸€é¢åŸé¢˜ï¼šè¡¨å­˜æ»¡äº†ä¹‹åæ€ä¹ˆæ‰©è¡¨ï¼Ÿ</li></ol></blockquote><h3 id="_72-æ°´å¹³åˆ†åº“åˆ†è¡¨çš„åˆ†ç‰‡ç­–ç•¥æœ‰å“ªå‡ ç§" tabindex="-1"><a class="header-anchor" href="#_72-æ°´å¹³åˆ†åº“åˆ†è¡¨çš„åˆ†ç‰‡ç­–ç•¥æœ‰å“ªå‡ ç§"><span>72.æ°´å¹³åˆ†åº“åˆ†è¡¨çš„åˆ†ç‰‡ç­–ç•¥æœ‰å“ªå‡ ç§ï¼Ÿ</span></a></h3><p>å¸¸è§çš„åˆ†ç‰‡ç­–ç•¥æœ‰ä¸‰ç§ï¼ŒèŒƒå›´åˆ†ç‰‡ã€Hash åˆ†ç‰‡å’Œè·¯ç”±åˆ†ç‰‡ã€‚</p><p>èŒƒå›´åˆ†ç‰‡æ˜¯æ ¹æ®æŸä¸ªå­—æ®µçš„å€¼èŒƒå›´è¿›è¡Œæ°´å¹³æ‹†åˆ†ã€‚é€‚ç”¨äºåˆ†ç‰‡é”®å…·æœ‰è¿ç»­æ€§çš„åœºæ™¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-b3882ca3-1d04-44e2-9015-7e6c867255a0.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šèŒƒå›´åˆ†ç‰‡" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šèŒƒå›´åˆ†ç‰‡</figcaption></figure><p>æ¯”å¦‚è¯´å°† user_id ä½œä¸ºåˆ†ç‰‡é”®ï¼š</p><ul><li>1 ~ 10000 â†’ db1.user_1</li><li>10001 ~ 20000 â†’ db2.user_2</li></ul><p>Hash åˆ†ç‰‡æ˜¯æŒ‡é€šè¿‡å¯¹åˆ†ç‰‡é”®çš„å€¼è¿›è¡Œå“ˆå¸Œå–æ¨¡ï¼Œå°†æ•°æ®å‡åŒ€åˆ†å¸ƒåˆ°å¤šä¸ªåº“è¡¨ä¸­ï¼Œé€‚ç”¨äºåˆ†ç‰‡é”®å…·æœ‰ç¦»æ•£æ€§çš„åœºæ™¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e01e7757-c337-48c8-95db-2f7cfd2bc036.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šHash åˆ†ç‰‡" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šHash åˆ†ç‰‡</figcaption></figure><p>æ¯”å¦‚è¯´æˆ‘ä»¬ä¸€å¼€å§‹è§„åˆ’å¥½äº† 4 ä¸ªè¡¨ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç®€å•åœ°é€šè¿‡å–æ¨¡æ¥å®ç°åˆ†è¡¨ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getTableNameByHash</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> userId) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tableIndex </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) (userId </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">%</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;user_&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> tableIndex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·¯ç”±åˆ†ç‰‡æ˜¯é€šè¿‡è·¯ç”±é…ç½®æ¥ç¡®å®šæ•°æ®åº”è¯¥å­˜å‚¨åœ¨å“ªä¸ªåº“è¡¨ï¼Œé€‚ç”¨äºåˆ†ç‰‡é”®ä¸è§„å¾‹çš„åœºæ™¯ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-fcd34332-d38d-455a-875d-d4afd37cac72.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šé…ç½®è·¯ç”±" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šé…ç½®è·¯ç”±</figcaption></figure><p>æ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥é€šè¿‡ order_router è¡¨æ¥ç¡®å®šè®¢å•æ•°æ®å­˜å‚¨åœ¨å“ªä¸ªè¡¨ä¸­ï¼š</p><table><thead><tr><th>order_id</th><th>table_id</th></tr></thead><tbody><tr><td>xxxx</td><td>table_1</td></tr><tr><td>yyyy</td><td>table_2</td></tr><tr><td>zzzz</td><td>table_3</td></tr></tbody></table><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 24 é¢è¯•åŸé¢˜ï¼šé¡¹ç›®ä¸­çš„æ°´å¹³åˆ†è¡¨æ˜¯æ€ä¹ˆåšçš„ï¼Ÿåˆ†ç‰‡é”®å…·ä½“æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 29 Java åç«¯ä¸€é¢åŸé¢˜ï¼šåˆ†åº“åˆ†è¡¨å…·ä½“çš„åˆ†ç‰‡ç­–ç•¥æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 22 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©ç»™<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æ‹¿åˆ°èš‚èšæš‘æœŸå®ä¹ çš„çƒå‹</a>å‘äº†ä¸ªçº¢åŒ…ï¼Œæ„Ÿè°¢ä»–åœ¨æ˜Ÿçƒçš„ç»éªŒè´´ï¼Œè¿™äº›ç²¾åå¸–ä¹Ÿä¼šå¸®åŠ©åˆ°ä¸‹ä¸€å±Šçš„çƒå‹ä»¬ï¼ŒçœŸçš„éå¸¸æ„Ÿè°¢ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250422153403.png" alt="æ‹¿åˆ°èš‚èš offer çš„çƒå‹å¯¹æ˜Ÿçƒå£ç¢‘+1 äº†" tabindex="0" loading="lazy"><figcaption>æ‹¿åˆ°èš‚èš offer çš„çƒå‹å¯¹æ˜Ÿçƒå£ç¢‘+1 äº†</figcaption></figure><h3 id="_73-ä¸åœæœºæ‰©å®¹æ€ä¹ˆå®ç°" tabindex="-1"><a class="header-anchor" href="#_73-ä¸åœæœºæ‰©å®¹æ€ä¹ˆå®ç°"><span>73.ä¸åœæœºæ‰©å®¹æ€ä¹ˆå®ç°ï¼Ÿ</span></a></h3><p>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼šæ–°æ—§åº“åŒæ—¶å†™å…¥ï¼Œç¡®ä¿æ•°æ®å®æ—¶åŒæ­¥ï¼›å¯ä»¥å€ŸåŠ©æ¶ˆæ¯é˜Ÿåˆ—å®ç°å¼‚æ­¥è¡¥å¿ï¼Œå¹‚ç­‰é¿å…é‡å¤å†™å…¥ã€‚è¯»æ“ä½œä»ç„¶èµ°æ—§åº“ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-2d4d94c9-e816-47fc-93dd-a835b1318099.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ•°æ®åŒæ­¥å’Œæ ¡éªŒ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ•°æ®åŒæ­¥å’Œæ ¡éªŒ</figcaption></figure><p>ä»£ç å‚è€ƒï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Order</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> order) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    oldDB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">insert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(order);</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // å†™å…¥æ—§åº“</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    newDB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">insert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(order);</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // å†™å…¥æ–°æ‰©å®¹èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    kafka</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;data_sync&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, order);</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // å¼‚æ­¥è¡¥å¿é€šé“</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒä¸ªé˜¶æ®µï¼Œé€šè¿‡ Canal æˆ–è€…è‡ªç ”è„šæœ¬å°†æ—§åº“çš„å†å²æ•°æ®åŒæ­¥åˆ°æ–°åº“ã€‚å…³é”®ä¸šåŠ¡åœ¨æŸ¥è¯¢æ—¶åŒæ—¶æŸ¥è¯¢æ–°æ—§åº“ï¼Œè¿›è¡Œæ•°æ®æ ¡éªŒï¼Œç¡®ä¿ä¸€è‡´æ€§ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Order</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getOrders</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> userId) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Order</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> orders </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> newDB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getOrders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Order</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> oldOrders </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> oldDB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getOrders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(oldOrders)</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // æ•°æ®ä¸ä¸€è‡´ï¼Œè¿›è¡Œè¡¥å¿</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        kafka</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;data_sync&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, oldOrders);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰ä¸ªé˜¶æ®µï¼Œåœ¨ç¡®è®¤æ–°åº“æ•°æ®ä¸€è‡´æ€§åï¼Œé€æ­¥å°†è¯»è¯·æ±‚åˆ‡æ¢åˆ°æ–°åº“ï¼Œç„¶åä¸‹çº¿æ—§åº“ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-a122d6d5-fff2-4ccd-8ddb-a9282eb2e2da.jpg" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸‹çº¿æ—§åº“" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸‹çº¿æ—§åº“</figcaption></figure><h3 id="_74-å¸¸ç”¨çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_74-å¸¸ç”¨çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶æœ‰å“ªäº›"><span>74.å¸¸ç”¨çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶æœ‰å“ªäº›ï¼Ÿ</span></a></h3><p>å¸¸ç”¨çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶æœ‰ ShardingSphere å’Œ Mycatã€‚</p><p>â‘ ã€ShardingSphere æœ€åˆç”±å½“å½“å¼€æºï¼Œåæ¥è´¡çŒ®ç»™äº† Apacheï¼Œå…¶å­é¡¹ç›® Sharding-JDBC ä¸»è¦åœ¨ Java çš„ JDBC å±‚æä¾›é¢å¤–çš„æœåŠ¡ã€‚æ— éœ€é¢å¤–éƒ¨ç½²å’Œä¾èµ–ï¼Œå¯ç†è§£ä¸ºå¢å¼ºç‰ˆçš„ JDBC é©±åŠ¨ï¼Œå®Œå…¨å…¼å®¹ JDBC å’Œå„ç§ ORM æ¡†æ¶ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241207120214.png" alt="AWSï¼šSharding-JDBC" tabindex="0" loading="lazy"><figcaption>AWSï¼šSharding-JDBC</figcaption></figure><p>â‘¡ã€Mycat æ˜¯ç”±é˜¿é‡Œå·´å·´çš„ä¸€æ¬¾äº§å“ Cobar è¡ç”Ÿè€Œæ¥ï¼Œå¯ä»¥æŠŠå®ƒçœ‹ä½œä¸€ä¸ªæ•°æ®åº“ä»£ç†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241207121845.png" alt="piwenfeiï¼šmycat" tabindex="0" loading="lazy"><figcaption>piwenfeiï¼šmycat</figcaption></figure><p>æ¨èé˜…è¯»ï¼š<a href="https://yanxizhu.com/index.php/archives/113/" target="_blank" rel="noopener noreferrer">mycat ä»‹ç»</a></p><h3 id="_75-ä½ è§‰å¾—åˆ†åº“åˆ†è¡¨ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å‘¢" tabindex="-1"><a class="header-anchor" href="#_75-ä½ è§‰å¾—åˆ†åº“åˆ†è¡¨ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å‘¢"><span>75.ä½ è§‰å¾—åˆ†åº“åˆ†è¡¨ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</span></a></h3><p>ç¬¬ä¸€ï¼Œè·¨åº“äº‹åŠ¡æ— æ³•ä¾èµ–å•æœº MySQL çš„ ACID ç‰¹æ€§ï¼Œéœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œå¦‚ Seata çš„ AT æ¨¡å¼ã€TCC æ¨¡å¼ç­‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250423110330.png" alt="PmHub é¡¹ç›®ä¸­ Seata" tabindex="0" loading="lazy"><figcaption>PmHub é¡¹ç›®ä¸­ Seata</figcaption></figure><p>ç¬¬äºŒï¼Œè·¨åº“åæ— æ³•ä½¿ç”¨ JOIN è”è¡¨æŸ¥è¯¢ã€‚å¯ä»¥åœ¨ä¸šåŠ¡å±‚è¿›è¡Œæ‹¼æ¥ï¼Œæˆ–è€…æŠŠéœ€è¦è”è¡¨æŸ¥è¯¢çš„æ•°æ®æ”¾åˆ° ES ä¸­ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Java ä»£ç ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> user </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getUserById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Order</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> orders </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> orderService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getOrdersByUserId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰ï¼Œè‡ªå¢ ID åœ¨åˆ†ç‰‡åœºæ™¯ä¸‹å®¹æ˜“å†²çªï¼Œéœ€è¦ä½¿ç”¨å…¨å±€å”¯ä¸€æ–¹æ¡ˆã€‚</p><p>æ•°æ®åº“è¡¨è¢«åˆ‡åˆ†åï¼Œä¸èƒ½å†ä¾èµ–æ•°æ®åº“è‡ªèº«çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›æ‰‹æ®µæ¥ä¿è¯å…¨å±€ä¸»é”®å”¯ä¸€ã€‚æ¯”å¦‚è¯´é›ªèŠ±ç®—æ³•ã€äº¬ä¸œçš„ JD-hotkeyã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250423111247.png" alt="äº¬ä¸œçš„ JD-hotkey" tabindex="0" loading="lazy"><figcaption>äº¬ä¸œçš„ JD-hotkey</figcaption></figure><h4 id="ä½ ä»¬é¡¹ç›®ä¸­çš„åˆ†å¸ƒå¼ä¸»é”®-id-æ˜¯æ€ä¹ˆç”Ÿæˆçš„" tabindex="-1"><a class="header-anchor" href="#ä½ ä»¬é¡¹ç›®ä¸­çš„åˆ†å¸ƒå¼ä¸»é”®-id-æ˜¯æ€ä¹ˆç”Ÿæˆçš„"><span>ä½ ä»¬é¡¹ç›®ä¸­çš„åˆ†å¸ƒå¼ä¸»é”® id æ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼Ÿ</span></a></h4><p>åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åœ¨é›ªèŠ±ç®—æ³•çš„åŸºç¡€ä¸Šå®ç°äº†ä¸€å¥—è‡ªå®šä¹‰çš„ ID ç”Ÿæˆæ–¹æ¡ˆï¼Œé€šè¿‡æ›´æ”¹æ—¶é—´æˆ³å•ä½ã€ID é•¿åº¦ã€workId ä¸ dataCenterId çš„åˆ†é…æ¯”ä¾‹ï¼ŒID ç”Ÿæˆçš„å»¶è¿Ÿé™ä½äº† 20%ï¼›æ»¡è¶³äº†åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ ID çš„å”¯ä¸€æ€§ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223150915.png" alt="æŠ€æœ¯æ´¾ï¼šè‡ªå®šä¹‰é›ªèŠ±ç®—æ³•ç®—æ³•" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼šè‡ªå®šä¹‰é›ªèŠ±ç®—æ³•ç®—æ³•</figcaption></figure><h4 id="é›ªèŠ±ç®—æ³•å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„" tabindex="-1"><a class="header-anchor" href="#é›ªèŠ±ç®—æ³•å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„"><span>é›ªèŠ±ç®—æ³•å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</span></a></h4><p>é›ªèŠ±ç®—æ³•æ˜¯ Twitter å¼€æºçš„åˆ†å¸ƒå¼ ID ç”Ÿæˆç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä½¿ç”¨ä¸€ä¸ª 64 ä½çš„æ•°å­—æ¥ä½œä¸ºå…¨å±€å”¯ä¸€ IDã€‚</p><ul><li>ç¬¬ 1 ä½æ˜¯ç¬¦å·ä½ï¼Œæ°¸è¿œæ˜¯ 0ï¼Œè¡¨ç¤ºæ­£æ•°ã€‚</li><li>æ¥ä¸‹æ¥çš„ 41 ä½æ˜¯æ—¶é—´æˆ³ï¼Œè®°å½•çš„æ˜¯å½“å‰æ—¶é—´æˆ³å‡å»ä¸€ä¸ªå›ºå®šçš„å¼€å§‹æ—¶é—´æˆ³ï¼Œå¯ä»¥ä½¿ç”¨ 69 å¹´ã€‚</li><li>ç„¶åæ˜¯ 10 ä½çš„å·¥ä½œæœºå™¨ IDã€‚</li><li>æœ€åæ˜¯ 12 ä½çš„åºåˆ—å·ï¼Œæ¯æ¯«ç§’æœ€å¤šå¯ç”Ÿæˆ 4096 ä¸ª IDã€‚</li></ul><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20241223150351.png" alt="æŠ€æœ¯æ´¾ï¼šé›ªèŠ±ç®—æ³•" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼šé›ªèŠ±ç®—æ³•</figcaption></figure><p>å¤§è‡´çš„å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SnowflakeIdGenerator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> datacenterId </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // æ•°æ®ä¸­å¿ƒID</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> machineId </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // æœºå™¨ID</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sequence </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // åºåˆ—å·</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> lastTimestamp </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> synchronized</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> long</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> nextId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> timestamp</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentTimeMillis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (timestamp </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> lastTimestamp) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            sequence </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (sequence </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4095</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (sequence </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (timestamp </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> lastTimestamp) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    timestamp </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentTimeMillis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            sequence </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        lastTimestamp </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> timestamp;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ((timestamp </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1609459200000L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">|</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (datacenterId </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 17</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">|</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (machineId </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">|</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sequence;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 29 Java åç«¯ä¸€é¢åŸé¢˜ï¼šidæ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼Ÿï¼ˆåˆ†å¸ƒå¼è‡ªå¢ä¸»é”®ï¼‰</li></ol></blockquote><!----><p>memoï¼š2025 å¹´ 4 æœˆ 23 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹åé¦ˆ</a>è¯´æ‹¿åˆ°äº† vivo çš„ offerï¼Œä¹Ÿæ˜¯ä»–ç¬¬ä¸€ä¸ªæš‘æœŸå®ä¹  offerï¼ŒçœŸçš„éœ€è¦æ­å–œå•¦ğŸ‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250423111757.png" alt="vivo æš‘æœŸå®ä¹  offer" tabindex="0" loading="lazy"><figcaption>vivo æš‘æœŸå®ä¹  offer</figcaption></figure><h2 id="è¿ç»´" tabindex="-1"><a class="header-anchor" href="#è¿ç»´"><span>è¿ç»´</span></a></h2><h3 id="_76-ç™¾ä¸‡çº§åˆ«ä»¥ä¸Šçš„æ•°æ®å¦‚ä½•åˆ é™¤" tabindex="-1"><a class="header-anchor" href="#_76-ç™¾ä¸‡çº§åˆ«ä»¥ä¸Šçš„æ•°æ®å¦‚ä½•åˆ é™¤"><span>76.ç™¾ä¸‡çº§åˆ«ä»¥ä¸Šçš„æ•°æ®å¦‚ä½•åˆ é™¤ï¼Ÿ</span></a></h3><p>åœ¨å¤„ç†ç™¾ä¸‡çº§åˆ«çš„æ•°æ®åˆ é™¤æ—¶ï¼Œå¤§èŒƒå›´çš„ DELETE è¯­å¥å¾€å¾€ä¼šé€ æˆé”è¡¨æ—¶é—´é•¿ã€äº‹åŠ¡æ—¥å¿—è†¨èƒ€ç­‰é—®é¢˜ã€‚</p><p>å¯ä»¥é‡‡ç”¨æ‰¹é‡åˆ é™¤çš„æ–¹æ¡ˆï¼Œå°†åˆ é™¤æ“ä½œåˆ†æˆå¤šä¸ªå°æ‰¹æ¬¡è¿›è¡Œå¤„ç†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> batchDelete</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> tableName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> condition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> batchSize) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 1. åˆ›å»ºçº¿ç¨‹æ± </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> threadCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Runtime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRuntime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">availableProcessors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ExecutorService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> executor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newFixedThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(threadCount);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    CountDownLatch</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> latch </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CountDownLatch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(threadCount)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 2. è·å–æ€»è®°å½•æ•°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> totalCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getTotalCount</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(tableName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> condition)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 3. è®¡ç®—æ¯ä¸ªçº¿ç¨‹å¤„ç†çš„æ•°æ®é‡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> perThreadCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> totalCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> threadCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 4. åˆ†é…ä»»åŠ¡ç»™çº¿ç¨‹æ± </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> threadCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> startId </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> perThreadCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> endId </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> threadCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> totalCount </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (startId </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> perThreadCount)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                // åˆ†æ‰¹æ¬¡åˆ é™¤æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> j</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> startId; j </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> endId; j </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> batchSize) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> deleteSql</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                        &quot;DELETE FROM %s WHERE %s LIMIT %d&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                        tableName, condition, batchSize</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    );</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                    // æ‰§è¡Œåˆ é™¤</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    jdbcTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(deleteSql);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">finally</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                latch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">countDown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 5. ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    latch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">await</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥é‡‡ç”¨åˆ›å»ºæ–°è¡¨æ›¿æ¢åŸè¡¨çš„æ–¹å¼ï¼ŒæŠŠéœ€è¦ä¿ç•™çš„æ•°æ®è¿ç§»åˆ°æ–°è¡¨ä¸­ï¼Œç„¶ååˆ é™¤æ—§è¡¨ã€‚</p><p>ç®€å•çš„æ–¹æ¡ˆï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 1. åˆ›å»ºæ–°è¡¨ç»“æ„(åŒ…å«ç´¢å¼•)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> new_table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 2. æ’å…¥éœ€è¦ä¿ç•™çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new_table </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> condition;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 3. é‡å‘½åè¡¨</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">RENAME </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> old_table, new_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 4. åˆ é™¤æ—§è¡¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DROP</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> old_table;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŠ å…¥æ£€æŸ¥è¡¨ç©ºé—´ã€åˆ†æ‰¹å¯¼å…¥æ•°æ®ã€éªŒè¯æ•°æ®ä¸€è‡´æ€§ç­‰æ­¥éª¤ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 1. åœ¨æ‰§è¡Œä¹‹å‰å…ˆæ£€æŸ¥ç©ºé—´æ˜¯å¦è¶³å¤Ÿ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_schema, </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       table_name, </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">       round</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(((data_length + index_length) / </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Size in MB&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> information_schema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">TABLES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_schema </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DATABASE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;large_table&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 2. åˆ›å»ºæ–°è¡¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> new_table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LIKE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 3. åˆ†æ‰¹å¯¼å…¥æ•°æ®ï¼ˆé¿å…ä¸€æ¬¡æ€§å¯¼å…¥è¿‡å¤šæ•°æ®ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> @batch</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> @batch_size</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> @total</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(*) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> condition);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">REPEAT</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new_table </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> condition</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    LIMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> @batch_size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    SET</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> @batch</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> @batch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">UNTIL </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">@batch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">@batch_size</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> @total</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> END</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> REPEAT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 4. éªŒè¯æ•°æ®ä¸€è‡´æ€§</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(*) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new_table;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(*) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> condition;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 5. åœ¨ä¸šåŠ¡ä½å³°æœŸæ‰§è¡Œè¡¨åˆ‡æ¢</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">RENAME </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> old_table, </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">             new_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- 6. ç¡®è®¤æ— è¯¯åå†åˆ é™¤æ—§è¡¨ï¼ˆå»ºè®®ä¸è¦ç«‹å³åˆ é™¤ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- DROP TABLE old_table;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_77-åƒä¸‡çº§å¤§è¡¨å¦‚ä½•æ·»åŠ å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#_77-åƒä¸‡çº§å¤§è¡¨å¦‚ä½•æ·»åŠ å­—æ®µ"><span>77.åƒä¸‡çº§å¤§è¡¨å¦‚ä½•æ·»åŠ å­—æ®µï¼Ÿ</span></a></h3><p>åœ¨ä½ç‰ˆæœ¬çš„ MySQL ä¸­ï¼Œåƒä¸‡çº§æ•°æ®é‡çš„è¡¨ä¸­æ·»åŠ å­—æ®µæ—¶ï¼Œç›´æ¥ä½¿ç”¨ <code>ALTER TABLE</code> å‘½ä»¤ä¼šå¯¼è‡´é•¿æ—¶é—´é”è¡¨ã€ç”šè‡³æ•°æ®åº“å´©æºƒç­‰ã€‚</p><p>å¯ä»¥ä½¿ç”¨ Percona Toolkit çš„ pt-online-schema-change æ¥å®Œæˆï¼Œå®ƒé€šè¿‡åˆ›å»ºä¸´æ—¶è¡¨ã€é€æ­¥åŒæ­¥æ•°æ®å¹¶ä½¿ç”¨è§¦å‘å™¨æ•è·å˜æ›´æ¥å®ç°ã€‚</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pt-online-schema-change</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --alter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ADD COLUMN new_column datatype&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> D=database,t=your_table</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --execute</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¯¹äº MySQL 8.0+ ç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ <code>ALTER TABLE</code> æ¥å®Œæˆï¼Œå› ä¸ºåŠ å…¥äº† INSTAN ç®—æ³•ï¼Œæ·»åŠ åˆ—å¹¶ä¸ä¼šé•¿æ—¶é—´é”è¡¨ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> your_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ADD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> COLUMN new_column datatype;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœæ²¡æœ‰æŒ‡å®š <code>ALGORITHM=INSTANT</code> ç®—æ³•ï¼ŒMySQL ä¼šå…ˆå°è¯• INSTANT ç®—æ³•ï¼›å¦‚æœæ— æ³•å®Œæˆï¼Œä¼šåˆ‡æ¢åˆ° INPLACE ç®—æ³•ï¼›å¦‚æœä»ç„¶æ— æ³•å®Œæˆï¼Œä¼šå°è¯• COPY ç®—æ³•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250424114631.png" alt="æˆªå›¾æ¥è‡ªMySQLå®˜ç½‘ï¼šç”±è…¾è®¯æ¸¸æˆ DBA å›¢é˜Ÿè´¡çŒ®" tabindex="0" loading="lazy"><figcaption>æˆªå›¾æ¥è‡ªMySQLå®˜ç½‘ï¼šç”±è…¾è®¯æ¸¸æˆ DBA å›¢é˜Ÿè´¡çŒ®</figcaption></figure><h3 id="_78-mysql-å¯¼è‡´-cpu-é£™å‡çš„è¯-è¦æ€ä¹ˆå¤„ç†å‘¢" tabindex="-1"><a class="header-anchor" href="#_78-mysql-å¯¼è‡´-cpu-é£™å‡çš„è¯-è¦æ€ä¹ˆå¤„ç†å‘¢"><span>78.MySQL å¯¼è‡´ cpu é£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</span></a></h3><p>æˆ‘é€šå¸¸å…ˆé€šè¿‡ top å‘½ä»¤ç¡®è®¤æ˜¯å¦æ˜¯ mysqld çš„è¿›ç¨‹å ç”¨ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250424120022.png" alt="top -pid $(pgrep mysqld)" tabindex="0" loading="lazy"><figcaption>top -pid $(pgrep mysqld)</figcaption></figure><p>ç„¶åé€šè¿‡ <code>SHOW PROCESSLIST</code> å’Œæ…¢æŸ¥è¯¢æ—¥å¿—å®šä½æ˜¯å¦å­˜åœ¨è€—æ—¶ SQLï¼Œå†é…åˆ explain å’Œ performance_schema åˆ†æ SQL æ˜¯å¦å‘½ä¸­ç´¢å¼•ï¼Œæ˜¯å¦å­˜åœ¨ä¸´æ—¶è¡¨å’Œæ’åºã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- ä½¿ç”¨ EXPLAIN åˆ†æSQLæ‰§è¡Œè®¡åˆ’</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> large_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> condition;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æŸ¥çœ‹è¡¨çš„ç´¢å¼•ä½¿ç”¨æƒ…å†µ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INDEX</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_name;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æŸ¥çœ‹InnoDBçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW ENGINE INNODB </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">STATUS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- æŸ¥çœ‹è¡¨çš„ç»Ÿè®¡ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ANALYZE </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_name;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€ç»ˆé€šè¿‡ SQL ä¼˜åŒ–ã€åŠ ç´¢å¼•ã€åˆ†æ‰¹æ“ä½œç­‰æ‰‹æ®µé€æ­¥ä¼˜åŒ–ã€‚</p><p>memoï¼š2025 å¹´ 4 æœˆ 24 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹åé¦ˆ</a>è¯´æ‹¿åˆ°äº†å°é¹æ±½è½¦æµ‹è¯•å²—çš„ offerï¼ŒçœŸçš„æ­å–œå•¦ğŸ‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250424120308.png" alt="çƒå‹æ‹¿åˆ°å°é¹æ±½è½¦çš„æµ‹è¯• offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°å°é¹æ±½è½¦çš„æµ‹è¯• offer</figcaption></figure><h2 id="sql-é¢˜" tabindex="-1"><a class="header-anchor" href="#sql-é¢˜"><span>SQL é¢˜</span></a></h2><h3 id="_79-ä¸€å¼ è¡¨-id-name-age-sex-class-sql-è¯­å¥-æ‰€æœ‰å¹´é¾„ä¸º-18-çš„äººçš„åå­—-æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„å¤§äº-18-æœ‰å¤šå°‘äºº-æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„æ’å‰ä¸¤åçš„äºº-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_79-ä¸€å¼ è¡¨-id-name-age-sex-class-sql-è¯­å¥-æ‰€æœ‰å¹´é¾„ä¸º-18-çš„äººçš„åå­—-æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„å¤§äº-18-æœ‰å¤šå°‘äºº-æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„æ’å‰ä¸¤åçš„äºº-è¡¥å……"><span>79.ä¸€å¼ è¡¨ï¼šidï¼Œnameï¼Œageï¼Œsexï¼Œclassï¼Œsql è¯­å¥ï¼šæ‰€æœ‰å¹´é¾„ä¸º 18 çš„äººçš„åå­—ï¼Ÿæ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„å¤§äº 18 æœ‰å¤šå°‘äººï¼Ÿæ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„æ’å‰ä¸¤åçš„äººï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>å»ºè®®å¤§å®¶åœ¨æœ¬åœ°å»ºè¡¨ï¼Œå®æ“ä¸€ä¸‹ã€‚ 2024 å¹´ 04 æœˆ 11 æ—¥å¢è¡¥ã€‚</p></blockquote><p>ç¬¬ä¸€æ­¥ï¼Œå»ºè¡¨ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> students</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    age </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sex </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    class </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œæ’å…¥æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> students (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, age, sex, class) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">18</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å¥³&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹ä¸€&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç”·&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹ä¸‰&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">19</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç”·&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹å››&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">17</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç”·&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹äº”&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å¥³&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´å››ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹å…­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">21</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ç”·&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´å››ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹ä¸ƒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">18</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å¥³&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´å››ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ‰€æœ‰å¹´é¾„ä¸º-18-çš„äººçš„åå­—" tabindex="-1"><a class="header-anchor" href="#æ‰€æœ‰å¹´é¾„ä¸º-18-çš„äººçš„åå­—"><span>æ‰€æœ‰å¹´é¾„ä¸º 18 çš„äººçš„åå­—ï¼Ÿ</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> students </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 18</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™æ¡ SQL è¯­å¥ä»è¡¨ä¸­é€‰æ‹©<code>age</code>ç­‰äº 18 çš„æ‰€æœ‰è®°å½•ï¼Œå¹¶è¿”å›è¿™äº›è®°å½•çš„<code>name</code>å­—æ®µã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240410105325.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ‰¾å‡ºage=18çš„è®°å½•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ‰¾å‡ºage=18çš„è®°å½•</figcaption></figure><p>å¦‚æœå¯ä»¥çš„è¯ï¼Œå¯ä»¥ç»™ age å­—æ®µåŠ ä¸Šç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> students </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ADD</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age_index (age);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„å¤§äº-18-æœ‰å¤šå°‘äºº" tabindex="-1"><a class="header-anchor" href="#æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„å¤§äº-18-æœ‰å¤šå°‘äºº"><span>æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„å¤§äº 18 æœ‰å¤šå°‘äºº?</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> class, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(*) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> number_of_students</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> students</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> age </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 18</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">GROUP BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> class;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ¡ SQL è¯­å¥å…ˆç­›é€‰å‡ºå¹´é¾„å¤§äº 18 çš„è®°å½•ï¼Œç„¶åæŒ‰<code>class</code>åˆ†ç»„ï¼Œå¹¶é€šè¿‡ <code>count</code> ç»Ÿè®¡æ¯ä¸ªç­çš„å­¦ç”Ÿæ•°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240410105512.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ‰¾å‡ºå¹´é¾„å¤§äº 18 çš„äºº" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ‰¾å‡ºå¹´é¾„å¤§äº 18 çš„äºº</figcaption></figure><h4 id="æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„æ’å‰ä¸¤åçš„äºº" tabindex="-1"><a class="header-anchor" href="#æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„æ’å‰ä¸¤åçš„äºº"><span>æ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„æ’å‰ä¸¤åçš„äººï¼Ÿ</span></a></h4><p>è¿™ä¸ªæŸ¥è¯¢ç¨å¾®å¤æ‚ä¸€äº›ï¼Œéœ€è¦ä½¿ç”¨å­æŸ¥è¯¢å’Œå»é‡ <code>DISTINCT</code>ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">age</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> students a</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> COUNT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DISTINCT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">age</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> students b</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    WHERE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">class</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">age</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">age</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">age</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DESC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ¡ SQL è¯­å¥é¦–å…ˆä»<code>students</code>è¡¨ä¸­é€‰æ‹©<code>class</code>ã€<code>name</code>å’Œ<code>age</code>å­—æ®µï¼Œç„¶åä½¿ç”¨å­æŸ¥è¯¢è®¡ç®—æ¯ä¸ªç­çº§ä¸­å¹´é¾„æ’å‰ä¸¤åçš„å­¦ç”Ÿã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240410105951.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ’åå‰ä¸¤åçš„å­¦ç”Ÿ" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ’åå‰ä¸¤åçš„å­¦ç”Ÿ</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¥‡å®‰ä¿¡é¢ç»åŒå­¦ 1 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä¸€å¼ è¡¨ï¼šidï¼Œnameï¼Œageï¼Œsexï¼Œclassï¼Œsql è¯­å¥ï¼šæ‰€æœ‰å¹´é¾„ä¸º 18 çš„äººçš„åå­—ï¼Ÿæ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„å¤§äº 18 æœ‰å¤šå°‘äººï¼Ÿæ‰¾åˆ°æ¯ä¸ªç­å¹´é¾„æ’å‰ä¸¤åçš„äººï¼Ÿ</li></ol></blockquote><h3 id="_80-æœ‰ä¸€ä¸ªæŸ¥è¯¢éœ€æ±‚-mysql-ä¸­æœ‰ä¸¤ä¸ªè¡¨-ä¸€ä¸ªè¡¨-1000w-æ•°æ®-å¦ä¸€ä¸ªè¡¨åªæœ‰å‡ åƒæ•°æ®-è¦åšä¸€ä¸ªå…³è”æŸ¥è¯¢-å¦‚ä½•ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_80-æœ‰ä¸€ä¸ªæŸ¥è¯¢éœ€æ±‚-mysql-ä¸­æœ‰ä¸¤ä¸ªè¡¨-ä¸€ä¸ªè¡¨-1000w-æ•°æ®-å¦ä¸€ä¸ªè¡¨åªæœ‰å‡ åƒæ•°æ®-è¦åšä¸€ä¸ªå…³è”æŸ¥è¯¢-å¦‚ä½•ä¼˜åŒ–"><span>80.æœ‰ä¸€ä¸ªæŸ¥è¯¢éœ€æ±‚ï¼ŒMySQL ä¸­æœ‰ä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ªè¡¨ 1000W æ•°æ®ï¼Œå¦ä¸€ä¸ªè¡¨åªæœ‰å‡ åƒæ•°æ®ï¼Œè¦åšä¸€ä¸ªå…³è”æŸ¥è¯¢ï¼Œå¦‚ä½•ä¼˜åŒ–</span></a></h3><p>ç¬¬ä¸€æ­¥ï¼Œä¸ºå…³è”å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œç¡®ä¿ on è¿æ¥çš„å­—æ®µéƒ½æœ‰ç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> big_table </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ADD</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_small_id(small_id);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œå°è¡¨é©±åŠ¨å¤§è¡¨ï¼Œå°†å°è¡¨æ”¾åœ¨ JOIN çš„å·¦è¾¹ï¼ˆé©±åŠ¨è¡¨ï¼‰ï¼Œå¤§è¡¨æ”¾åœ¨å³è¾¹ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ... </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> small_table s </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> big_table b </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">small_id</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 1 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šæœ‰ä¸€ä¸ªæŸ¥è¯¢éœ€æ±‚ï¼ŒMySQL ä¸­æœ‰ä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ªè¡¨ 1000W æ•°æ®ï¼Œå¦ä¸€ä¸ªè¡¨åªæœ‰å‡ åƒæ•°æ®ï¼Œè¦åšä¸€ä¸ªå…³è”æŸ¥è¯¢ï¼Œå¦‚ä½•ä¼˜åŒ–</li></ol></blockquote><h3 id="_81-æ–°å»ºä¸€ä¸ªè¡¨ç»“æ„-åˆ›å»ºç´¢å¼•-å°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨-insert-å¯¼å…¥è¯¥è¡¨-æ–°å»ºä¸€ä¸ªè¡¨ç»“æ„-å°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨-isnert-å¯¼å…¥è¯¥è¡¨-å†åˆ›å»ºç´¢å¼•-è¿™ä¸¤ç§æ•ˆç‡å“ªä¸ªé«˜å‘¢-æˆ–è€…è¯´ç”¨æ—¶çŸ­å‘¢" tabindex="-1"><a class="header-anchor" href="#_81-æ–°å»ºä¸€ä¸ªè¡¨ç»“æ„-åˆ›å»ºç´¢å¼•-å°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨-insert-å¯¼å…¥è¯¥è¡¨-æ–°å»ºä¸€ä¸ªè¡¨ç»“æ„-å°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨-isnert-å¯¼å…¥è¯¥è¡¨-å†åˆ›å»ºç´¢å¼•-è¿™ä¸¤ç§æ•ˆç‡å“ªä¸ªé«˜å‘¢-æˆ–è€…è¯´ç”¨æ—¶çŸ­å‘¢"><span>81.æ–°å»ºä¸€ä¸ªè¡¨ç»“æ„ï¼Œåˆ›å»ºç´¢å¼•ï¼Œå°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨ insert å¯¼å…¥è¯¥è¡¨ï¼Œæ–°å»ºä¸€ä¸ªè¡¨ç»“æ„ï¼Œå°†ç™¾ä¸‡æˆ–åƒä¸‡çº§çš„æ•°æ®ä½¿ç”¨ isnert å¯¼å…¥è¯¥è¡¨ï¼Œå†åˆ›å»ºç´¢å¼•ï¼Œè¿™ä¸¤ç§æ•ˆç‡å“ªä¸ªé«˜å‘¢ï¼Ÿæˆ–è€…è¯´ç”¨æ—¶çŸ­å‘¢ï¼Ÿ</span></a></h3><p>å…ˆè¯´ç»“è®ºï¼š</p><p>åœ¨å¤§æ•°æ®é‡å¯¼å…¥åœºæ™¯ä¸‹ï¼Œå…ˆå¯¼å…¥æ•°æ®ï¼Œåå»ºç´¢å¼•çš„æ•ˆç‡æ˜¾è‘—é«˜äºå…ˆå»ºç´¢å¼•ï¼Œåå¯¼å…¥æ•°æ®çš„æ•ˆç‡ã€‚</p><p>æ¥ï¼Œå®æ“ã€‚</p><p>å…ˆåˆ›å»ºä¸€ä¸ªè¡¨ï¼Œç„¶ååˆ›å»ºç´¢å¼•ï¼Œæ‰§è¡Œæ’å…¥è¯­å¥ï¼Œæ¥çœ‹çœ‹æ‰§è¡Œæ—¶é—´ï¼ˆ100 ä¸‡æ•°æ®åœ¨æˆ‘æœ¬æœºä¸Šæ‰§è¡Œæ—¶é—´æ¯”è¾ƒé•¿ï¼Œæˆ‘ä»¬å°±ç”¨ 10 ä¸‡æ¡æ•°æ®æ¥æµ‹è¯•ï¼‰ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> test_table</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BIGINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    email </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    created_at </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DATETIME</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_table(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">DELIMITER //</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PROCEDURE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> insert_data()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    DECLARE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DEFAULT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    WHILE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> DO</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_table(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, email, created_at)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">CONCAT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;wanger&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,i), </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">CONCAT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;email&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, i, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;@example.com&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOW</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    END</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHILE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">END</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> //</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">DELIMITER ;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CALL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> insert_data();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»çš„æ—¶é—´ 13.93+0.01+0.01+0.01=13.96 ç§’ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240412083019.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå…ˆç´¢å¼•å†æ’å…¥" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå…ˆç´¢å¼•å†æ’å…¥</figcaption></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œæ‰§è¡Œæ’å…¥æ“ä½œï¼Œç„¶ååˆ›å»ºç´¢å¼•ã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> test_table_no_index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BIGINT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    email </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    created_at </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DATETIME</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">DELIMITER //</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PROCEDURE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> insert_data_no_index()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    DECLARE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DEFAULT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    WHILE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> DO</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_table_no_index(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, email, created_at)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">CONCAT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;wanger&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, i), </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">CONCAT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;email&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, i, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;@example.com&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOW</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    END</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHILE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">END</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> //</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">DELIMITER ;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CALL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> insert_data_no_index();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INDEX</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_name_no_index</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> test_table_no_index(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥çœ‹ä¸€ä¸‹æ€»çš„æ—¶é—´ï¼Œ0.01+0.00+13.08+0.18=13.27 ç§’ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240412083312.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå…ˆæ’å…¥å†ç´¢å¼•" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå…ˆæ’å…¥å†ç´¢å¼•</figcaption></figure><p>å…ˆæ’å…¥æ•°æ®å†åˆ›å»ºç´¢å¼•çš„æ–¹å¼æ¯”å…ˆåˆ›å»ºç´¢å¼•å†æ’å…¥æ•°æ®è¦å¿«ä¸€ç‚¹ã€‚</p><p>ç„¶åæ—¶é—´å·®è·å¾ˆå¾®å°ï¼Œä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬æ’å…¥çš„æ•°æ®å°‘ã€‚è¯´ä¸€ä¸‹å·®åˆ«ã€‚</p><ul><li><strong>å…ˆæ’å…¥æ•°æ®å†åˆ›å»ºç´¢å¼•</strong>ï¼šåœ¨æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹æ’å…¥æ•°æ®ï¼Œæ•°æ®åº“ä¸éœ€è¦åœ¨æ¯æ¬¡æ’å…¥æ—¶æ›´æ–°ç´¢å¼•ã€‚</li><li><strong>å…ˆåˆ›å»ºç´¢å¼•å†æ’å…¥æ•°æ®</strong>ï¼šæ•°æ®åº“éœ€è¦åœ¨æ¯æ¬¡æ’å…¥æ–°è®°å½•æ—¶ç»´æŠ¤ç´¢å¼•ç»“æ„ï¼Œéšç€æ•°æ®é‡çš„å¢åŠ ï¼Œç´¢å¼•çš„ç»´æŠ¤ä¼šå¯¼è‡´é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚</li></ul><h4 id="mysqlæ˜¯å…ˆå»ºç«‹ç´¢å¼•å¥½è¿˜æ˜¯å…ˆæ’å…¥æ•°æ®å¥½" tabindex="-1"><a class="header-anchor" href="#mysqlæ˜¯å…ˆå»ºç«‹ç´¢å¼•å¥½è¿˜æ˜¯å…ˆæ’å…¥æ•°æ®å¥½"><span>MySQLæ˜¯å…ˆå»ºç«‹ç´¢å¼•å¥½è¿˜æ˜¯å…ˆæ’å…¥æ•°æ®å¥½ï¼Ÿ</span></a></h4><p>å¦‚æœæ˜¯å°æ‰¹é‡æ’å…¥ï¼Œå¯ä»¥å…ˆå»ºç´¢å¼•ï¼›ä½†åœ¨å¤§æ•°æ®é‡æ•°æ®å¯¼å…¥åœºæ™¯ä¸‹ï¼Œæ¨èå…ˆæ’å…¥æ•°æ®å†å»ºç´¢å¼•ã€‚</p><p>å› ä¸ºç´¢å¼•æ˜¯åŸºäº B+ æ ‘çš„ï¼Œå¤§é‡æ’å…¥æ—¶å¦‚æœæå‰å»ºç´¢å¼•ï¼Œä¼šé¢‘ç¹è§¦å‘é¡µåˆ†è£‚å’Œç´¢å¼•ç»“æ„è°ƒæ•´ï¼Œå½±å“æ€§èƒ½ã€‚</p><p>æ’å…¥å®Œæˆåç»Ÿä¸€æ„å»ºç´¢å¼•ï¼ŒMySQL ä¼šæŒ‰é¡ºåºæ‰¹é‡ç”Ÿæˆç´¢å¼•ç»“æ„ï¼Œé€Ÿåº¦æ›´å¿«ã€èµ„æºæ¶ˆè€—æ›´ä½ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å†œä¸šé“¶è¡Œé¢ç»åŒå­¦ 7 Java åç«¯é¢è¯•åŸé¢˜ï¼šæ•°æ®åº“æ˜¯å…ˆå»ºç«‹ç´¢å¼•è¿˜æ˜¯å…ˆæ’å…¥æ•°æ®</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 25 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰å®¶é•¿å‘æ¥æ„Ÿè°¢ä¿¡ï¼Œè¯´å­©å­åœ¨åŠ å…¥<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æ˜Ÿçƒ</a>åï¼Œæ•´ä¸ªäººæ˜æ˜¾å˜å¾—æ›´åŠ ç§¯æäº†ã€‚è¯´çœŸçš„ï¼Œå®¶é•¿çš„è®¤å¯ï¼Œæ›´è®©æˆ‘æ„Ÿåˆ°è™šè£å¿ƒå¾—åˆ°äº†æå¤§çš„æ»¡è¶³ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-è€å¸ˆæ‚¨å¥½ï¼Œä»Šå¤©å­©å­å’Œæˆ‘é€šè¯è¯­æ°”éƒ½ç²¾ç¥èµ·æ¥.png" alt="å®¶é•¿å¯¹æ˜Ÿçƒçš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>å®¶é•¿å¯¹æ˜Ÿçƒçš„è®¤å¯</figcaption></figure><h3 id="_82-ä»€ä¹ˆæ˜¯æ·±åˆ†é¡µ-select-from-tbn-limit-1000000000-è¿™ä¸ªæœ‰ä»€ä¹ˆé—®é¢˜-å¦‚æœè¡¨å¤§æˆ–è€…è¡¨å°åˆ†åˆ«ä»€ä¹ˆé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_82-ä»€ä¹ˆæ˜¯æ·±åˆ†é¡µ-select-from-tbn-limit-1000000000-è¿™ä¸ªæœ‰ä»€ä¹ˆé—®é¢˜-å¦‚æœè¡¨å¤§æˆ–è€…è¡¨å°åˆ†åˆ«ä»€ä¹ˆé—®é¢˜"><span>82.ä»€ä¹ˆæ˜¯æ·±åˆ†é¡µï¼Œselect * from tbn limit 1000000000 è¿™ä¸ªæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¦‚æœè¡¨å¤§æˆ–è€…è¡¨å°åˆ†åˆ«ä»€ä¹ˆé—®é¢˜</span></a></h3><p>æ·±åˆ†é¡µæ˜¯æŒ‡åœ¨ MySQL ä¸­è·å–æ¯”è¾ƒé åçš„æ•°æ®é¡µï¼Œæ¯”å¦‚ç¬¬ 1000 é¡µã€ç¬¬ 10000 é¡µç­‰ã€‚ç‰¹åˆ«æ˜¯ä½¿ç”¨ <code>LIMIT offset,count</code> è¿™ç§æ–¹å¼ï¼Œå½“ offset ç‰¹åˆ«å¤§ï¼Œå°±ä¼šå¸¦æ¥ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>å¯¹äº <code>SELECT * FROM tbn LIMIT 1000000,10</code>ï¼Œè¿™æ ·çš„æŸ¥è¯¢è¯­å¥æ¥è¯´ï¼ŒMySQL ä¼šï¼š</p><ul><li>ä»è¡¨ä¸­è¯»å–ç¬¬ä¸€æ¡è®°å½•ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³ where æ¡ä»¶ï¼›å¦‚æœæ»¡è¶³ï¼Œè®¡æ•°å™¨+1ï¼›å¦åˆ™ç›´åˆ° è®¡æ•°å™¨ç´¯è®¡åˆ° 1000000 æ—¶æ‰å¼€å§‹çœŸæ­£å–æ•°æ®</li><li>å†ç»§ç»­è·å– 10 æ¡æ•°æ®ï¼Œè¿”å›</li></ul><p>æ€§èƒ½ä¼šéå¸¸å·®ï¼Œå› ä¸ºéœ€è¦ä»å¤´æ‰«æï¼Œæ— æ³•åˆ©ç”¨ç´¢å¼•ä¼˜åŒ–ï¼Œå¹¶ä¸”éœ€è¦æŠ›å¼ƒå¤§é‡ä¸éœ€è¦çš„æ•°æ®ï¼Œå ç”¨å¤§é‡çš„å†…å­˜å’Œ CPU èµ„æºã€‚</p><p>å¯ä»¥å€ŸåŠ©ä¸»é”®ç´¢å¼•åˆ†é¡µè¿›è¡Œä¼˜åŒ–ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…è®°ä½ä¸Šæ¬¡åˆ†é¡µçš„æœ€å¤§ IDï¼Œç„¶åå†æŸ¥è¯¢ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tbn</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> last_page_max_id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIMIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 13 Java åç«¯äºŒé¢é¢è¯•åŸé¢˜ï¼šä»€ä¹ˆæ˜¯æ·±åˆ†é¡µï¼Œselect * from tbn limit 1000000000 è¿™ä¸ªæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¦‚æœè¡¨å¤§æˆ–è€…è¡¨å°åˆ†åˆ«ä»€ä¹ˆé—®é¢˜</li></ol></blockquote><h3 id="_83-sql-é¢˜-ä¸€ä¸ªå­¦ç”Ÿæˆç»©è¡¨-å­—æ®µæœ‰å­¦ç”Ÿå§“åã€ç­çº§ã€æˆç»©-æ±‚å„ç­å‰åå" tabindex="-1"><a class="header-anchor" href="#_83-sql-é¢˜-ä¸€ä¸ªå­¦ç”Ÿæˆç»©è¡¨-å­—æ®µæœ‰å­¦ç”Ÿå§“åã€ç­çº§ã€æˆç»©-æ±‚å„ç­å‰åå"><span>83.SQL é¢˜ï¼šä¸€ä¸ªå­¦ç”Ÿæˆç»©è¡¨ï¼Œå­—æ®µæœ‰å­¦ç”Ÿå§“åã€ç­çº§ã€æˆç»©ï¼Œæ±‚å„ç­å‰åå</span></a></h3><p>ç¬¬ä¸€æ­¥ï¼Œå»ºè¡¨ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> student_scores</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    student_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    class </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    score </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œæ’å…¥æ•°æ®ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> student_scores (student_name, class, score) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹äºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">88</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹ä¸‰&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">92</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹å››&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">87</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹äº”&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">85</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹å…­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">90</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹ä¸ƒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">95</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹å…«&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">82</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹ä¹&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">78</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹å&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">91</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹åä¸€&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´äºŒç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">79</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹åäºŒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">84</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹åä¸‰&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">81</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹åå››&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">90</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹åäº”&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">88</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹åå…­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">87</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹åä¸ƒ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">93</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹åå…«&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">89</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹åä¹&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">85</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹äºŒå&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">92</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ²‰é»˜ç‹äºŒåä¸€&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‰å¹´ä¸‰ç­&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">84</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼ŒæŸ¥è¯¢å„ç­å‰ååã€‚å¦‚æœ MySQL æ˜¯ 8.0 ä»¥ä¸‹ç‰ˆæœ¬ï¼Œä¸æ”¯æŒçª—å£å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡åœ¨æŸ¥è¯¢ä¸­ç»´æŠ¤ç­çº§å½“å‰å¤„ç†çŠ¶æ€å’Œæ’åï¼Œå®ç°åˆ†ç»„å†…æŒ‰æˆç»©æ’åºå¹¶æ‰“æ ‡å·ï¼Œå†å–å‰ååã€‚</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> @cur_class</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">@cur_rank</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> student_name, class, score</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    SELECT</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        student_name,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        class,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        score,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        @cur_rank</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> IF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">@cur_class</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> class, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">@cur_rank</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> + </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rank,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        @cur_class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> class</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> student_scores</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> class, score </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DESC</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ranked</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> ranked</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">rank</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>æ­¥éª¤</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>@cur_class å˜é‡</td><td>è®°å½•å½“å‰æ­£åœ¨å¤„ç†çš„ç­çº§</td></tr><tr><td>@cur_rank å˜é‡</td><td>è®°å½•å½“å‰ç­çº§çš„æ’åï¼Œé»˜è®¤ 0</td></tr><tr><td><code>IF(@cur_class = class, @cur_rank + 1, 1)</code></td><td>å¦‚æœç­çº§æ²¡å˜ï¼Œå°±æ’å +1ï¼›å¦‚æœæ¢äº†æ–°ç­çº§ï¼Œæ’åä» 1 é‡æ–°å¼€å§‹</td></tr><tr><td><code>@cur_class := class</code></td><td>æ›´æ–°å½“å‰ç­çº§å˜é‡ï¼Œä¿æŒç­çº§å˜åŒ–è·Ÿè¸ª</td></tr><tr><td><code>ORDER BY class, score DESC</code></td><td>å¿…é¡»å…ˆæŒ‰ç­çº§å‡åºã€æˆç»©é™åºæ’å¥½ï¼Œæ‰èƒ½ä¿è¯å˜é‡æ­£ç¡®æ‰“æ’å</td></tr><tr><td>å¤–å±‚ <code>WHERE rank &lt;= 10</code></td><td>åªå–æ¯ç­å‰åå âœ…</td></tr></tbody></table><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20240423113508.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ’åå‰å" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæ’åå‰å</figcaption></figure><p>å¦‚æœæ˜¯ MySQL 8.0+ ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨çª—å£å‡½æ•°æ¥å®Œæˆï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> student_name, class, score</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        student_name, </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        class, </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        score,</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        ROW_NUMBER</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">OVER</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PARTITION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> class </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ORDER BY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> score </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DESC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rn</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> student_scores</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tmp</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rn </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>SQL ç”¨åˆ°çš„æŠ€æœ¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>ROW_NUMBER() OVER (PARTITION BY class ORDER BY score DESC)</code></td><td>ç»™æ¯ä¸ªç­ç‹¬ç«‹æ‰“æ’åï¼Œä» 1 å¼€å§‹</td></tr><tr><td>å­æŸ¥è¯¢ tmp</td><td>ç”¨æ¥ä¸´æ—¶ç”Ÿæˆå¸¦æœ‰ rnï¼ˆæ’åï¼‰çš„æ•°æ®é›†</td></tr><tr><td>å¤–å±‚ <code>WHERE rn &lt;= 10</code></td><td>é€‰å‡ºæ¯ä¸ªç­æ’åå‰ 10 çš„å­¦ç”Ÿ</td></tr><tr><td><code>ORDER BY score DESC</code></td><td>æˆç»©é«˜æ’å‰é¢ï¼Œç¬¦åˆå¸¸è§„æ’åé€»è¾‘</td></tr></tbody></table><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250426150253.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šçª—å£å‡½æ•°" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šçª—å£å‡½æ•°</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 16 ä¸€é¢é¢è¯•åŸé¢˜ï¼šSQL é¢˜ï¼šä¸€ä¸ªå­¦ç”Ÿæˆç»©è¡¨ï¼Œå­—æ®µæœ‰å­¦ç”Ÿå§“åã€ç­çº§ã€æˆç»©ï¼Œæ±‚å„ç­å‰åå</li></ol></blockquote><p>memoï¼š2025 å¹´ 4 æœˆ 26 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹å‘é‚®ä»¶é€æ¥å–œæŠ¥</a>ï¼Œè¯´ä»–æ‹¿åˆ°äº†èš‚èšå›½é™…çš„ offerï¼Œå¹¶ä¸”å¤šæ¬¡æ„Ÿè°¢æ˜Ÿçƒå¯¹ä»–å®ä¹ çš„å¸®åŠ©ï¼Œæ¯”èº«è¾¹æœ‹å‹æ‹¿åˆ°äº†æ›´å¤šçš„é¢è¯•æœºä¼šï¼Œå¹¶ä¸”å‡†å¤‡é˜¶æ®µåªçœ‹äºŒå“¥çš„ä¸“æ ï¼Œéƒ½æœ‰ä¸€ç§ç²¾ç¥æ´ç™–äº†ï¼Œè¯´å®è¯ï¼Œè¿™ç§å–œæŠ¥æˆ‘çœŸçš„çˆ±çœ‹ï¼ŒğŸ˜„ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427102433.png" alt="çƒå‹æ‹¿åˆ°èš‚èšå›½é™…çš„ offer å‘æ¥çš„æ„Ÿè°¢ä¿¡" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°èš‚èšå›½é™…çš„ offer å‘æ¥çš„æ„Ÿè°¢ä¿¡</figcaption></figure><hr><p>æ•´æ•´ä¸¤ä¸ªæœˆï¼Œé¢æ¸£é€†è¢­ MySQL ç¯‡ç¬¬äºŒç‰ˆç»ˆäºæ•´ç†å®Œäº†ï¼Œè¿™ä¸€ç‰ˆå‡ ä¹å¯ä»¥è¯´æ˜¯é‡å†™äº†ï¼Œæ¯å¤©è€—è´¹äº†å¤§é‡çš„ç²¾åŠ›åœ¨ä¸Šé¢ï¼Œå¯ä»¥è¯´æ˜¯æ”¹å¤´æ¢é¢ï¼Œæœ‰ä¸€ç§å£«åˆ«ä¿©æœˆï¼Œå½“åˆ®ç›®ç›¸çœ‹çš„æ„Ÿè§‰ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104640.png" alt="Java åŸºç¡€ç¯‡ã€é›†åˆæ¡†æ¶ç¯‡ã€JVM ç¯‡ã€å¹¶å‘ç¼–ç¨‹ç¯‡ã€MySQL ç¯‡" tabindex="0" loading="lazy"><figcaption>Java åŸºç¡€ç¯‡ã€é›†åˆæ¡†æ¶ç¯‡ã€JVM ç¯‡ã€å¹¶å‘ç¼–ç¨‹ç¯‡ã€MySQL ç¯‡</figcaption></figure><p>ç½‘ä¸Šçš„å…«è‚¡å…¶å®ä¸å°‘ï¼Œæœ‰äº›è¿˜æ˜¯ä»˜è´¹çš„ï¼Œæˆ‘è§‰å¾—æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œå¯ä»¥ç»™å¤§å®¶æä¾›æ›´å¤šçš„é€‰æ‹©ï¼Œä½†é¢æ¸£é€†è¢­çš„å«é‡‘é‡æ‡‚çš„éƒ½æ‡‚ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104555.png" alt="é¢æ¸£é€†è¢­é€‚åˆä¸­å›½å®å®ä½“è´¨å“ˆå“ˆ" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­é€‚åˆä¸­å›½å®å®ä½“è´¨å“ˆå“ˆ</figcaption></figure><p>é¢æ¸£é€†è¢­ç¬¬äºŒç‰ˆæ˜¯åœ¨æ˜Ÿçƒå˜‰å®¾ä¸‰åˆ†æ¶çš„åˆç‰ˆåŸºç¡€ä¸Šï¼ŒåŠ å…¥äº†äºŒå“¥è‡ªå·±çš„æ€è€ƒï¼ŒåŠ å…¥äº† 1000 å¤šä»½çœŸå®é¢ç»ä¹‹åçš„ç»“æœï¼Œå¹¶ä¸”ä» 24 å±Šåˆ° 25 å±Šï¼Œå†åˆ° 26 å±Šï¼Œå¸®åŠ©äº†å¾ˆå¤šå°ä¼™ä¼´ã€‚æœªæ¥çš„ 27ã€28 å±Šï¼Œä¹Ÿå°†å› æ­¤å—ç›Šï¼Œä»è€Œæ‹¿åˆ°å¿ƒä»ªçš„ offerã€‚</p><p>èƒ½å¸®åŠ©åˆ°å¤§å®¶ï¼Œæˆ‘å¾ˆæ¬£æ…°ï¼Œå¹¶ä¸”åœ¨é‡åˆ¶é¢æ¸£é€†è¢­çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¹Ÿæˆé•¿äº†å¾ˆå¤šï¼Œå¾ˆå¤šè–„å¼±çš„åŸºç¡€ç¯èŠ‚éƒ½å¾—åˆ°äº†åŠ å¼ºï¼Œå› æ­¤ç¬¬äºŒç‰ˆçš„é¢æ¸£é€†è¢­ä¸åªæ˜¯ç»™å¤§å®¶çš„ç¤¼ç‰©ï¼Œä¹Ÿæ˜¯æˆ‘åœ¨æŠ€æœ¯ä¸Šèœ•å˜çš„è®°å½•ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-æˆ‘æŠŠä½ æ¨èç»™æˆ‘ä»¬å®éªŒå®¤çš„åŸºæœ¬æ‰€æœ‰äººäº†.png" alt="çƒå‹æŠŠé¢æ¸£é€†è¢­æ¨èç»™å®éªŒå®¤çš„æ‰€æœ‰äºº" tabindex="0" loading="lazy"><figcaption>çƒå‹æŠŠé¢æ¸£é€†è¢­æ¨èç»™å®éªŒå®¤çš„æ‰€æœ‰äºº</figcaption></figure><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104304.png" alt="å­¦é™¢æœ¬æ‹¿åˆ°æ»´æ»´ SP ç»™é¢æ¸£å£ç¢‘+1" tabindex="0" loading="lazy"><figcaption>å­¦é™¢æœ¬æ‹¿åˆ°æ»´æ»´ SP ç»™é¢æ¸£å£ç¢‘+1</figcaption></figure><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104416.png" alt="å¸‚é¢ä¸Šçš„å…«è‚¡çœ‹äº†ä¸å°‘ï¼Œè¿˜æ˜¯é¢æ¸£é€†è¢­æœ€èˆ’æœ" tabindex="0" loading="lazy"><figcaption>å¸‚é¢ä¸Šçš„å…«è‚¡çœ‹äº†ä¸å°‘ï¼Œè¿˜æ˜¯é¢æ¸£é€†è¢­æœ€èˆ’æœ</figcaption></figure><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘è§‰å¾—è‡ªå·±æ˜¯ä¸€ä¸ªä½›ç³»çš„äººï¼Œä¸æ„¿æ„å’Œåˆ«äººäº‰ä¸ªé«˜ä½ï¼Œä¹Ÿä¸æ„¿æ„å»åˆ»æ„å®£ä¼ è‡ªå·±çš„ä½œå“ã€‚</p><p>æˆ‘å–œæ¬¢é™å¾…èŠ±å¼€ã€‚</p><p>å¦‚æœä½ è§‰å¾—é¢æ¸£é€†è¢­è¿˜ä¸é”™ï¼Œå¯ä»¥å‘Šè¯‰å­¦å¼Ÿå­¦å¦¹ä»¬æœ‰è¿™æ ·ä¸€ä»½å…è´¹çš„å­¦ä¹ èµ„æ–™ï¼Œå¸®æˆ‘åšä¸ªå£ç¢‘ã€‚</p><p>æˆ‘è¿˜ä¼šç»§ç»­ä¼˜åŒ–ï¼Œä¹Ÿä¸ç¡®å®šç¬¬ä¸‰ç‰ˆä»€ä¹ˆæ—¶å€™ä¼šæ¥ï¼Œä½†æˆ‘ä¼šå°½åŠ›ã€‚</p><p>æ„¿å¤§å®¶éƒ½æœ‰ä¸€ä¸ªå…‰æ˜çš„æœªæ¥ã€‚</p><p>ç”±äº PDF æ²¡åŠæ³•è‡ªæˆ‘æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦æœ€æ–°ç‰ˆçš„å°ä¼™ä¼´ï¼Œå¯ä»¥å¾®ä¿¡æœã€<strong>æ²‰é»˜ç‹äºŒ</strong>ã€‘ï¼Œæˆ–è€…æ‰«æ/é•¿æŒ‰è¯†åˆ«ä¸‹é¢çš„äºŒç»´ç ï¼Œå…³æ³¨äºŒå“¥çš„å…¬ä¼—å·ï¼Œå›å¤ã€<strong>222</strong>ã€‘å³å¯æ‹‰å–æœ€æ–°ç‰ˆæœ¬ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>å½“ç„¶äº†ï¼Œè¯·å…è®¸æˆ‘çš„ä¸€ç‚¹ç‚¹ç§å¿ƒï¼Œé‚£å°±æ˜¯æ˜Ÿçƒçš„ PDF ç‰ˆæœ¬ä¼šæ¯”å…¬ä¼—å·æ—©ä¸€ä¸ªæœˆæ—¶é—´ï¼Œæ¯•ç«Ÿæ˜Ÿçƒç”¨æˆ·éƒ½ä»˜è´¹è¿‡äº†ï¼Œæˆ‘æœ‰å¿…è¦è®©ä»–ä»¬å…ˆäº«å—åˆ°ä¸€ç‚¹ç‚¹ç¦åˆ©ã€‚ç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½èƒ½ç†è§£ï¼Œæ¯•ç«Ÿåœ¨çº¿ç‰ˆæ˜¯å…è´¹çš„ï¼ŒCDNã€æœåŠ¡å™¨ã€åŸŸåã€OSS ç­‰ç­‰éƒ½æ˜¯éœ€è¦æˆæœ¬çš„ã€‚</p><p>æ›´åˆ«è¯´æˆ‘ä»˜å‡ºçš„æ—¶é—´å’Œç²¾åŠ›äº†ï¼Œå¤§å®¶è§‰å¾—æœ‰å¸®åŠ©è¿˜è¯·ç»™ä¸ªå£ç¢‘ï¼Œè®©ä½ èº«è¾¹çš„åŒäº‹ã€åŒå­¦éƒ½èƒ½å—ç›Šåˆ°ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/collection-20250512160410.png" alt="å›å¤ 222" tabindex="0" loading="lazy"><figcaption>å›å¤ 222</figcaption></figure><p>æˆ‘æŠŠäºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ã€JVM è¿›é˜¶ä¹‹è·¯ã€å¹¶å‘ç¼–ç¨‹è¿›é˜¶ä¹‹è·¯ï¼Œä»¥åŠæ‰€æœ‰é¢æ¸£é€†è¢­çš„ç‰ˆæœ¬éƒ½æ”¾è¿›æ¥äº†ï¼Œæ¶µç›– JavaåŸºç¡€ã€Javaé›†åˆã€Javaå¹¶å‘ã€JVMã€Springã€MyBatisã€è®¡ç®—æœºç½‘ç»œã€æ“ä½œç³»ç»Ÿã€MySQLã€Redisã€RocketMQã€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡ã€è®¾è®¡æ¨¡å¼ã€Linux ç­‰ 16 ä¸ªå¤§çš„ä¸»é¢˜ï¼Œå…±æœ‰ 40 å¤šä¸‡å­—ï¼Œ2000+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯è¯šæ„æ»¡æ»¡ã€‚</p><p>è¿™æ¬¡ä»ç„¶æ˜¯ä¸‰ä¸ªç‰ˆæœ¬ï¼Œäº®ç™½ã€æš—é»‘å’Œ epub ç‰ˆæœ¬ã€‚ç»™å¤§å®¶å±•ç¤ºå…¶ä¸­ä¸€ä¸ª epub ç‰ˆæœ¬å§ï¼Œæœ‰äº›å°ä¼™ä¼´å¾ˆæ€¥éœ€è¿™ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¹Ÿæ»¡è¶³å¤§å®¶äº†ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/mysql-20250427104017.png" alt="é¢æ¸£é€†è¢­MySQLç¯‡ï¼šepub ç‰ˆæœ¬" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­MySQLç¯‡ï¼šepub ç‰ˆæœ¬</figcaption></figure><hr><p>å›¾æ–‡è¯¦è§£ 83 é“ MySQL é¢è¯•é«˜é¢‘é¢˜ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/JFjFs_7xduCmHOegbJ-Gbg" target="_blank" rel="noopener noreferrer">è½¬è½½é“¾æ¥</a>ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/zSTyZ-8CFalwAYSB0PN6wA" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>ã€‚</p><p><em>æ²¡æœ‰ä»€ä¹ˆä½¿æˆ‘åœç•™â€”â€”é™¤äº†ç›®çš„ï¼Œçºµç„¶å²¸æ—æœ‰ç«ç‘°ã€æœ‰ç»¿è«ã€æœ‰å®é™çš„æ¸¯æ¹¾ï¼Œæˆ‘æ˜¯ä¸ç³»ä¹‹èˆŸ</em>ã€‚</p><p><strong>ç³»åˆ—å†…å®¹</strong>ï¼š</p><ul><li><a href="https://javabetter.cn/sidebar/sanfene/javase.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Java SE ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/javathread.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Java é›†åˆæ¡†æ¶ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/collection.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Java å¹¶å‘ç¼–ç¨‹ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/jvm.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ JVM ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/spring.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Spring ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/redis.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Redis ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/mybatis.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ MyBatis ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/mysql.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ MySQL ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/os.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­æ“ä½œç³»ç»Ÿç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/network.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­è®¡ç®—æœºç½‘ç»œç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/rocketmq.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ RocketMQ ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/fenbushi.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­åˆ†å¸ƒå¼ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/weifuwu.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­å¾®æœåŠ¡ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/shejimoshi.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­è®¾è®¡æ¨¡å¼ç¯‡ ğŸ‘</a></li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/itwanger/toBeBetterJavaer/edit/master/docs/src/sidebar/sanfene/mysql.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: www.qing_gee@163.com">æ²‰é»˜ç‹äºŒ</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/sidebar/sanfene/mybatis.html" aria-label="é¢æ¸£é€†è¢­-MyBatis"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->é¢æ¸£é€†è¢­-MyBatis</div></a><a class="route-link auto-link next" href="/sidebar/sanfene/os.html" aria-label="é¢æ¸£é€†è¢­-æ“ä½œç³»ç»Ÿ"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">é¢æ¸£é€†è¢­-æ“ä½œç³»ç»Ÿ<!----></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer"><a href="https://beian.miit.gov.cn/" target="_blank">è±«ICPå¤‡2021038026å·-4</a><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/beian.png" height="15px" width="15px" /><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41030502000411"><span>è±«å…¬ç½‘å®‰å¤‡ 41030502000411å·</span></a></div><div class="vp-copyright">Copyright Â© 2025 ä¸‰åˆ†æ¶ </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-vNkfWp6O.js" defer></script>
  </body>
</html>
