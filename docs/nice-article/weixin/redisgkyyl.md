---
title: Redis é«˜å¯ç”¨åŸç†
shortTitle: Redis é«˜å¯ç”¨åŸç†
description: ä¹‹å‰æ‰¾å·¥ä½œé¢è¯•ï¼Œè¿™ä¸ªé—®é¢˜é¢è¯•çš„é¢‘ç‡éƒ½èƒ½æ’åˆ°å‰å‡ ï¼Œå°¤å…¶æ˜¯ä¸€äº›å¤§å‚ï¼Œå…ˆä¸è¦ç€æ€¥çœ‹æ–‡ç« ï¼Œå¦‚æœé¢è¯•å®˜ç»™ä½ æŠ›è¿™ä¹ˆä¸ªé—®é¢˜ï¼Œä½ ä¼šæ€ä¹ˆå›ç­”å‘¢ï¼Ÿ
author: æ¥¼ä»”
category:
  - å¾®ä¿¡å…¬ä¼—å·
head:
  - - meta
    - name: description
      content: ä¹‹å‰æ‰¾å·¥ä½œé¢è¯•ï¼Œè¿™ä¸ªé—®é¢˜é¢è¯•çš„é¢‘ç‡éƒ½èƒ½æ’åˆ°å‰å‡ ï¼Œå°¤å…¶æ˜¯ä¸€äº›å¤§å‚ï¼Œå…ˆä¸è¦ç€æ€¥çœ‹æ–‡ç« ï¼Œå¦‚æœé¢è¯•å®˜ç»™ä½ æŠ›è¿™ä¹ˆä¸ªé—®é¢˜ï¼Œä½ ä¼šæ€ä¹ˆå›ç­”å‘¢ï¼Ÿ
---

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-83928ee9-7ab4-4cac-a5e8-d34d23f67ee7.jpg)

Redis é«˜å¯ç”¨ï¼Œå¤ªé‡è¦å•¦ï¼[äºŒå“¥ç¼–ç¨‹æ˜Ÿçƒ](https://mp.weixin.qq.com/s/3RVsFZ17F0JzoHCLKbQgGw)çš„å¥½å‡ ä¸ªçƒå‹æ‰¾å·¥ä½œé¢è¯•çš„æ—¶å€™ï¼Œéƒ½è¢«é—®åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆå…¬ä¼—å·çš„è¯»è€…æœ‹å‹ä»¬ä¹Ÿå…ˆä¸è¦ç€æ€¥çœ‹æ–‡ç« ï¼Œå¯ä»¥æƒ³ä¸€æƒ³ï¼Œå¦‚æœé¢è¯•å®˜ç»™ä½ æŠ›è¿™ä¹ˆä¸ªé—®é¢˜ï¼Œä½ ä¼šæ€ä¹ˆå›ç­”å‘¢ï¼Œå¯ä»¥å…ˆæƒ³ 5 åˆ†é’Ÿã€‚

è¿™é‡Œè¦ç­‰å¾… 5 åˆ†é’Ÿ ...ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚

**ä¸ºäº†ä¸è¾œè´Ÿå…¬ä¼—å·è¯»è€…æœ‹å‹ä»¬çš„æœŸå¾…ï¼ŒäºŒå“¥è¯·æˆ‘çš„ä¸‰å‰‘å®¢å›¢é˜Ÿä¹‹ä¸€æ¥¼ä»”å•ç‹¬ç»™å¤§å®¶å†™äº†ä¸€ç¯‡**ï¼Œä»–ä¸€ç›´åœ¨å¤§å‚ï¼Œä¹Ÿæ˜¯ç›®å‰éƒ¨é—¨çš„æŠ€æœ¯æ€»ç›‘ï¼Œå°±è¯·ä»–é’ˆå¯¹è¿™å—çŸ¥è¯†ï¼Œå†ç»“åˆä¹‹å‰çš„ä¸€äº›é¢è¯•æƒ…å†µï¼Œç»™å¤§å®¶å” å” ã€‚

## 1\. Redis åˆ†ç‰‡ç­–ç•¥

### 1.1 Hash åˆ†ç‰‡

æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¯¹äº Reids é›†ç¾¤ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ hash ç­–ç•¥ï¼Œå°† key æ‰“åœ¨ Redis çš„ä¸åŒåˆ†ç‰‡ä¸Šã€‚

å‡å¦‚æˆ‘ä»¬æœ‰ 3 å°æœºå™¨ï¼Œå¸¸è§çš„åˆ†ç‰‡æ–¹å¼ä¸º hash(IP)%3ï¼Œå…¶ä¸­ 3 æ˜¯æœºå™¨æ€»æ•°ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-3ec3fcb6-946e-4551-bb27-a10485dfd898.jpg)

ç›®å‰å¾ˆå¤šå°å…¬å¸éƒ½è¿™ä¹ˆç©ï¼Œä¸Šæ‰‹å¿«ï¼Œç®€å•ç²—æš´ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼š**å½“å¢åŠ æˆ–è€…å‡å°‘ç¼“å­˜èŠ‚ç‚¹æ—¶ï¼Œæ€»èŠ‚ç‚¹ä¸ªæ•°å‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´åˆ†ç‰‡å€¼å‘ç”Ÿæ”¹å˜ï¼Œéœ€è¦å¯¹ç¼“å­˜æ•°æ®åšè¿ç§»ã€‚**

é‚£å¦‚ä½•è§£å†³è¯¥é—®é¢˜å‘¢ï¼Œç­”æ¡ˆæ˜¯ä¸€è‡´æ€§ Hashã€‚

### 1.2 ä¸€è‡´æ€§ Hash

ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯ 1997 å¹´ç”±éº»çœç†å·¥å­¦é™¢æå‡ºçš„ä¸€ç§åˆ†å¸ƒå¼å“ˆå¸Œå®ç°ç®—æ³•ã€‚

**ç¯å½¢ç©ºé—´**ï¼šæŒ‰ç…§å¸¸ç”¨çš„ hash ç®—æ³•æ¥å°†å¯¹åº”çš„ key å“ˆå¸Œåˆ°ä¸€ä¸ªå…·æœ‰ 2^32 æ¬¡æ–¹ä¸ªæ¡¶çš„ç©ºé—´ä¸­ï¼Œå³ 0~(2^32)-1 çš„æ•°å­—ç©ºé—´ä¸­ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å°†è¿™äº›æ•°å­—å¤´å°¾ç›¸è¿ï¼Œæƒ³è±¡æˆä¸€ä¸ªé—­åˆçš„ç¯å½¢ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-06ba1ced-137e-4361-94b1-e4e881e0393b.jpg)

**Key æ•£åˆ— Hash ç¯**ï¼šç°åœ¨æˆ‘ä»¬å°† object1ã€object2ã€object3ã€object4 å››ä¸ªå¯¹è±¡é€šè¿‡ç‰¹å®šçš„ Hash å‡½æ•°è®¡ç®—å‡ºå¯¹åº”çš„ key å€¼ï¼Œç„¶åæ•£åˆ—åˆ° Hash ç¯ä¸Šã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-e97a5a69-f36d-4fc6-aae2-81f9e78b6e07.jpg)

**æœºå™¨æ•£åˆ— Hash ç¯**ï¼šå‡è®¾ç°åœ¨æœ‰ NODE1ã€NODE2ã€NODE3 ä¸‰å°æœºå™¨ï¼Œä»¥é¡ºæ—¶é’ˆçš„æ–¹å‘è®¡ç®—ï¼Œå°†æ‰€æœ‰å¯¹è±¡å­˜å‚¨åˆ°ç¦»è‡ªå·±æœ€è¿‘çš„æœºå™¨ä¸­ï¼Œobject1 å­˜å‚¨åˆ°äº† NODE1ï¼Œobject3 å­˜å‚¨åˆ°äº† NODE2ï¼Œobject2ã€object4 å­˜å‚¨åˆ°äº† NODE3ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-add22da4-5277-4632-b30d-d45476d7aa2e.jpg)

**èŠ‚ç‚¹åˆ é™¤**ï¼šå¦‚æœ NODE2 å‡ºç°æ•…éšœè¢«åˆ é™¤äº†ï¼Œobject3 å°†ä¼šè¢«è¿ç§»åˆ° NODE3 ä¸­ï¼Œè¿™æ ·ä»…ä»…æ˜¯ object3 çš„æ˜ å°„ä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œå…¶å®ƒçš„å¯¹è±¡æ²¡æœ‰ä»»ä½•çš„æ”¹åŠ¨ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-b75ac60e-4d28-4185-a466-778262063474.jpg)

**æ·»åŠ èŠ‚ç‚¹**ï¼šå¦‚æœå¾€é›†ç¾¤ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ NODE4ï¼Œobject2 è¢«è¿ç§»åˆ°äº† NODE4 ä¸­ï¼Œå…¶å®ƒå¯¹è±¡ä¿æŒä¸å˜ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-b09cd375-b900-451c-bc35-7f47f11186a8.jpg)

é€šè¿‡å¯¹èŠ‚ç‚¹çš„æ·»åŠ å’Œåˆ é™¤çš„åˆ†æï¼Œ**ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åœ¨ä¿æŒäº†å•è°ƒæ€§çš„åŒæ—¶ï¼Œè¿˜ä½¿æ•°æ®çš„è¿ç§»è¾¾åˆ°äº†æœ€å°ï¼Œè¿™æ ·çš„ç®—æ³•å¯¹åˆ†å¸ƒå¼é›†ç¾¤æ¥è¯´æ˜¯éå¸¸åˆé€‚çš„ï¼Œé¿å…äº†å¤§é‡æ•°æ®è¿ç§»ï¼Œå‡å°äº†æœåŠ¡å™¨çš„çš„å‹åŠ›ã€‚**

> å¦‚æœæœºå™¨ä¸ªæ•°å¤ªå°‘ï¼Œä¸ºäº†é¿å…å¤§é‡æ•°æ®é›†ä¸­åœ¨å‡ å°æœºå™¨ï¼Œå®ç°å¹³è¡¡æ€§ï¼Œå¯ä»¥å»ºç«‹è™šæ‹ŸèŠ‚ç‚¹ï¼ˆæ¯”å¦‚ä¸€å°æœºå™¨å»ºç«‹ 3-4 ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼‰ï¼Œç„¶åå¯¹è™šæ‹ŸèŠ‚ç‚¹è¿›è¡Œ Hashã€‚

## 2\. é«˜å¯ç”¨æ–¹æ¡ˆ

å¾ˆå¤šæ—¶å€™ï¼Œå…¬å¸åªç»™æˆ‘ä»¬æä¾›ä¸€å¥— Redis é›†ç¾¤ï¼Œè‡³äºå¦‚ä½•è®¡ç®—åˆ†ç‰‡ï¼Œæˆ‘ä»¬ä¸€èˆ¬æœ‰ 2 å¥—æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚

**å®¢æˆ·ç«¯æ–¹æ¡ˆ**ï¼šä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯è‡ªå·±è®¡ç®— Redis åˆ†ç‰‡ï¼Œæ— è®ºä½ ä½¿ç”¨ Hash åˆ†ç‰‡ï¼Œè¿˜æ˜¯ä¸€è‡´æ€§ Hashï¼Œéƒ½æ˜¯ç”±å®¢æˆ·ç«¯è‡ªå·±å®Œæˆã€‚

å®¢æˆ·ç«¯æ–¹æ¡ˆç®€å•ç²—æš´ï¼Œä½†æ˜¯åªèƒ½åœ¨å•ä¸€è¯­è¨€ç³»ç»Ÿä¹‹é—´å¤ç”¨ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ PHP çš„ç³»ç»Ÿï¼Œåæ¥ Java ä¹Ÿéœ€è¦ä½¿ç”¨ï¼Œä½ éœ€è¦ç”¨ Java é‡æ–°å†™ä¸€å¥—åˆ†ç‰‡é€»è¾‘ã€‚

**ä¸ºäº†è§£å†³å¤šè¯­è¨€ã€ä¸åŒå¹³å°å¤ç”¨çš„é—®é¢˜**ï¼Œå°±è¡ç”Ÿå‡ºä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆã€‚

**ä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆ**ï¼šå°†å®¢æˆ·ç«¯è§£å†³æ–¹æ¡ˆçš„ç»éªŒç§»æ¤åˆ°ä»£ç†å±‚ä¸­ï¼Œé€šè¿‡é€šç”¨çš„åè®®ï¼ˆå¦‚ Redis åè®®ï¼‰æ¥å®ç°åœ¨å…¶ä»–è¯­è¨€ä¸­çš„å¤ç”¨ï¼Œ**ç”¨æˆ·æ— éœ€å…³å¿ƒç¼“å­˜çš„é«˜å¯ç”¨å¦‚ä½•å®ç°ï¼Œåªéœ€è¦ä¾èµ–ä½ çš„ä»£ç†å±‚å³å¯ã€‚**

ä»£ç†å±‚ä¸»è¦è´Ÿè´£è¯»å†™è¯·æ±‚çš„è·¯ç”±åŠŸèƒ½ï¼Œå¹¶ä¸”åœ¨å…¶ä¸­å†…ç½®äº†ä¸€äº›é«˜å¯ç”¨çš„é€»è¾‘ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-98eb1a34-a750-45e1-a78c-3ae328617ec3.jpg)

> ä½ å¯ä»¥çœ‹çœ‹ï¼Œä½ ä»¬å…¬å¸çš„ Redis ä½¿ç”¨çš„æ˜¯å“ªç§æ–¹æ¡ˆå‘¢ï¼Ÿå¯¹äºâ€œå®¢æˆ·ç«¯æ–¹æ¡ˆâ€ï¼Œå…¶å®æœ‰çš„ä¹Ÿä¸ç”¨è‡ªå·±å»å†™ï¼Œæ¯”å¦‚è´Ÿè´£ç»´æŠ¤ Redis çš„éƒ¨é—¨ä¼šæä¾›ä¸åŒè¯­è¨€çš„ SDKï¼Œä½ åªéœ€è¦å»é›†æˆå¯¹åº”çš„ SDK å³å¯ã€‚

## 3\. é«˜å¯ç”¨åŸç†

### 3.1 Redis ä¸»ä»

Redis åŸºæœ¬éƒ½é€šè¿‡â€œä¸» - ä»â€æ¨¡å¼è¿›è¡Œéƒ¨ç½²ï¼Œ**ä¸»ä»åº“ä¹‹é—´é‡‡ç”¨çš„æ˜¯è¯»å†™åˆ†ç¦»çš„æ–¹å¼ã€‚**

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-fa7256d3-3e62-4456-8874-d4d278143c7e.jpg)

åŒ MySQL ç±»ä¼¼ï¼Œ**ä¸»åº“æ”¯æŒå†™å’Œè¯»ï¼Œä»åº“åªæ”¯æŒè¯»ï¼Œæ•°æ®ä¼šå…ˆå†™åˆ°ä¸»åº“ï¼Œç„¶åå®šæ—¶åŒæ­¥ç»™ä»åº“**ï¼Œå…·ä½“çš„åŒæ­¥è§„åˆ™ï¼Œä¸»è¦å°† RDB æ—¥å¿—ä»ä¸»åº“åŒæ­¥ç»™ä»åº“ï¼Œç„¶åä»åº“è¯»å– RDB æ—¥å¿—ï¼Œè¿™é‡Œæ¯”è¾ƒå¤æ‚ï¼Œå…¶ä¸­è¿˜æ¶‰åŠåˆ° replication bufferï¼Œå°±ä¸å†å±•å¼€ã€‚

è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œä¸€æ¬¡åŒæ­¥è¿‡ç¨‹ä¸­ï¼Œä¸»åº“éœ€è¦å®Œæˆ 2 ä¸ªè€—æ—¶æ“ä½œï¼šç”Ÿæˆ RDB æ–‡ä»¶å’Œä¼ è¾“ RDB æ–‡ä»¶ã€‚

å¦‚æœä»åº“æ•°é‡è¿‡å¤šï¼Œä¸»åº“å¿™äº fock å­è¿›ç¨‹ç”Ÿæˆ RDB æ–‡ä»¶å’Œæ•°æ®åŒæ­¥ï¼Œä¼šé˜»å¡ä¸»åº“æ­£å¸¸è¯·æ±‚ã€‚

è¿™ä¸ªå¦‚ä½•è§£å†³å‘¢ï¼Ÿ**ç­”æ¡ˆæ˜¯ â€œä¸» - ä» - ä»â€ æ¨¡å¼ã€‚**

ä¸ºäº†é¿å…æ‰€æœ‰ä»åº“éƒ½ä»ä¸»åº“åŒæ­¥ RDB æ—¥å¿—ï¼Œå¯ä»¥å€ŸåŠ©ä»åº“æ¥å®ŒæˆåŒæ­¥ï¼šæ¯”å¦‚æ–°å¢ 3ã€4 ä¸¤ä¸ª Slaveï¼Œå¯ä»¥**ç­‰ Slave 2 åŒæ­¥å®Œåï¼Œå†é€šè¿‡ Slave 2 åŒæ­¥ç»™ Slave 3 å’Œ Slave 4ã€‚**

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-3cc67fa9-9a09-4d52-835c-2b3a64dc9989.jpg)

å¦‚æœæˆ‘æ˜¯é¢è¯•å®˜ï¼Œæˆ‘å¯èƒ½ä¼šç»§ç»­é—®ï¼Œå¦‚æœæ•°æ®åŒæ­¥äº† 80%ï¼Œç½‘ç»œçªç„¶ç»ˆç«¯ï¼Œå½“ç½‘ç»œåç»­åˆæ¢å¤åï¼ŒRedis ä¼šå¦‚ä½•æ“ä½œå‘¢ï¼Ÿ

### 3.2 Redis åˆ†ç‰‡

è¿™ä¸ªæœ‰ç‚¹åƒ MySQL åˆ†åº“åˆ†è¡¨ï¼Œå°†æ•°æ®å­˜å‚¨åˆ°ä¸åŒçš„åœ°æ–¹ï¼Œé¿å…æŸ¥è¯¢æ—¶å…¨éƒ¨é›†ä¸­åˆ°ä¸€ä¸ªå®ä¾‹ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-66fa5ada-7558-4041-b387-5ad19d9e0f81.jpg)

å…¶å®è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯æ•°æ®è¿›è¡Œä¸»ä»åŒæ­¥æ—¶ï¼Œå¦‚æœ RDB æ•°æ®è¿‡å¤§ï¼Œä¼šä¸¥é‡é˜»å¡ä¸»çº¿ç¨‹ï¼Œå¦‚æœç”¨åˆ†ç‰‡çš„æ–¹å¼ï¼Œå¯ä»¥å°†æ•°æ®åˆ†æ‘Šï¼Œæ¯”å¦‚åŸæ¥æœ‰ 10 GB çš„æ•°æ®ï¼Œåˆ†æ‘Šåï¼Œæ¯ä¸ªåˆ†ç‰‡åªæœ‰ 2 GBã€‚

å¯èƒ½æœ‰åŒå­¦ä¼šé—®ï¼ŒRedis åˆ†ç‰‡ï¼Œå’Œâ€œä¸» - ä»â€æ¨¡å¼æœ‰å•¥å…³ç³»å‘¢ï¼Ÿä½ å¯ä»¥ç†è§£ï¼Œ**å›¾ä¸­çš„æ¯ä¸ªåˆ†ç‰‡éƒ½æ˜¯ä¸»åº“ï¼Œæ¯ä¸ªåˆ†ç‰‡éƒ½æœ‰è‡ªå·±çš„â€œä¸» - ä»â€æ¨¡å¼ç»“æ„ã€‚**

é‚£ä¹ˆæ•°æ®å¦‚ä½•æ‰¾åˆ°å¯¹åº”çš„åˆ†ç‰‡å‘¢ï¼Œå‰é¢å…¶å®å·²ç»è®²è¿‡ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ 3 å°æœºå™¨ï¼Œå¸¸è§çš„åˆ†ç‰‡æ–¹å¼ä¸º hash(IP)%3ï¼Œå…¶ä¸­ 3 æ˜¯æœºå™¨æ€»æ•°ï¼Œhash å€¼ä¸ºæœºå™¨ IPï¼Œè¿™æ ·æ¯å°æœºå™¨å°±æœ‰è‡ªå·±çš„åˆ†ç‰‡å·ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-3ec3fcb6-946e-4551-bb27-a10485dfd898.jpg)

å¯¹äº keyï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨åŒæ ·çš„æ–¹å¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„æœºå™¨åˆ†ç‰‡å· hash(key)%3ï¼Œhash ç®—æ³•æœ‰å¾ˆå¤šï¼Œå¯ä»¥ç”¨ CRC16(key)ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å– key ä¸­çš„å­—ç¬¦ï¼Œé€šè¿‡ ASCII ç è½¬æ¢æˆæ•°å­—ã€‚

### 3.3 Redis å“¨å…µæœºåˆ¶

##### 3.3.1 ä»€ä¹ˆæ˜¯å“¨å…µæœºåˆ¶ ï¼Ÿ

åœ¨ä¸»ä»æ¨¡å¼ä¸‹ï¼Œå¦‚æœ master å®•æœºäº†ï¼Œä»åº“ä¸èƒ½ä»ä¸»åº“åŒæ­¥æ•°æ®ï¼Œä¸»åº“ä¹Ÿä¸èƒ½æä¾›è¯»å†™åŠŸèƒ½ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-65ea84e0-085a-4d51-8dad-24795772f3cf.jpg)

**æ€ä¹ˆåŠå‘¢ ï¼Ÿè¿™æ—¶å°±éœ€è¦å¼•å…¥å“¨å…µæœºåˆ¶ ï¼**

**å“¨å…µèŠ‚ç‚¹æ˜¯ç‰¹æ®Šçš„ Redis æœåŠ¡ï¼Œä¸æä¾›è¯»å†™æœåŠ¡ï¼Œä¸»è¦ç”¨æ¥ç›‘æ§ Redis å®ä¾‹èŠ‚ç‚¹ã€‚**

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-221f629c-8603-4dcc-9da4-d5ef1bed7400.jpg)

é‚£ä¹ˆå½“ master å®•æœºï¼Œå“¨å…µå¦‚ä½•æ‰§è¡Œå‘¢ï¼Ÿ

##### 3.3.2 åˆ¤æ–­ä¸»æœºä¸‹çº¿

å“¨å…µè¿›ç¨‹ä¼šä½¿ç”¨ PING å‘½ä»¤æ£€æµ‹å®ƒè‡ªå·±å’Œä¸»ã€ä»åº“çš„ç½‘ç»œè¿æ¥æƒ…å†µï¼Œç”¨æ¥åˆ¤æ–­å®ä¾‹çš„çŠ¶æ€ï¼Œå¦‚æœå“¨å…µå‘ç°ä¸»åº“æˆ–ä»åº“å¯¹ PING å‘½ä»¤çš„å“åº”è¶…æ—¶äº†ï¼Œå“¨å…µå°±ä¼šå…ˆæŠŠå®ƒæ ‡è®°ä¸ºâ€œä¸»è§‚ä¸‹çº¿â€ã€‚

é‚£æ˜¯å¦ä¸€ä¸ªå“¨å…µåˆ¤æ–­ä¸ºâ€œä¸»è§‚ä¸‹çº¿â€ï¼Œå°±ç›´æ¥ä¸‹çº¿ master å‘¢ï¼Ÿ

ç­”æ¡ˆè‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œéœ€è¦éµå¾ª â€œå°‘æ•°æœä»å¤šæ•°â€ åŸåˆ™ï¼š**æœ‰ N/2+1 ä¸ªå®ä¾‹åˆ¤æ–­ä¸»åº“â€œä¸»è§‚ä¸‹çº¿â€ï¼Œæ‰åˆ¤å®šä¸»åº“ä¸ºâ€œå®¢è§‚ä¸‹çº¿â€ã€‚**

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-c68ed8b4-79d3-4c63-beed-f45ca6c6dfbb.jpg)

æ¯”å¦‚ä¸Šå›¾æœ‰ 3 ä¸ªå“¨å…µï¼Œæœ‰ 2 ä¸ªåˆ¤æ–­ â€œä¸»è§‚ä¸‹çº¿â€ï¼Œé‚£ä¹ˆå°±æ ‡è®°ä¸»åº“ä¸º â€œå®¢è§‚ä¸‹çº¿â€ã€‚

##### 3.3.3 é€‰å–æ–°ä¸»åº“

æˆ‘ä»¬æœ‰ 5 ä¸ªä»åº“ï¼Œéœ€è¦é€‰å–ä¸€ä¸ªæœ€ä¼˜çš„ä»åº“ä½œä¸ºä¸»åº“ï¼Œåˆ† 2 æ­¥ï¼š

- **ç­›é€‰**ï¼šæ£€æŸ¥ä»åº“çš„å½“å‰åœ¨çº¿çŠ¶æ€å’Œä¹‹å‰çš„ç½‘ç»œè¿æ¥çŠ¶æ€ï¼Œè¿‡æ»¤ä¸é€‚åˆçš„ä»åº“ï¼›
- **æ‰“åˆ†**ï¼šæ ¹æ®ä»åº“ä¼˜å…ˆçº§ã€å’Œæ—§ä¸»åº“çš„æ•°æ®åŒæ­¥æ¥è¿‘åº¦è¿›è¡Œæ‰“åˆ†ï¼Œé€‰æœ€é«˜åˆ†ä½œä¸ºä¸»åº“ã€‚

![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-c07bdc8f-da53-4d6d-99ed-63cf9544cbb8.jpg)

**å¦‚æœåˆ†æ•°ä¸€è‡´æ€ä¹ˆåŠ ï¼Ÿ** Redis ä¹Ÿæœ‰ä¸€ä¸ªç­–ç•¥ï¼šID å·æœ€å°çš„ä»åº“å¾—åˆ†æœ€é«˜ï¼Œä¼šè¢«é€‰ä¸ºæ–°ä¸»åº“ã€‚

å½“ slave 3 é€‰ä¸¾ä¸ºæ–°ä¸»åº“åï¼Œ**ä¼šé€šçŸ¥å…¶å®ƒä»åº“å’Œå®¢æˆ·ç«¯ï¼Œå¯¹å¤–å®£å¸ƒè‡ªå·±æ˜¯æ–°ä¸»åº“**ï¼Œå¤§å®¶éƒ½å¾—å¬æˆ‘çš„å“ˆï¼

ä»Šå¤©å°±å…ˆèŠè¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼Œå¤§å®¶éƒ½å­¦åºŸäº†ä¹ˆ ï¼Ÿ

## æœ€å


ä¸€ä¸ªäººå¯ä»¥èµ°å¾—å¾ˆå¿«ï¼Œä½†ä¸€ç¾¤äººæ‰èƒ½èµ°å¾—æ›´è¿œã€‚[äºŒå“¥çš„ç¼–ç¨‹æ˜Ÿçƒ](https://mp.weixin.qq.com/s/3RVsFZ17F0JzoHCLKbQgGw)é‡Œçš„æ¯ä¸ªçƒå‹éƒ½éå¸¸çš„å‹å–„ï¼Œé™¤äº†é¼“åŠ±ä½ ï¼Œè¿˜ä¼šç»™ä½ æå‡ºåˆç†çš„å»ºè®®ã€‚


![çƒå‹åŠæ—¶åˆ†äº«çš„ 23 å±Šç§‹æ‹›æå‰æ‰¹æ±‡æ€»](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-cac9bcac-2980-444e-b4fe-b7532c5d7a0c.png)



[äºŒå“¥çš„ç¼–ç¨‹æ˜Ÿçƒ](https://mp.weixin.qq.com/s/3RVsFZ17F0JzoHCLKbQgGw)ï¼ˆæˆ³é“¾æ¥åŠ å…¥ï¼‰ä¸Šçº¿2ä¸ªæœˆï¼Œå·²ç»æœ‰ **360 å¤šå** å°ä¼™ä¼´åŠ å…¥äº†ï¼Œå¦‚æœä½ ä¹Ÿéœ€è¦ä¸€ä¸ªè‰¯å¥½çš„å­¦ä¹ æ°›å›´ï¼Œæˆ³é“¾æ¥åŠ å…¥æˆ‘ä»¬çš„å¤§å®¶åº­å§ï¼è¿™æ˜¯ä¸€ä¸ª Java å­¦ä¹ æŒ‡å— + ç¼–ç¨‹å®æˆ˜çš„ç§å¯†åœˆå­ï¼Œä½ å¯ä»¥å‘äºŒå“¥æé—®ã€å¸®ä½ åˆ¶å®šå­¦ä¹ è®¡åˆ’ã€è·Ÿç€äºŒå“¥ä¸€èµ·åšå®æˆ˜é¡¹ç›®ï¼Œå†²å†²å†²ã€‚



![çƒå‹åˆ†äº«çš„ä¸ªäººé¢ç»ï¼Œéå¸¸çœŸè¯šğŸ˜](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-redisgkyyl-16b9dcde-d92b-428d-87cf-52e5799b4ffe.png)




---

*æ²¡æœ‰ä»€ä¹ˆä½¿æˆ‘åœç•™â€”â€”é™¤äº†ç›®çš„ï¼Œçºµç„¶å²¸æ—æœ‰ç«ç‘°ã€æœ‰ç»¿è«ã€æœ‰å®é™çš„æ¸¯æ¹¾ï¼Œæˆ‘æ˜¯ä¸ç³»ä¹‹èˆŸ*ã€‚

>è½¬è½½é“¾æ¥ï¼š[https://mp.weixin.qq.com/s?__biz=Mzg3OTU5NzQ1Mw==&mid=2247488519&idx=1&sn=c082f8f8a5442e622f5c82af63994359&chksm=cf0356e5f874dff3ba81f06e4387d76a5ebbdd1ca0799a2699832aa15c29258abf3abed9fee5&scene=27#wechat_redirect](https://mp.weixin.qq.com/s?__biz=Mzg3OTU5NzQ1Mw==&mid=2247488519&idx=1&sn=c082f8f8a5442e622f5c82af63994359&chksm=cf0356e5f874dff3ba81f06e4387d76a5ebbdd1ca0799a2699832aa15c29258abf3abed9fee5&scene=27#wechat_redirect)ï¼Œå‡ºå¤„ï¼šæ¥¼ä»”ï¼Œæ•´ç†ï¼šæ²‰é»˜ç‹äºŒ


**æ¨èé˜…è¯»**ï¼š

- [å»å¤–åŒ…ï¼Œæˆ‘ä¹ŸæŒºçŸ¥è¶³](https://mp.weixin.qq.com/s/1WdD2eLVMT-efMukLrtAwg)
- [æˆ‘çš„ç¬¬ä¸€æ¬¡ï¼Œ4ä¸‡ï¼](https://mp.weixin.qq.com/s/2wW4ZZWMYXuyY2-tLGvIwQ)
- [å…¥èŒæ–°å…¬å¸åŠä¸ªæœˆäº†](https://mp.weixin.qq.com/s/16AvpvTZ4NOyfFvU57ok9Q)
- [åƒåœ¾å›½ä¼ï¼Œç¦»èŒä¹Ÿç½¢](https://mp.weixin.qq.com/s/WAM1Y__mtSsDsO24RP3oPg)


![](https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao-old.jpg)



